var s_iOffsetX=0,s_iOffsetY=0;
(function(c){(jQuery.browser=jQuery.browser||{}).mobile=/android|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(ad|hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|tablet|treo|up\.(browser|link)|vodafone|wap|webos|windows (ce|phone)|xda|xiino/i.test(c)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(c.substr(0,4))})(navigator.userAgent||
navigator.vendor||window.opera);$(window).resize(function(){sizeHandler()});function trace(c){console.log(c)}function isIOS(){for(var c="iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";");c.length;)if(navigator.platform===c.pop())return s_bIsIphone=!0;return s_bIsIphone=!1}window.addEventListener("orientationchange",onOrientationChange);
function onOrientationChange(){window.matchMedia("(orientation: portrait)").matches&&sizeHandler();window.matchMedia("(orientation: landscape)").matches&&sizeHandler()}
function getSize(c){var f=c.toLowerCase(),b=window.document,e=b.documentElement;if(void 0===window["inner"+c])c=e["client"+c];else if(window["inner"+c]!=e["client"+c]){var d=b.createElement("body");d.id="vpw-test-b";d.style.cssText="overflow:scroll";var k=b.createElement("div");k.id="vpw-test-d";k.style.cssText="position:absolute;top:-1000px";k.innerHTML="<style>@media("+f+":"+e["client"+c]+"px){body#vpw-test-b div#vpw-test-d{"+f+":7px!important}}</style>";d.appendChild(k);e.insertBefore(d,b.head);
c=7==k["offset"+c]?e["client"+c]:window["inner"+c];e.removeChild(d)}else c=window["inner"+c];return c}function getIOSWindowHeight(){return document.documentElement.clientWidth/window.innerWidth*window.innerHeight}function getHeightOfIOSToolbars(){var c=(0===window.orientation?screen.height:screen.width)-getIOSWindowHeight();return 1<c?c:0}
function sizeHandler(){window.scrollTo(0,1);if($("#canvas")){var c;c=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?getIOSWindowHeight():getSize("Height");var f=getSize("Width");s_iScaleFactor=Math.min(c/CANVAS_HEIGHT,f/CANVAS_WIDTH);var b=CANVAS_WIDTH*s_iScaleFactor,e=CANVAS_HEIGHT*s_iScaleFactor,d;e<c?(d=c-e,e+=d,b+=CANVAS_WIDTH/CANVAS_HEIGHT*d):b<f&&(d=f-b,b+=d,e+=CANVAS_HEIGHT/CANVAS_WIDTH*d);d=c/2-e/2;var k=f/2-b/2,h=CANVAS_WIDTH/b;if(k*h<-EDGEBOARD_X||d*h<-EDGEBOARD_Y)s_iScaleFactor=Math.min(c/
(CANVAS_HEIGHT-2*EDGEBOARD_Y),f/(CANVAS_WIDTH-2*EDGEBOARD_X)),b=CANVAS_WIDTH*s_iScaleFactor,e=CANVAS_HEIGHT*s_iScaleFactor,d=(c-e)/2,k=(f-b)/2,h=CANVAS_WIDTH/b;s_iOffsetX=-1*k*h;s_iOffsetY=-1*d*h;0<=d&&(s_iOffsetY=0);0<=k&&(s_iOffsetX=0);null!==s_oInterface&&s_oInterface.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oMenu&&s_oMenu.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oTeamChoose&&s_oTeamChoose.refreshButtonPos(s_iOffsetX,s_iOffsetY);null!==s_oCongratulations&&s_oCongratulations.refreshButtonPos(s_iOffsetX,
s_iOffsetY);$("#canvas").css("width",b+"px");$("#canvas").css("height",e+"px");0>d?$("#canvas").css("top",d+"px"):$("#canvas").css("top","0px");$("#canvas").css("left",k+"px")}}function createBitmap(c,f,b){var e=new createjs.Bitmap(c),d=new createjs.Shape;f&&b?d.graphics.beginFill("#fff").drawRect(-f/2,-b/2,f,b):d.graphics.beginFill("#ff0").drawRect(0,0,c.width,c.height);e.hitArea=d;return e}
function createSprite(c,f,b,e,d,k){c=null!==f?new createjs.Sprite(c,f):new createjs.Sprite(c);f=new createjs.Shape;f.graphics.beginFill("#000000").drawRect(-b,-e,d,k);c.hitArea=f;return c}function randomFloatBetween(c,f,b){"undefined"===typeof b&&(b=2);return parseFloat(Math.min(c+Math.random()*(f-c),f).toFixed(b))}function shuffle(c){for(var f=c.length,b,e;0!==f;)e=Math.floor(Math.random()*f),--f,b=c[f],c[f]=c[e],c[e]=b;return c}
function formatTime(c){c/=1E3;var f=Math.floor(c/60);c=parseFloat(c-60*f).toFixed(1);var b="",b=10>f?b+("0"+f+":"):b+(f+":");return 10>c?b+("0"+c):b+c}function degreesToRadians(c){return c*Math.PI/180}function checkRectCollision(c,f){var b,e;b=getBounds(c,.9);e=getBounds(f,.98);return calculateIntersection(b,e)}
function calculateIntersection(c,f){var b,e,d,k,h,g,a,l;b=c.x+(d=c.width/2);e=c.y+(k=c.height/2);h=f.x+(g=f.width/2);a=f.y+(l=f.height/2);b=Math.abs(b-h)-(d+g);e=Math.abs(e-a)-(k+l);return 0>b&&0>e?(b=Math.min(Math.min(c.width,f.width),-b),e=Math.min(Math.min(c.height,f.height),-e),{x:Math.max(c.x,f.x),y:Math.max(c.y,f.y),width:b,height:e,rect1:c,rect2:f}):null}
function getBounds(c,f){var b={x:Infinity,y:Infinity,width:0,height:0};if(c instanceof createjs.Container){b.x2=-Infinity;b.y2=-Infinity;var e=c.children,d=e.length,k,h;for(h=0;h<d;h++)k=getBounds(e[h],1),k.x<b.x&&(b.x=k.x),k.y<b.y&&(b.y=k.y),k.x+k.width>b.x2&&(b.x2=k.x+k.width),k.y+k.height>b.y2&&(b.y2=k.y+k.height);Infinity==b.x&&(b.x=0);Infinity==b.y&&(b.y=0);Infinity==b.x2&&(b.x2=0);Infinity==b.y2&&(b.y2=0);b.width=b.x2-b.x;b.height=b.y2-b.y;delete b.x2;delete b.y2}else{var g,a;c instanceof createjs.Bitmap?
(d=c.sourceRect||c.image,h=d.width*f,g=d.height*f):c instanceof createjs.Sprite?c.spriteSheet._frames&&c.spriteSheet._frames[c.currentFrame]&&c.spriteSheet._frames[c.currentFrame].image?(d=c.spriteSheet.getFrame(c.currentFrame),h=d.rect.width,g=d.rect.height,e=d.regX,a=d.regY):(b.x=c.x||0,b.y=c.y||0):(b.x=c.x||0,b.y=c.y||0);e=e||0;h=h||0;a=a||0;g=g||0;b.regX=e;b.regY=a;d=c.localToGlobal(0-e,0-a);k=c.localToGlobal(h-e,g-a);h=c.localToGlobal(h-e,0-a);e=c.localToGlobal(0-e,g-a);b.x=Math.min(Math.min(Math.min(d.x,
k.x),h.x),e.x);b.y=Math.min(Math.min(Math.min(d.y,k.y),h.y),e.y);b.width=Math.max(Math.max(Math.max(d.x,k.x),h.x),e.x)-b.x;b.height=Math.max(Math.max(Math.max(d.y,k.y),h.y),e.y)-b.y}return b}function NoClickDelay(c){this.element=c;window.Touch&&this.element.addEventListener("touchstart",this,!1)}
NoClickDelay.prototype={handleEvent:function(c){switch(c.type){case "touchstart":this.onTouchStart(c);break;case "touchmove":this.onTouchMove(c);break;case "touchend":this.onTouchEnd(c)}},onTouchStart:function(c){c.preventDefault();this.moved=!1;this.element.addEventListener("touchmove",this,!1);this.element.addEventListener("touchend",this,!1)},onTouchMove:function(c){this.moved=!0},onTouchEnd:function(c){this.element.removeEventListener("touchmove",this,!1);this.element.removeEventListener("touchend",
this,!1);if(!this.moved){c=document.elementFromPoint(c.changedTouches[0].clientX,c.changedTouches[0].clientY);3==c.nodeType&&(c=c.parentNode);var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!0);c.dispatchEvent(f)}}};
(function(){function c(b){var c={focus:"visible",focusin:"visible",pageshow:"visible",blur:"hidden",focusout:"hidden",pagehide:"hidden"};b=b||window.event;b.type in c?document.body.className=c[b.type]:(document.body.className=this[f]?"hidden":"visible","hidden"===document.body.className?s_oMain.stopUpdate():s_oMain.startUpdate())}var f="hidden";f in document?document.addEventListener("visibilitychange",c):(f="mozHidden")in document?document.addEventListener("mozvisibilitychange",c):(f="webkitHidden")in
document?document.addEventListener("webkitvisibilitychange",c):(f="msHidden")in document?document.addEventListener("msvisibilitychange",c):"onfocusin"in document?document.onfocusin=document.onfocusout=c:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=c})();function playSound(c,f,b){return!1===DISABLE_SOUND_MOBILE||!1===s_bMobile?createjs.Sound.play(c,{loop:b,volume:f}):null}function stopSound(c){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||c.stop()}
function setVolume(c,f){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)c.volume=f}function setMute(c,f){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||c.setMute(f)}function ctlArcadeResume(){null!==s_oMain&&s_oMain.startUpdate()}function ctlArcadePause(){null!==s_oMain&&s_oMain.stopUpdate()}function getParamValue(c){for(var f=window.location.search.substring(1).split("&"),b=0;b<f.length;b++){var e=f[b].split("=");if(e[0]==c)return e[1]}}
function distance(c,f){var b=c.x-f.x,e=c.y-f.y;return Math.sqrt(b*b+e*e)}function distanceWithoutSQRT(c,f){var b=c.x-f.x,e=c.y-f.y;return b*b+e*e}function randomRange(c,f){return Math.floor(Math.random()*(f-c))+c}function centerBetweenPointsV2(c,f){var b=new CVector2;b.set(.5*(c.getX()+f.getX()),.5*(c.getY()+f.getY()));return b}function collideEdgeWithCircle(c,f,b,e){c=closestPointOnLine(c.getPointA(),c.getPointB(),f);f=distanceV2(f,c);return b<f?!1:!0}
function closestPointOnLine(c,f,b){var e=new CVector2;e.setV(b);e.subtract(c);b=new CVector2;b.setV(f);b.subtract(c);b.normalize();e=dotProductV2(b,e);if(0>=e)return c;if(e>=distanceV2(c,f))return f;b.scalarProduct(e);b.addV(c);return b}function dotProductV2(c,f){return c.getX()*f.getX()+c.getY()*f.getY()}function distanceV2(c,f){return Math.sqrt((f.getX()-c.getX())*(f.getX()-c.getX())+(f.getY()-c.getY())*(f.getY()-c.getY()))}
function reflectVectorV2(c,f){var b=dotProductV2(c,f);c.set(c.getX()-2*b*f.getX(),c.getY()-2*b*f.getY());return c}function angleBetweenVectors(c,f){var b=Math.acos(dotProductV2(c,f)/(c.length()*f.length()));return 1==isNaN(b)?0:b}function distanceV2WithoutSQRT(c,f){return(f.getX()-c.getX())*(f.getX()-c.getX())+(f.getY()-c.getY())*(f.getY()-c.getY())}
function classifySphere(c,f,b,e){c=f.getX()*c.getX()+f.getY()*c.getY()+planeDistance(f,b);return Math.abs(c)<e?0<=c?"INTERSECT FRONT":"INTERSECT BEHIND":c>=e?"FRONT":"BEHIND"}function planeDistance(c,f){return-(c.getX()*f.getX()+c.getY()*f.getY())}
function CSpriteLibrary(){var c,f,b,e,d,k;this.init=function(h,g,a){b=f=0;e=h;d=g;k=a;c={}};this.addSprite=function(b,d){c.hasOwnProperty(b)||(c[b]={szPath:d,oSprite:new Image},f++)};this.getSprite=function(b){return c.hasOwnProperty(b)?c[b].oSprite:null};this._onSpritesLoaded=function(){d.call(k)};this._onSpriteLoaded=function(){e.call(k);++b==f&&this._onSpritesLoaded()};this.loadSprites=function(){for(var b in c)c[b].oSprite.oSpriteLibrary=this,c[b].oSprite.onload=function(){this.oSpriteLibrary._onSpriteLoaded()},
c[b].oSprite.src=c[b].szPath};this.getNumSprites=function(){return f}}
var CANVAS_WIDTH=1360,CANVAS_HEIGHT=640,CANVAS_WIDTH_HALF=.5*CANVAS_WIDTH,CANVAS_HEIGHT_HALF=.5*CANVAS_HEIGHT,EDGEBOARD_X=275,EDGEBOARD_Y=50,DISABLE_SOUND_MOBILE=!1,FONT_GAME="bd_cartoon_shoutregular",TEXT_COLOR="#fcff00",FPS_TIME=1E3/30,FPS_TIME_SECONDS=1/30,TOT_TEAM=32,STATE_LOADING=0,STATE_MENU=1,STATE_HELP=1,STATE_GAME=3,ON_MOUSE_DOWN=0,ON_MOUSE_UP=1,ON_MOUSE_OVER=2,ON_MOUSE_OUT=3,ON_DRAG_START=4,ON_DRAG_END=5,LEFT_SCROLL_WORLD=0,RIGHT_SCROLL_WORLD=1,TEAM_ALGERIA=0,TEAM_ARGENTINA=1,TEAM_AUSTRALIA=
2,TEAM_BRASIL=3,TEAM_CAMEROON=4,TEAM_CHILE=5,TEAM_CROATIA=6,TEAM_DENMARK=7,TEAM_ENGLAND=8,TEAM_FRANCE=9,TEAM_GERMANY=10,TEAM_GHANA=11,TEAM_GREECE=12,TEAM_HOUNDURAS=13,TEAM_ITALY=14,TEAM_IVORY_COAST=15,TEAM_JAPAN=16,TEAM_MEXICO=17,TEAM_NETHERLANDS=18,TEAM_NEWZELAND=19,TEAM_NIGERIA=20,TEAM_PARAGUAY=21,TEAM_PORTUGAL=22,TEAM_RUSSIA=23,TEAM_SERBIA=24,TEAM_SLOVENIA=25,TEAM_SOUTH_AFRICA=26,TEAM_SOUTH_KOREA=27,TEAM_SPAIN=28,TEAM_SWITZERLAND=29,TEAM_URUGUAY=30,TEAM_USA=31,TOT_MATCH=7,KEEPERS=[32,33,34],PLAYERS_USER=
0,PLAYERS_OPPONENT=1,BALL=2,LOGIC_COLLISION=3,TWEEN_END_MACTH_Y=.5*CANVAS_HEIGHT,OFFSET_LIMIT_LEFT_SCROLL=-125,OFFSET_LIMIT_RIGHT_SCROLL=125,SMOOTH_SCROLL_OFFSET=.1,PLAYERS_ON_FIELD=8,LEFT_SIDE=3,RIGHT_SIDE=4,LINE_COLOR="#0000ff",LINE_COLOR_GOALS="#ff00ff",LINE_COLOR_EDGE_GOALS="#ffff00",SHOW_EDGE_COLLISION=!1,SHOW_COLLISION=!1,LEVEL_DIAGRAM,DANGLE_DEGREE=7,MIN_DIST_COLLISION_DETECT=1E3,HALF_PI=Math.PI/2,K_IMPACT_BALL=.95,TIME_TRY_TO_SHOT_BALL_OPPONENT=.7,START_POS_FLAG={x:337,y:208},FLAG_ADDED_POS=
{x:61,y:69},FLAG_LIMIT_POS_X=750,OFFSET_ANGLE_ARROW=180,Y_POS_ARROW_SELECTED=10,OBJECT,Y_POS_ARROW_SELECTED_OFFSET=-100,FORCE_MULTIPLIER=.01,PLAYERS_FRICTION=.96,HIT_PLAYER_MIN_FORCE=.07,HIT_PLAYER_MAX_FORCE=30,PLAYER_REGY_OFFSET=-11,MIN_PLAYER_FORCE_VEL=.02,STEP_POS_X_TURN_BALL=33,FIRST_POS_X_TURN_BALL=80,BALL_ROTATION_MULTIPLIER=1,PLAYERS_RADIUS=20,PLAYERS_RADIUS_HALF=10,PLAYERS_KEEPER_RADIUS=14,PLAYERS_KEEPER_RADIUS_HALF=7,BALL_FRICTION=.97,SUPPORTERS_POS={x:0,y:120},START_TIME_FLAG_TIME=200,BALL_POSITION=
{x:.5*CANVAS_WIDTH,y:.5*CANVAS_HEIGHT},USER_PLAYERS=[{x:514,y:319,goal_keeper:!1},{x:628,y:234,goal_keeper:!1},{x:628,y:431,goal_keeper:!1},{x:400,y:201,goal_keeper:!1},{x:378,y:489,goal_keeper:!1},{x:215,y:295,goal_keeper:!1},{x:190,y:378,goal_keeper:!1},{x:150,y:335,goal_keeper:!0}],OPPONENT_PLAYERS=[{x:835,y:319,goal_keeper:!1},{x:729,y:234,goal_keeper:!1},{x:729,y:431,goal_keeper:!1},{x:943,y:201,goal_keeper:!1},{x:966,y:489,goal_keeper:!1},{x:1145,y:295,goal_keeper:!1},{x:1170,y:378,goal_keeper:!1},
{x:1208,y:335,goal_keeper:!0}],POS_GOAL_OPPONENT_FRONT={x:1246,y:191},POS_GOAL_PLAYER_FRONT={x:115,y:191},POS_GOAL_OPPONENT_BOTTOM={x:1254,y:191},POS_GOAL_PLAYER_BOTTOM={x:107,y:191},FIELD_DIAGRAM_BALL=[[{x:171,y:173},{x:1189,y:173}],[{x:1189,y:173},{x:1220,y:284}],[{x:1220,y:284},{x:1285,y:283}],[{x:1285,y:283},{x:1320,y:386}],[{x:1320,y:386},{x:1251,y:387}],[{x:1251,y:387},{x:1293,y:526}],[{x:1293,y:526},{x:63,y:526}],[{x:63,y:526},{x:107,y:388}],[{x:107,y:388},{x:41,y:386}],[{x:41,y:386},{x:71,
y:283}],[{x:71,y:283},{x:138,y:284}],[{x:138,y:284},{x:171,y:173}]],FIELD_DIAGRAM_PLAYERS=[[{x:171,y:173},{x:1189,y:173}],[{x:1189,y:173},{x:1293,y:526}],[{x:1293,y:526},{x:63,y:526}],[{x:63,y:526},{x:171,y:173}]],EDGE_FOR_KEEPERS=[[{x:193,y:284},{x:165,y:387}],[{x:165,y:387},{x:39,y:383}],[{x:39,y:383},{x:72,y:280}],[{x:72,y:280},{x:193,y:284}],[{x:1165,y:284},{x:1284,y:281}],[{x:1284,y:281},{x:1318,y:387}],[{x:1318,y:387},{x:1194,y:387}],[{x:1194,y:387},{x:1165,y:284}]],GOAL_USER=[{x:137,y:284},
{x:105,y:387}],GOAL_OPPONENT=[{x:1221,y:284},{x:1252,y:387}],OTHER_COLLISION=[{x:107,y:387,radius:5},{x:138,y:284,radius:5},{x:1220,y:284,radius:5},{x:1251,y:387,radius:5}],TIME_RESET_BALL,REGULAR_MATCH_TIME,EXTENDED_MATCH_TIME,OPPONENT_SPEEDS,CHARACTER_SPEED,OPPONENT_DISTANCE_PROTECTION,OPPONENT_DISTANCE_PROTECTION_WHEN_SHOT,OPPONENT_DISTANCE_PROTECTION_AGG,OPPONENT_DISTANCE_PROTECTION_WHEN_SHOT_AGG,REACT_OPP_FOR_HEEL_SHOOT,BALL_VELOCITY_X_REACTION,BALL_VELOCITY_X_REACTION_ATTACK,BALL_AND_CHARACTER_DISTANCE_PROTECTION,
TIME_REACTION_FROM_SAVE_TO_GO,TIME_OPP_BECOME_AGGRESSIVE,TIME_AFTER_REACTION,TIME_INTERVAL_SHOOT,TIME_IN_PROTECT_STATE,SCORE_PLAYER_GOAL,SCORE_OPPONENT_GOAL,SCORE_WIN,SCORE_TIE,NUM_LEVEL_FOR_ADS;TEXT_TEAM="Algeria;Argentina;Australia;Brasil;Cameroon;Cile;South Corea;Ivory Coast;Croatia;Denmark;France;Germany;Ghana;Japan;Greece;Honduras;England;Italy;Mexico;Nigeria;New Zealand;Netherlands;Paraguay;Portugal;Russia;Serbia;Slovenia;Spain;South Africa;Switzerland;Uruguay;USA".split(";");
TEXT_TEAM_CODE="ALG ARG AUS BRA CMR CHI KOR CIV CRO DEN FRA GER GHA JPN GRE HON ENG ITA MEX NIG NZL NED PAR POR RUS SRB SVN ESP RSA SUI URU USA".split(" ");TEXT_GAMEOVER="GAME OVER";TEXT_CONTROLS="CONTROLS";TEXT_COMPLETE="COMPLETE";TEXT_ALL_COMPLETE="ALL LEVEL COMPLETE";TEXT_SELECT_A_LEVEL="SELECT A LEVEL";TEXT_TIME="TIME";TEXT_TIME_EXT="EXT TIME";TEXT_VS="VS";TEXT_FINISH="FINAL WHISTLE";TEXT_SELECT_YOUR_TEAM="SELECT YOUR TEAM";TEXT_CREDITS_DEVELOPED="Developed by";TEXT_LINK1="www.codethislab.com";
TEXT_WIN="YOU WON";TEXT_LOSE="YOU LOSE";TEXT_SCORES="SCORES";TEXT_TIME_EXTENDED="TIME EXTENDED";TEXT_SCORE_GOAL_PLAYER="SCORE PLAYER GOAL";TEXT_SCORE_GOAL_OPPONENT="SCORE OPPONENT GOAL";TEXT_MACTH_SCORE="SCORE MATCH";TEXT_TOTAL_SCORE="TOTAL SCORE";TEXT_CONGRATULATIONS="CONGRATULATIONS YOU WON ALL MATCHES!";TEXT_SCORE_PLAYER_GOAL="Score player goal";TEXT_SCORE_OPPONENT_GOAL="Score opponent goal";TEXT_SCORE_DRAW_MATCH="Score match draw";TEXT_SCOR_WON_MATCH="Score match won";TEXT_MATCH="MATCH";
TEXT_KICK_OFF="KICK OFF";TEXT_PAUSE="PAUSE";TEXT_ARE_SURE="ARE SURE?";TEXT_CPU_TURN="CPU Turn";TEXT_PLAYER_TURN="PLAYER Turn";TEXT_FOUL="FOUL!!";TEXT_PT="PT";TEXT_LAUNCH_DELAY_PENALTY="LAUNCH DELAY PENALTY CPU TURN";TEXT_SHARE_IMAGE="200x200.jpg";TEXT_SHARE_TITLE="Congratulations!";TEXT_SHARE_MSG1="You collected <strong>";TEXT_SHARE_MSG2=" points</strong>!<br><br>Share your score with your friends!";TEXT_SHARE_SHARE1="My score is ";TEXT_SHARE_SHARE2=" points! Can you do better?";
function CPreloader(){var c,f,b,e,d,k,h;this._init=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("progress_bar","./sprites/progress_bar.png");s_oSpriteLibrary.loadSprites();h=new createjs.Container;s_oStage.addChild(h)};this.unload=function(){h.removeAllChildren()};this.hide=function(){var b=this;setTimeout(function(){createjs.Tween.get(k).to({alpha:1},500).call(function(){b.unload();
s_oMain.gotoMenu()})},1E3)};this._onImagesLoaded=function(){};this._onAllImagesLoaded=function(){this.attachSprites();s_oMain.preloaderReady()};this.attachSprites=function(){var g=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));h.addChild(g);g=s_oSpriteLibrary.getSprite("progress_bar");e=createBitmap(g);e.x=CANVAS_WIDTH/2-g.width/2;e.y=CANVAS_HEIGHT-150;h.addChild(e);c=g.width;f=g.height;d=new createjs.Shape;d.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(e.x,e.y,1,f);h.addChild(d);e.mask=
d;b=new createjs.Text("","30px "+FONT_GAME,"#fff");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT-150;b.shadow=new createjs.Shadow("#000",2,2,2);b.textBaseline="alphabetic";b.textAlign="center";h.addChild(b);k=new createjs.Shape;k.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);k.alpha=0;h.addChild(k)};this.refreshLoader=function(g){b.text=g+"%";d.graphics.clear();g=Math.floor(g*c/100);d.graphics.beginFill("rgba(255,255,255,0.01)").drawRect(e.x,e.y,g,f)};this._init()}
function CMain(c){var f,b=0,e=0,d=STATE_LOADING,k,h,g;this.initContainer=function(){var a=document.getElementById("canvas");s_oStage=new createjs.Stage(a);createjs.Touch.enable(s_oStage);s_oStage.preventSelection=!1;a.opacity=.5;s_bMobile=jQuery.browser.mobile;!1===s_bMobile&&(s_oStage.enableMouseOver(20),$("body").on("contextmenu","#canvas",function(a){return!1}));s_iPrevTime=(new Date).getTime();createjs.Ticker.addEventListener("tick",this._update);createjs.Ticker.setFPS(30);navigator.userAgent.match(/Windows Phone/i)&&
(DISABLE_SOUND_MOBILE=!0);s_oSpriteLibrary=new CSpriteLibrary;h=new CPreloader;f=!0};this.soundLoaded=function(){b++;h.refreshLoader(Math.floor(b/e*100));if(b===e){h.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)s_oSoundTrack=createjs.Sound.play("soundtrack",{loop:-1});this.gotoMenu()}};this._initSounds=function(){createjs.Sound.initializeDefaultPlugins()&&(0<navigator.userAgent.indexOf("Opera")||0<navigator.userAgent.indexOf("OPR")?(createjs.Sound.alternateExtensions=["mp3"],createjs.Sound.addEventListener("fileload",
createjs.proxy(this.soundLoaded,this)),createjs.Sound.registerSound("./sounds/click.ogg","click"),createjs.Sound.registerSound("./sounds/soundtrack.ogg","soundtrack"),createjs.Sound.registerSound("./sounds/crowd.ogg","crowd"),createjs.Sound.registerSound("./sounds/game_over.ogg","game_over"),createjs.Sound.registerSound("./sounds/goal.ogg","goal"),createjs.Sound.registerSound("./sounds/kick.ogg","kick"),createjs.Sound.registerSound("./sounds/kick_off.ogg","kick_off"),createjs.Sound.registerSound("./sounds/player_collision.ogg",
"player_collision")):(createjs.Sound.alternateExtensions=["ogg"],createjs.Sound.addEventListener("fileload",createjs.proxy(this.soundLoaded,this)),createjs.Sound.registerSound("./sounds/click.mp3","click"),createjs.Sound.registerSound("./sounds/soundtrack.mp3","soundtrack"),createjs.Sound.registerSound("./sounds/crowd.mp3","crowd"),createjs.Sound.registerSound("./sounds/game_over.mp3","game_over"),createjs.Sound.registerSound("./sounds/goal.mp3","goal"),createjs.Sound.registerSound("./sounds/kick.mp3",
"kick"),createjs.Sound.registerSound("./sounds/kick_off.mp3","kick_off"),createjs.Sound.registerSound("./sounds/player_collision.mp3","player_collision")),e+=8)};this._loadImages=function(){s_oSpriteLibrary.init(this._onImagesLoaded,this._onAllImagesLoaded,this);s_oSpriteLibrary.addSprite("but_play","./sprites/but_play.png");s_oSpriteLibrary.addSprite("but_exit","./sprites/but_exit.png");s_oSpriteLibrary.addSprite("but_info","./sprites/but_info.png");s_oSpriteLibrary.addSprite("but_pause","./sprites/but_pause.png");
s_oSpriteLibrary.addSprite("but_scroll","./sprites/but_scroll.png");s_oSpriteLibrary.addSprite("but_continue","./sprites/but_continue.png");s_oSpriteLibrary.addSprite("but_yes","./sprites/but_yes.png");s_oSpriteLibrary.addSprite("but_not","./sprites/but_not.png");s_oSpriteLibrary.addSprite("but_continue_small","./sprites/but_continue_small.png");s_oSpriteLibrary.addSprite("bg_menu","./sprites/bg_menu.jpg");s_oSpriteLibrary.addSprite("bg_game","./sprites/bg_game.jpg");s_oSpriteLibrary.addSprite("msg_box",
"./sprites/msg_box.png");s_oSpriteLibrary.addSprite("bg_help","./sprites/bg_help.png");s_oSpriteLibrary.addSprite("audio_icon","./sprites/audio_icon.png");s_oSpriteLibrary.addSprite("but_home","./sprites/but_home.png");s_oSpriteLibrary.addSprite("but_restart","./sprites/but_restart.png");s_oSpriteLibrary.addSprite("ball","./sprites/ball.png");s_oSpriteLibrary.addSprite("arrow","./sprites/arrow.png");s_oSpriteLibrary.addSprite("arrow_frame","./sprites/arrow_frame.png");s_oSpriteLibrary.addSprite("goal_top",
"./sprites/goal_top.png");s_oSpriteLibrary.addSprite("goal_bottom","./sprites/goal_bottom.png");s_oSpriteLibrary.addSprite("gui_box","./sprites/gui_box.png");s_oSpriteLibrary.addSprite("goal_text","./sprites/goal_text.png");s_oSpriteLibrary.addSprite("team_selection","./sprites/team_selection.png");s_oSpriteLibrary.addSprite("logo_ctl","./sprites/logo_ctl.png");s_oSpriteLibrary.addSprite("player_selected","./sprites/player_selected.png");s_oSpriteLibrary.addSprite("player_shadow","./sprites/player_shadow.png");
s_oSpriteLibrary.addSprite("flags","./sprites/flags.png");s_oSpriteLibrary.addSprite("flags_small","./sprites/flags_small.png");s_oSpriteLibrary.addSprite("players","./sprites/players.png");s_oSpriteLibrary.addSprite("turn_ball","./sprites/turn_ball.png");s_oSpriteLibrary.addSprite("player_selected","./sprites/player_selected.png");s_oSpriteLibrary.addSprite("help_mouse","./sprites/help_mouse.png");s_oSpriteLibrary.addSprite("help_touch","./sprites/help_touch.png");s_oSpriteLibrary.addSprite("arrow_fill",
"./sprites/arrow_fill.png");s_oSpriteLibrary.addSprite("trophy","./sprites/trophy.png");for(var a=0;a<TOT_TEAM;a++)s_oSpriteLibrary.addSprite("turn_"+a,"./sprites/turn_"+a+".png");e+=s_oSpriteLibrary.getNumSprites();s_oSpriteLibrary.loadSprites()};this._onImagesLoaded=function(){b++;h.refreshLoader(Math.floor(b/e*100));if(b===e){h.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)s_oSoundTrack=createjs.Sound.play("soundtrack",{loop:-1});this.gotoMenu()}};this._onAllImagesLoaded=function(){};this.onAllPreloaderImagesLoaded=
function(){this._loadImages()};this.preloaderReady=function(){if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)this._initSounds(),s_oSoundTrack=createjs.Sound.play("soundtrack",{loop:-1});this._loadImages();f=!0};this.gotoMenu=function(){new CMenu;d=STATE_MENU};this.gotoTeamChoose=function(){new CTeamChoose;d=STATE_MENU};this.gotoGame=function(a){g=new CGame(k,a);d=STATE_GAME};this.gotoHelp=function(){new CHelp;d=STATE_HELP};this.gotoCongratulations=function(a,b){new CCongratulations(a,b);d=STATE_MENU};
this.stopUpdate=function(){f=!1;createjs.Ticker.paused=!0;$("#block_game").css("display","block")};this.startUpdate=function(){s_iPrevTime=(new Date).getTime();f=!0;createjs.Ticker.paused=!1;$("#block_game").css("display","none")};this._update=function(a){if(!1!==f){var b=(new Date).getTime();s_iTimeElaps=b-s_iPrevTime;s_iCntTime+=s_iTimeElaps;s_iCntFps++;s_iPrevTime=b;1E3<=s_iCntTime&&(s_iCurFps=s_iCntFps,s_iCntTime-=1E3,s_iCntFps=0);d===STATE_GAME&&g.update();s_oStage.update(a)}};s_oMain=this;k=
c;this.initContainer()}var s_bMobile,s_bAudioActive=!0,s_iCntTime=0,s_iTimeElaps=0,s_iPrevTime=0,s_iCntFps=0,s_iCurFps=0,s_oPhysicsController,s_oAdsLevel=1,s_oDrawLayer,s_oStage,s_oScrollStage,s_oMain,s_oSpriteLibrary,s_oSoundTrack;
function CTextButton(c,f,b,e,d,k,h,g){var a,l,m,p;this._init=function(b,c,d,e,g,h,k){a=[];l=[];var f=createBitmap(d),z=Math.ceil(k/20),C=new createjs.Text(e,"bold "+k+"px "+g,"#000000");C.textAlign="center";C.textBaseline="alphabetic";var A=C.getBounds();C.x=d.width/2+z;C.y=Math.floor(d.height/2)+A.height/3+z;e=new createjs.Text(e,"bold "+k+"px "+g,h);e.textAlign="center";e.textBaseline="alphabetic";A=e.getBounds();e.x=d.width/2;e.y=Math.floor(d.height/2)+A.height/3;m=new createjs.Container;m.x=b;
m.y=c;m.regX=d.width/2;m.regY=d.height/2;m.addChild(f,C,e);s_bMobile||(m.cursor="pointer");p.addChild(m);this._initListener()};this.unload=function(){m.off("mousedown");m.off("pressup");p.removeChild(m)};this.setVisible=function(a){m.visible=a};this._initListener=function(){oParent=this;m.on("mousedown",this.buttonDown);m.on("pressup",this.buttonRelease)};this.addEventListener=function(b,d,c){a[b]=d;l[b]=c};this.buttonRelease=function(){m.scaleX=1;m.scaleY=1;playSound("click",1,0);a[ON_MOUSE_UP]&&
a[ON_MOUSE_UP].call(l[ON_MOUSE_UP])};this.buttonDown=function(){m.scaleX=.9;m.scaleY=.9;a[ON_MOUSE_DOWN]&&a[ON_MOUSE_DOWN].call(l[ON_MOUSE_DOWN])};this.setPosition=function(a,b){m.x=a;m.y=b};this.setX=function(a){m.x=a};this.setY=function(a){m.y=a};this.getButtonImage=function(){return m};this.getX=function(){return m.x};this.getY=function(){return m.y};p=g;this._init(c,f,b,e,d,k,h);return this}
function CToggle(c,f,b,e,d){var k,h,g,a,l;this._init=function(b,d,c,e){h=[];g=[];var f=new createjs.SpriteSheet({images:[c],frames:{width:c.width/2,height:c.height,regX:c.width/2/2,regY:c.height/2},animations:{state_true:[0],state_false:[1]}});k=e;a=createSprite(f,"state_"+k,c.width/2/2,c.height/2,c.width/2,c.height);a.x=b;a.y=d;a.stop();s_bMobile||(a.cursor="pointer");l.addChild(a);this._initListener()};this.unload=function(){a.off("mousedown",this.buttonDown);a.off("pressup",this.buttonRelease);
l.removeChild(a)};this._initListener=function(){a.on("mousedown",this.buttonDown);a.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){h[a]=b;g[a]=c};this.setCursorType=function(b){a.cursor=b};this.setActive=function(b){k=b;a.gotoAndStop("state_"+k)};this.buttonRelease=function(){a.scaleX=1;a.scaleY=1;playSound("click",1,0);k=!k;a.gotoAndStop("state_"+k);h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(g[ON_MOUSE_UP],k)};this.buttonDown=function(){a.scaleX=.9;a.scaleY=.9;h[ON_MOUSE_DOWN]&&
h[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN])};this.setPosition=function(b,c){a.x=b;a.y=c};l=d;this._init(c,f,b,e)}
function CGfxButton(c,f,b,e){var d,k,h,g,a,l,m,p=!1,n;this._init=function(b,c,e){d=[];k=[];g=[];h=createBitmap(e);h.x=b;h.y=c;l=a=1;h.regX=e.width/2;h.regY=e.height/2;s_bMobile||(h.cursor="pointer");n.addChild(h);this._initListener()};this.unload=function(){h.off("mousedown",this.buttonDown);h.off("pressup",this.buttonRelease);n.removeChild(h)};this.setVisible=function(a){h.visible=a};this.setCursorType=function(a){h.cursor=a};this._initListener=function(){h.on("mousedown",this.buttonDown);h.on("pressup",
this.buttonRelease)};this.addEventListener=function(a,b,c){d[a]=b;k[a]=c};this.addEventListenerWithParams=function(a,b,c,e){d[a]=b;k[a]=c;g[a]=e};this.buttonRelease=function(){p||(h.scaleX=0<a?1:-1,h.scaleY=1,playSound("click",1,0),d[ON_MOUSE_UP]&&d[ON_MOUSE_UP].call(k[ON_MOUSE_UP],g[ON_MOUSE_UP]))};this.buttonDown=function(){p||(h.scaleX=0<a?.9:-.9,h.scaleY=.9,d[ON_MOUSE_DOWN]&&d[ON_MOUSE_DOWN].call(k[ON_MOUSE_DOWN],g[ON_MOUSE_DOWN]))};this.rotation=function(a){h.rotation=a};this.getButton=function(){return h};
this.setPosition=function(a,b){h.x=a;h.y=b};this.setX=function(a){h.x=a};this.setY=function(a){h.y=a};this.getButtonImage=function(){return h};this.block=function(b){p=b;h.scaleX=a;h.scaleY=l};this.setScaleX=function(b){a=h.scaleX=b};this.getX=function(){return h.x};this.getY=function(){return h.y};this.pulseAnimation=function(){createjs.Tween.get(h).to({scaleX:.9*a,scaleY:.9*l},850,createjs.Ease.quadOut).to({scaleX:a,scaleY:l},650,createjs.Ease.quadIn).call(function(){m.pulseAnimation()})};this.trebleAnimation=
function(){createjs.Tween.get(h).to({rotation:5},75,createjs.Ease.quadOut).to({rotation:-5},140,createjs.Ease.quadIn).to({rotation:0},75,createjs.Ease.quadIn).wait(750).call(function(){m.trebleAnimation()})};this.removeAllTweens=function(){createjs.Tween.removeTweens(h)};n=e;this._init(c,f,b);m=this;return this}
function CMenu(){var c,f,b,e,d,k,h,g,a,l,m;this._init=function(){h=createBitmap(s_oSpriteLibrary.getSprite("bg_menu"));s_oStage.addChild(h);var p=s_oSpriteLibrary.getSprite("but_play");b=CANVAS_WIDTH/2;e=CANVAS_HEIGHT-90;g=new CGfxButton(b,e,p,s_oStage);g.addEventListener(ON_MOUSE_UP,this._onButPlayRelease,this);g.pulseAnimation();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)p=s_oSpriteLibrary.getSprite("audio_icon"),d=CANVAS_WIDTH-p.height/2-20,k=p.height/2+20,m=new CToggle(d,k,p,s_bAudioActive,
s_oStage),m.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);var n=s_oSpriteLibrary.getSprite("but_info");c=p.height/2+20;f=p.height/2+20;a=new CGfxButton(c,f,n,s_oStage);a.addEventListener(ON_MOUSE_UP,this._onButInfoRelease,this);l=new createjs.Shape;l.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(l);createjs.Tween.get(l).to({alpha:0},1E3).call(function(){l.visible=!1});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};this.refreshButtonPos=function(h,l){g.setPosition(b,
e-l);a.setPosition(c+h,f+l);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||m.setPosition(d-h,l+k)};this.unload=function(){g.unload();g=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)m.unload(),m=null;s_oStage.removeAllChildren();s_oMenu=null};this._onAudioToggle=function(){createjs.Sound.setMute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButInfoRelease=function(){new CCreditsPanel};this._onButPlayRelease=function(){this.unload();s_oMain.gotoTeamChoose()};s_oMenu=this;this._init()}
var s_oMenu=null;
function CGame(c,f){var b=!0,e=!1,d=!1,k=!1,h=!1,g=!1,a=!1,l=!1,m=!1,p=!1,n=!1,u=!1,v=!1,q,x,w,r,t,z,C,A,D,y,F,B,N,S,G,H,Q,I,R,K,Z,aa,V,W,O,J,E,X,T,L,M,P,U,Y;this._init=function(){$(s_oMain).trigger("start_session");s_oScrollStage=new createjs.Container;s_oStage.addChild(s_oScrollStage);r=f;b=!1;w=x=q=0;A=-1;P=0;D=NUM_OF_SHOT;U=LAUNCH_PENALITY_SECOND;F=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oScrollStage.addChild(F);X=[];T=[];O=[];J=[];E=[];Z=this.createFieldEdges(FIELD_DIAGRAM_PLAYERS);aa=
this.createFieldEdges(FIELD_DIAGRAM_BALL);this._createEdgeGoals();Q=playSound("crowd",1,-1);V=this._createEdgeGoalKeeper(EDGE_FOR_KEEPERS);W=new CEdge(EDGE_FOR_KEEPERS[4][0].x,EDGE_FOR_KEEPERS[4][0].y,EDGE_FOR_KEEPERS[7][0].x,EDGE_FOR_KEEPERS[7][0].y);G=new CArrow(0,0,s_oScrollStage);G.setVisible(!1);S=new CGoal(s_oScrollStage);L=this._createRandomOpponentTeamOrder();var a=this._createPlayers(),c=s_oSpriteLibrary.getSprite("ball");this._createBall(c,BALL_POSITION.x,BALL_POSITION.y,a,s_oScrollStage);
E.push(B);this._createOtherCollision(E,a);I={x:s_oStage.mouseX-s_oScrollStage.x,y:s_oStage.mouseY};S.createGoalFront();t=z=0;a=s_oSpriteLibrary.getSprite("player_selected");H=new CArrowPlayerSelected(0,0,a,s_oScrollStage);H.setVisible(!1);y=new CInterface(f,L[w]);y.refreshResult(t,z);M=REGULAR_MATCH_TIME;y.refreshTime(TEXT_TIME+": "+Math.ceil(M))};this._createPlayers=function(){for(var a=s_oSpriteLibrary.getSprite("players"),b=0,c=0;c<PLAYERS_ON_FIELD;c++){var d=r,e=L[w];if(USER_PLAYERS[c].goal_keeper)var g=
Math.floor(Math.random()*KEEPERS.length),d=KEEPERS[g];if(OPPONENT_PLAYERS[c].goal_keeper){for(g=Math.floor(Math.random()*KEEPERS.length);g===d;)g=Math.floor(Math.random()*KEEPERS.length);e=KEEPERS[g]}O.push(T[c]=this.createPlayer(a,USER_PLAYERS[c].x,USER_PLAYERS[c].y,b,-1,!0,USER_PLAYERS[c].goal_keeper,d,PLAYERS_USER,s_oScrollStage));b++;O.push(J[c]=this.createPlayer(a,OPPONENT_PLAYERS[c].x,OPPONENT_PLAYERS[c].y,b,1,!1,OPPONENT_PLAYERS[c].goal_keeper,e,PLAYERS_OPPONENT,s_oScrollStage));b++;E.push(T[c]);
E.push(J[c])}return b};this._createOtherCollision=function(a,b){for(var c=0;c<OTHER_COLLISION.length;c++)b++,a.push(new CInvisibleCollision(OTHER_COLLISION[c].x,OTHER_COLLISION[c].y,b,LOGIC_COLLISION,OTHER_COLLISION[c].radius,s_oScrollStage))};this._createEdgeGoalKeeper=function(a){for(var b=[],c=0;c<a.length;c++)b.push(new CEdge(a[c][0].x,a[c][0].y,a[c][1].x,a[c][1].y));return b};this._createEdgeGoals=function(){K=new CEdge(GOAL_OPPONENT[0].x,GOAL_OPPONENT[0].y,GOAL_OPPONENT[1].x,GOAL_OPPONENT[1].y);
R=new CEdge(GOAL_USER[0].x,GOAL_USER[0].y,GOAL_USER[1].x,GOAL_USER[1].y);SHOW_EDGE_COLLISION&&(this.createGraphicsCollision(GOAL_OPPONENT,!1,LINE_COLOR_GOALS),this.createGraphicsCollision(GOAL_USER,!1,LINE_COLOR_GOALS))};this._createRandomOpponentTeamOrder=function(){for(var a=[],b=0,c=0;c<TOT_TEAM;c++)r!==c&&(a[b]=c,b++);return a=shuffle(a)};this.createFieldEdges=function(a){for(var b=[],c=0;c<a.length;c++)b.push(new CEdge(a[c][0].x,a[c][0].y,a[c][1].x,a[c][1].y));SHOW_EDGE_COLLISION&&this.createGraphicsCollision(a,
!0,LINE_COLOR);return b};this.createGraphicsCollision=function(a,c,b){var d=new createjs.Shape;d.graphics.beginStroke(b);d.graphics.setStrokeStyle(2);for(b=0;b<a.length;b++)c?d.graphics.lineTo(a[b][0].x,a[b][0].y):d.graphics.lineTo(a[b].x,a[b].y);d.graphics.closePath();s_oScrollStage.addChild(d)};this.unload=function(){b=!1;y.unload();for(var a=0;a<O.length;a++)O[a].unload(),O[a]=null;Q.destroy();s_oStage.removeAllChildren();createjs.Tween.removeAllTweens();!1===s_bMobile&&(document.onkeydown=null,
document.onkeyup=null)};this.createPlayer=function(a,b,c,d,e,g,h,k,f,l){a=new CPlayer(b,c,a,d,g,h,f,l);a.rotate(e);a.changeTeam(k);return a};this.createOpponent=function(a,b,c,d){a=s_oSpriteLibrary.getSprite("team_"+a);N=new COpponent(b,c,a,OPPONENT_SPEEDS[w],_oPhysicsObject,_oOpponentCollision,d);N.setDistanceProtection(OPPONENT_DISTANCE_PROTECTION[w])};this._createOpponentCollision=function(){return _oPhysicsObject.addCollisionShape(OPPONENT_COLLISION)};this.onPlayerSelect=function(a){a.id===A||
l||(h=!0,A=a.id,H.setPosition(a.pos.x,a.pos.y+Y_POS_ARROW_SELECTED_OFFSET),H.setVisible(!0),H.animation(),G.setPosition(a.pos.x,a.pos.y),G.setVisible(!0))};this.arrowDraw=function(){if(h){var a=I.x-G.getX(),b=I.y-G.getY(),a=Math.atan2(b,a),a=180/Math.PI*a+OFFSET_ANGLE_ARROW;G.setAngle(a);a=Math.ceil(distance({x:G.getX(),y:G.getY()},I));100<a&&(a=100);this.setForce(-a);G.mask(a);G.circle(a)}};this.setForce=function(a){Y=a*FORCE_MULTIPLIER};this.onPressMove=function(){h&&!e&&(I={x:s_oStage.mouseX-s_oScrollStage.x,
y:s_oStage.mouseY})};this.onPressUp=function(){if(h&&null!==O[A]&&!e){var a=new CVector2(O[A].getX()-I.x,O[A].getY()-I.y);a.scalarProduct(Y);var b=a.length();b>HIT_PLAYER_MIN_FORCE?(b>HIT_PLAYER_MAX_FORCE&&(a.normalize(),a.scalarProduct(HIT_PLAYER_MAX_FORCE)),a.set(-a.getX(),-a.getY()),s_oGame.addForceToPlayer(O[A],a),s_oGame.upadtePhysics(!0),l=!0,D--,U=LAUNCH_PENALITY_SECOND,y.refreshTurnNumber(D,!1)):console.log("TIRO NULLO");h=!1;I.x=0;P=Y=I.y=0;m=!0;H.setVisible(!1);H.removeTween();G.setVisible(!1)}};
this.startSmootFollowBall=function(){var a=-B.getX()+CANVAS_WIDTH_HALF;a<=-iHalfOffsetX?s_oScrollStage.x=-iHalfOffsetX:a>=iHalfOffsetX?s_oScrollStage.x=iHalfOffsetX:createjs.Tween.get(s_oScrollStage).to({x:a},750,createjs.Ease.cubicOut).call(function(){m=!0})};this.addForceToPlayer=function(a,b){a.addForce(b)};this._createBall=function(a,b,c,d,e){B=new CBall(b,c,a,d,e)};this.getBallSpritePos=function(){return{x:_oBallSprite.getX(),y:_oBallSprite.getY()}};this.getCharacterPos=function(){return{x:(void 0).getX(),
y:(void 0).getY()}};this.getPlayerTeam=function(){return r};this.getOpponentTeam=function(){return L[w]};this.playKickSound=function(){e||playSound("kick",1,0)};this.onExit=function(){this.unload();$(s_oMain).trigger("show_interlevel_ad");$(s_oMain).trigger("end_session");setVolume(s_oSoundTrack,1);s_oMain.gotoMenu()};this._onExitHelp=function(){y.onExitFromHelp()};this._onExitVsPanel=function(){y._onExitVsPanel();y.createStartMatchText();$(s_oMain).trigger("start_level",w)};this.startMatch=function(){b=
!0;e=!1;setVolume(s_oSoundTrack,.3);playSound("kick_off",1,0)};this.onContinue=function(a){w++;this.nextLevel();this.resetLevel();this.tweenScrollStage(-B.getX()+CANVAS_WIDTH_HALF);var b=s_oSpriteLibrary.getSprite("msg_box");y.createVsPanel(b,r,L[w],a,w,750)};this.nextLevel=function(){this.changeOpponenPlayersTeam();y.setTeams(r,L[w]);y.setTeamsFlagScoreBoard(L[w])};this.changeOpponenPlayersTeam=function(){for(var a=0;a<J.length-1;a++)J[a].changeTeam(L[w]);for(a=Math.floor(Math.random()*KEEPERS.length);a===
T[T.length-1].getTeam();)a=Math.floor(Math.random()*KEEPERS.length);J[J.length-1].changeTeam(KEEPERS[a])};this.restartLevel=function(){this.resetLevel();y.refreshScore(q);y.createStartMatchText();this.tweenScrollStage(-B.getX()+CANVAS_WIDTH_HALF);$(s_oMain).trigger("restart_level",w)};this.resetLevel=function(){this.resetResult();this.resetAllObjectPos();v=p=n=a=u=h=m=l=e=!1;A=-1;x=0;D=NUM_OF_SHOT;H.setVisible(!1);H.removeTween();G.setVisible(!1);this.activeAllTurnBall()};this.tweenScrollStage=function(a){createjs.Tween.get(s_oScrollStage).to({x:a},
800,createjs.Ease.cubicOut)};this.resetResult=function(){M=REGULAR_MATCH_TIME;y.refreshTime(TEXT_TIME+": "+Math.ceil(M));t=z=0;y.refreshResult(t,z)};this.matchTime=function(a){0<M?(M-=a,y.refreshTime(TEXT_TIME+": "+Math.ceil(M))):this.finishTime()};this.finishTime=function(){e=!0;var a,b=!1,c;t===z&&!1===v?(y.createExtendedTimeText(),v=!0):(t>z?(a=!0,playSound("goal",1,0),c=this.calculateNewScore(),this.storesResult(),q=c.new_score+=x,y.refreshScore(q),w===TOT_MATCH-1&&(b=!0)):(a=!1,c=q+x,playSound("game_over",
1,0)),$(s_oMain).trigger("end_level",w),y.createEndMatchText(t,z,a,c,b))};this.extendTime=function(){this.resetAllObjectPos();p=n=a=u=h=m=l=e=!1;A=-1;D=NUM_OF_SHOT;H.setVisible(!1);H.removeTween();G.setVisible(!1);this.activeAllTurnBall();this.tweenScrollStage(-B.getX()+CANVAS_WIDTH_HALF);M=EXTENDED_MATCH_TIME;y.refreshTime(TEXT_TIME_EXT+": "+Math.ceil(M));e=!1;playSound("kick_off",1,0)};this.storesResult=function(){X[w]={player_team:r,opponent_team:L[w],result:y.getScoreBoardResult()}};this.unpause=
function(a){b=a};this._onEnd=function(){this.unload();$(s_oMain).trigger("end_session");setVolume(s_oSoundTrack,1);s_oMain.gotoCongratulations(X,q)};this.calculateNewScore=function(){var a={score:q,player_goal_score:0,opponent_goal_score:0,score_match:0,new_score:0};a.player_goal_score=t*SCORE_PLAYER_GOAL;a.opponent_goal_score=z*SCORE_OPPONENT_GOAL;a.score_match=v?SCORE_TIE:SCORE_WIN;a.new_score=a.score+a.player_goal_score+a.opponent_goal_score+a.score_match;return a};this.dirScrollWorld=function(a){l||
(k=a.press,C=a.dir,P=a.velocity)};this.objectsPhysics=function(){for(var a,b=!0,c=0;c<E.length;c++)a=E[c],a.type()!==LOGIC_COLLISION&&(a.vCurForce().addV(a.vTmpForce()),a.vTmpForce().set(0,0),a.vPrevPos().setV(a.vPos()),a.setPosVector(),this.collideCircleWithEdges(a,Z),a.vCurForce().scalarProduct(PLAYERS_FRICTION),a.vCurForce().length2()<MIN_PLAYER_FORCE_VEL?a.vCurForce().set(0,0):b=!1,this.sortZIndex(c));b&&this.allObjectsStop()};this.sortZIndex=function(a){for(var b=0;b<E.length;b++)a!==b&&this.sortByY(E[a].getObject(),
E[b].getObject())};this.sortByY=function(a,b){null!==a&&null!==b&&(a.y<b.y?s_oScrollStage.getChildIndex(a)>s_oScrollStage.getChildIndex(b)&&s_oScrollStage.swapChildren(a,b):a.y>b.y&&s_oScrollStage.getChildIndex(b)>s_oScrollStage.getChildIndex(a)&&s_oScrollStage.swapChildren(b,a))};this.allObjectsStop=function(){this.upadtePhysics(!1);l=!1;A=-1;n=m=p=!1;e||this.checkTurn()};this.checkTurn=function(){u?0===D?(D=NUM_OF_SHOT,this.activeAllTurnBall(),u=!1,y.turnAnim(TEXT_PLAYER_TURN),y.refreshTurnTeam(r)):
this.cpuTurn():0===D&&(D=NUM_OF_SHOT,this.activeAllTurnBall(),u=!0,0>=U?y.turnAnim(TEXT_LAUNCH_DELAY_PENALTY):y.turnAnim(TEXT_CPU_TURN),y.refreshTurnTeam(L[w]),this.cpuTurn())};this.activeAllTurnBall=function(){for(var a=0;a<NUM_OF_SHOT;a++)y.refreshTurnNumber(a,!0)};this.goal=function(a){e||(g=!0,a===LEFT_SIDE?(z++,u=!1,playSound("game_over",1,0)):(t++,u=!0,playSound("goal",1,0)),y.refreshResult(t,z),y.createGoalText(CANVAS_WIDTH_HALF,CANVAS_HEIGHT_HALF),m=!1,D=NUM_OF_SHOT,this.activeAllTurnBall(),
y.refreshTurnTeam(r),createjs.Tween.get(s_oScrollStage).to({x:0},1E3,createjs.Ease.cubicOut).call(function(){u?(y.turnAnim(TEXT_CPU_TURN),D=NUM_OF_SHOT,s_oGame.activeAllTurnBall(),y.refreshTurnTeam(L[w])):(y.turnAnim(TEXT_PLAYER_TURN),D=NUM_OF_SHOT,s_oGame.activeAllTurnBall(),y.refreshTurnTeam(r));s_oGame.resetAllObjectPos();g=!1}))};this.matchTime=function(a){0<M?(M-=a,y.refreshTime(TEXT_TIME+": "+Math.ceil(M))):this.finishTime()};this.resetAllObjectPos=function(){for(var a=0;a<E.length;a++)E[a].resetPos()};
this.cpuTurn=function(){if(!e){var a=new CVector2,b=new CVector2,c=new CVector2,d=new CVector2;b.set(GOAL_USER[0].x,GOAL_USER[0].y);c.set(GOAL_USER[1].x,GOAL_USER[1].y);var g=closestPointOnLine(b,c,T[T.length-1].vPos()),h=distanceV2WithoutSQRT(g,b),k=distanceV2WithoutSQRT(g,c),b=h>k?centerBetweenPointsV2(b,g):centerBetweenPointsV2(c,g);a.setV(b);a.subtract(B.vPos());a.normalize();b=PRECISION_CPU_RATE[w].min;b=Math.random()*(PRECISION_CPU_RATE[w].max-b)+b;d.setV(a);d.invert();d.scalarProduct(B.getRadius()*
b+.5*PLAYERS_RADIUS_HALF);d.addV(B.vPos());a.invert();this.findPlayerCpU(B.getX(),a,d)}};this.findPlayerCpU=function(a,b,c){var d=[];a=!0;for(var e=0,g=HIT_PLAYER_MAX_FORCE;g>HIT_PLAYER_MIN_FORCE;)e+=g,g*=PLAYERS_FRICTION;e*=e;g=new CVector2;g.set(B.getX(),B.getY());var h=classifySphere(g,W.getNormal(),W.m_pCenter(),B.getRadius());if("FRONT"!==h&&"INTERSECT FRONT"!==h&&g.getY()>EDGE_FOR_KEEPERS[4][0].y&&g.getY()<EDGE_FOR_KEEPERS[7][0].y)this.prepareCpuForLaunch(J[J.length-1],!1,c,!0);else{for(g=0;g<
J.length-1;g++){var k=new CEdge,f,l=h=!1,m=!1;k.set(J[g].vPos().getX(),J[g].vPos().getY(),c.getX(),c.getY());for(f=0;f<E.length;f++)if(E[f].getID()!==J[g].getID()&&E[f].type()!==BALL&&!0===(l=collideEdgeWithCircle(k,E[f].vPos(),2*E[f].getRadius(),null))){m=!0;break}k=distanceV2WithoutSQRT(J[g].vPos(),c);e<k&&!1===m&&(m=!0);f=new CVector2;f.setV(J[g].vPos());f.subtract(c);f.normalize();f=dotProductV2(b,f);0>f?h=!0:a=!1;d.push({iAngle:f,iDist2:k,bLeft:h,bObstacle:l,bInsufficientPower:m,oPlayer:J[g],
iScoreDist2:0,iScoreAngle:f,iTotScore:0})}b=this.evaluatePlayers(d,a);this.prepareCpuForLaunch(b,a,c,!1)}};this.prepareCpuForLaunch=function(b,c,d,e){var g=new CVector2,h=CPU_POWER_PLAYER[w];D--;y.refreshTurnNumber(D,!1);b.isGoalKeeper()&&(h=.5*CPU_POWER_PLAYER[w]);c?(b.getY()>B.getY()?g.set(B.getX(),B.getY()+2*B.getRadius()-5):g.set(B.getX(),B.getY()-2*B.getRadius()+5),g.subtract(b.vPos()),g.normalize(),h=.8*CPU_POWER_PLAYER[w]):(e?g.setV(B.vPos()):g.setV(d),g.subtract(b.vPos()),g.normalize());c=
new CVector2;c.setV(g);c.scalarProduct(h*HIT_PLAYER_MAX_FORCE);b.addForce(c);a=l=m=!0};this.evaluatePlayers=function(a,b){var c,d;a=this.sortArrayDecrescending("iDist2",a);var e=a[0].oPlayer;a[0].iScoreDist2=1;c=a[0].iDist2;d=a[a.length-1].iDist2;for(var g=1;g<a.length-1;g++)a[g].iScoreDist2=1-(a[g].iDist2-c)/(d-c);a=this.sortArrayDecrescending("iAngle",a);d=a[a.length-1].iAngle;a[a.length-1].iScoreAngle=1;c=a[0].iAngle;a[0].iScoreAngle=0;for(g=1;g<a.length-1;g++)a[g].iScoreAngle=(a[g].iAngle-c)/
(d-c);for(c=0;c<a.length;c++)a[c].iTotScore=a[c].iScoreDist2+a[c].iScoreAngle,!1===a[c].bObstacle&&(a[c].iTotScore+=1),!1===a[c].bInsufficientPower&&(a[c].iTotScore+=1);a=this.sortArrayDecrescending("iTotScore",a);return b?e:a[a.length-1].oPlayer};this.sortArrayDecrescending=function(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=b[d];for(d=0;d<c.length-1;d++)for(var g=d+1;g<c.length;g++)if(c[d][a]>c[g][a]){var e=c[d];c[d]=c[g];c[g]=e}return c};this.collideCircleWithEdges=function(a,c){var b,e=new CVector2;
e.setV(a.vCurForce());e.normalize();var h=a.vCurForce().length(),f=Math.floor(h/2),k=!1,l=new CVector2;l.setV(a.vPrevPos());e.normalize();e.scalarProduct(2);var m;for(m=0;m<f+1;m++){m===f&&(e.normalize(),e.scalarProduct(h-2*f));l.addV(e);if(a.isGoalKeeper())for(c=V,b=0;b<V.length;b++){if(k=collideEdgeWithCircle(V[b],l,a.getRadius(),null),!0===k){l.subtract(e);break}}else{a.type()===BALL&&(c=aa);for(b=0;b<c.length;b++)if(k=collideEdgeWithCircle(c[b],l,a.getRadius(),null),!0===k){e.scalarProduct(1.3);
l.subtract(e);break}if(a.type()===BALL&&!g){var t;a.getX()<CANVAS_WIDTH_HALF?(d=collideEdgeWithCircle(R,l,3,null),t=LEFT_SIDE):(d=collideEdgeWithCircle(K,l,3,null),t=RIGHT_SIDE);if(d){this.goal(t);return}}if(!0===k)break}a.vPos().setV(l);if(!0===this.collideObjectWithObjects(a))return}!0===k?(b=reflectVectorV2(a.vCurForce(),c[b].getNormal()),a.vPos().setV(l),a.vCurForce().setV(b)):a.vPos().addV(a.vCurForce());a.vPos().setV(l);this.collideObjectWithObjects(a)};this.upadtePhysics=function(b){a=b};this.collideObjectWithObjects=
function(a){for(var b,c=MIN_DIST_COLLISION_DETECT,d,e=[],g=0;g<E.length;g++)a.getID()!==E[g].getID()&&(b=distanceV2WithoutSQRT(a.vPos(),E[g].vPos()),b<=a.getRadiusQuadro()+E[g].getRadiusQuadro()&&(e.push({oObject:E[g],iDist:b}),c>b&&(c=b,d=e.length-1)));if(0!==e.length){c=new CVector2;b=new CVector2;g=new CVector2;g.setV(a.vCurForce());g.invert();g.normalize();b.setV(a.vPos());b.subtract(e[d].oObject.vPos());b.normalize();c.setV(b);c.scalarProduct(1.5*a.getRadius());c.addV(e[d].oObject.vPos());a.vPos().setV(c);
c=angleBetweenVectors(g,b)/HALF_PI;g=new CVector2;g.setV(a.vCurForce());g.normalize();var h=a.vCurForce().length();a.vCurForce().setV(reflectVectorV2(g,b));h*=K_IMPACT_BALL;a.vCurForce().normalize();a.vCurForce().scalarProduct(.15*h);this.checkPlayersCollisionSound(a,e[d].oObject);this.checkPlayersCollisionAnimationDangle(a,e[d].oObject);this.checkPlayerBallCollision(a,e[d].oObject);this.checkThereIsAFoul(a,e[d].oObject);b.invert();b.normalize();b.scalarProduct(h*(1-c)+.1*h);e[d].oObject.type()!==
LOGIC_COLLISION&&e[d].oObject.addForce(b);return!0}};this.checkPlayersCollisionSound=function(a,b){(a.type()===PLAYERS_OPPONENT&&b.type()===PLAYERS_USER||a.type()===PLAYERS_USER&&b.type()===PLAYERS_OPPONENT||a.type()===PLAYERS_USER&&b.type()===PLAYERS_USER||a.type()===PLAYERS_OPPONENT&&b.type()===PLAYERS_OPPONENT)&&playSound("player_collision",1,0)};this.checkThereIsAFoul=function(a,b){p||(a.type()===PLAYERS_OPPONENT&&b.type()===PLAYERS_USER||a.type()===PLAYERS_USER&&b.type()===PLAYERS_OPPONENT?this.foul():
p=!0)};this.checkPlayersCollisionAnimationDangle=function(a,b){a.type()!==PLAYERS_OPPONENT&&a.type()!==PLAYERS_USER||a.animDangle();b.type()!==PLAYERS_OPPONENT&&b.type()!==PLAYERS_USER||b.animDangle()};this.checkPlayerBallCollision=function(a,b){a.type()===BALL&&b.type()===PLAYERS_USER||a.type()===PLAYERS_USER&&b.type()===BALL?(this.addScore(TOUCH_BALL_SCORE),playSound("kick",1,0)):(a.type()===BALL&&b.type()===PLAYERS_OPPONENT||a.type()===PLAYERS_OPPONENT&&b.type()===BALL)&&playSound("kick",1,0)};
this.foul=function(){if(!e&&!n){n=!0;playSound("kick_off",1,0);u?(u=!1,y.turnAnim(TEXT_FOUL+" "+TEXT_PLAYER_TURN),y.refreshTurnTeam(r)):(-1<x+FOUL_SCORE?this.addScore(FOUL_SCORE):(x=0,this.addScore(0)),u=!0,y.turnAnim(TEXT_FOUL+" "+TEXT_CPU_TURN),y.refreshTurnTeam(L[w]));D=NUM_OF_SHOT;for(var a=0;a<NUM_OF_SHOT;a++)y.refreshTurnNumber(a,!0)}};this.addScore=function(a){e||(x+=a,y.refreshScore(q+x))};this.followBall=function(){if(m){var a=-B.getX()+CANVAS_WIDTH_HALF;s_oScrollStage.x=a<=-s_iOffsetX?-s_iOffsetX:
a>=s_iOffsetX?s_iOffsetX:s_oScrollStage.x+.25*(a-s_oScrollStage.x)}};this.scrollWorld=function(){if(s_oScrollStage.x<=-s_iOffsetX&&C===RIGHT_SCROLL_WORLD)s_oScrollStage.x=-s_iOffsetX;else if(s_oScrollStage.x>=s_iOffsetX&&C===LEFT_SCROLL_WORLD)s_oScrollStage.x=s_iOffsetX;else{if(!k)if(C===RIGHT_SCROLL_WORLD){if(0<=P){P=0;return}P+=SMOOTH_SCROLL_OFFSET}else{if(0>=P){P=0;return}P-=SMOOTH_SCROLL_OFFSET}s_oScrollStage.x+=P}};this.launchDelayPenality=function(a){e||(0<U?U-=a:(D=0,A=-1,G.setVisible(!1),
h=!1,H.setVisible(!1),H.removeTween(),this.checkTurn(),U=LAUNCH_PENALITY_SECOND))};this.update=function(){b&&(l||u?this.followBall():(this.scrollWorld(),this.arrowDraw(),this.launchDelayPenality(FPS_TIME_SECONDS)),e||this.matchTime(FPS_TIME_SECONDS),a&&(this.objectsPhysics(),B.rolls(),this.sortGoalsFront()))};this.sortGoalsFront=function(){var a=S.getGoalPlayerFront();B.getY()>CANVAS_WIDTH_HALF&&(a=S.getGoalEnemyFront());for(var b=0;b<E.length;b++)this.sortByY(a,E[b].getObject())};s_oGame=this;TIME_RESET_BALL=
c.time_reset_ball;REGULAR_MATCH_TIME=c.regular_match_time;EXTENDED_MATCH_TIME=c.extend_match_time;LAUNCH_PENALITY_SECOND=c.launch_penality_second;SCORE_PLAYER_GOAL=c.add_score_player_goal;SCORE_OPPONENT_GOAL=c.remove_score_opponent_goal;SCORE_WIN=c.score_win;SCORE_TIE=c.score_tie;SCROLL_VELOCITY=c.scroll_velocity;TOUCH_BALL_SCORE=c.touch_ball_score;FOUL_SCORE=c.foul_score;NUM_OF_SHOT=c.num_of_shot;PRECISION_CPU_RATE=c.precision_cpu_rate;CPU_POWER_PLAYER=c.cpu_power_players;NUM_LEVEL_FOR_ADS=c.num_levels_for_ads;
this._init()}var s_oGame;
function CInterface(c,f){var b,e,d,k,h,g,a,l,m,p,n,u,v,q,x,w,r,t,z,C,A,D,y,F,B;this._init=function(a,c){this.setTeams(a,c);var f=s_oSpriteLibrary.getSprite("gui_box"),l=.5*f.height;r=new CScoreBoard(f,.5*CANVAS_WIDTH,l,F,B);t=new CTimeBoard(f,20,l-4);z=new CTurnBoard(f,20,CANVAS_HEIGHT-2*l-20);C=new CLevelScoreBoard(f,CANVAS_WIDTH-f.width-20,CANVAS_HEIGHT-2*l-20);z.setTurn(a);this._createScrollButtons();f=s_oSpriteLibrary.getSprite("but_exit");d=CANVAS_WIDTH-f.height/2-20;k=f.height/2+20;m=new CGfxButton(d,
k,f,s_oStage);m.addEventListener(ON_MOUSE_UP,this._onExit,this);f=s_oSpriteLibrary.getSprite("but_pause");b=d-f.height-20;e=k;p=new CGfxButton(b,e,f,s_oStage);p.addEventListener(ON_MOUSE_UP,this._onPause,this);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)f=s_oSpriteLibrary.getSprite("audio_icon"),h=b-f.height-20,g=k,u=new CToggle(h,g,f,s_bAudioActive,s_oStage),u.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);n=new CHelpPanel(0,0,s_oSpriteLibrary.getSprite("bg_help"),F);this.refreshButtonPos(s_iOffsetX,
s_iOffsetY)};this.setTeams=function(a,b){F=a;B=b};this.setTeamsFlagScoreBoard=function(a){r.changeOpponentTeamFlag(a)};this.refreshButtonPos=function(c,f){m.setPosition(d-c,f+k);p.setPosition(b-c,f+e);D.setPosition(a.x+c,a.y);y.setPosition(l.x-c,l.y);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||u.setPosition(h-c,f+g);var n=r.getStartPosition();r.setPosition(n.x,n.y+f);n=t.getStartPosition();t.setPosition(n.x+c,n.y+f);n=z.getStartPosition();z.setPosition(n.x+c,n.y-f);n=C.getStartPosition();C.setPosition(n.x-
c,n.y-f)};this.unload=function(){m.unload();m=null;n&&n.unload();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)u.unload(),u=null;s_bMobile&&(void 0).unload();s_oInterface=null};this.refreshResult=function(a,b){r.refresh(a+" - "+b)};this.refreshTime=function(a){t.refresh(a)};this.onExitFromHelp=function(){this.unloadHelpPanel();var a=s_oSpriteLibrary.getSprite("msg_box");this.createVsPanel(a,F,B,null,null,0)};this.crowdEffectOn=function(){var a=(void 0).getPosition(),b=s_oSpriteLibrary.getSprite("crowd_on");
a.y+=.3*b.height;(void 0).crowOn(s_oSpriteLibrary.getSprite("crowd_on"),a.x,a.y,750)};this.createEndMatchText=function(a,b,c,d,e){var g=new createjs.Container;g.x=.5*CANVAS_WIDTH;g.y=-50;var f=new createjs.Text(TEXT_FINISH,"50px "+FONT_GAME,"#ff6000");f.x=0;f.y=0;f.textAlign="center";f.outline=5;g.addChild(f);f=new createjs.Text(TEXT_FINISH,"50px "+FONT_GAME,TEXT_COLOR);f.x=0;f.y=0;f.textAlign="center";g.addChild(f);s_oStage.addChild(g);createjs.Tween.get(g).to({y:TWEEN_END_MACTH_Y},1250,createjs.Ease.elasticOut).call(function(){createjs.Tween.get(g).to({scaleX:0,
scaleY:0},500,createjs.Ease.quartIn).call(function(){c?s_oInterface.createWinPanel(a,b,d,e):s_oInterface.createLosePanel(a,b,d);setVolume(s_oSoundTrack,1);s_oGame.unpause(!1);s_oStage.removeChild(g)})})};this.createExtendedTimeText=function(){var a=new createjs.Container;a.x=-100;a.y=.5*CANVAS_HEIGHT;var b=new createjs.Text(TEXT_TIME_EXTENDED,"50px "+FONT_GAME,"#ff6000");b.x=0;b.y=0;b.textAlign="center";b.outline=5;a.addChild(b);b=new createjs.Text(TEXT_TIME_EXTENDED,"50px "+FONT_GAME,TEXT_COLOR);
b.x=0;b.y=0;b.textAlign="center";a.addChild(b);s_oStage.addChild(a);createjs.Tween.get(a).to({x:.5*CANVAS_WIDTH},750,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(a).to({x:CANVAS_WIDTH+100},750,createjs.Ease.cubicIn).call(function(){s_oGame.extendTime();s_oStage.removeChild(a)})})};this.createLosePanel=function(a,b,c){x=new CLosePanel(s_oSpriteLibrary.getSprite("msg_box"));x.show(a,b,F,B,c)};this.createWinPanel=function(a,b,c,d){w=new CWinPanel(s_oSpriteLibrary.getSprite("msg_box"),d);
w.show(a,b,F,B,c)};this.createVsPanel=function(a,b,c,d,g,e){v=new CVsPanel(a,b,c,g,e);null!==d&&v.setChildIndex(d)};this.blockAllButton=function(a){m.block(a);p.block(a)};this.getScoreBoardResult=function(){return r.getResult()};this.unloadHelpPanel=function(){n&&(n.unload(),n=null)};this.createGoalText=function(a,b){var c=s_oSpriteLibrary.getSprite("goal_text"),d;d=createBitmap(c);d.regX=.5*c.width;d.regY=.5*c.height;d.x=a;d.y=b;d.scaleX=0;d.scaleY=0;s_oStage.addChild(d);createjs.Tween.get(d).to({scaleX:1,
scaleY:1},500,createjs.Ease.quadOut).call(function(){createjs.Tween.get(d).wait(500).to({scaleX:0,scaleY:0,alpha:0},500,createjs.Ease.quadOut).call(function(){s_oStage.removeChild(d)})})};this._onExitVsPanel=function(){v.unload();v=null};this.createStartMatchText=function(){var a=new createjs.Container;a.x=.5*CANVAS_WIDTH;a.y=-50;q=new createjs.Shape;q.graphics.beginFill("black").drawRect(-CANVAS_WIDTH_HALF,-CANVAS_HEIGHT_HALF,CANVAS_WIDTH,CANVAS_HEIGHT);q.alpha=.01;q.on("click",function(){});a.addChild(q);
var b=new createjs.Text(TEXT_KICK_OFF,"50px "+FONT_GAME,"#ff6000");b.x=0;b.y=0;b.textAlign="center";b.outline=5;a.addChild(b);b=new createjs.Text(TEXT_KICK_OFF,"50px "+FONT_GAME,TEXT_COLOR);b.x=0;b.y=0;b.textAlign="center";a.addChild(b);s_oStage.addChild(a);createjs.Tween.get(a).to({y:TWEEN_END_MACTH_Y},1250,createjs.Ease.elasticOut).call(function(){createjs.Tween.get(a).to({scaleX:0,scaleY:0},500,createjs.Ease.quartIn).call(function(){s_oGame.startMatch();q.off("click",function(){});s_oStage.removeChild(a)})})};
this.createPauseInterface=function(){A=new CPause};this.refreshTurnNumber=function(a,b){z.refreshTurn(a,b)};this.refreshTurnTeam=function(a){z.setTurn(a)};this.refreshScore=function(a){C.refresh(a)};this.turnAnim=function(a){var b=new createjs.Container;b.x=-200;b.y=CANVAS_HEIGHT_HALF;var c=new createjs.Text(a,"50px "+FONT_GAME,"#ff6000");c.x=0;c.y=0;c.textAlign="center";c.lineWidth=800;c.outline=5;b.addChild(c);a=new createjs.Text(a,"50px "+FONT_GAME,TEXT_COLOR);a.x=0;a.y=0;a.textAlign="center";
a.lineWidth=c.lineWidth;b.addChild(a);s_oStage.addChild(b);createjs.Tween.get(b).to({x:CANVAS_WIDTH_HALF},750,createjs.Ease.quartOut).call(function(){createjs.Tween.get(b).wait(300).to({x:CANVAS_WIDTH+200},750,createjs.Ease.quartIn).call(function(){s_oStage.removeChild(b)})})};this.unloadPause=function(){A.unload();A=null};this._onAudioToggle=function(){createjs.Sound.setMute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onExit=function(){(new CAreYouSurePanel(s_oStage)).show()};this._onPause=
function(){s_oGame.unpause(!1);this.createPauseInterface()};this.getScoreBoardResult=function(){return r.getResult()};this._createScrollButtons=function(){var b=s_oSpriteLibrary.getSprite("but_scroll");a={x:.5*b.width+10,y:.5*CANVAS_HEIGHT};D=new CGfxButton(a.x,a.y,b,s_oStage);D.addEventListenerWithParams(ON_MOUSE_DOWN,s_oGame.dirScrollWorld,this,{velocity:SCROLL_VELOCITY,press:!0,dir:LEFT_SCROLL_WORLD});D.addEventListenerWithParams(ON_MOUSE_UP,s_oGame.dirScrollWorld,this,{velocity:SCROLL_VELOCITY,
press:!1,dir:LEFT_SCROLL_WORLD});l={x:CANVAS_WIDTH-.5*b.width-10,y:.5*CANVAS_HEIGHT};y=new CGfxButton(l.x,l.y,b,s_oStage);y.setScaleX(-1);y.addEventListenerWithParams(ON_MOUSE_DOWN,s_oGame.dirScrollWorld,this,{velocity:-SCROLL_VELOCITY,press:!0,dir:RIGHT_SCROLL_WORLD});y.addEventListenerWithParams(ON_MOUSE_UP,s_oGame.dirScrollWorld,this,{velocity:-SCROLL_VELOCITY,press:!1,dir:RIGHT_SCROLL_WORLD})};s_oInterface=this;this._init(c,f);return this}var s_oInterface=null;
function CHelpPanel(c,f,b,e){var d,k,h,g,a,l,m,p,n,u,v,q=!1;this._init=function(b,c,d,e){h=createBitmap(d);h.x=.5*CANVAS_WIDTH;h.y=.5*CANVAS_HEIGHT;h.regX=.5*d.width;h.regY=.5*d.height;g=new createjs.Container;g.x=b;g.y=c;l=new createjs.Shape;l.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);l.alpha=.5;l.on("pressup",function(){s_oHelpPanel._onExitHelp()},null,!0);g.addChild(l);g.addChild(h);s_oStage.addChild(g);a=new createjs.Container;a.alpha=0;this.page1(e,a);s_bMobile||(l.cursor=
"pointer")};this.page1=function(a,b){var c;c=new createjs.Text(TEXT_CONTROLS,"32px "+FONT_GAME,"#ff6000");c.x=.5*CANVAS_WIDTH;c.y=.5*CANVAS_HEIGHT-160;c.textAlign="center";c.outline=5;b.addChild(c);var g;g=new createjs.Text(TEXT_CONTROLS,"32px "+FONT_GAME,TEXT_COLOR);g.x=.5*CANVAS_WIDTH;g.y=c.y;g.textAlign="center";b.addChild(g);c=s_oSpriteLibrary.getSprite("players");d=CANVAS_WIDTH_HALF;k=270;p=new CArrow(d,k,b);p.animateMask(1E3);g=new CPlayer(d,k,c,0,!1,!1,PLAYERS_USER,b);g.changeTeam(a);g.rotate(-1);
g=s_bMobile?s_oSpriteLibrary.getSprite("help_touch"):s_oSpriteLibrary.getSprite("help_mouse");u=createBitmap(g);u.x=d-130;u.y=k-10;u.regX=.5*g.width;u.regY=.5*g.height;b.addChild(u);this.animateInputPower(1E3);n=new CArrow(d,k+120,b);n.animateRotation(1E3);n.mask(100);v=createBitmap(g);v.x=d-150;v.y=k+120;v.regX=.5*g.width;v.regY=.5*g.height;b.addChild(v);c=new CPlayer(d,k+120,c,0,!1,!1,PLAYERS_USER,b);c.changeTeam(a);c.rotate(-1);this.animateInputRotate(1E3);createjs.Tween.get(b).to({alpha:1},300,
createjs.Ease.cubicOut);c=s_oSpriteLibrary.getSprite("but_continue");m=new CGfxButton(.5*CANVAS_WIDTH+210,.5*CANVAS_HEIGHT+80,c,b);m.addEventListener(ON_MOUSE_UP,this._onExitHelp,this);m.pulseAnimation();s_oStage.addChild(b)};this.animateInputPower=function(a){createjs.Tween.get(u).to({x:d-230},a,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(u).to({x:d-130},a,createjs.Ease.cubicInOut).call(function(){s_oHelpPanel.animateInputPower(a)})})};this.animateInputRotate=function(a){createjs.Tween.get(v).to({y:k+
60},a,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(v).to({y:k+180},a,createjs.Ease.cubicInOut).call(function(){s_oHelpPanel.animateInputRotate(a)})})};this.unload=function(){s_oStage.removeChild(g);s_oHelpPanel=null;l.off("pressup",function(){s_oHelpPanel._onExitHelp()},null,!0);m.unload();m=null;createjs.Tween.removeAllTweens()};this._onExitHelp=function(){q||(q=!0,playSound("click",1,0),createjs.Tween.get(a).to({alpha:0},300,createjs.Ease.cubicOut).call(function(){s_oGame._onExitHelp()}))};
s_oHelpPanel=this;this._init(c,f,b,e)}var s_oHelpPanel=null;
function CLosePanel(c){var f,b,e,d,k,h,g,a,l,m,p;this._init=function(c){p=new createjs.Shape;p.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);p.alpha=0;s_oStage.addChild(p);a=new createjs.Container;a.alpha=1;a.visible=!1;a.y=CANVAS_HEIGHT;f=createBitmap(c);f.x=CANVAS_WIDTH_HALF;f.y=CANVAS_HEIGHT_HALF;f.regX=.5*c.width;f.regY=.5*c.height;a.addChild(f);d=new createjs.Text("","30px "+FONT_GAME,"#ff6000");d.x=CANVAS_WIDTH/2;d.y=CANVAS_HEIGHT/2-50;d.textAlign="center";d.textBaseline=
"middle";d.outline=4;a.addChild(d);k=new createjs.Text("","30px "+FONT_GAME,TEXT_COLOR);k.x=CANVAS_WIDTH/2;k.y=CANVAS_HEIGHT/2-50;k.textAlign="center";k.textBaseline="middle";a.addChild(k);b=new createjs.Text("","26px "+FONT_GAME,"#ff6000");b.x=CANVAS_WIDTH/2;b.y=CANVAS_HEIGHT/2+50;b.textAlign="center";b.textBaseline="middle";b.outline=4;a.addChild(b);e=new createjs.Text("","26px "+FONT_GAME,TEXT_COLOR);e.x=CANVAS_WIDTH/2;e.y=CANVAS_HEIGHT/2+50;e.textAlign="center";e.textBaseline="middle";a.addChild(e);
h=new createjs.Text("","50px "+FONT_GAME,"#ff6000");h.x=CANVAS_WIDTH/2;h.y=174;h.textAlign="center";h.outline=5;h.textBaseline="middle";a.addChild(h);g=new createjs.Text("","50px "+FONT_GAME,TEXT_COLOR);g.x=CANVAS_WIDTH/2;g.y=174;g.textAlign="center";g.textBaseline="middle";a.addChild(g);s_oStage.addChild(a);c=s_oSpriteLibrary.getSprite("but_home");l=new CGfxButton(.5*CANVAS_WIDTH-310,.5*CANVAS_HEIGHT+150,c,a);l.addEventListener(ON_MOUSE_DOWN,this._onExit,this);c=s_oSpriteLibrary.getSprite("but_restart");
m=new CGfxButton(.5*CANVAS_WIDTH+310,.5*CANVAS_HEIGHT+150,c,a);m.addEventListener(ON_MOUSE_DOWN,this._onRestart,this);m.pulseAnimation()};this.unload=function(){createjs.Tween.get(a).to({alpha:0},500,createjs.Ease.cubicOut).call(function(){s_oStage.removeChild(a);l.unload();l=null;p.removeAllEventListeners();m.unload();m=null})};this.show=function(c,f,l,m,x){var w=TEXT_TEAM_CODE[l],r=TEXT_TEAM_CODE[m];k.text=TEXT_TOTAL_SCORE+": "+x;d.text=k.text;e.text=w+" "+c+" - "+f+" "+r;b.text=w+" "+c+" - "+f+
" "+r;h.text=TEXT_LOSE;g.text=TEXT_LOSE;c=s_oSpriteLibrary.getSprite("flags_small");new CFlag(e.x-160,e.y,l,!1,c,a);new CFlag(e.x+160,e.y,m,!1,c,a);a.visible=!0;createjs.Tween.get(p).to({alpha:.5},500,createjs.Ease.cubicOut);p.on("click",function(){});createjs.Tween.get(a).wait(250).to({y:0},1250,createjs.Ease.elasticOut).call(function(){s_oAdsLevel===NUM_LEVEL_FOR_ADS?($(s_oMain).trigger("show_interlevel_ad"),s_oAdsLevel=1):s_oAdsLevel++})};this._onRestart=function(){this.unload();createjs.Tween.get(p).to({alpha:0},
400,createjs.Ease.cubicOut).call(function(){s_oStage.removeChild(p)});s_oGame.restartLevel()};this._onExit=function(){this.unload();s_oGame.onExit()};this._init(c);return this}
function CWinPanel(c,f){var b,e,d,k,h,g,a,l,m,p,n,u,v,q,x,w,r;this._init=function(c,f){r=new createjs.Shape;r.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);r.alpha=0;s_oStage.addChild(r);q=new createjs.Container;q.alpha=1;q.visible=!1;q.y=CANVAS_HEIGHT;b=createBitmap(c);b.x=CANVAS_WIDTH_HALF;b.y=CANVAS_HEIGHT_HALF;b.regX=.5*c.width;b.regY=.5*c.height;q.addChild(b);k=new createjs.Text("","50px "+FONT_GAME,"#ff6000");k.x=CANVAS_WIDTH/2;k.y=CANVAS_HEIGHT_HALF-200;k.textAlign="center";
k.outline=5;q.addChild(k);h=new createjs.Text("","50px "+FONT_GAME,TEXT_COLOR);h.x=CANVAS_WIDTH/2;h.y=k.y;h.textAlign="center";q.addChild(h);e=new createjs.Text("","26px "+FONT_GAME,"#ff6000");e.x=CANVAS_WIDTH/2;e.y=CANVAS_HEIGHT/2-90;e.textAlign="center";e.textBaseline="middle";e.outline=5;q.addChild(e);d=new createjs.Text("","26px "+FONT_GAME,TEXT_COLOR);d.x=CANVAS_WIDTH/2;d.y=e.y;d.textAlign="center";d.textBaseline="middle";q.addChild(d);g=new createjs.Text("","24px "+FONT_GAME,"#ff6000");g.x=
CANVAS_WIDTH/2;g.y=CANVAS_HEIGHT/2-20;g.textAlign="center";g.outline=5;q.addChild(g);a=new createjs.Text("","24px "+FONT_GAME,TEXT_COLOR);a.x=CANVAS_WIDTH/2;a.y=g.y;a.textAlign="center";q.addChild(a);l=new createjs.Text("","24px "+FONT_GAME,"#ff6000");l.x=CANVAS_WIDTH/2;l.y=CANVAS_HEIGHT/2+40;l.textAlign="center";l.outline=5;q.addChild(l);m=new createjs.Text("","24px "+FONT_GAME,TEXT_COLOR);m.x=CANVAS_WIDTH/2;m.y=l.y;m.textAlign="center";q.addChild(m);p=new createjs.Text("","24px "+FONT_GAME,"#ff6000");
p.x=CANVAS_WIDTH/2;p.y=CANVAS_HEIGHT/2+100;p.textAlign="center";p.outline=5;q.addChild(p);n=new createjs.Text("","24px "+FONT_GAME,TEXT_COLOR);n.x=CANVAS_WIDTH/2;n.y=p.y;n.textAlign="center";q.addChild(n);u=new createjs.Text("","24px "+FONT_GAME,"#ff6000");u.x=CANVAS_WIDTH/2;u.y=CANVAS_HEIGHT/2+160;u.textAlign="center";u.outline=5;q.addChild(u);v=new createjs.Text("","24px "+FONT_GAME,TEXT_COLOR);v.x=CANVAS_WIDTH/2;v.y=u.y;v.textAlign="center";q.addChild(v);var C=s_oSpriteLibrary.getSprite("but_continue");
w=new CGfxButton(.5*CANVAS_WIDTH+310,.5*CANVAS_HEIGHT+150,C,q);w.pulseAnimation();!1===f?(C=s_oSpriteLibrary.getSprite("but_home"),x=new CGfxButton(.5*CANVAS_WIDTH-310,.5*CANVAS_HEIGHT+150,C,q),x.addEventListener(ON_MOUSE_DOWN,this._onExit,this),w.addEventListener(ON_MOUSE_DOWN,this._onContinue,this)):w.addEventListener(ON_MOUSE_DOWN,this._onEnd,this);s_oStage.addChild(q)};this.unload=function(){s_oStage.removeChild(q);x&&(x.unload(),x=null);w&&(w.unload(),w=null)};this.show=function(b,c,f,w,x){var y=
TEXT_TEAM_CODE[f],F=TEXT_TEAM_CODE[w];d.text=y+" "+b+" - "+c+" "+F;e.text=y+" "+b+" - "+c+" "+F;k.text=TEXT_WIN;h.text=TEXT_WIN;g.text=TEXT_SCORE_GOAL_PLAYER+" "+x.player_goal_score;a.text=TEXT_SCORE_GOAL_PLAYER+" "+x.player_goal_score;l.text=TEXT_SCORE_GOAL_OPPONENT+" "+x.opponent_goal_score;m.text=TEXT_SCORE_GOAL_OPPONENT+" "+x.opponent_goal_score;p.text=TEXT_MACTH_SCORE+": "+x.score_match;n.text=TEXT_MACTH_SCORE+": "+x.score_match;u.text=TEXT_TOTAL_SCORE+": "+x.new_score;v.text=TEXT_TOTAL_SCORE+
": "+x.new_score;b=s_oSpriteLibrary.getSprite("flags_small");new CFlag(d.x-160,d.y,f,!1,b,q);new CFlag(d.x+160,d.y,w,!1,b,q);q.visible=!0;createjs.Tween.get(r).to({alpha:.5},500,createjs.Ease.cubicOut);createjs.Tween.get(q).wait(250).to({y:0},1250,createjs.Ease.bounceOut).call(function(){s_oAdsLevel===NUM_LEVEL_FOR_ADS?($(s_oMain).trigger("show_interlevel_ad"),s_oAdsLevel=1):s_oAdsLevel++});$(s_oMain).trigger("save_score",x.new_score);$(s_oMain).trigger("share_event",x.new_score)};this._onContinue=
function(){var a=this;createjs.Tween.get(q).to({y:CANVAS_HEIGHT},750,createjs.Ease.quartIn).call(function(){a.unload()});createjs.Tween.get(r).to({alpha:0},400,createjs.Ease.cubicOut).call(function(){s_oStage.removeChild(r);r.removeAllEventListeners()});w.block(!0);x.block(!0);s_oGame.onContinue(s_oStage.getChildIndex(q))};this._onEnd=function(){w.block(!0);this.unload();s_oGame._onEnd()};this._onExit=function(){this.unload();r.off("click",function(){});s_oGame.onExit()};this._init(c,f);return this}
function CBall(c,f,b,e,d){var k,h,g,a,l,m,p,n,u,v,q,x,w,r=0,t=0;this._init=function(b,c,d,e){a=new createjs.Container;a.x=b;a.y=c;this.createShadow();var f=new createjs.SpriteSheet({images:[d],frames:{width:d.width/7,height:d.height,regX:d.width/2/7,regY:d.height/2}});l=createSprite(f,0,d.width/2/7,d.height/2,d.width/7,d.height/2);l.stop();a.addChild(l);p=new CVector2;p.set(a.x,a.y);n=new CVector2;n.set(0,0);u=new CVector2;u.set(0,0);q=e;k=b;h=c;x=.5*d.width/7;w=x*x;v=new CVector2;v.set(0,0);g.addChild(a)};
this.createShadow=function(){var b=s_oSpriteLibrary.getSprite("player_shadow");m=createBitmap(b);m.regX=.5*b.width;m.regY=-7;m.scaleX=.8;m.scaleY=.8;a.addChild(m)};this.unload=function(){g.removeChild(a)};this.setVisible=function(b){a.visible=b};this.setPosition=function(b,c){a.x=b;a.y=c};this.resetPos=function(){a.x=k;a.y=h;p.set(a.x,a.y);u.set(0,0);v.set(0,0)};this.setAngle=function(a){l.rotation=a};this.getX=function(){return a.x};this.getY=function(){return a.y};this.scale=function(b){a.scaleX=
b;a.scaleY=b};this.getScale=function(){return a.scaleX};this.vTmpForce=function(){return u};this.type=function(){return BALL};this.vCurForce=function(){return v};this.vPos=function(){return p};this.vPrevPos=function(){return n};this.getRadius=function(){return x};this.getRadiusQuadro=function(){return w};this.addForce=function(a){u.addV(a)};this.setPosVector=function(){a.x=p.getX();a.y=p.getY()};this.isGoalKeeper=function(){return!1};this.getID=function(){return q};this.rolls=function(){var a=v.getX(),
b=1;0>a&&(b=-1);a=Math.abs(a);4<a?l.rotation+=10*b:3<a?(r++,2===r&&(l.rotation+=8*b,r=0)):1<a?(r++,3===r&&(l.rotation+=4*b,r=0)):a>MIN_PLAYER_FORCE_VEL&&(r++,4===r&&(l.rotation+=2*b,r=0));a=Math.abs(v.getY());b=this._goToPrevFrame;0>v.getY()&&(b=this._goToNextFrame);5<a?b():3<a?(r++,2<r&&(b(),r=0)):1<a?(r++,3<r&&(b(),r=0)):a>MIN_PLAYER_FORCE_VEL&&(r++,4<r&&(b(),r=0))};this._goToPrevFrame=function(){0===t?t=6:t--;l.gotoAndStop(t)};this._goToNextFrame=function(){7===t?t=1:t++;l.gotoAndStop(t)};this.getChildIndex=
function(){g.getChildIndex(a)};this.setChildIndex=function(b){g.setChildIndex(a,b)};this.getObject=function(){return a};g=d;this._init(c,f,b,e);return this}
function CPlayer(c,f,b,e,d,k,h,g){var a,l,m,p,n,u,v,q,x,w,r,t,z,C,A,D,y=!1,F;this._init=function(b,c,d,g,e,f,h){v=d;n=new createjs.Container;n.x=b;n.y=c;this.createShadow();d=new createjs.SpriteSheet({images:[h],frames:{width:h.width/12,height:h.height/3,regX:h.width/2/12,regY:h.height/3+PLAYER_REGY_OFFSET}});m=createSprite(d,0,h.width/2/12,h.height/3+PLAYER_REGY_OFFSET,h.width/12,h.height/3);m.stop();n.addChild(m);t=new CVector2;t.set(n.x,n.y);z=new CVector2;z.set(0,0);C=new CVector2;C.set(0,0);
A=new CVector2;A.set(0,0);(D=e)?(q=PLAYERS_KEEPER_RADIUS,x=PLAYERS_KEEPER_RADIUS*PLAYERS_KEEPER_RADIUS):(q=PLAYERS_RADIUS,x=PLAYERS_RADIUS*PLAYERS_RADIUS);w=f;a=b;l=c;if(F=g)this._initListner(),m.cursor="pointer";p.x=m.x;p.y=m.y;u.addChild(n)};this._initListner=function(){m.on("mousedown",this.onSelect);m.on("pressmove",this.onPressMove);m.on("pressup",this.onPressUp)};this.getX=function(){return n.x};this.getY=function(){return n.y};this.resetPos=function(){n.x=a;n.y=l;t.set(n.x,n.y);C.set(0,0);
A.set(0,0)};this.createShadow=function(){var a=s_oSpriteLibrary.getSprite("player_shadow");p=createBitmap(a);p.regX=.5*a.width;n.addChild(p)};this.onSelect=function(){s_oGame.onPlayerSelect({pos:{x:n.x,y:n.y},id:v})};this.onPressMove=function(){s_oGame.onPressMove()};this.onPressUp=function(){s_oGame.onPressUp({x:n.x,y:n.y})};this.isGoalKeeper=function(){return D};this.setPosition=function(a,b){null!==a&&(n.x=a);null!==b&&(n.y=b)};this.rotate=function(a){n.scaleX=a};this.setVisible=function(a){n.visible=
a};this.changeTeam=function(a){m.gotoAndStop(a);r=a};this.getTeam=function(){return r};this.vTmpForce=function(){return C};this.vCurForce=function(){return A};this.vPos=function(){return t};this.vPrevPos=function(){return z};this.animDangle=function(){y||(y=!0,createjs.Tween.get(m).to({rotation:DANGLE_DEGREE},250,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(m).to({rotation:-DANGLE_DEGREE},250,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(m).to({rotation:.5*DANGLE_DEGREE},
300,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(m).to({rotation:.5*-DANGLE_DEGREE},300,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(m).to({rotation:.1*DANGLE_DEGREE},300,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(m).to({rotation:.1*-DANGLE_DEGREE},300,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(m).to({rotation:0},300,createjs.Ease.cubicOut).call(function(){y=!1})})})})})})}))};this.setPosVector=function(){n.x=t.getX();n.y=t.getY()};this.getRadius=
function(){return q};this.getID=function(){return v};this.type=function(){return w};this.getRadiusQuadro=function(){return x};this.addForce=function(a){C.addV(a)};this.getChildIndex=function(){return u.getChildIndex(n)};this.setChildIndex=function(a){u.setChildIndex(n,a)};this.getObject=function(){return n};this.unload=function(){F&&(m.off("mousedown",this.onSelect),m.off("pressmove",this.onPressMove),m.off("pressup",this.onPressUp));u.removeChild(m);m=null};u=g;this._init(c,f,e,d,k,h,b)}
function CTurnPlayer(c,f,b,e){var d,k;this._init=function(b,c,a){var e=new createjs.SpriteSheet({images:[a],frames:{width:a.width/10,height:a.height/3,regX:a.width/2/10,regY:a.height/3},animations:{rotate:[0,29,"rotate",.7]}});d=createSprite(e,"rotate",a.width/2/10,a.height/3,a.width/10,a.height/3);d.x=b;d.y=c;k.addChild(d)};this.gotoAndStopAnim=function(b){d.gotoAndStop(b)};this.stopAnim=function(){d.stop()};this.playAnim=function(){d.play()};this.getX=function(){return d.x};this.getY=function(){return d.y};
this.setPosition=function(b,c){d.x=b;d.y=c};this.setScale=function(b){d.scaleX=b;d.scaleY=b};this.setVisible=function(b){d.visible=b};this.unload=function(){k.removeChild(d)};k=e;this._init(c,f,b);return this}
function CFlag(c,f,b,e,d,k){var h=null,g=null,a,l=null,m,p,n=!1,u=!1,v;this._init=function(b,c,d,e,f){var k=new createjs.SpriteSheet({images:[d],frames:{width:d.width/6,height:d.height/6,regX:d.width/2/6,regY:d.height/2/6}});a=createSprite(k,e,d.width/2/6,d.height/2/6,d.width/6,d.height/6);a.gotoAndStop(e);a.x=b;a.y=c;p=m=1;v.addChild(a);if(u=f)s_bMobile||(a.cursor="pointer"),this._initListener(),h=[],g=[]};this.unload=function(){u&&(a.off("mousedown",this.buttonDown),a.off("pressup",this.buttonRelease));
v.removeChild(a)};this.setVisible=function(b){a.visible=b};this.setCursorType=function(b){a.cursor=b};this._initListener=function(){a.on("mousedown",this.buttonDown);a.on("pressup",this.buttonRelease)};this.addEventListener=function(a,b,c){h[a]=b;g[a]=c};this.addEventListenerWithParams=function(a,b,c,d){h[a]=b;g[a]=c;l=d};this.buttonRelease=function(){n||(a.scaleX=0<m?m:-m,a.scaleY=0<p?p:-p,playSound("click",1,0),h[ON_MOUSE_UP]&&h[ON_MOUSE_UP].call(g[ON_MOUSE_UP],l))};this.buttonDown=function(){n||
(a.scaleX=0<m?m-.1:-m+.1,a.scaleY=0<p?p-.1:-p+.1,h[ON_MOUSE_DOWN]&&h[ON_MOUSE_DOWN].call(g[ON_MOUSE_DOWN],l))};this.rotation=function(b){a.rotation=b};this.getButton=function(){return a};this.setPosition=function(b,c){a.x=b;a.y=c};this.setX=function(b){a.x=b};this.setY=function(b){a.y=b};this.getButtonImage=function(){return a};this.block=function(b){n=b;a.scaleX=m;a.scaleY=p};this.setScaleX=function(b){m=a.scaleX=b};this.setScale=function(b){a.scaleX=b;p=m=a.scaleY=b};this.changeTeam=function(b){a.gotoAndStop(b)};
this.getX=function(){return a.x};this.getY=function(){return a.y};this.showAnimation=function(b,c){a.scaleX=0;a.scaleY=0;createjs.Tween.get(a).wait(b).to({scaleY:p,scaleX:m},c,createjs.Ease.elasticOut)};this.removeAllTweens=function(){createjs.Tween.removeTweens(a)};v=k;this._init(c,f,d,b,e);return this}
function COpponent(c,f,b,e,d,k,h){var g,a,l,m,p,n,u=0,v,q,x,w,r,t,z,C,A=!1,D=!1,y=!1,F=!1,B=!1,N=!1,S=!1,G,H,Q,I,R,K;this._init=function(b,c,d,e,f,h,k){C=k;k=new createjs.SpriteSheet({images:[d],frames:{width:d.width/8,height:d.height/7,regX:d.width/2/8,regY:d.height/2/7},animations:{idle:[0,11,"idle",.5],run:[12,22],shot:[23,28],head_shot_run:[29,37],head_shot_idle:[38,48],heel_shot:[49,55],reverse:{frames:[22,21,20,19,18,17,16,15,14,13,12]}}});g=createSprite(k,"idle",d.width/2/8,d.height/2/7,d.width/
8,d.height/7);g.x=b;g.y=c;g.scaleX=-1;m=d.width/8;R=H=I=Q=0;K=TIME_TRY_TO_SHOT_BALL_OPPONENT;z=h;b=m;a=CANVAS_WIDTH+-m;l=b;n=e;p=CHARACTER_SPEED*n;v=OPPONENT_DISTANCE_PROTECTION;t=f;C.addChild(g)};this.setChildIndex=function(a){C.setChildIndex(g,a)};this.getChildIndex=function(){return C.getChildIndex(g)};this.getX=function(){return g.x};this.getY=function(){return g.y};this.removeAllComponent=function(){!0===A?(s_oGame.removeLeg(x),A=!1):!0===D?(s_oGame.removeHead(w),D=!1):!0===y&&(s_oGame.removeLeg(r),
y=!1)};this.setPosition=function(a,b){null!==a&&(g.x=a);null!==b&&(g.y=b)};this.rotate=function(a){g.scaleX=a};this.changeState=function(a){g.gotoAndPlay(a);"shot"!==a&&"head_shot_run"!==a&&"head_shot_idle"!==a&&"heel_shot"!==a||this._onFinishAnimation()};this.stopAnimation=function(){g.stop()};this.playAnimation=function(){g.play()};this._onFinishAnimation=function(){g.on("animationend",function(){0===u?(g.gotoAndPlay("idle"),q="idle"):-1===u?(g.gotoAndPlay("reverse"),q="reverse"):(g.gotoAndPlay("run"),
q="run");g.removeAllEventListeners()})};this.unload=function(){C.removeChild(g)};this.createHead=function(){w=t.addHead({x:g.x+OFFSET_HEAD_POS_OPPONENT.x,y:g.y+OFFSET_HEAD_POS_OPPONENT.y},OPPONENT_HEAD);D=!0};this.createHeel=function(){r=t.addLeg({x:g.x+OFFSET_HEEL_POS_OPPONENT.x,y:g.y+OFFSET_HEEL_POS_OPPONENT.y},OPPONENT_HEEL);y=!0};this.createLeg=function(){x=t.addLeg({x:g.x+OFFSET_LEG_POS_OPPONENT.x,y:g.y+OFFSET_LEG_POS_OPPONENT.y},OPPONENT_LEG);A=!0};this.getLegShoot=function(){return A};this.getHeadShoot=
function(){return D};this.getHeelShoot=function(){return y};this.protectTheGoal=function(a,b,c,d,e){10<a||-10>a?g.x<b?this.move(1,z):g.x>b&&this.move(-1,z):this.move(0,z);this.shot(c,d,e)};this.saveTheBallFromGoal=function(a,b){B=!0;10<b||-10>b?this.move(1,z):this.move(0,z);a<HEEL_SHOOT_DISTANCE_OPPONENT&&(0>=G?!1===y&&(this.createHeel(),this.changeState("heel_shot"),G=randomRange(REACT_OPP_FOR_HEEL_SHOOT.min,REACT_OPP_FOR_HEEL_SHOOT.max)):G-=1/createjs.Ticker.framerate)};this.move=function(b){1===
b?("reverse"!==q&&this.changeState("reverse"),q="reverse"):-1===b?("run"!==q&&this.changeState("run"),q="run"):0===b&&("idle"!==q&&this.changeState("idle"),q="idle");u=b;var c=s_oPhysicsController.getElementPosition(z.fixture1),d=s_oPhysicsController.getElementPosition(z.fixture2),e=s_oPhysicsController.getElementPosition(z.fixture3);c.x+=p*b;c.x>=a?c.x=a:c.x<=l&&(c.x=l);d.x=c.x+OPPONENT_COLLISION.sph_offset.x-OPPONENT_COLLISION.rec_offset.x;e.x=c.x+OPPONENT_COLLISION.rec_neck.x-OPPONENT_COLLISION.rec_offset.x;
s_oPhysicsController.setElementPosition(z.fixture1,c);s_oPhysicsController.setElementPosition(z.fixture2,d);s_oPhysicsController.setElementPosition(z.fixture3,e);g.x=c.x+OPPONENT_COLLISION.rec_center_width;g.y=c.y-OPPONENT_COLLISION.rec_offset.y};this.goToBall=function(a,b,c,d,e,f){c>MIN_DISTANCE_BETWEEN_PLAYER&&0<K||b.x<e.x||1>f?this.move(-1,z):0<K||g.x>STOP_BACK_WALK_POSITION?(this.move(0,z),K=0>=K?TIME_TRY_TO_SHOT_BALL_OPPONENT:K-d):c<GO_TO_DISTANCE&&e.x<b.x?this.move(1,z):K=TIME_TRY_TO_SHOT_BALL_OPPONENT;
this.shot(a,b,d)};this.shot=function(a,b,c){a<DISTANCE_START_SHOOT_OPPONENT&&(0>=I?(b.y<g.y?!1===D&&(this.createHead(),1===u||-1===u?this.changeState("head_shot_run"):this.changeState("head_shot_idle")):!1===A&&(this.createLeg(),this.changeState("shot")),I=randomRange(TIME_INTERVAL_SHOOT.min,TIME_INTERVAL_SHOOT.max)):I-=c)};this.checkAFinishedShoot=function(){if(!0===A){var a=s_oPhysicsController.getJointAngle(x.jointLeg),b={x:g.x+OFFSET_LEG_POS_OPPONENT.x,y:g.y+OFFSET_LEG_POS_OPPONENT.y};s_oPhysicsController.setElementPosition(x.fixture2,
b);a<=DELETE_LEG_ANGLE_OPPONENT&&(s_oGame.removeLeg(x),A=!1)}else!0===D?(a=s_oPhysicsController.getJointTranslation(w.joint),b={x:g.x+OFFSET_HEAD_POS_OPPONENT.x,y:g.y+OFFSET_HEAD_POS_OPPONENT.y},s_oPhysicsController.setElementPosition(w.fixture2,b),a>=PLAYER_HEAD.distance-.1&&(s_oGame.removeHead(w),D=!1)):!0===y&&(a=s_oPhysicsController.getJointAngle(r.jointLeg),b={x:g.x+OFFSET_HEEL_POS_OPPONENT.x,y:g.y+OFFSET_HEEL_POS_OPPONENT.y},s_oPhysicsController.setElementPosition(r.fixture2,b),a>=DELETE_HEEL_ANGLE_OPPONENT&&
(s_oGame.removeLeg(r),y=!1))};this.getAggressive=function(){return S};this.setAggressive=function(a,b){v=(S=a)?OPPONENT_DISTANCE_PROTECTION_AGG:OPPONENT_DISTANCE_PROTECTION[b]};this.setDistanceProtection=function(a){v=a};this.restart=function(){N=B=F=!1;R=H=I=Q=0;this.move(0,z)};this.activeProtectGoal=function(){!1===F&&(F=!0,N=!1,H=randomRange(TIME_REACTION_FROM_SAVE_TO_GO.min,TIME_REACTION_FROM_SAVE_TO_GO.max),I=randomRange(.5*TIME_INTERVAL_SHOOT.min,.5*TIME_INTERVAL_SHOOT.max),Q=randomRange(TIME_IN_PROTECT_STATE.min,
TIME_IN_PROTECT_STATE.max),K=TIME_TRY_TO_SHOT_BALL_OPPONENT)};this.activeGoToBall=function(){!1===N&&(I=randomRange(.5*TIME_INTERVAL_SHOOT.min,.5*TIME_INTERVAL_SHOOT.max),K=TIME_TRY_TO_SHOT_BALL_OPPONENT,F=!1,N=!0)};this.chooseAction=function(a,b,c){B=!1;0>=H?a>v&&b.x<BALL_VELOCITY_X_REACTION?this.activeProtectGoal():a<v||b.x>BALL_VELOCITY_X_REACTION_ATTACK?this.activeGoToBall():b.x<BALL_VELOCITY_X_REACTION_ATTACK?this.activeProtectGoal():this.activeGoToBall():H-=c};this.decision=function(a,b,c,d,
e){g.x<a.x+b?(!1===B&&(G=randomRange(REACT_OPP_FOR_HEEL_SHOOT.min,REACT_OPP_FOR_HEEL_SHOOT.max)),B=!0,N=F=!1):this.chooseAction(c,d,e)};this.update=function(a,b,c,d){var e=1/createjs.Ticker.framerate;this.checkAFinishedShoot();var f=s_oGame.getBallSpritePos(),h=OBJECT[1][0].x,k=h-g.x,l=distanceV2({x:g.x,y:g.y},f),m=distanceV2({x:g.x,y:g.y},c),n=OFFSET_OPPONENT_FORWOARD_BALL+.2*(g.y-OPPONENT_COLLISION.recHeight-f.y);0>=R?(this.decision(f,n,l,b,e),R=TIME_REFRESH_AI[d]):R-=e;F?0<Q?(this.protectTheGoal(k,
h,l,f,e),Q-=e):(F=!1,N=!0,H=randomRange(TIME_AFTER_REACTION.min,TIME_AFTER_REACTION.max)):N?this.goToBall(l,f,m,e,c,b.x*b.x+b.y*b.y):B?this.saveTheBallFromGoal(l,k):this.move(0);s_oPhysicsController.setElementAngle(a.fixture1,0)};this._init(c,f,b,e,d,k,h)}
function CTeamChoose(){var c,f,b,e,d,k,h,g,a,l,m,p,n,u,v,q,x,w,r;this._init=function(){d=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(d);a=new createjs.Shape;a.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);a.alpha=.5;s_oStage.addChild(a);var t=s_oSpriteLibrary.getSprite("msg_box");k=createBitmap(t);k.x=.5*CANVAS_WIDTH;k.y=.5*CANVAS_HEIGHT;k.regX=.5*t.width;k.regY=.5*t.height;s_oStage.addChild(k);w=[];x=[];q=new createjs.Container;r=0;t=s_oSpriteLibrary.getSprite("flags");
n=new CFlag(928,293,0,!1,t,q);n.block(!0);for(var t=START_POS_FLAG.x,z=START_POS_FLAG.y,C=s_oSpriteLibrary.getSprite("flags_small"),A=0;A<TOT_TEAM;A++){this._createFlag(A,t,z,Math.floor(500*Math.random()),1500,C,q);var D=s_oSpriteLibrary.getSprite("turn_"+A);w[A]=new CTurnPlayer(976,423,D,q);w[A].setVisible(!1);w[A].setScale(.92);w[A].stopAnim();t<FLAG_LIMIT_POS_X?t+=FLAG_ADDED_POS.x:(t=START_POS_FLAG.x,z+=FLAG_ADDED_POS.y)}w[0].setVisible(!0);w[0].playAnim();t=s_oSpriteLibrary.getSprite("team_selection");
p=createBitmap(t);p.x=x[0].getX();p.y=x[0].getY()+3;p.regX=.5*t.width;p.regY=.5*t.height;s_oStage.addChild(q);q.y=0;g=new createjs.Container;t=new createjs.Text(TEXT_SELECT_YOUR_TEAM,"48px "+FONT_GAME,TEXT_COLOR);t.textAlign="center";t.x=0;t.y=0;z=new createjs.Text(TEXT_SELECT_YOUR_TEAM,"48px "+FONT_GAME,"#ff6000");z.textAlign="center";z.x=0;z.y=0;z.outline=5;g.x=682;g.y=115;g.addChild(z,t);s_oStage.addChild(g);v=new createjs.Text(TEXT_TEAM[0],"48px "+FONT_GAME,"#ff6000");v.textAlign="center";v.textBaseline=
"middle";v.x=590;v.y=498;v.outline=4;s_oStage.addChild(v);u=new createjs.Text(TEXT_TEAM[0],"48px "+FONT_GAME,TEXT_COLOR);u.textAlign="center";u.textBaseline="middle";u.x=v.x;u.y=v.y;s_oStage.addChild(u);if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)t=s_oSpriteLibrary.getSprite("audio_icon"),b=CANVAS_WIDTH-t.width/2-60,e=t.height/2+20,l=new CToggle(b,e,t,s_bAudioActive,s_oStage),l.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);t=s_oSpriteLibrary.getSprite("but_continue_small");h=new CGfxButton(997,
481,t,s_oStage);h.addEventListener(ON_MOUSE_UP,this._onButContinueRelease,this);h.pulseAnimation();t=s_oSpriteLibrary.getSprite("but_exit");c=CANVAS_WIDTH-t.height/2-20;f=t.height/2+20;m=new CGfxButton(c,f,t,s_oStage);m.addEventListener(ON_MOUSE_UP,this._onExit,this);a=new createjs.Shape;a.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(a);createjs.Tween.get(a).to({alpha:0},1E3).call(function(){a.visible=!1;q.addChild(p)});this.refreshButtonPos(s_iOffsetX,s_iOffsetY)};
this._createFlag=function(a,b,c,d,e,g,f){x[a]=new CFlag(b,c,a,!0,g,f);x[a].addEventListenerWithParams(ON_MOUSE_UP,this._onButTeamChoose,this,a);x[a].setScale(1);x[a].showAnimation(d,e)};this.refreshButtonPos=function(a,d){m.setPosition(c-a,d+f);!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||l.setPosition(b-a,d+e)};this._onButTeamChoose=function(a){r!==a&&(w[a].setVisible(!0),w[a].playAnim(),n.changeTeam(a),p.x=x[a].getX(),p.y=x[a].getY()+3,u.text=TEXT_TEAM[a],v.text=u.text,w[r].setVisible(!1),w[r].stopAnim(),
r=a)};this.unload=function(){for(var a=0;a<x.length;a++)x[a].unload(),x[a]=null;m.unload();m=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)l.unload(),l=null;s_oStage.removeAllChildren();createjs.Tween.removeAllTweens();s_oTeamChoose=null};this._onExit=function(){this.unload();s_oMain.gotoMenu()};this._onAudioToggle=function(){createjs.Sound.setMute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButContinueRelease=function(){this.unload();s_oMain.gotoGame(r)};s_oTeamChoose=this;this._init()}
var s_oTeamChoose=null;
function CVsPanel(c,f,b,e,d){var k,h,g,a,l,m,p,n,u,v,q,x,w,r,t;this._init=function(b,c,d,e,f){g=new createjs.Container;t=new createjs.Shape;t.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);t.alpha=.5;t.on("click",function(){});g.addChild(t);null!==b&&(a=createBitmap(b),a.x=.5*CANVAS_WIDTH,a.y=.5*CANVAS_HEIGHT,a.regX=.5*b.width,a.regY=.5*b.height,g.addChild(a));q=new createjs.Container;x=new createjs.Container;w=new createjs.Container;b=e+1;e=new createjs.Text(TEXT_MATCH+" "+
b,"32px "+FONT_GAME,"#ff6000");e.x=.5*CANVAS_WIDTH;e.y=.5*CANVAS_HEIGHT-200;e.textAlign="center";e.outline=5;g.addChild(e);b=new createjs.Text(TEXT_MATCH+" "+b,"32px "+FONT_GAME,TEXT_COLOR);b.x=.5*CANVAS_WIDTH;b.y=.5*CANVAS_HEIGHT-200;b.textAlign="center";g.addChild(b);b=s_oSpriteLibrary.getSprite("flags");l=new CFlag(.5*CANVAS_WIDTH-225,313,c,!1,b,q);l.setScale(.9);m=new CFlag(.5*CANVAS_WIDTH+225,313,d,!1,b,x);m.setScale(.9);c=s_oSpriteLibrary.getSprite("turn_"+c);u=new CTurnPlayer(.5*CANVAS_WIDTH-
280,451,c,q);u.gotoAndStopAnim(21);u.setScale(.9);d=s_oSpriteLibrary.getSprite("turn_"+d);v=new CTurnPlayer(.5*CANVAS_WIDTH+280,451,d,x);v.gotoAndStopAnim(0);v.setScale(.9);w.x=.5*CANVAS_WIDTH;w.y=.5*CANVAS_HEIGHT;g.addChild(q,x,w);null===f&&(f=0);createjs.Tween.get(x).wait(f).to({x:0},1E3,createjs.Ease.elasticOut);var h=this;createjs.Tween.get(q).wait(f).to({x:0},1E3,createjs.Ease.elasticOut).call(function(){h._createVsText(w);w.scaleX=9;w.scaleY=9;createjs.Tween.get(w).to({scaleX:1,scaleY:1},1E3,
createjs.Ease.bounceOut).call(function(){h._createButContinue(g,.5*CANVAS_WIDTH,.5*CANVAS_HEIGHT+150)})});s_oStage.addChild(g)};this._createButContinue=function(a,b,c){k=b;h=c;b=s_oSpriteLibrary.getSprite("but_continue");r=new CGfxButton(k,h,b,a);r.addEventListener(ON_MOUSE_UP,this._onExitVsPanel,this);r.pulseAnimation()};this._createVsText=function(a){p=new createjs.Text(TEXT_VS,"75px "+FONT_GAME,"#ff6000");p.x=0;p.y=0;p.textAlign="center";p.textBaseline="middle";p.outline=5;a.addChild(p);n=new createjs.Text(TEXT_VS,
"75px "+FONT_GAME,TEXT_COLOR);n.x=0;n.y=0;n.textAlign="center";n.textBaseline="middle";a.addChild(n)};this.setChildIndex=function(a){s_oStage.setChildIndex(g,a)};this.unload=function(){t.off("click",function(){});s_oStage.removeChild(g)};this._onExitVsPanel=function(){this.unload();s_oGame._onExitVsPanel();s_oInterface.unloadHelpPanel()};this._init(c,f,b,e,d);s_oVsPanel=this;return this}var s_oVsPanel=null;
function CGoal(c){var f,b,e,d,k,h;this._init=function(){f=[];var c=s_oSpriteLibrary.getSprite("goal_bottom");b=createBitmap(c);b.x=POS_GOAL_PLAYER_BOTTOM.x;b.y=POS_GOAL_PLAYER_BOTTOM.y;b.regX=.5*c.width;b.regy=.5*c.heigth;h.addChild(b);f[0]=b;e=createBitmap(c);e.x=POS_GOAL_OPPONENT_BOTTOM.x;e.y=POS_GOAL_OPPONENT_BOTTOM.y;e.regX=.5*c.width;e.regy=.5*c.heigth;e.scaleX=-1;h.addChild(e);f[1]=e};this.createGoalFront=function(){var b=s_oSpriteLibrary.getSprite("goal_top");d=createBitmap(b);d.x=POS_GOAL_PLAYER_FRONT.x;
d.y=POS_GOAL_PLAYER_FRONT.y+b.height;d.regX=.5*b.width;d.regY=b.height;h.addChild(d);f[2]=d;k=createBitmap(b);k.x=POS_GOAL_OPPONENT_FRONT.x;k.y=POS_GOAL_OPPONENT_FRONT.y+b.height;k.regX=.5*b.width;k.regY=b.height;k.scaleX=-1;h.addChild(k);f[3]=k};this.getGoalEnemyFront=function(){return k};this.getGoalPlayerFront=function(){return d};this.unload=function(){for(var b=0;b<f.length;b++)h.removeChild(f[b])};h=c;this._init();return this}
function CScoreBoard(c,f,b,e,d){var k,h,g,a,l,m,p;this._init=function(b,c,d,e,f){k={x:c,y:d};h=new createjs.Container;h.x=k.x;h.y=k.y;g=createBitmap(b);g.x=0;g.y=-3;g.regX=.5*b.width;g.regY=0;h.addChild(g);l=new createjs.Text(" 0 - 0 ","24px "+FONT_GAME,"#ff6000");l.x=0;l.y=.5*b.height-3;l.textAlign="center";l.textBaseline="middle";l.outline=5;h.addChild(l);a=new createjs.Text(" 0 - 0 ","24px "+FONT_GAME,TEXT_COLOR);a.x=0;a.y=l.y;a.textAlign="center";a.textBaseline="middle";h.addChild(a);b=s_oSpriteLibrary.getSprite("flags_small");
m=new CFlag(-65,23,e,!1,b,h);m.setScale(.7);p=new CFlag(65,23,f,!1,b,h);p.setScale(.7);s_oStage.addChild(h)};this.changeOpponentTeamFlag=function(a){p.changeTeam(a)};this.getStartPosition=function(){return k};this.setPosition=function(a,b){h.x=a;h.y=b};this.unload=function(){s_oStage.removeChild(h)};this.refresh=function(b){l.text=b;a.text=b};this.getResult=function(){return a.text};this._init(c,f,b,e,d);return this}
function CTimeBoard(c,f,b){var e,d,k,h,g;this._init=function(a,b,c){e={x:b,y:c};d=new createjs.Container;d.x=e.x;d.y=e.y;k=createBitmap(a);k.x=0;k.y=0;k.regX=0;k.regY=0;d.addChild(k);g=new createjs.Text(TEXT_TIME+": 0","22px "+FONT_GAME,"#ff6000");g.x=.5*a.width;g.y=.5*a.height;g.textAlign="center";g.textBaseline="middle";g.outline=4;d.addChild(g);h=new createjs.Text(TEXT_TIME+": 0","22px "+FONT_GAME,TEXT_COLOR);h.x=.5*a.width;h.y=.5*a.height;h.textAlign="center";h.textBaseline="middle";d.addChild(h);
s_oStage.addChild(d)};this.getStartPosition=function(){return e};this.setPosition=function(a,b){d.x=a;d.y=b};this.unload=function(){s_oStage.removeChild(d)};this.refresh=function(a){h.text=a;g.text=a};this._init(c,f,b);return this}
function CTurnBoard(c,f,b){var e,d,k,h,g;this._init=function(a,b,c){g=[];e={x:b,y:c};d=new createjs.Container;d.x=e.x;d.y=e.y;k=createBitmap(a);k.x=0;k.y=0;k.regX=0;k.regY=0;d.addChild(k);b=s_oSpriteLibrary.getSprite("players");h=new CPlayer(30,27,b,-1,!1,!1,0,d);h.rotate(-1);a=s_oSpriteLibrary.getSprite("turn_ball");b=FIRST_POS_X_TURN_BALL;c=27;for(var f=0;f<NUM_OF_SHOT;f++)g[f]=this.createTurnBall(b,c,a),d.addChild(g[f]),b+=STEP_POS_X_TURN_BALL;s_oStage.addChild(d)};this.createTurnBall=function(a,
b,c){var d=createBitmap(c);d.x=a;d.y=b;d.regX=.5*c.width;d.regY=.5*c.height;return d};this.getStartPosition=function(){return e};this.setPosition=function(a,b){d.x=a;d.y=b};this.unload=function(){s_oStage.removeChild(d)};this.refreshTurn=function(a,b){g[a].visible=b};this.setTurn=function(a){h.changeTeam(a)};this._init(c,f,b);return this}
function CCongratulations(c,f){var b,e,d,k,h,g,a,l,m,p,n,u,v,q;this._init=function(c,f){k=createBitmap(s_oSpriteLibrary.getSprite("bg_game"));s_oStage.addChild(k);u=new createjs.Shape;u.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);u.alpha=.5;s_oStage.addChild(u);var r=s_oSpriteLibrary.getSprite("msg_box");h=createBitmap(r);h.x=.5*CANVAS_WIDTH;h.y=.5*CANVAS_HEIGHT;h.regX=.5*r.width;h.regY=.5*r.height;s_oStage.addChild(h);r=s_oSpriteLibrary.getSprite("but_home");b=CANVAS_WIDTH/
2;g=new CGfxButton(b,470,r,s_oStage);g.addEventListener(ON_MOUSE_UP,this._onButMenuRelease,this);g.pulseAnimation();if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)r=s_oSpriteLibrary.getSprite("audio_icon"),e=CANVAS_WIDTH-r.height/2-10,d=r.height/2+10,q=new CToggle(e,d,r,s_bAudioActive,s_oStage),q.addEventListener(ON_MOUSE_UP,this._onAudioToggle,this);a=new createjs.Text(TEXT_CONGRATULATIONS,"36px "+FONT_GAME,"#ff6000");a.x=.5*CANVAS_WIDTH;a.y=.5*CANVAS_HEIGHT-190;a.textAlign="center";a.lineWidth=800;
a.outline=5;s_oStage.addChild(a);l=new createjs.Text(TEXT_CONGRATULATIONS,"36px "+FONT_GAME,TEXT_COLOR);l.x=.5*CANVAS_WIDTH;l.y=a.y;l.lineWidth=a.lineWidth;l.textAlign="center";s_oStage.addChild(l);r=this.createResultText(c);m=new createjs.Text(TEXT_TOTAL_SCORE+": "+f,"30px "+FONT_GAME,"#ff6000");m.x=.5*CANVAS_WIDTH;m.y=.5*CANVAS_HEIGHT+r.offsetY;m.textAlign="center";m.outline=5;s_oStage.addChild(m);p=new createjs.Text(TEXT_TOTAL_SCORE+": "+f,"30px "+FONT_GAME,TEXT_COLOR);p.x=.5*CANVAS_WIDTH;p.y=
.5*CANVAS_HEIGHT+r.offsetY;p.textAlign="center";s_oStage.addChild(p);var t=s_oSpriteLibrary.getSprite("trophy");n=createBitmap(t);n.x=406;n.y=.5*-t.height;n.regX=.5*t.width;n.regY=.5*t.height;s_oStage.addChild(n);createjs.Tween.get(n).wait(r.time).to({y:431},1E3,createjs.Ease.bounceOut);var v=new createjs.Shape;v.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);s_oStage.addChild(v);createjs.Tween.get(v).to({alpha:0},1E3).call(function(){s_oStage.removeChild(v)});this.refreshButtonPos(s_iOffsetX,
s_iOffsetY)};this.createResultText=function(a){v=new createjs.Container;var b=-120,c=200,d=!1,e=0;1===TOT_MATCH%2&&(d=!0,e=TOT_MATCH-1);for(var g=0;g<a.length;g++,c+=150){var f=new createjs.Container;f.alpha=0;var h=a[g].result,k=g+1,l;l=new createjs.Text(h,"28px "+FONT_GAME,"#ff6000");l.x=0;l.y=3;l.textAlign="center";l.outline=5;f.addChild(l);h=new createjs.Text(h,"28px "+FONT_GAME,TEXT_COLOR);h.x=0;h.y=3;h.textAlign="center";f.addChild(h);h=new createjs.Text(k+".","28px "+FONT_GAME,"#ff6000");h.x=
-100;h.y=3;h.textAlign="center";h.outline=5;f.addChild(h);k=new createjs.Text(k+".","28px "+FONT_GAME,TEXT_COLOR);k.x=h.x;k.y=3;k.textAlign="center";f.addChild(k);k=s_oSpriteLibrary.getSprite("flags_small");(new CFlag(-65,15,a[g].player_team,!1,k,f)).setScale(.7);(new CFlag(65,15,a[g].opponent_team,!1,k,f)).setScale(.7);f.y=.5*CANVAS_HEIGHT+b;0===g%2?(k=e===g&&d?.5*CANVAS_WIDTH:.5*CANVAS_WIDTH-250,f.x=-100):(f.x=CANVAS_WIDTH+100,k=.5*CANVAS_WIDTH+250,b+=40);createjs.Tween.get(f).wait(c).to({x:k,alpha:1},
500,createjs.Ease.cubicIn);v.addChild(f)}s_oStage.addChild(v);return{offsetY:b+50,time:c+150}};this.refreshButtonPos=function(a,b){!1!==DISABLE_SOUND_MOBILE&&!1!==s_bMobile||q.setPosition(e-a,b+d)};this.unload=function(){g.unload();g=null;if(!1===DISABLE_SOUND_MOBILE||!1===s_bMobile)q.unload(),q=null;s_oStage.removeAllChildren();createjs.Tween.removeAllTweens();s_oCongratulations=null};this._onAudioToggle=function(){createjs.Sound.setMute(s_bAudioActive);s_bAudioActive=!s_bAudioActive};this._onButMenuRelease=
function(){this.unload();s_oMain.gotoMenu()};s_oCongratulations=this;this._init(c,f)}var s_oCongratulations=null;
function CCreditsPanel(){var c,f,b,e,d,k,h,g,a,l;this._init=function(){l=new createjs.Container;s_oStage.addChild(l);var m=s_oSpriteLibrary.getSprite("msg_box");h=new createjs.Shape;h.graphics.beginFill("#000").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);h.alpha=.5;h.on("click",this._onLogoButRelease);h.cursor="pointer";l.addChild(h);f=createBitmap(m);f.x=CANVAS_WIDTH_HALF;f.y=CANVAS_HEIGHT_HALF;f.regX=.5*m.width;f.regY=.5*m.height;l.addChild(f);m=s_oSpriteLibrary.getSprite("but_exit");c=.5*CANVAS_WIDTH+
330;e=new CGfxButton(c,140,m,l);e.addEventListener(ON_MOUSE_UP,this.unload,this);k=new createjs.Text(TEXT_CREDITS_DEVELOPED,"40px "+FONT_GAME,"#ff6000");k.textAlign="center";k.textBaseline="alphabetic";k.x=CANVAS_WIDTH/2;k.y=200;k.outline=5;l.addChild(k);d=new createjs.Text(TEXT_CREDITS_DEVELOPED,"40px "+FONT_GAME,TEXT_COLOR);d.textAlign="center";d.textBaseline="alphabetic";d.x=k.x;d.y=k.y;l.addChild(d);m=s_oSpriteLibrary.getSprite("logo_ctl");b=createBitmap(m);b.regX=m.width/2;b.regY=m.height/2;
b.x=CANVAS_WIDTH/2;b.y=300;l.addChild(b);a=new createjs.Text(TEXT_LINK1,"36px "+FONT_GAME,"#ff6000");a.textAlign="center";a.textBaseline="alphabetic";a.x=CANVAS_WIDTH/2;a.y=430;a.outline=5;l.addChild(a);g=new createjs.Text(TEXT_LINK1,"36px "+FONT_GAME,TEXT_COLOR);g.textAlign="center";g.textBaseline="alphabetic";g.x=a.x;g.y=a.y;l.addChild(g)};this.unload=function(){h.off("click",this._onLogoButRelease);e.unload();e=null;s_oStage.removeChild(l)};this._onLogoButRelease=function(){window.open("http://www.codethislab.com/index.php?&l=en",
"_blank")};this._init()}
function CPause(){var c;this._init=function(){var f=new createjs.Container;f.alpha=0;c=new createjs.Shape;c.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);c.alpha=.5;var b=new createjs.Shape;b.graphics.beginFill("#0f0f0f").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);c.hitArea=b;c.on("click",function(){});f.addChild(c);b=new createjs.Text(TEXT_PAUSE,"50px "+FONT_GAME,"#000000");b.x=.5*CANVAS_WIDTH;b.y=.5*CANVAS_HEIGHT-130;b.textAlign="center";b.outline=5;f.addChild(b);var e=new createjs.Text(TEXT_PAUSE,
"50px "+FONT_GAME,TEXT_COLOR);e.x=b.x;e.y=b.y;e.textAlign="center";f.addChild(e);b=s_oSpriteLibrary.getSprite("but_continue");(new CGfxButton(.5*CANVAS_WIDTH,.5*CANVAS_HEIGHT+70,b,f)).addEventListenerWithParams(ON_MOUSE_UP,this._onLeavePause,this,f);s_oStage.addChild(f);createjs.Tween.get(f).to({alpha:1},300,createjs.quartOut)};this.unload=function(){c.off("click",function(){});s_oStage.removeChild(void 0)};this._onLeavePause=function(c){createjs.Tween.get(c).to({alpha:0},300,createjs.quartIn).call(function(){s_oInterface.unloadPause();
s_oGame.unpause(!0)})};this._init();return this}
function CAreYouSurePanel(c){var f,b,e,d,k,h,g,a;this._init=function(){h=new createjs.Container;h.visible=!1;g.addChild(h);a=new createjs.Shape;a.graphics.beginFill("black").drawRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);a.alpha=.5;a.on("click",function(){});h.addChild(a);var c=s_oSpriteLibrary.getSprite("msg_box");f=createBitmap(c);f.x=CANVAS_WIDTH_HALF;f.y=CANVAS_HEIGHT_HALF;f.regX=.5*c.width;f.regY=.5*c.height;h.addChild(f);b=new createjs.Text(TEXT_ARE_SURE,"50px "+FONT_GAME,"#ff6000");b.x=CANVAS_WIDTH/
2;b.y=250;b.textAlign="center";b.textBaseline="middle";b.outline=5;h.addChild(b);e=new createjs.Text(b.text,"50px "+FONT_GAME,TEXT_COLOR);e.x=b.x;e.y=b.y;e.textAlign="center";e.textBaseline="middle";h.addChild(e);d=new CGfxButton(CANVAS_WIDTH/2+310,.5*CANVAS_HEIGHT+150,s_oSpriteLibrary.getSprite("but_yes"),h);d.addEventListener(ON_MOUSE_UP,this._onButYes,this);k=new CGfxButton(CANVAS_WIDTH/2-310,.5*CANVAS_HEIGHT+150,s_oSpriteLibrary.getSprite("but_not"),h);k.addEventListener(ON_MOUSE_UP,this._onButNo,
this)};this.show=function(){s_oGame.unpause(!1);h.visible=!0};this._onButYes=function(){s_oGame.unpause(!0);s_oGame.onExit();a.removeAllEventListeners()};this._onButNo=function(){s_oGame.unpause(!0);h.visible=!1;a.removeAllEventListeners()};g=c;this._init()}
function CVector2(c,f){var b,e;this._init=function(c,f){b=c;e=f};this.add=function(c,f){b+=c;e+=f};this.addV=function(c){b+=c.getX();e+=c.getY()};this.scalarDivision=function(c){b/=c;e/=c};this.subtract=function(c){b-=c.getX();e-=c.getY()};this.scalarProduct=function(c){b*=c;e*=c};this.invert=function(){b*=-1;e*=-1};this.dotProduct=function(c){return b*c.getX()+e*c.getY()};this.set=function(c,f){b=c;e=f};this.setV=function(c){b=c.getX();e=c.getY()};this.length=function(){return Math.sqrt(b*b+e*e)};
this.length2=function(){return b*b+e*e};this.normalize=function(){var c=this.length();0<c&&(b/=c,e/=c)};this.angleBetweenVectors=function(b){b=Math.acos(this.dotProduct(b)/(this.length()*b.length()));return!0===isNaN(b)?0:b};this.getNormalize=function(c){this.length();c.set(b,e);c.normalize()};this.rot90CCW=function(){var c=b;b=-e;e=c};this.rot90CW=function(){var c=b;b=e;e=-c};this.getRotCCW=function(c){c.set(b,e);c.rot90CCW()};this.getRotCW=function(c){c.set(b,e);c.rot90CW()};this.ceil=function(){b=
Math.ceil(b);e=Math.ceil(e)};this.round=function(){b=Math.round(b);e=Math.round(e)};this.toString=function(){return"Vector2: "+b+", "+e};this.print=function(){trace("Vector2: "+b+", "+e+"")};this.getX=function(){return b};this.getY=function(){return e};this.rotate=function(c){var f=b,h=e;b=f*Math.cos(c)+h*Math.sin(c);e=f*-Math.sin(c)+h*Math.cos(c)};this._init(c,f)}
function CEdge(c,f,b,e){var d=null,k=null,h=null,g=null,a=null;this._init=function(a,b,c,d){this.set(a,b,c,d)};this.destroy=function(){a=g=h=k=d=null};this.render=function(a){a.moveTo(d.x,d.y);a.lineTo(k.x,k.y)};this.toString=function(a){trace(a+" "+d.x+" "+d.y+" "+k.x+" "+k.y)};this.add=function(a){d.addV(a);k.addV(a)};this.set=function(a,b,c,e){d=new CVector2;k=new CVector2;d.set(a,b);k.set(c,e);this.calculateNormal();this.calculateCenter()};this.scale=function(a){d.scalarProduct(a);k.scalarProduct(a);
this.calculateNormal();this.calculateCenter()};this.calculateNormal=function(){a=null;a=new CVector2;a.setV(k);a.subtract(d);a.rot90CCW();a.normalize()};this.calculateCenter=function(){h=null;h=centerBetweenPointsV2(d,k);g=new CVector2;g.setV(a);g.scalarProduct(5);g.addV(h)};this.getPointA=function(){return d};this.m_pCenter=function(){return h};this.getPointB=function(){return k};this.getNormal=function(){return a};this.renderNormal=function(a){a.moveTo(h.x,h.y);a.lineTo(g.x,g.y)};this._init(c,f,
b,e);return this}
function CArrow(c,f,b){var e,d,k,h,g,a,l,m,p,n;this._init=function(b,c){e=new createjs.Container;e.x=b;e.y=c;m.addChild(e);p=new createjs.Shape;p.graphics.beginFill("rgba(0,0,0,0.2)").drawCircle(0,0,2);e.addChild(p);n=new createjs.Shape;n.graphics.setStrokeDash([14,14],2);n.graphics.setStrokeStyle(5);n.graphics.beginStroke("rgba(255,255,255,1)");n.graphics.moveTo(0,0);n.graphics.lineTo(0,0);e.addChild(n);var f=s_oSpriteLibrary.getSprite("arrow");k=createBitmap(f);k.regY=.5*f.height;e.addChild(k);
h=createBitmap(s_oSpriteLibrary.getSprite("arrow_fill"));h.regY=.5*f.height;e.addChild(h);a=f.width;l=f.height;d=new createjs.Shape;d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(k.x,k.y,0,l);d.regY=.5*l;e.addChild(d);f=s_oSpriteLibrary.getSprite("arrow_frame");g=createBitmap(f);g.regX=0;g.regY=.5*f.height;e.addChild(g);h.mask=d};this.unload=function(){m.removeChild(e)};this.setVisible=function(a){e.visible=a};this.setAngle=function(a){e.rotation=a};this.setPosition=function(a,b){e.x=a;e.y=b};
this.setX=function(a){e.x=a};this.setY=function(a){e.y=a};this.getX=function(){return e.x};this.getY=function(){return e.y};this.mask=function(b){d.graphics.clear();b=Math.floor(b*a/100);d.graphics.beginFill("rgba(0,0,0,0.01)").drawRect(k.x,k.y,b,l)};this.circle=function(b){b=Math.floor(b*a/100);p.graphics.clear();p.graphics.beginFill("rgba(0,0,0,0.2)").drawCircle(0,0,b);n.graphics.clear();n.graphics.setStrokeDash([14,14],2);n.graphics.setStrokeStyle(5);n.graphics.beginStroke("rgba(255,255,255,1)");
n.graphics.moveTo(0,0);n.graphics.lineTo(-b,0)};this.animateMask=function(b){var c=this;createjs.Tween.get(d.graphics.command).to({w:a},b,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(d.graphics.command).to({w:0},b,createjs.Ease.cubicInOut).call(function(){c.animateMask(b)})});createjs.Tween.get(p.graphics.command).to({radius:a},b,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(p.graphics.command).to({radius:0},b,createjs.Ease.cubicInOut)});createjs.Tween.get(n.graphics.command).to({x:-a},
b,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(n.graphics.command).to({x:0},b,createjs.Ease.cubicInOut)})};this.animateRotation=function(a){var b=this;createjs.Tween.get(e).to({rotation:35},a,createjs.Ease.cubicInOut).call(function(){createjs.Tween.get(e).to({rotation:-35},a,createjs.Ease.cubicInOut).call(function(){b.animateRotation(a)})})};m=b;this._init(c,f);return this}
function CLevelScoreBoard(c,f,b){var e,d,k,h,g;this._init=function(a,b,c){e={x:b,y:c};d=new createjs.Container;d.x=e.x;d.y=e.y;k=createBitmap(a);k.x=0;k.y=0;k.regX=0;k.regY=0;d.addChild(k);g=new createjs.Text("0 pt","22px "+FONT_GAME,"#ff6000");g.x=.5*a.width;g.y=.5*a.height;g.textAlign="center";g.textBaseline="middle";g.outline=5;d.addChild(g);h=new createjs.Text("0 pt","22px "+FONT_GAME,TEXT_COLOR);h.x=.5*a.width;h.y=.5*a.height;h.textAlign="center";h.textBaseline="middle";d.addChild(h);s_oStage.addChild(d)};
this.getStartPosition=function(){return e};this.setPosition=function(a,b){d.x=a;d.y=b};this.unload=function(){s_oStage.removeChild(d)};this.refresh=function(a){h.text=a+" "+TEXT_PT;g.text=h.text};this._init(c,f,b);return this}
function CArrowPlayerSelected(c,f,b,e){var d,k,h;this._init=function(b,a,c){k=createBitmap(c);k.x=b;k.y=a;k.regX=.5*c.width;k.regY=.5*c.height;d=a;h.addChild(k)};this.unload=function(){this.removeTween();h.removeChild(k)};this.setVisible=function(b){k.visible=b};this.setPosition=function(b,a){k.x=b;d=k.y=a};this.animation=function(){var b=this;createjs.Tween.get(k).to({y:d+Y_POS_ARROW_SELECTED},400,createjs.Ease.cubicOut).call(function(){createjs.Tween.get(k).to({y:d-Y_POS_ARROW_SELECTED},400,createjs.Ease.cubicOut).call(function(){b.animation()})})};
this.getX=function(){return k.x};this.getY=function(){return k.y};this.removeTween=function(){createjs.Tween.removeTweens(k)};h=e;this._init(c,f,b);return this}
function CInvisibleCollision(c,f,b,e,d,k){var h,g,a,l,m,p,n,u,v,q;this._init=function(b,c,d,e,f){n=d;SHOW_COLLISION&&(d=new createjs.Graphics,d.beginFill(createjs.Graphics.getRGB(255,0,0)),d.drawCircle(0,0,f),a=new createjs.Shape(d),a.x=b,a.y=c,l.addChild(a));v=new CVector2;v.set(b,c);q=new CVector2;q.set(0,0);m=f;p=f*f;u=e;h=b;g=c};this.getX=function(){return v.getX()};this.getY=function(){return v.getY()};this.resetPos=function(){SHOW_COLLISION&&(a.x=h,a.y=g);v.set(h,g)};this.isGoalKeeper=function(){return!1};
this.setPosition=function(b,c){SHOW_COLLISION&&(null!==b&&(a.x=b),null!==c&&(a.y=c))};this.rotate=function(b){a.scaleX=b};this.setVisible=function(b){a.visible=b};this.unload=function(){SHOW_COLLISION&&l.removeChild(a)};this.vPos=function(){return v};this.getRadius=function(){return m};this.getID=function(){return n};this.type=function(){return u};this.getRadiusQuadro=function(){return p};this.getChildIndex=function(){SHOW_COLLISION&&l.getChildIndex(a)};this.setChildIndex=function(b){SHOW_COLLISION&&
l.setChildIndex(a,b)};this.getObject=function(){return SHOW_COLLISION?a:null};this.unload=function(){SHOW_COLLISION&&l.removeChild(a);a=null};l=k;this._init(c,f,b,e,d);return this};
