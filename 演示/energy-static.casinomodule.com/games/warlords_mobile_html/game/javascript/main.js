Sys.ns("Core");Core.StateHandler={constructor:function(){var a=this;Core.StateHandler.superclass.constructor.apply(a,arguments);a.useLogging=false;a.states=window.GenericStates||{};a.stateStack=[];a.runningStateMachine=false},registerEvents:function(c){var d=this,b=c.length,a;if(Sys.isArray(c)){for(a=-1;++a<b;){d.addListener(c[a],d.onDefaultEventHandler.bind(d,c[a]))}}else{if(Sys.isString(c)){d.addListener(c,d.onDefaultEventHandler.bind(d,c))}}},onDefaultEventHandler:function(a){this.dispatchEvent(a);this.activateStateMachine()},initStateHandler:function(){var b=this;Sys.iterate(window.GenericStates||{},function(c,d){b._registerTrigger(d)});EventHandler.sortEventListeners(this);var a=Resources.readData("gameServerInitResponse");if(a.restore!==true){this.pushState(this.states.idle)}this.pushState(this.states.beforeLoaderClose);this.pushState(this.states.setupGame);this.activateStateMachine()},activateStateMachine:function(){var a=this,b;if(a.runningStateMachine){return}a.runningStateMachine=true;while(a.hasStatesInStack()){if(!Sys.isEmpty(a.currentState)){for(b in a.currentState.waitEvents){if(a.currentState.waitEvents.hasOwnProperty(b)&&!a.currentState.waitEvents[b]){a.runningStateMachine=false;return}}setTimeout(a.leaveCurrentState.bind(a),1);return}a.currentState=a.stateStack.pop();a.currentState.execute({stateHandler:a,states:a.states});a.processModuleQueue();if(Sys.isDefined(a.currentState.executeLast)){a.currentState.executeLast({stateHandler:a,states:a.states})}a.fireEvent("notify:stateHandler.entering"+a.currentState.name+"State")}a.runningStateMachine=false},leaveCurrentState:function(){var a=this;a.fireEvent("notify:stateHandler.leaving"+a.currentState.name+"State");a.currentState=undefined;a.runningStateMachine=false;a.activateStateMachine()},processModuleQueue:function(){var c=this,a=Game.moduleLoader.getModuleQueueForState(c.currentState.name),d=a.length,b;for(b=0;b<d;b++){a[b]({stateHandler:c,states:c.states})}},addState:function(a,b){if(!Sys.isDefined(this.states[a])){this.states[a]=b;this._registerTrigger(b)}},_registerTrigger:function(a){if(Sys.isDefined(Services.trigger)){Services.trigger.registerTrigger("notify:stateHandler.entering"+a.name+"State",this,"When entering the state "+a.name);Services.trigger.registerTrigger("notify:stateHandler.leaving"+a.name+"State",this,"When leaving the state "+a.name)}},pushState:function(a){var b;if(this.stateStack.indexOf(a)>-1){return}for(b in a.waitEvents){if(a.waitEvents.hasOwnProperty(b)){a.waitEvents[b]=false}}this.stateStack.push(a)},dispatchEvent:function(b){var a=this;if(!Sys.isEmpty(a.currentState)&&!Sys.isEmpty(a.currentState.waitEvents[b])){a.currentState.waitEvents[b]=true}Sys.each(a.stateStack,function(c){if(!Sys.isEmpty(c.waitEvents[b])){c.waitEvents[b]=true}})},dumpStack:function(c){var b=this,e="";if(b.useLogging){if(!this.currentState){}else{var d=c;Sys.each(Object.getOwnPropertyNames(this.currentState.waitEvents),function(g){var f=b.currentState.waitEvents[g]?"*":" ";e+="\n\t\t("+f+") "+g.replace(/\s/g,"")});d+="\nCurrent state:\t"+this.currentState.name+e;for(var a=this.stateStack.length-1;a>=0;a--){d+="\n\t"+this.stateStack[a].name}}}},hasStates:function(){return Object.keys(this.states).length>0},hasStatesInStack:function(){return this.stateStack.length>0},isRunning:function(){return this.runningStateMachine}};Core.StateHandler=Sys.extend(Sys.Observable,Core.StateHandler,"Core.StateHandler");GenericStates={beforeLoaderClose:{name:"BeforeLoaderClose",execute:function(){},waitEvents:{}},setupGame:{name:"SetupGame",execute:function(){},waitEvents:{}},idle:{name:"Idle",execute:function(a){},waitEvents:{}}};Sys.ns("Core");Core.ModuleLoader={constructor:function(a){Core.ModuleLoader.superclass.constructor.apply(this,arguments);this.init(a)},getModuleQueueForState:function(b){var a=this.stateOrder[b];if(Sys.isDefined(a)){return a}return[]},init:function(a){var c=this,b=Resources.readData("modules");c.stateHandler=a.stateHandler;c.stateOrder=c.getCommonStateOrder();c.addGameSpecificStateOrder();c.loadModules(b);c.updateStates();c.cleanStateQueue();c.fireEvent("notify:moduleLoader.finishedLoadingModules")},loadModules:function(c){var b=this,d=Environment.getCurrentPlatform(),a;b.modules={};Sys.iterate(c,function(f,e){a=(Sys.isArray(e.platforms)&&e.platforms.indexOf(d)===-1);if(!Sys.isDefined(b.modules[f])&&!a){var g=b.getClassFromString(e.module);if(!Sys.isDefined(g)&&e.optional===true){return}b.modules[f]=new g({name:f,model:b.getPlatformSpecificClass(e.model),view:b.getPlatformSpecificClass(e.view),controller:b.getClassFromString(e.controller)});if(Sys.isString(e.global)){if(!Sys.isDefined(window[e.global])){window[e.global]={}}window[e.global][f]=b.modules[f].controller}b.applyMixins(b.modules[f],b.combineMixins(b.modules[f].getMixinDependencies(),e.mixins))}})},combineMixins:function(b,g){var f={},j,a,h,d,e,c,k=Environment.getCurrentPlatform();if(Sys.isArray(b)){e=b;c=b.length}else{e=(b.hasOwnProperty(k))?b[k]:b.fallback;c=e.length}for(d=-1;++d<c;){j=e[d];if(Sys.isObj(j)){h=Object.keys(j)[0];a=j[h];f[h]=a}else{if(Sys.isString(j)){f[j]=undefined}}}if(Sys.isArray(g)){c=g.length;for(d=-1;++d<c;){j=g[d];if(!Sys.isDefined(f[j])){f[j]=undefined}}}return f},applyMixins:function(a,h){var d=["controller","model","view"],n=Object.keys(h),g=n.length,c=d.length,m,k,b,l,f,e;for(f=-1;++f<g;){l=n[f];b=h[l]||{};m=Mixins[l];if(Sys.isDefined(m)){for(e=-1;++e<c;){k=d[e];if(Sys.isDefined(m[k])&&Sys.isDefined(a[k])&&Sys.isDefined(m[k].methods)){this.applyMixinProperties(a[k],m[k].methods)}}for(e=-1;++e<c;){k=d[e];if(Sys.isDefined(m[k])&&Sys.isDefined(a[k])&&Sys.isDefined(m[k].executeOnInstantiation)){this.executeMixinProperties(a[k],m[k].executeOnInstantiation,b)}}}}},applyMixinProperties:function(f,a){var d=Object.keys(a),e=d.length,c,b=0;while(b<e){c=d[b];if(!Sys.isDefined(f[c])){f[c]=a[c]}++b}},executeMixinProperties:function(f,c,d){var b=Object.keys(c),a=b.length,e=0;while(e<a){c[b[e]].call(f,d);++e}},updateStates:function(){var b=this,a=b.modules,c=b.stateHandler.states;b.moduleQueues={};Sys.iterate(a,function(d,f){var e=f.getStateChanges();Sys.iterate(e,function(i,h){if(Sys.isDefined(h.state)){var g=[];b.stateHandler.addState(i,h.state);Sys.iterate(h.state.waitEvents,function(j){g.push(j)});if(g.length>0){b.registerListenersOnStateHandler(f.controller,g)}}})});Sys.iterate(a,function(d,f){var e=f.getStateChanges();Sys.iterate(e,function(h,g){if(!Sys.isDefined(g.state)&&Sys.isDefined(c[h])){if(Sys.isArray(g.waitEvents)){Sys.each(g.waitEvents,function(i){c[h].waitEvents[i]=false});b.registerListenersOnStateHandler(f.controller,g.waitEvents)}if(Sys.isArray(g.queue)){b.updateModuleQueue(d,c[h].name,g.queue)}}})})},registerListenersOnStateHandler:function(d,c){var b=c.length,a;for(a=-1;++a<b;){if(!this.stateHandler.hasListener(c[a])){this.stateHandler.registerEvents(c[a])}}},updateModuleQueue:function(c,e,a){var d=this.stateOrder[e],b;if(Sys.isDefined(d)){b=d.indexOf(c);if(b>=0){d.splice.apply(d,[b,1].concat(a));this.stateOrder[e]=d}else{}}else{}},cleanStateQueue:function(){var a=this;Sys.iterate(a.stateOrder,function(d,b){for(var c=0;c<b.length;c++){if(Sys.isString(b[c])||!Sys.isDefined(b[c])){b.splice(c,1);c--}}})},addGameSpecificStateOrder:function(){var d=this,c=d.stateOrder,b=Resources.readData("config"),a=b.stateOrder;if(Sys.isDefined(a)){Sys.iterate(a,function(f,e){Sys.each(e,function(h){if(!Sys.isDefined(c[f])){c[f]=h.modules}else{if(Sys.isDefined(h.insertBefore)){var g=c[f].indexOf(h.insertBefore)+1;if(g<0){c[f]=h.modules.concat(c[f])}else{c[f].splice.apply(c[f],[g,0].concat(h.modules))}}else{c[f].push.apply(c[f],h.modules)}}})})}},getClassFromString:function(c){if(Sys.isString(c)){var d=c.split("."),b=window,a,e=d.length;for(a=0;a<e;a++){if(Sys.isDefined(b)){b=b[d[a]]}}return b}},getPlatformSpecificClass:function(c){var b=this,a=c;if(Sys.isObj(a)){if(b.isMVCSupported(a)){a=b.getPlatformView(a)}else{}}return b.getClassFromString(a)},isMVCSupported:function(b){var c=Environment.getSupportedPlatforms(),a=true;Sys.iterate(b,function(e,d){if(c.indexOf(e)<0){a=false}});return a},getPlatformView:function(a){var b=Environment.getCurrentPlatform();if(b==="desktop"&&!Sys.isDefined(a[b])){b="tablet"}if(b==="tablet"&&!Sys.isDefined(a[b])){b="mobile"}if(b==="tabletLow"&&!Sys.isDefined(a[b])){b="mobileLow"}if(b==="mobileLow"&&!Sys.isDefined(a[b])){b="mobile"}return a[b]},getCommonStateOrder:function(){return{BeforeLoaderClose:["stage"],Idle:["playForRealPromo"]}}};Core.ModuleLoader=Sys.extend(Sys.Observable,Core.ModuleLoader,"Core.ModuleLoader");Sys.ns("Core.Slots");Core.Slots.ModuleLoader={constructor:function(a){Core.Slots.ModuleLoader.superclass.constructor.apply(this,arguments)},getCommonStateOrder:function(){return{SetupGame:["blurredSymbols"],BeforeLoaderClose:["freeSpinOutro","spinTypeFreespin","spinTypeRespin","countDownFreespins","freeSpinIntro","freeRounds","introMovie","stage"],Idle:["spin","playForRealPromo","customMessages"],Spinning:["serverManager"],ProcessServerResponse:[],BeforeStopping:["customMessages"],Stopping:["spin"],Stopped:["spinTypeRespin","spinTypeBasic","realityCheck","autoPlayer","freeSpinOutro","spinTypeFreespin","g4","freeSpinIntro","freeSpinIntroMovie","countDownFreespins","additionalFreespins","standardWin","bigWin","freeSpinSymbolAttentionAnimation","stickySymbols","spreadingWild"],FreeSpinIntro:["freeRounds"],spinTypeRespinRestore:["freeRounds"],NoWinPresentation:["customMessages"]}}};Core.Slots.ModuleLoader=Sys.extend(Core.ModuleLoader,Core.Slots.ModuleLoader,"Core.Slots.ModuleLoader");Sys.ns("Core");Core.Heart={constructor:function(a){var b=this;Core.Heart.superclass.constructor.apply(b,arguments);b.pulse=5000;b.pulseDelay=1000;b.timeOutDelay=2000;if(Sys.isDefined(a)){b.pulse=a.pulse||b.pulse;b.pulseDelay=a.pulseDelay||b.pulseDelay}b.lastBeat=0;b.flatlined=false;b.on({scope:b,"notify:loader.closed":b.init})},init:function(){this.revive()},flatline:function(){this.flatlined=true;clearTimeout(this.currentBeatTimeout)},revive:function(){this.flatlined=false;this.lastBeat=Date.now();this.beat()},beat:function(){var b=this,a=Date.now();if((a-b.lastBeat)>=(b.pulse+b.pulseDelay)){b.fireEvent("request:errorManager.handleGameInactive");this.flatline()}b.lastBeat=a;if(!b.flatlined){clearTimeout(b.currentBeatTimeout);b.currentBeatTimeout=setTimeout(function(){b.beat()},b.timeOutDelay)}}};Core.Heart=Sys.extend(Sys.Observable,Core.Heart,"Core.Heart");Sys.ns("Mixins");Mixins.animation={controller:{methods:{initAnimations:function(){this.view.initAnimations()}},executeOnInstantiation:{setupEvents:function(){this.on({"notify:animationManager.allImagesLoaded":this.initAnimations})}}},view:{methods:{initAnimations:function(){}}}};Sys.ns("Mixins");Mixins.orientation={controller:{methods:{onPortrait:function(){this.view.onPortrait()},onLandscape:function(){this.view.onLandscape()}},executeOnInstantiation:{setupEvents:function(){this.on({"notify:viewport.PORTRAIT":this.onPortrait,"notify:viewport.LANDSCAPE":this.onLandscape})}}},view:{methods:{onPortrait:function(){this.adaptToOrientation("PORTRAIT");this.currentOrientation="PORTRAIT"},onLandscape:function(){this.adaptToOrientation("LANDSCAPE");this.currentOrientation="LANDSCAPE"},adaptToOrientation:function(a){this.setSize(a);this.setPosition(a);this.setStyle(a)},setSize:function(c){var f=this,a=f.container,g=Sys.isDefined(a)?a.el.style:undefined,j=f[c+"_SIZE"],d,h,k=0,e=0,i,b;if(!Sys.isDefined(j)||!Sys.isDefined(a)){return}d=j.RELATIVE_SCREEN?Environment.getInnerScreenSize():Environment.getResolution();h=j.RELATIVE_SCREEN?1/Environment.getScale():1;if(Sys.isDefined(j.HEIGHT)){i=Math.round(d.height*j.HEIGHT*h);b=Sys.isDefined(j.WIDTH)?Math.round(d.width*j.WIDTH*h):Math.round(i*j.ASPECT_RATIO)}else{b=Math.round(d.width*j.WIDTH*h);i=Math.round(b/j.ASPECT_RATIO)}if(j.VERTICAL_OFFSET==="bottom"){k="-"+i+"px"}else{if(j.VERTICAL_OFFSET==="center"){k="-"+Math.round(i/2)+"px"}}if(j.HORIZONTAL_OFFSET==="right"){e="-"+b+"px"}else{if(j.HORIZONTAL_OFFSET==="center"){e="-"+Math.round(b/2)+"px"}}g.width=b+"px";g.height=i+"px";g.backgroundSize=b+"px "+i+"px";g.margin=k+" 0 0 "+e},setPosition:function(c){var h=this,e=h[c+"_POSITION"],j,i,f,b,g,d,a;if(!Sys.isDefined(e)||!Sys.isDefined(h.container)){return}j=h.container.el.style;if(Sys.isDefined(e.BOTTOM)){f="BOTTOM";b="top";a="getBottom"}else{f="TOP";b="bottom";a="getTop"}if(Sys.isDefined(e.RIGHT)){g="RIGHT";d="left"}else{g="LEFT";d="right"}if(e.BELOW_GAME){i=Environment[a+"BelowGame"](e[f])}else{if(e.ABOVE_GAME){i=Environment[a+"AboveGame"](e[f])}else{i=Environment[a+"InGame"](e[f])}}if(e["MIN_"+f]){i=Math.max(e["MIN_"+f],i)}j[f.toLowerCase()]=i+"px";j[b]="auto";j[g.toLowerCase()]=(100*e[g])+"%";j[d]="auto"},setStyle:function(a){var c=this,d=a+"_CSS",b=a==="LANDSCAPE"?"PORTRAIT_CSS":"LANDSCAPE_CSS";if(Sys.isDefined(c[d])){c.container.removeCls(c[b]);c.container.addCls(c[d])}}}}};Sys.ns("Mixins");Mixins.userInput={controller:{methods:{startListeningToUserInput:function(){this.on(this.USED_INPUT_HANDLERS);this.isListeningToUserInput=true},stopListeningToUserInput:function(){var a=this;Sys.iterate(a.USED_INPUT_HANDLERS,a.removeListener.bind(a));a.isListeningToUserInput=false},onUserInputStart:function(){},onUserInputEnd:function(){},onUserInputMove:function(){},onUserInputHover:function(){},onUserInputCanceled:function(){},onUserInputScroll:function(){},onUserInputKeyUp:function(){},onUserInputKeyDown:function(){},isUserInputInSegment:function(b,a){Sys.UserInputUtils.isUserInputInSegment(b,a)}},executeOnInstantiation:{init:function(c){var d=this,e=Sys.isDefined(c.inputEvents)?c.inputEvents:["start","end","cancel","move"],a={},b;for(b=0;b<e.length;b++){switch(e[b]){case"start":a["notify:userInputManager.userInputStarted"]=d.onUserInputStart;break;case"end":a["notify:userInputManager.userInputEnded"]=d.onUserInputEnd;break;case"move":a["notify:userInputManager.userInputMove"]=d.onUserInputMove;break;case"hover":a["notify:userInputManager.userInputHover"]=d.onUserInputHover;break;case"cancel":a["notify:userInputManager.userInputCanceled"]=d.onUserInputCanceled;break;case"scroll":a["notify:userInputManager.userInputScroll"]=d.onUserInputScroll;break;case"keyUp":a["notify:userInputManager.userInputKeyUp"]=d.onUserInputKeyUp;break;case"keyDown":a["notify:userInputManager.userInputKeyDown"]=d.onUserInputKeyDown;break;default:}}d.USED_INPUT_HANDLERS=a;if(c.listenToUserInput){d.startListeningToUserInput()}}}}};Sys.ns("Mixins");Mixins.serverResponse={controller:{methods:{onServerResponse:function(a){this.model.processServerResponse(a)}},executeOnInstantiation:{setupEvents:function(){this.on({"notify:responseParser.responseParsed":this.onServerResponse})}}},model:{methods:{processServerResponse:function(a){}}}};Sys.ns("Mixins");Mixins.waitSequence={controller:{methods:{initializeWaitSequence:function(c,a){var b=this;b.clearWaitSequence();b.waiting=true;if(Sys.isDefined(c)){b.fireEvent(c,a);b.checkForCompletion()}},clearWaitSequence:function(){var a=this;Sys.each(a.eventsToWaitFor,a.removeWaitEventListener.bind(a));a.eventsToWaitFor.length=0;a.waiting=false},removeWaitEventListener:function(a){if(Sys.isDefined(this.customListeners[a])){this.removeListener(a);delete (this.customListeners[a])}},checkForCompletion:function(){if(this.eventsToWaitFor.length===0){this.onWaitIsComplete();this.waiting=false}},onWaitRequested:function(a){var b=this,c;if(b.waiting&&!b.eventsToWaitFor.contains(a)){if(!Sys.isDefined(b.events[a])&&!Sys.isDefined(b.handlers[a])){c=b.onWaitEventReceived.bind(b,a);b.addListener(a,c,b);b.customListeners[a]=c}b.eventsToWaitFor.push(a)}},onWaitEventReceived:function(a){var c=this,b=c.eventsToWaitFor.indexOf(a);if(b>=0){c.eventsToWaitFor.splice(b,1);c.removeWaitEventListener(a)}c.checkForCompletion()},onWaitIsComplete:function(){}},executeOnInstantiation:{initialize:function(){var a=this;a.eventsToWaitFor=[];a.waiting=false;a.customListeners={};if(!Sys.isDefined(a.events)){a.events={}}}}}};Sys.ns("Mixins");Mixins.properties={model:{methods:{hasProperty:function(b){var a=this.readData("properties")[b];return Sys.isDefined(a)&&a.length>0},addProperty:function(c,b){var a=this.readData("properties");if(!Sys.isDefined(a[c])){a[c]=[b]}else{if(!a[c].contains(b)){a[c].push(b)}}this.storeData("properties",a)},removeProperty:function(c,b){var a=this.readData("properties")[c];if(Sys.isDefined(a)&&a.contains(b)){a.splice(a.indexOf(b),1)}}}},controller:{executeOnInstantiation:{setupEvents:function(a){var c=this,b=this.model.PROPERTIES||{},d={"view:addProperty":c.addProperty,"view:removeProperty":c.removeProperty};c.model.storeData("properties",b);d["request:"+c.MODULE_NAME+".addProperty"]=c.addProperty;d["request:"+c.MODULE_NAME+".removeProperty"]=c.removeProperty;c.on(d);if(Sys.isDefined(a)&&a.updateOnStartup===true){c.updateAppearance()}}},methods:{addProperty:function(c,b){var a=!this.model.hasProperty(c);this.model.addProperty(c,b);if(a){this.updateAppearance()}},updateAppearance:function(){},removeProperty:function(c,b){var a=this;if(a.model.hasProperty(c)){a.model.removeProperty(c,b);if(!a.model.hasProperty(c)){a.updateAppearance()}}}}}};Sys.ns("Mixins");Mixins.trigger={controller:{methods:{registerTriggers:function(){},onTriggerReady:function(){this.registerTriggers(Services.trigger)}},executeOnInstantiation:{setupEvents:function(){this.on({"notify:trigger.ready":this.onTriggerReady})}}}};Sys.ns("NetEntExtend.API");NetEntExtend.API.BaseGetter={platforms:["desktop","mobile"],isAvailable:function(){return true},validateNumArguments:function(){return arguments.length===3},validateArguments:function(){return true},func:function(){}};Sys.ns("NetEntExtend.API");NetEntExtend.API.BaseSetter={platforms:["desktop","mobile"],isAvailable:function(a){return this.model.readData("inIdleState")&&Services.settingsManager.isSettable(a)},validateNumArguments:function(){return arguments.length===4},validateArguments:function(){return true},func:function(){}};Sys.ns("NetEntExtend.API");NetEntExtend.API.BaseCall={platforms:["desktop","mobile"],isAvailable:function(){return this.model.readData("inIdleState")&&!Services.storage.readData("dialog.showing")},validateNumArguments:function(){return arguments.length===3},validateArguments:function(){return true},func:function(){}};Sys.ns("NetEntExtend.API");NetEntExtend.API.Getters={balanceInCurrency:Sys.applyPropertiesIf({func:function(){var d=this,b=Services.moneyManager,a=b.getBalanceCents(),e=b.formatMoneyCurrencySign(a),c=d.addParamsToArgument(arguments,e);d.success.apply(d,c)}},NetEntExtend.API.BaseGetter),betInCurrency:Sys.applyPropertiesIf({func:function(){var d=this,a=Services.moneyManager,c=a.getBetCents(),e=a.formatMoneyCurrencySign(c),b=d.addParamsToArgument(arguments,e);d.success.apply(d,b)}},NetEntExtend.API.BaseGetter),winInCurrency:Sys.applyPropertiesIf({func:function(){var c=this,a=Services.storage.readData("cashField.winInCents"),b=c.addParamsToArgument(arguments,Services.moneyManager.formatMoneyCurrencySign(a));c.success.apply(c,b)}},NetEntExtend.API.BaseGetter),audio:Sys.applyPropertiesIf({func:function(){var b=this,c=Services.settingsManager.getSetting("volume")>0,a=b.addParamsToArgument(arguments,c);b.success.apply(b,a)}},NetEntExtend.API.BaseGetter),currentPlayMode:Sys.applyPropertiesIf({func:function(){this.success.apply(this,this.addParamsToArgument(arguments,Services.storage.readData("playModeManager.modes")))}},NetEntExtend.API.BaseGetter),autoplayNumberOfRoundsAvailable:Sys.applyPropertiesIf({func:function(){var c=this,a=c.autoplayNumberOfRoundsAvailable(),b=c.addParamsToArgument(arguments,a);c.success.apply(c,b)}},NetEntExtend.API.BaseGetter),autoplayCurrentRoundsLeft:Sys.applyPropertiesIf({func:function(){var d=this,b=Services.storage.readData("autoPlayer.roundsLeft"),a=Sys.isDefined(b)&&b>0?b:null,c=d.addParamsToArgument(arguments,a);d.success.apply(d,c)}},NetEntExtend.API.BaseGetter),paytableCount:Sys.applyPropertiesIf({func:function(){this.success.apply(this,this.addParamsToArgument(arguments,Services.storage.readData("paytable.numberOfPages")))}},NetEntExtend.API.BaseGetter),paytablePage:Sys.applyPropertiesIf({func:function(){var a=null;if(Services.storage.readData("paytable.showing")){a=Services.storage.readData("paytable.currentPage")}this.success.apply(this,this.addParamsToArgument(arguments,a))}},NetEntExtend.API.BaseGetter),volumeLevel:Sys.applyPropertiesIf({func:function(){var c=this,b=Sys.utils.toInt(Services.settingsManager.getSetting("volume")*100),a=c.addParamsToArgument(arguments,b);c.success.apply(c,a)}},NetEntExtend.API.BaseGetter),debugMode:Sys.applyPropertiesIf({func:function(){var c=this,a=false,b;b=c.addParamsToArgument(arguments,a);c.success.apply(c,b)}},NetEntExtend.API.BaseGetter)};Sys.ns("NetEntExtend.API");NetEntExtend.API.Setters={volumeLevel:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return true},validateArguments:function(){return Sys.isNumber(arguments[3])&&0<=arguments[3]&&arguments[3]<=100},func:function(){var a=this,b=arguments[3]/100;a.updateSetting("volume",b,arguments)}},NetEntExtend.API.BaseSetter),audio:Sys.applyPropertiesIf({isAvailable:function(){return true},validateArguments:function(){return typeof arguments[3]==="boolean"},func:function(){var b=this,a=arguments[3]?1:0;b.updateSetting("volume",a,arguments)}},NetEntExtend.API.BaseSetter),inGameMessage:Sys.applyPropertiesIf({platforms:["mobile"],isAvailable:function(){return true},validateArguments:function(){var a=arguments[3],b;if(Sys.isArray(a)&&a.length>0){b=Sys.find(a,function(c){if(Sys.isObj(c)&&Sys.isString(c.text)){if(c.type!==undefined){if(c.type!=="link"&&c.type!=="text"){return true}if(c.type==="link"&&c.url!==undefined&&!Sys.isString(c.url)){return true}}return false}else{return true}});return b===undefined}return false},func:function(){var e=this,g=arguments[3],d=[],b=60,c,f="",a=0;g.forEach(function(h){a++;f+=h.text;if(f.length>b){h.text=h.text.substring(0,h.text.length-f.length+b)}if(h.text.length>0){if(h.type!==undefined&&h.type==="link"){c=new Interface.utils.Button({id:"ticker_lnk_"+a,label:h.text,clickCallback:function(){Sys.utils.openURL(h.url)}});c.enable();linkContainer=c.getContainer();linkContainer.addCSSClass("netEntExtend_button");d.push(linkContainer)}else{d.push(new Sys.Element({tag:"span",textContent:h.text}))}}});e.fireEvent("request:ticker.enable","netEntExtend");e.fireEvent("request:ticker.setText",d);e.success.apply(e,arguments)}},NetEntExtend.API.BaseSetter)};Sys.ns("NetEntExtend.API");NetEntExtend.API.Calls={stopAutoplay:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return !Services.storage.readData("dialog.showing")&&Services.storage.readData("autoPlayer.roundsLeft")>0},func:function(){var a=this;a.fireEvent("request:autoPlayer.stop");a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),reloadBalance:Sys.applyPropertiesIf({func:function(){var a=this;a.fireEvent("request:serverManager.sendAction","reloadbalance","notify:responseParser.reloadBalanceResponseParsed","notify:serverManager.reloadBalanceFailed");a.model.storeData("reloadBalanceArguments",arguments);a.model.storeData("reloadBalanceSpin",false)}},NetEntExtend.API.BaseCall),createDialogbox:Sys.applyPropertiesIf({platforms:["mobile"],isAvailable:function(){return true},validateNumArguments:function(){return arguments.length===7},validateArguments:function(){var d=arguments[3],c=arguments[4],b=arguments[5],a=arguments[6];return Sys.isString(d)&&Sys.isString(c)&&Sys.isString(b)&&Sys.isArray(a)&&a.length>0&&a.length<=2&&typeof Sys.find(a,function(e){return !(Sys.isString(e.buttonid)&&Sys.isString(e.buttontext))})==="undefined"},func:function(){var c=this,f=arguments[3],e=arguments[4].substring(0,20),d=arguments[5],b=arguments[6],a={id:"netEntExtend_"+f,title:e,text:d,buttons:[],stopAutoplay:true};Sys.each(b,function(g){var h={};h.action=function(){var i=Sys.isDefined(this.buttontype)?this.buttontype.toLowerCase():"";c.fireEvent("request:postman.sendMessage",["event","dialogBoxClosed",this.dialogid,this.buttonid]);switch(i){case"gotolobby":Environment.goToLobby(this.reason);break;case"reload":Environment.reload();break;default:break}};h.scope={dialogid:f,buttonid:g.buttonid,buttontype:g.action,reason:g.reason};h.text=g.buttontext;h.buttonid=g.buttonid;a.buttons.push(h)});c.fireEvent("request:customMessages.showDialog",a);c.success.apply(c,arguments)}},NetEntExtend.API.BaseCall),removeDialogbox:Sys.applyPropertiesIf({platforms:["mobile"],isAvailable:function(){return true},validateNumArguments:function(){return arguments.length===4},validateArguments:function(){return Sys.isString(arguments[3])},func:function(){var a=this;a.fireEvent("request:customMessages.removeDialog","netEntExtend_"+arguments[3]);a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),pluginError:Sys.applyPropertiesIf({platforms:["mobile"],isAvailable:function(){return true},func:function(){this.fireEvent("request:errorManager.handleError");this.success.apply(this,arguments)}},NetEntExtend.API.BaseCall),deactivatePluginMenu:Sys.applyPropertiesIf({platforms:["mobile"],isAvailable:function(){return true},func:function(){this.fireEvent("request:pluginMenu.deactivate");this.success.apply(this,arguments)}},NetEntExtend.API.BaseCall),pluginNotification:Sys.applyPropertiesIf({platforms:["mobile"],isAvailable:function(){return true},validateNumArguments:function(){return arguments.length===4},validateArguments:function(){return Sys.isString(arguments[3])},func:function(){this.fireEvent("request:pluginMenu.notification",arguments[3]);this.success.apply(this,arguments)}},NetEntExtend.API.BaseCall),showSystemClock:Sys.applyPropertiesIf({platforms:["desktop","mobile"],isAvailable:function(){return true},func:function(){this.fireEvent("request:systemClock.show");this.success.apply(this,arguments)}},NetEntExtend.API.BaseCall)};Sys.ns("NetEntExtend.API");Sys.apply(NetEntExtend.API.Getters,{balanceInCoins:Sys.applyPropertiesIf({func:function(){var d=this,b=Services.moneyManager,a=b.getBalanceCoins(),c=d.addParamsToArgument(arguments,a);d.success.apply(d,c)}},NetEntExtend.API.BaseGetter),betInCoins:Sys.applyPropertiesIf({func:function(){var d=this,a=Services.moneyManager,c=a.getBetCoins(),b=d.addParamsToArgument(arguments,c);d.success.apply(d,b)}},NetEntExtend.API.BaseGetter),availableCoins:Sys.applyPropertiesIf({func:function(){var d=this,c=Resources.readData("gameServerInitResponse"),a=c["denomination.all"],b=d.addParamsToArgument(arguments,a);d.success.apply(d,b)}},NetEntExtend.API.BaseGetter),selectedCoinValue:Sys.applyPropertiesIf({func:function(){var c=this,a=Services.moneyManager,d=a.model.readData("denomination"),b=c.addParamsToArgument(arguments,d);c.success.apply(c,b)}},NetEntExtend.API.BaseGetter),winInCoins:Sys.applyPropertiesIf({func:function(){var d=this,b=Services.storage.readData("cashField.winInCents"),e=Services.moneyManager.model.readData("denomination"),a=Math.floor(b/e),c=d.addParamsToArgument(arguments,a);d.success.apply(d,c)}},NetEntExtend.API.BaseGetter),freeRoundsLeft:Sys.applyPropertiesIf({func:function(){var d=this,c=Services.storage.readData("freeRounds.roundsLeft"),a=Sys.isDefined(c)&&c>0?c:null,b=d.addParamsToArgument(arguments,a);d.success.apply(d,b)}},NetEntExtend.API.BaseGetter),freeSpinsLeft:Sys.applyPropertiesIf({func:function(){var c=this,b=Services.storage.readData("freespin.freespinsLeft"),a=Sys.isDefined(b)&&b>=0&&["FREESPIN","SUPERSPIN"].contains(c.model.readData("gameMode"))?b:null;c.success.apply(c,c.addParamsToArgument(arguments,a))}},NetEntExtend.API.BaseGetter)});Sys.ns("NetEntExtend.API");Sys.apply(NetEntExtend.API.Setters,{});Sys.ns("NetEntExtend.API");Sys.apply(NetEntExtend.API.Calls,{});Sys.ns("NetEntExtend.API.Restricted");NetEntExtend.API.Restricted.Getters=Sys.apply(Sys.clone(NetEntExtend.API.Getters),{});Sys.ns("NetEntExtend.API.Restricted");NetEntExtend.API.Restricted.Setters=Sys.apply(Sys.clone(NetEntExtend.API.Setters),{});Sys.ns("NetEntExtend.API.Restricted");NetEntExtend.API.Restricted.Calls=Sys.apply(Sys.clone(NetEntExtend.API.Calls),{startAutoplay:Sys.applyPropertiesIf({platforms:["desktop"],validateNumArguments:function(){return arguments.length===4},validateArguments:function(){var c=this,b=c.autoplayNumberOfRoundsAvailable(),d=b===null?[]:b.split(","),a=arguments[3];return Sys.isString(a)&&d.contains(a)},func:function(){var b=this,a=arguments[3];Services.settingsManager.storeSetting("autoPlayNrSpins",Number(a),false);b.fireEvent("request:autoPlayer.start");b.success.apply(b,arguments)}},NetEntExtend.API.BaseCall),showAutoplay:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){var b=Services.storage.readData("autoplaySettings.showing"),a=Services.storage.readData("spinSettings.showing");return !Services.storage.readData("dialog.showing")&&((Sys.isDefined(b)&&!b)||(Sys.isDefined(a)&&!a))},func:function(){var a=this;a.fireEvent("request:autoplaySettings.show");a.fireEvent("request:spinSettings.show");if(!(Services.storage.readData("autoplaySettings.showing")||Services.storage.readData("spinSettings.showing"))){a.error(arguments,a.model.ERROR_CODES.UNKNOWN_ERROR)}else{a.success.apply(a,arguments)}}},NetEntExtend.API.BaseCall),hideAutoplay:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return !Services.storage.readData("dialog.showing")&&(Services.storage.readData("autoplaySettings.showing")||Services.storage.readData("spinSettings.showing"))},func:function(){var a=this;a.fireEvent("request:autoplaySettings.hide");a.fireEvent("request:spinSettings.hide");a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),showPaytable:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return !Services.storage.readData("dialog.showing")},validateNumArguments:function(){return arguments.length===4},validateArguments:function(){var b=arguments[3],a=Services.storage.readData("paytable.numberOfPages");return Sys.isNumber(b)&&(1<=b&&b<=a)},func:function(){var a=this,b=arguments[3];a.fireEvent("request:paytable.show",b);a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),hidePaytable:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return !Services.storage.readData("dialog.showing")&&Services.storage.readData("paytable.showing")},func:function(){var a=this;a.fireEvent("request:paytable.hide");a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),paytableForward:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return !Services.storage.readData("dialog.showing")&&Services.storage.readData("paytable.showing")},func:function(){var a=this;a.fireEvent("request:paytable.forward");a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),paytableBackward:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return !Services.storage.readData("dialog.showing")&&Services.storage.readData("paytable.showing")},func:function(){var a=this;a.fireEvent("request:paytable.backward");a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),closeSplash:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){var a=this;return !Services.storage.readData("dialog.showing")&&a.model.readData("featureSplash.showing")},func:function(){var a=this;a.fireEvent("request:featureSplash.close");a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),startFreespins:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return !Services.storage.readData("dialog.showing")&&Services.storage.readData("freeSpins.canStart")},func:function(){var a=this;a.fireEvent("request:freeSpins.start");a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),openHelp:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){var a=this;return !Services.storage.readData("dialog.showing")&&a.model.readData("inIdleState")&&!Services.storage.readData("gameRules.showing")},func:function(){var a=this;a.fireEvent("request:gameRules.show");a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),skipIntro:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return !Services.storage.readData("dialog.showing")&&Services.storage.readData("IntroMovie.showing")},func:function(){var a=this;a.fireEvent("request:introMovie.close");a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall)});Sys.ns("NetEntExtend.API");Sys.apply(NetEntExtend.API.Restricted.Setters,{betLevel:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return NetEntExtend.API.BaseSetter.isAvailable.call(this,"betLevel")},validateArguments:function(){var c=arguments[3],a=Resources.readData("gameServerInitResponse"),b=a["betlevel.all"].split(",");return Sys.isNumber(c)&&b.contains(String(c))},func:function(){var a=this;a.updateSetting("betLevel",arguments[3],arguments)}},NetEntExtend.API.BaseSetter),coinValue:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return NetEntExtend.API.BaseSetter.isAvailable.call(this,"denomination")},validateArguments:function(){var b=arguments[3],c=Resources.readData("gameServerInitResponse"),a=c["denomination.all"].split(",");return Sys.isNumber(b)&&a.contains(String(b))},func:function(){var a=this;a.updateSetting("denomination",arguments[3],arguments)}},NetEntExtend.API.BaseSetter)});Sys.ns("NetEntExtend.API");Sys.apply(NetEntExtend.API.Restricted.Calls,{startSpin:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return NetEntExtend.API.BaseCall.isAvailable.call(this)&&Services.moneyManager.canPlaceAnotherBet()},func:function(){var a=this;a.fireEvent("request:spin.startNewRound");a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall),startQuickSpin:Sys.applyPropertiesIf({platforms:["desktop"],isAvailable:function(){return NetEntExtend.API.BaseCall.isAvailable.call(this)&&Services.settingsManager.isSettable("quickSpin")&&Services.moneyManager.canPlaceAnotherBet()},func:function(){var b=this,a=Services.settingsManager.getSetting("quickSpin");b.fireEvent("request:settingsManager.storeData","quickSpin",true);b.fireEvent("request:spin.startNewRound");b.onEnteringIdleState.push(function(){b.fireEvent("request:settingsManager.storeData","quickSpin",a)});b.success.apply(b,arguments)}},NetEntExtend.API.BaseCall),maxBetSpin:Sys.applyPropertiesIf({platforms:["desktop"],func:function(){var b=this,c=Resources.readData("gameServerInitResponseObject").betlevel.all,a=Math.max.apply(null,c);b.fireEvent("request:settingsManager.storeData","betLevel",a);b.startRound();b.success.apply(b,arguments)}},NetEntExtend.API.BaseCall),featurePreview:Sys.applyPropertiesIf({platforms:["desktop"],func:function(){var a=this;a.success.apply(a,arguments)}},NetEntExtend.API.BaseCall)});Sys.ns("Core.NetEntExtend");Core.NetEntExtend={constructor:function(){Core.NetEntExtend.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.NetEntExtendModel,controller:Core.NetEntExtendController}}};Core.NetEntExtend=Sys.extend(Core.Module,Core.NetEntExtend,"Core.NetEntExtend");Sys.ns("Core");Core.NetEntExtendController={USE_LOGGING:false,ROUND_START_EVENT:"request:spin.startNewRound",constructor:function(){Core.NetEntExtendController.superclass.constructor.apply(this,arguments)},init:function(){var a=this;Core.NetEntExtendController.superclass.init.apply(a,arguments);a.onEnteringIdleState=[];a.setupAPI()},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringIdleState":a.enteringIdleState,"notify:stateHandler.leavingIdleState":a.leavingIdleState,"notify:netEntExtendEvents.eventTriggered":a.sendMessage,"notify:responseParser.reloadBalanceResponseParsed":a.onReloadBalanceResponse,"notify:serverManager.reloadBalanceFailed":a.onReloadBalanceFailed,"notify:featureSplash.showing":a.onFeatureSplashShowing,"notify:featureSplash.closed":a.onFeatureSplashClosed,"notify:gameModeChanged":a.onGameModeChanged,"request:NetEntExtend.newMessage":a.handleIncomingMessage})},setupAPI:function(){var b=this,c=b.model.readData("useRestricted"),a=(c===true)?NetEntExtend.API.Restricted:NetEntExtend.API;b.API={};b.API.get=a.Getters;b.API.set=a.Setters;b.API.call=a.Calls},enteringIdleState:function(){var a=this;a.onEnteringIdleState.forEach(function(b){b.apply(a,arguments)});a.onEnteringIdleState=[];a.model.storeData("inIdleState",true)},leavingIdleState:function(){var a=this;a.model.storeData("inIdleState",false);a.model.storeData("reloadBalanceSpin",true)},handleIncomingMessage:function(){var d=this,b=arguments[0],c=arguments[1],a=arguments[2],f;if(arguments.length<3||!Sys.isString(b)||!Sys.isNumber(c)||!Sys.isString(a)){d.error(arguments,d.model.ERROR_CODES.WRONG_NUMBER_OF_ARGUMENTS)}else{if(!Sys.isDefined(d.API[b])||!Sys.isDefined(d.API[b][a])){d.error(arguments,d.model.ERROR_CODES.FUNCTIONALITY_NOT_AVAILABLE)}else{f=d.API[b][a];if((Platform.isDesktopDevice&&f.platforms.indexOf("desktop")===-1)||((Platform.isMobileDevice||Platform.isTabletDevice)&&f.platforms.indexOf("mobile")===-1)){d.error(arguments,d.model.ERROR_CODES.FUNCTIONALITY_NOT_AVAILABLE)}else{if(!f.isAvailable.apply(d,arguments)){d.error(arguments,d.model.ERROR_CODES.NOT_AVAILABLE_IN_CURRENT_STATE)}else{if(!f.validateNumArguments.apply(d,arguments)){d.error(arguments,d.model.ERROR_CODES.WRONG_NUMBER_OF_ARGUMENTS)}else{if(!f.validateArguments.apply(d,arguments)){d.error(arguments,d.model.ERROR_CODES.ILLEGAL_ARGUMENT)}else{try{f.func.apply(d,arguments)}catch(g){d.error(arguments,d.model.ERROR_CODES.UNKNOWN_ERROR)}}}}}}}},success:function(){var b=this,a=b.getResponseArguments.apply(b,arguments);b.sendMessage(["success",a.callId].concat(a.rest))},error:function(c,a,e){var d=this,b=d.getResponseArguments.apply(d,c);d.sendMessage(["error",b.callId,a,e])},sendMessage:function(a){this.fireEvent("request:postman.sendMessage",a)},getResponseArguments:function(){var a=Array.prototype.slice.call(arguments),c=a[1],b=a.splice(3);return{callId:c,rest:b}},addParamsToArgument:function(c,b){var a=Array.prototype.slice.call(c);if(Sys.isArray(b)){b.forEach(function(d){a.push(d)})}else{a.push(b)}return a},updateSetting:function(c,f,b){var e=this,a=Services.settingsManager,d=this.model.ERROR_CODES;a.storeSetting(c,f,false);if(a.getSetting(c)===f){e.success.apply(e,b)}else{e.error(b,d.UNKNOWN_ERROR)}},autoplayNumberOfRoundsAvailable:function(){var a=Services.storage.readData("spinSettings.autoplayRoundsAvailable");return Sys.isDefined(a)?a.toString():null},onReloadBalanceResponse:function(a){var c=this,b=c.model.readData("reloadBalanceArguments"),d=c.model.readData("reloadBalanceSpin"),e=a.credit;if(d){c.success.apply(c,c.addParamsToArgument(b,"busy"))}else{if(Sys.isNumber(e)){Services.moneyManager.setBalance(e);c.success.apply(c,c.addParamsToArgument(b,e))}}},onReloadBalanceFailed:function(){var b=this,a=this.model.readData("reloadBalanceArguments");b.error(a,b.model.UNKNOWN_ERROR)},onFeatureSplashShowing:function(){var a=this;a.model.storeData("featureSplash.showing",true)},onFeatureSplashClosed:function(){var a=this;a.model.storeData("featureSplash.showing",false)},startRound:function(){var a=this;a.fireEvent(a.ROUND_START_EVENT)},onGameModeChanged:function(a){this.model.storeData("gameMode",a)}};Core.NetEntExtendController=Sys.extend(Core.Controller,Core.NetEntExtendController,"Core.NetEntExtendController");Sys.ns("Core");Core.NetEntExtendModel={ERROR_CODES:{UNKNOWN_ERROR:0,ILLEGAL_ARGUMENT:1,EVENTS_NOT_AVAILABLE_IN_GAME:7,CALLBACK_NOT_PROVIDED:8,FUNCTIONALITY_NOT_AVAILABLE:9,WRONG_NUMBER_OF_ARGUMENTS:10,NO_RESPONSE_FROM_GAME:11,NOT_AVAILABLE_IN_CURRENT_STATE:12,HTML_GAME_LAUNCH_FAILED:18},constructor:function(){Core.NetEntExtendModel.superclass.constructor.apply(this,arguments)},setupData:function(){var d=this,c=Resources.readData("gameServerInitResponse"),b=(Sys.isDefined(c))?c["gameEventSetters.enabled"]:false,a=false;if(Sys.isDefined(b)&&b===true){a=true}d.storeData("useRestricted",a);d.storeData("locked",true);d.storeData("inIdleState",false);d.storeData("featureSplash.showing",false)}};Core.NetEntExtendModel=Sys.extend(Core.Model,Core.NetEntExtendModel,"Core.NetEntExtendModel");Sys.ns("Core.NetEntExtendEvents");Core.NetEntExtendEvents={constructor:function(){Core.NetEntExtendEvents.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.NetEntExtendEventsModel,controller:Core.NetEntExtendEventsController}}};Core.NetEntExtendEvents=Sys.extend(Core.Module,Core.NetEntExtendEvents,"Core.NetEntExtendEvents");Sys.ns("Core");Core.NetEntExtendEventsController={USE_LOGGING:false,constructor:function(){Core.NetEntExtendEventsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var b=this,a={"notify:autoPlayer.starting":b.onAutoplayStarting,"notify:autoPlayer.startRound":b.onAutoplayStartRound,"notify:settingsManager.settingChanged":b.onSettingsChanged,"notify:spin.spinAnimationStarted":b.onSpinStart,"notify:spin.spinAnimationComplete":b.onSpinEnded,"notify:stateHandler.enteringStandardWinPresentationState":b.onWinPresentationStarted,"notify:responseParser.responseParsed":b.onServerResponseParsed,"notify:standardWin.presentationComplete":b.onWinPresentationComplete,"notify:paytable.shown":b.sendEvent.bind(b,"paytableToggle",true),"notify:paytable.hidden":b.sendEvent.bind(b,"paytableToggle",false),"notify:bonusGameIntro.bonusGameStarted":b.onBonusGameStarted,"notify:bonusGameOutro.bonusGameEnded":b.onBonusGameEnded,"notify:gameModeChanged":b.onGameModeChanged,"notify:stateHandler.enteringIdleState":b.onEnteringIdleState,"notify:stateHandler.leavingIdleState":b.onLeavingIdleState,"notify:cashField.update":b.onCashFieldUpdate,"notify:freeRounds.started":b.onFreeRoundsStarted,"notify:freeRounds.ended":b.onFreeRoundsEnded,"notify:freeRounds.nextRound":b.onFreeRoundsNextRound,"notify:pluginMenu.activated":b.onPluginMenuActivated,"notify:pluginMenu.deactivated":b.onPluginMenuDeactivated,"notify:viewport.PORTRAIT":b.onPortrait,"notify:viewport.LANDSCAPE":b.onLandscape,"notify:loader.closed":b.onLoaderClosed};Sys.iterate(b.model.EVENT_MAP,function(c,d){a[c]=b.sendEvent.bind(b,d)});b.on(a)},onLoaderClosed:function(){if(this.model.readData("isRestore")===true){this.sendEvent("gameRoundStarted")}},onFreeRoundsStarted:function(a){this.sendEvent("freeRoundsStarted",a)},onFreeRoundsEnded:function(){this.sendEvent("freeRoundsEnded")},onFreeRoundsNextRound:function(a,b){this.sendEvent("freeRoundsNextRound",a,b)},sendEvent:function(){var a=Array.prototype.slice.call(arguments);this.fireEvent("notify:netEntExtendEvents.eventTriggered",["event"].concat(a))},onSpinStart:function(){var a=this;a.model.storeData("spinStarted",true);a.sendEvent("spinStarted",Services.storage.readData("playModeManager.modes"))},onSpinEnded:function(){this.model.storeData("spinStarted",false);this.sendEvent("spinEnded")},onWinPresentationStarted:function(){this.sendEvent("spinProgress","initialWinPresentationStarted")},onServerResponseParsed:function(c){var a=this;if(a.model.readData("spinStarted")){var b=Sys.isDefined(c.gameroundid)?c.gameroundid:0;a.sendEvent("spinProgress","outcomeReceived",b)}if((c.restore===true)){a.model.storeData("isRestore",true)}},onWinPresentationComplete:function(b){var a;if(Sys.isDefined(b)){a=(b===true)?"initialWinPresentationAborted":"initialWinPresentationEnded"}if(a){this.sendEvent("spinProgress",a)}},onSettingsChanged:function(a,c){var b=this;if(a==="volume"){b.volumeChange(c)}},onAutoplayStarting:function(){var a=this,b=Services.settingsManager.getSetting("autoPlayNrSpins");a.model.storeData("autoplayRoundsSelected",b);a.sendEvent("autoplayStarted",b)},onAutoplayStartRound:function(a){var c=this,b=c.model.readData("autoplayRoundsSelected");c.sendEvent("autoplayNextRound",b,a)},volumeChange:function(d){var c=this,b=Math.floor(d*100),e=d>0,a=c.model.readData("lastVolume")>0;c.model.storeData("lastVolume",d);c.sendEvent("volumeChange",b);if(e!==a){c.sendEvent("audioToggle",e)}},onCashFieldUpdate:function(d){var b=this,a=b.model,c=a.readData("balance");if(Sys.isDefined(c)){if(d!==c){b.sendEvent("balanceChanged");a.storeData("balance",d)}}else{a.storeData("balance",d)}},onGameModeChanged:function(a){this.model.storeData("gameMode",a.toLowerCase())},onBonusGameStarted:function(a){this.sendEvent("bonusGameStarted",a)},onBonusGameEnded:function(a){this.sendEvent("bonusGameEnded",a)},onEnteringIdleState:function(){var b=this,a=b.model.readData("leftIdleState"),c=b.model.readData("isRestore");if(a||c){b.sendEvent("gameRoundEnded");b.model.storeData("isRestore",false)}b.model.storeData("leftIdleState",false)},onLeavingIdleState:function(){var a=this;a.sendEvent("gameRoundStarted");a.model.storeData("leftIdleState",true)},onPluginMenuActivated:function(){var a=this;a.sendEvent("pluginMenuActivated")},onPluginMenuDeactivated:function(){var a=this;a.sendEvent("pluginMenuDeactivated")},onPortrait:function(){this.sendEvent("rotate",{orientation:"portrait"})},onLandscape:function(){this.sendEvent("rotate",{orientation:"landscape"})}};Core.NetEntExtendEventsController=Sys.extend(Core.Controller,Core.NetEntExtendEventsController,"Core.NetEntExtendEventsController");Sys.ns("Core");Core.NetEntExtendEventsModel={EVENT_MAP:{"notify:stateHandler.leavingBeforeLoaderCloseState":"gameReady","notify:errorManager.error":"gameError","notify:errorManager.errorDialogClosed":"gameErrorClose","notify:paytable.pageSwitched":"paytablePageSwitch","notify:autoPlayer.stopped":"autoplayStopped"},constructor:function(){Core.NetEntExtendEventsModel.superclass.constructor.apply(this,arguments)},setupData:function(){this.storeData("autoplay",false);this.storeData("gameMode","basic")},getCurrentGameMode:function(){var b=this,a=b.readData("gameMode");if(b.readData("autoplay")){a+=", autoplay"}return a}};Core.NetEntExtendEventsModel=Sys.extend(Core.Model,Core.NetEntExtendEventsModel,"Core.NetEntExtendEventsModel");Sys.ns("Core.Slots");Core.Slots.NetEntExtendEventsModel={SLOTS_EVENT_MAP:{"notify:stateHandler.enteringBigWinState":"bigWinStarted","notify:stateHandler.leavingBigWinState":"bigWinEnded","notify:freeSpinIntro.closed":"freeSpinStarted","notify:freeSpinOutro.closed":"freeSpinEnded"},constructor:function(){Core.Slots.NetEntExtendEventsModel.superclass.constructor.apply(this,arguments)},setupData:function(){Core.Slots.NetEntExtendEventsModel.superclass.setupData.apply(this,arguments);Sys.apply(this.EVENT_MAP,this.SLOTS_EVENT_MAP)}};Core.Slots.NetEntExtendEventsModel=Sys.extend(Core.NetEntExtendEventsModel,Core.Slots.NetEntExtendEventsModel,"Core.Slots.NetEntExtendEventsModel");Sys.ns("Core");Core.Postman={constructor:function(){Core.Postman.superclass.constructor.apply(this,arguments)},getStateChanges:function(){return{setupGame:{waitEvents:["notify:postman.ready"]}}},getDefaultMVCClasses:function(){return{controller:Core.PostmanController}}};Core.Postman=Sys.extend(Core.Module,Core.Postman,"Core.Postman");Sys.ns("Core");Core.PostmanController={IS_READY:false,PLUGIN_TIMEOUT:30000,constructor:function(){Core.PostmanController.superclass.constructor.apply(this,arguments)},setupPlugin:function(){var c=this,b=Resources.readData("pluginURL"),a;c.iframe=undefined;if(c.isStandalone){c.iframe=document.createElement("iframe");c.iframe.setAttribute("id","netEntExtendPlugin");c.iframe.setAttribute("frameborder",0);c.iframe.setAttribute("width","100%");c.iframe.setAttribute("height",0);c.iframe.src=b;a=document.getElementById("viewport");a.insertBefore(c.iframe,a.firstChild);c.timeout=setTimeout(function(){c.fireEvent("request:loaderErrorHandler.handlePluginTimeoutError")},c.PLUGIN_TIMEOUT)}else{c.fireEvent("notify:postman.ready");c.IS_READY=true}},setupEvents:function(){var b=this,a=Resources.readData("pluginURL");b.isInIframe=window!==window.parent;b.isStandalone=Sys.isDefined(a);b.on({"request:postman.sendMessage":b.sendMessage,"notify:stateHandler.enteringSetupGameState":b.setupPlugin});window.addEventListener("message",function(c){b.handleIncomingMessage.apply(b,c.data)})},handlePluginReadyCall:function(b){var c=this,a=b[3],d=b[4];if(b[0]==="call"){if(b[2]==="pluginReady"){if(Sys.isDefined(c.timeout)){clearTimeout(c.timeout)}c.IS_READY=true;c.fireEvent("notify:postman.ready");if(Sys.isDefined(a)&&Sys.isDefined(d)){c.fireEvent("request:pluginMenu.init",a,d)}c.sendMessage(["success",b[1]])}}},handleIncomingMessage:function(){var c=this,b=Array.prototype.slice.call(arguments),a=["request:NetEntExtend.newMessage"].concat(b);if(c.isStandalone&&!c.IS_READY){c.handlePluginReadyCall(b)}else{c.fireEvent.apply(c,a)}},sendMessage:function(b){var a=this;if(a.isInIframe){window.parent.postMessage(b,"*")}if(Sys.isDefined(a.iframe)&&a.isStandalone){a.iframe.contentWindow.postMessage(b,"*")}}};Core.PostmanController=Sys.extend(Core.Controller,Core.PostmanController,"Core.PostmanController");Sys.ns("Core");Core.CustomMessages={constructor:function(){Core.CustomMessages.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model;return{showingCustomMessages:{state:{name:"ShowingCustomMessages",execute:function(){},waitEvents:{"notify:customMessages.messagesClosed":false}}},delayBeforeShowingMessages:{state:{name:"DelayBeforeShowingMessages",execute:function(){},waitEvents:{"notify:customMessages.delayComplete":false}}},idle:{waitEvents:["notify:customMessages.messagesClosed"]},beforeStopping:{queue:[function(b){if(a.hasImmediate()||!a.readData("shouldShowDialogs")){b.stateHandler.pushState(b.states.showingCustomMessages)}}]},setupGame:{waitEvents:["notify:customMessages.ready"]},noWinPresentation:{queue:[function(b){if(a.hasDialogs()||!a.readData("shouldShowDialogs")){b.stateHandler.pushState(b.states.delayBeforeShowingMessages)}}]}}},getMixinDependencies:function(){return["userInput"]},getDefaultMVCClasses:function(){return{controller:Core.CustomMessagesController,model:Core.CustomMessagesModel}}};Core.CustomMessages=Sys.extend(Core.Module,Core.CustomMessages,"Core.CustomMessages");Sys.ns("Core");Core.CustomMessagesController={DIALOG_DELAY:3000,constructor:function(){Core.CustomMessagesController.superclass.constructor.apply(this,arguments);this.model.storeData("showingLoader",true)},setupEvents:function(){var a=this;a.on({"request:customMessages.showDialog":a.onShowDialogRequest,"request:customMessages.removeDialog":a.onRemoveDialogRequest,"notify:serverManager.serverResponseReceived":a.onServerResponseReceived,"notify:serverManager.serverErrorReceived":a.onServerErrorReceived,"notify:stateHandler.enteringSetupGameState":a.onEnteringSetupGameState,"notify:stateHandler.enteringIdleState":a.onEnteringIdleState,"notify:stateHandler.leavingIdleState":a.onLeavingIdleState,"notify:stateHandler.enteringShowingCustomMessagesState":a.onEnteringShowingCustomMessagesState,"notify:stateHandler.leavingBeforeLoaderCloseState":a.onLoaderClose,"notify:stateHandler.enteringDelayBeforeShowingMessagesState":a.onEnteringDelayBeforeShowingMessagesState,"notify:stateHandler.leavingDelayBeforeShowingMessagesState":a.onLeavingDelayBeforeShowingMessagesState,"notify:dialogWindow.dialogShown":a.onDialogShown})},onLoaderClose:function(){this.model.storeData("showingLoader",false);this.model.storeData("shouldShowDialogs",true)},onShowDialogRequest:function(b){var c=this,a;try{a=c.prepareDialogConfig(b)}catch(d){c.showTechnicalError();c.model.storeData("shouldShowDialogs",false);return}delete a.immediate;if(c.model.readData("isIdle")){if(c.model.hasDialogsToWaitFor()){c.model.addDialogToWaitFor(a.id)}c.fireEvent("request:dialogWindow.showDialog",a)}else{c.model.addDialog(a)}},onRemoveDialogRequest:function(a){this.model.removeDialogToWaitFor(a);this.model.removeDialog(a);this.fireEvent("request:dialogWindow.removeDialog",a)},onServerResponseReceived:function(a){var b=Sys.utils.queryStringToObject(a.responseText,true),c=Object.keys(b).length;if(Sys.isDefined(b.messages)){this.handleMessagesFromServerRequest(b.messages,c===1)}},onServerErrorReceived:function(a){var b=Sys.utils.qsToObj(a.responseText,true);if(Sys.isDefined(b.messages)){this.handleMessagesFromServerRequest(b.messages,true)}},handleMessagesFromServerRequest:function(c,b){var f=this,d,a;try{d=JSON.parse(c);if(Sys.isArray(d)){a=d.pop();if(Sys.isDefined(a)){f.model.addDialog(f.prepareDialogConfig(f.createConfigFromMessage(a)))}if(b){f.showImmediateMessages()}return}}catch(g){}f.showTechnicalError();f.model.storeData("shouldShowDialogs",false)},onEnteringSetupGameState:function(){if(!this.model.readData("showingError")){this.fireEvent("notify:customMessages.ready")}},onEnteringIdleState:function(){this.model.storeData("isIdle",true);if(!this.model.readData("shouldShowDialogs")){return}this.showDialogs(this.model.popAll())},onLeavingIdleState:function(){this.model.storeData("isIdle",false)},onEnteringShowingCustomMessagesState:function(){this.showImmediateMessages()},onEnteringDelayBeforeShowingMessagesState:function(){var a=this;clearTimeout(a.delayTimeout);a.startListeningToUserInput();a.delayTimeout=setTimeout(a.fireEvent.bind(a,"notify:customMessages.delayComplete"),a.DIALOG_DELAY)},onLeavingDelayBeforeShowingMessagesState:function(){this.stopListeningToUserInput()},onUserInputEnd:function(b){var a=this;if(Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(),b)){clearTimeout(a.delayTimeout);a.fireEvent("notify:customMessages.delayComplete")}},showImmediateMessages:function(){if(!this.model.readData("shouldShowDialogs")){return}this.showDialogs(this.model.popAllImmediate())},onDialogShown:function(b){var a=this;if(!Sys.isDefined(b)){return}a.model.removeDialogToWaitFor(b);if(!a.model.hasDialogsToWaitFor()){a.fireEvent("notify:customMessages.messagesClosed")}},showDialogs:function(d){var c=this,a,b;if(d.length>0){for(b=0;b<d.length;b++){a=d[b];c.model.addDialogToWaitFor(a.id);if((a.messageCode===991||a.messageCode===993||a.stopAutoplay)&&Services.settingsManager.getSetting("autoPlayNrSpins")>0){c.fireEvent("request:autoPlayer.stop")}c.fireEvent("request:dialogWindow.showDialog",a)}}else{c.fireEvent("notify:customMessages.messagesClosed")}},createConfigFromMessage:function(i){var g=this,e=g.model,f=990,h=991,a=992,c=993,b={title:Services.languageManager.getText(Language.Keys.messageCaption),text:i.message,buttons:[],immediate:true,id:i.code,messageCode:i.code},d;switch(i.code){case f:d=e.getCloseButtonConfig(g);b.hideGame=true;break;case h:d=e.getContinueButtonConfig(g,true);break;case a:d=e.getCloseButtonConfig(g);b.hideGame=true;b.immediate=false;break;case c:d=e.getContinueButtonConfig(g);b.immediate=false;break;default:throw new Error("Technical Error")}if(Sys.isDefined(d)){b.buttons.push(d)}return b},prepareDialogConfig:function(a){a.text=this.scrubMessageString(a.text);return a},scrubMessageString:function(c){var a=(c.match(/(<|>)/g)||[]).length>0,b=document.createElement("div");if(a){throw new Error("Technical Error")}try{b.innerHTML=c}catch(d){throw new Error("Technical Error")}return c},showTechnicalError:function(){var a=this;a.model.storeData("showingError",true);if(a.model.readData("showingLoader")){a.fireEvent("request:loaderErrorHandler.showTechnicalError")}else{a.fireEvent("request:errorManager.handleError")}},revertSpin:function(){this.fireEvent("request:moneyManager.revertBet");this.fireEvent("request:spin.cancelSpin")}};Core.CustomMessagesController=Sys.extend(Core.Controller,Core.CustomMessagesController,"Core.CustomMessagesController");Sys.ns("Core");Core.CustomMessagesModel={constructor:function(){Core.CustomMessagesModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=this;a.roundEndQueue=[];a.immediateQueue=[];a.dialogsToWaitFor=[];a.storeData("isIdle",false)},addDialogToWaitFor:function(a){this.dialogsToWaitFor.push(a)},removeDialogToWaitFor:function(b){var a=this.dialogsToWaitFor.indexOf(b);if(a!==-1){this.dialogsToWaitFor.splice(a,1)}},hasDialogsToWaitFor:function(){return this.dialogsToWaitFor.length>0},addDialog:function(a){if(a.immediate){this.immediateQueue.push(a)}else{this.roundEndQueue.push(a)}},removeDialog:function(b){var a=this;a.spliceDialogFromQueue(a.roundEndQueue,b);a.spliceDialogFromQueue(a.immediateQueue,b)},spliceDialogFromQueue:function(b,d){var a=b.length,c;for(c=0;c<a;c++){if(b[c].id===d){return b.splice(c,1)}}},popAllImmediate:function(){return this.immediateQueue.splice(0,this.immediateQueue.length)},popAllRoundEnd:function(){return this.roundEndQueue.splice(0,this.roundEndQueue.length)},popAll:function(){return this.popAllImmediate().concat(this.popAllRoundEnd())},hasImmediate:function(){return this.immediateQueue.length>0},hasDialogs:function(){return(this.immediateQueue.length>0||this.roundEndQueue.length>0)},getCloseButtonConfig:function(a){return{scope:a,text:Services.languageManager.getText(Language.Keys.btn_casino),action:function(){Environment.goToLobby()}}},getContinueButtonConfig:function(b,a){return{scope:b,text:Services.languageManager.getText(Language.Keys.btn_continue),action:function(){if(a){b.revertSpin()}}}}};Core.CustomMessagesModel=Sys.extend(Core.Model,Core.CustomMessagesModel,"Core.CustomMessagesModel");Sys.ns("Core");Core.CustomMessagesDesktopModel={constructor:function(){Core.CustomMessagesDesktopModel.superclass.constructor.apply(this,arguments)},getCloseButtonConfig:function(){}};Core.CustomMessagesDesktopModel=Sys.extend(Core.CustomMessagesModel,Core.CustomMessagesDesktopModel,"Core.CustomMessagesDesktopModel");Sys.ns("Core");Core.ServerManager={constructor:function(){Core.ServerManager.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.ServerManagerModel,controller:Core.ServerManagerController}}};Core.ServerManager=Sys.extend(Core.Module,Core.ServerManager,"Core.ServerManager");Sys.ns("Core");Core.ServerManagerController={constructor:function(){Core.ServerManagerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:serverManager.sendAction":a.sendAction,"request:serverManager.storeParameter":a.storeParameter,"notify:moduleLoader.finishedLoadingModules":a.initResponse})},initResponse:function(){this.fireEvent("notify:serverManager.serverResponseReceived",{responseText:Resources.readData("unParsedGameServerInitResponse")})},sendAction:function(f,b,g){var e=this,d=e.model.getRequestURL(f),c,a;c=Sys.utils.httpGet({url:d});e.fireEvent("notify:serverManager.actionRequestSent",f);a=setTimeout(function(){e.fireEvent("notify:serverManager.slowRequest",c)},e.model.readData("slowServerRequestTimeLimit"));c.done(function(h){e.fireEvent("notify:serverManager.serverResponseReceived",h,b)}).fail(function(h){e.fireEvent("notify:serverManager.serverErrorReceived",h);e.fireEvent("request:errorManager.handleRequestError",h);e.fireEvent("notify:serverManager.actionRequestError",f);if(Sys.isDefined(g)){e.fireEvent(g,h)}}).always(function(){clearTimeout(a)})},storeParameter:function(a,b){this.model.storeData("parameter:"+a,b)}};Core.ServerManagerController=Sys.extend(Core.Controller,Core.ServerManagerController,"Core.ServerManagerController");Sys.ns("Core");Core.ServerManagerModel={constructor:function(){Core.ServerManagerModel.superclass.constructor.apply(this,arguments)},setupData:function(){var b=this,a=Resources.readData("queryData");b.storeData("queryData",a);b.storeData("serverURL",a.server);b.storeData("parameter:sessionID",Resources.readData("sessionID"));b.storeData("parameter:gameID",a.gameId);b.storeData("slowServerRequestTimeLimit",5000)},getRequestURL:function(b){var a=this.readData("serverURL")+"servlet/CasinoGameServlet;jsession="+this.readData("parameter:sessionID")+"?"+this.getActionParameters(b)+"&no-cache="+Sys.utils.pseudoGUID();a=this.doIntegrationSpecificRequestUrlUpdates(a);return a},doIntegrationSpecificRequestUrlUpdates:function(a){return a},getActionParameters:function(a){if(a==="init"){return this.getInitParameters(a)}return""},getInitParameters:function(a){return"action="+a+"&sessid="+this.readData("parameter:sessionID")+"&gameId="+this.readData("parameter:gameID")}};Core.ServerManagerModel=Sys.extend(Core.Model,Core.ServerManagerModel,"Core.ServerManagerModel");Sys.ns("Core");Core.MoneyManager={constructor:function(){Core.MoneyManager.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["serverResponse"]},getDefaultMVCClasses:function(){return{model:Core.MoneyManagerModel,controller:Core.MoneyManagerController}}};Core.MoneyManager=Sys.extend(Core.Module,Core.MoneyManager,"Core.MoneyManager");Sys.ns("Core");Core.MoneyManagerController={constructor:function(){Core.MoneyManagerController.superclass.constructor.apply(this,arguments)},formatMoney:function(a,c,b){return this.model.formatMoney(a,c,b)},formatMoneyCurrencySign:function(a,c,b){return this.model.formatMoneyCurrencySign(a,c,b)},getBalanceCents:function(){return this.model.getBalanceCents()},getBalanceCoins:function(){return this.model.getBalanceCoins()},getBetCents:function(){return this.model.getBetCents()},getBetCoins:function(){return this.model.getBetCoins()},canPlaceAnotherBet:function(){return(this.getBetCents()<=this.getBalanceCents()||this.model.readData("inFreeRounds"))},setupEvents:function(){var a=this;a.on({"notify:stateHandler.leavingBeforeLoaderCloseState":a.onBeforeLoaderClose,"notify:responseParser.responseParsed":a.onServerResponse,"notify:settingsManager.settingChanged":a.onSettingChanged,"request:moneyManager.revertBet":a.revertBet})},onBeforeLoaderClose:function(){this.notifyBalanceChange()},onSettingChanged:function(b,d){var c=this,a=c.model;if(b==="betLevel"||b==="denomination"||b==="betLines"){if(b==="betLevel"){if(a.setBetLevel(d)){c.notifyBetChange()}}else{if(b==="denomination"){if(a.setDenomination(d)){c.notifyBetChange()}}}}},placeBet:function(){var a=this;if(!a.model.readData("inFreeRounds")){a.setBalance(a.getBalanceCents()-a.getBetCents())}},revertBet:function(){var a=this;a.setBalance(a.getBalanceCents()+a.getBetCents());a.reloadBalance()},setBalance:function(a){var c=this,b=this.model;if(b.setBalance(a)){c.notifyBetChange();c.notifyBalanceChange()}},reloadBalance:function(){var b=this,a=new Sys.Deferred();b.addListener("notify:responseParser.reloadBalanceParsed",function(c){b.setBalance(parseInt(c.credit,10));a.resolve(c);b.removeListener("notify:responseParser.reloadBalanceParsed");b.removeListener("notify:serverManager.reloadBalanceRequestFailed");b.fireEvent("notify:moneyManager.balanceReloaded")});b.addListener("notify:serverManager.reloadBalanceRequestFailed",function(c){a.reject(c);b.removeListener("notify:responseParser.reloadBalanceParsed");b.removeListener("notify:serverManager.reloadBalanceRequestFailed")});b.fireEvent("request:serverManager.sendAction","reloadbalance","notify:responseParser.reloadBalanceParsed","notify:serverManager.reloadBalanceRequestFailed");return a},notifyBalanceChange:function(){var b=this,a=this.model;b.fireEvent("notify:moneyManager.balanceChanged",{denomination:a.readData("denomination"),playerBetCents:a.readData("playerBetCents"),playerBalanceCoins:a.readData("playerBalanceCoins"),playerBalanceCents:a.readData("playerBalanceCents"),playerBalanceFormatted:b.formatMoneyCurrencySign(a.readData("playerBalanceCents"))})},notifyBetChange:function(){var b=this,a=this.model;b.fireEvent("notify:moneyManager.betChanged",{playerBetCoins:a.readData("playerBetCoins"),playerBetCents:a.readData("playerBetCents"),playerBetFormatted:b.formatMoneyCurrencySign(a.readData("playerBetCents"))})},getMinimumBetCents:function(){return this.model.getMinimumBetInCents()},getCurrencyIsoName:function(a){return this.model.getMoneyFormat(a).iso}};Core.MoneyManagerController=Sys.extend(Core.Controller,Core.MoneyManagerController,"Core.MoneyManagerController");Sys.ns("Core");Core.MoneyManagerModel={constructor:function(){Core.MoneyManagerModel.superclass.constructor.apply(this,arguments)},formatMoney:function(f,h,d){var a=this.getMoneyFormat(h),g="",e,b,j,c;d=d===undefined?2:d;e=(Math.floor(f)/100).toFixed(d).split(".");b=e[0];for(c=0;c<b.length;c++){if(c>0&&c%3===0){g=a.thousandsDivider+g}g=b[b.length-c-1]+g}j=e[1];if(j){g+=a.decimalDivider+j}return g},formatMoneyCurrencySign:function(a,f,b){var c=this.getMoneyFormat(f),e,d;d=this.formatMoney(a,f,b);e=c.currencyChar;if(c.isCurrCharAfter){return d+(e.length>1?" ":"")+e}else{return e+(e.length>1?" ":"")+d}},getCurrency:function(a){return this.getMoneyFormat(a).currencyChar},processServerResponse:function(a){if(Sys.isDefined(a.credit)){this.setBalance(a.credit)}},setBalance:function(a){if(a>=0&&Math.floor(a)===a){this.storeData("playerBalanceCents",a);this.storeData("playerBalanceCoins",Math.floor(a/this.readData("denomination")));return true}return false},setBetLevel:function(c){var b=this,a;if(c>0&&Math.floor(c)===c){b.storeData("betLevel",c);a=c*b.readData("betlineCoins");b.storeData("playerBetCoins",a);b.storeData("playerBetCents",a*b.readData("denomination"));return true}return false},setDenomination:function(b){var a=this;if(b>0){a.storeData("denomination",b);a.storeData("playerBetCents",a.readData("playerBetCoins")*b);a.storeData("playerBalanceCoins",Math.floor(a.readData("playerBalanceCents")/b));return true}return false},getBalanceCents:function(){return this.readData("playerBalanceCents")},getBalanceCoins:function(){return this.readData("playerBalanceCoins")},getBetCents:function(){return this.readData("playerBetCents")},getBetCoins:function(){return this.readData("playerBetCoins")},setupData:function(){var b=this,a=Resources.readData("gameServerInitResponse");b.setupMoneyHandling();b.setBalance(Number(a.credit));b.storeData("betlineCoins",b.getBetlineCoinValue(a));b.storeData("inFreeRounds",parseInt(a.freeRoundsLeft,10)>0);b.calculateMinimumBetInCents()},getBetlineCoinValue:function(d){var b=d["bl.standard"].split(","),e=b.length,a=0,c;for(c=-1;++c<e;){a+=Sys.utils.toInt(d["bl.i"+c+".coins"])}return a},calculateMinimumBetInCents:function(){var c=this,b=Resources.readData("gameServerInitResponseObject"),d=b.betlevel.all,h=b.denomination.all,g=c.validateArray(d),f=c.validateArray(h),a=c.readData("betlineCoins"),e=g[0]*a*f[0];c.setMinimumBetInCents(e)},validateArray:function(a){if(!Sys.isArray(a)){return[a]}return a.slice(0).sort(function(d,c){return d-c})},setMinimumBetInCents:function(a){this.storeData("minimumBetInCents",a)},getMinimumBetInCents:function(){return this.readData("minimumBetInCents")},setupMoneyHandling:function(){var b=this,a=Resources.readData("gameServerInitResponse");b.language=a.language;b.availableFormats=["player","jackpot"];b.moneyFormats={player:Sys.utils.XMLHelper.getMoneyFormatFromXML(Resources.readData("moneyformat_player"),a.playercurrencyiso),jackpot:Sys.utils.XMLHelper.getMoneyFormatFromXML(Resources.readData("moneyformat_jackpot"),a.jackpotcurrencyiso)};if(!Sys.isDefined(b.moneyFormats.player)){throw new Error("The player currency format is missing!")}if(!Sys.isDefined(b.moneyFormats.jackpot)){throw new Error("The jackpot currency format is missing!")}},getMoneyFormat:function(a){if(!this.availableFormats.contains(a)){a="player"}return this.moneyFormats[a]}};Core.MoneyManagerModel=Sys.extend(Core.Model,Core.MoneyManagerModel,"Core.MoneyManagerModel");Sys.ns("Core");Core.SettingsManager={constructor:function(){Core.SettingsManager.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["trigger"]},getDefaultMVCClasses:function(){return{model:Core.SettingsManagerModel,controller:Core.SettingsManagerController}}};Core.SettingsManager=Sys.extend(Core.Module,Core.SettingsManager,"Core.SettingsManager");Sys.ns("Core");Core.SettingsManagerController={constructor:function(){Core.SettingsManagerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:settingsManager.storeData":a.storeSetting,"request:settingsManager.lockSetting":a.lockSetting,"request:settingsManager.unlockSetting":a.unlockSetting,"request:settingsManager.disableSetting":a.disableSetting,"request:settingsManager.enableSetting":a.enableSetting})},registerTriggers:function(){Services.trigger.registerTrigger("notify:settingsManager.settingChanged",this,"When the settings are changed")},isSettable:function(a){var b=this;return !b.model.isLocked(a)&&!b.model.isDisabled(a)},storeSetting:function(c,e,f,a){var d=this,b;if(!d.model.isLocked(c)&&!d.model.isDisabled(c)){b=d.model.readData("settings");if(b[c]!==e){b[c]=e;d.model.storeData("settings",b);if(f){if(Sys.isDefined(e)&&e!==null){Services.localStorageManager.storeData(c,e.toString())}}if(!a){d.fireEvent("notify:settingsManager.settingChanged",c,e)}}}},getSetting:function(a){return this.model.readData("settings")[a]},lockSetting:function(b,a){var c=this.model.readData("lockedSettings");if(!Sys.isArray(c[b])){c[b]=[]}if(!c[b].contains(a)){c[b].push(a);this.model.storeData("lockedSettings",c);if(c[b].length===1){this.fireEvent("notify:settingsManager.settingLocked",b)}}},unlockSetting:function(b,a){var c=this.model.readData("lockedSettings");if(Sys.isArray(c[b])&&c[b].contains(a)){c[b].splice(c[b].indexOf(a),1);this.model.storeData("lockedSettings",c);if(c[b].length===0){this.fireEvent("notify:settingsManager.settingUnlocked",b)}}},disableSetting:function(a){var b=this;b.model.readData("disabledSettings")[a]=true;b.fireEvent("notify:settingsManager.settingDisabled",a)},enableSetting:function(a){var b=this;b.model.readData("disabledSettings")[a]=false;b.fireEvent("notify:settingsManager.settingEnabled",a)}};Core.SettingsManagerController=Sys.extend(Core.Controller,Core.SettingsManagerController,"Core.SettingsManagerController");Sys.ns("Core");Core.SettingsManagerModel={constructor:function(){Core.SettingsManagerModel.superclass.constructor.apply(this,arguments)},setupData:function(){this.data={settings:{},lockedSettings:{},disabledSettings:{}}},isLocked:function(b){var a=this.readData("lockedSettings")[b];return Sys.isArray(a)&&a.length>0},isDisabled:function(a){var b=this;return b.readData("disabledSettings")[a]}};Core.SettingsManagerModel=Sys.extend(Core.Model,Core.SettingsManagerModel,"Core.SettingsManagerModel");Sys.ns("Core");Core.StopGame={constructor:function(){Core.StopGame.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation"]},getDefaultMVCClasses:function(){return{controller:Core.StopGameController,view:Core.StopGameView}}};Core.StopGame=Sys.extend(Core.Module,Core.StopGame,"Core.StopGame");Sys.ns("Core");Core.StopGameController={constructor:function(){Core.StopGameController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:stopGame.disable":a.disable,"request:stopGame.pause":a.pause})},disable:function(){this.pause();this.view.displayOverlay()},disableAnimations:function(){this.fireEvent("request:stage.pauseAnimation")},disableAudio:function(){this.fireEvent("request:audioPlayer.stopAll");Services.settingsManager.storeSetting("volume",0)},disableInterface:function(){var a=this;a.fireEvent("request:disableBasicGamePanel",a.MODULE_NAME);a.fireEvent("request:userInputManager.activateExclusivity",a.MODULE_NAME)},pause:function(){this.disableInterface();this.disableAnimations();this.disableAudio()}};Core.StopGameController=Sys.extend(Core.Controller,Core.StopGameController,"Core.StopGameController");Sys.ns("Core");Core.StopGameView={constructor:function(){Core.StopGameView.superclass.constructor.apply(this,arguments)},displayOverlay:function(){this.overlay.el.style.display="block"},initAnimations:function(){this.overlay=new Sys.Element({tag:"div",id:"stopGameOverlay",cls:"stopGameOverlay",style:"display:none",renderTo:"gameWrapper"})}};Core.StopGameView=Sys.extend(Core.View,Core.StopGameView,"Core.StopGameView");Sys.ns("Core");Core.RealityCheck={CONTROL_STATE:"idle",constructor:function(){Core.RealityCheck.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["serverResponse"]},getStateChanges:function(){var a=this.model,b={realityCheck:{state:{name:"RealityCheck",execute:function(c){},waitEvents:{"notify:realityCheck:completed":false}}}};b[this.CONTROL_STATE]={queue:[function(c){if(a.isTimeToDoRealityCheck()){c.stateHandler.pushState(c.states.realityCheck)}}]};return b},getDefaultMVCClasses:function(){return{model:Core.RealityCheckModel,view:Core.View,controller:Core.RealityCheckController}}};Core.RealityCheck=Sys.extend(Core.Module,Core.RealityCheck,"Core.RealityCheck");Sys.ns("Core");Core.RealityCheckController={constructor:function(){Core.RealityCheckController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringRealityCheckState":a.doRealityCheck,"notify:responseParser.rcInfoParsed":a.handleInfoResponse,"notify:responseParser.rcInfoReset":a.handleResetResponse,"notify:responseParser.responseParsed":a.handleGenericResponse})},sendServerAction:function(a,b){this.model.setState("requestPending");this.fireEvent("request:serverManager.sendAction",a,b)},handleResetResponse:function(a){var b=this;b.model.storeData("msUntilTimeout",a.rc.msuntiltimeout);b.model.storeData("lastCheckTime",Date.now())},handleInfoResponse:function(b){var d=this,a=b.rc;if(Sys.isDefined(a)&&a.msuntiltimeout<=0){var c="",f,e=Math.round(a.duration/60/60/10)/100;if(a.totalwin>=0){f=a.totalwin;c=Language.Keys.rc_checkPlayingWon}else{f=Sys.utils.toInt(-a.totalwin);c=Language.Keys.rc_checkPlayingLost}d.requestDialog(Services.languageManager.getText(c,[e,Services.moneyManager.formatMoneyCurrencySign(f)]));d.model.setState("dialogOpen")}else{d.handleResetResponse(b);d.complete()}},requestDialog:function(a){this.fireEvent("request:dialogWindow.showDialog",this.model.getDialog(a,this))},complete:function(){this.fireEvent("notify:realityCheck:completed")},doRealityCheck:function(){this.sendServerAction("rcinfo","notify:responseParser.rcInfoParsed")}};Core.RealityCheckController=Sys.extend(Core.Controller,Core.RealityCheckController,"Core.RealityCheckController");Sys.ns("Core");Core.RealityCheckModel={constructor:function(){Core.RealityCheckModel.superclass.constructor.apply(this,arguments)},getDialog:function(b,a){return{title:Services.languageManager.getText(Language.Keys.rc_checkReminder),text:b,buttons:[{scope:a,text:Services.languageManager.getText(Language.Keys.btn_casino),action:function(){Environment.goToLobby("0")}},{scope:a,text:Services.languageManager.getText(Language.Keys.btn_continue),action:function(){a.sendServerAction("rcreset","notify:responseParser.rcInfoReset");a.complete()}}]}},setupData:function(){var c=this,a=Resources.readData("gameServerInitResponse"),b=(Sys.isDefined(a["rc.enabled"])&&Sys.utils.strIsTrue(a["rc.enabled"]));if(Sys.isDefined(a.freeRoundsLeft)&&Number(a.freeRoundsLeft)>0){b=false}c.storeData("rcEnabled",b);if(b){if(Sys.isDefined(a["rc.msuntiltimeout"])){c.storeData("msUntilTimeout",Sys.utils.toInt(a["rc.msuntiltimeout"]));c.storeData("lastCheckTime",Date.now())}else{c.storeData("rcEnabled",false)}}},processServerResponse:function(a){this.storeData("nextAction",a.nextaction)},isTimeToDoRealityCheck:function(){var a=this,b;if(a.readData("rcEnabled")){b=a.readData("lastCheckTime")+a.readData("msUntilTimeout")<=Date.now();if(a.readData("nextAction")==="spin"&&b){return true}}return false}};Core.RealityCheckModel=Sys.extend(Core.Model,Core.RealityCheckModel,"Core.RealityCheckModel");Sys.ns("Core");Core.RealityCheckDesktopModel={constructor:function(){Core.RealityCheckDesktopModel.superclass.constructor.apply(this,arguments)},getDialog:function(b,a){return{title:Services.languageManager.getText(Language.Keys.rc_checkReminder),text:b,buttons:[{scope:a,text:Services.languageManager.getText(Language.Keys.btn_checkEnd),action:function(){a.fireEvent("request:stopGame.disable")}},{scope:a,text:Services.languageManager.getText(Language.Keys.btn_continue),action:function(){a.sendServerAction("rcreset","notify:responseParser.rcInfoReset");a.complete()}}]}}};Core.RealityCheckDesktopModel=Sys.extend(Core.RealityCheckModel,Core.RealityCheckDesktopModel,"Core.RealityCheckDesktopModel");Sys.ns("Core.Slots");Core.Slots.RealityCheck={CONTROL_STATE:"stopped",constructor:function(){Core.Slots.RealityCheck.superclass.constructor.apply(this,arguments)}};Core.Slots.RealityCheck=Sys.extend(Core.RealityCheck,Core.Slots.RealityCheck,"Core.Slots.RealityCheck");Sys.ns("Core");Core.KeepAlive={constructor:function(){Core.KeepAlive.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.KeepAliveModel,view:Core.View,controller:Core.KeepAliveController}}};Core.KeepAlive=Sys.extend(Core.Module,Core.KeepAlive,"Core.KeepAlive");Sys.ns("Core");Core.KeepAliveController={constructor:function(){Core.KeepAliveController.superclass.constructor.apply(this,arguments)},init:function(){var a=this;Core.KeepAliveController.superclass.init.apply(a,arguments);if(a.model.readData("url")){a.keepAlive()}},keepAlive:function(){var c=this,a=c.model.readData("interval"),b=Sys.utils.httpGet({url:c.model.readData("url"),handleError:false,showTimeoutDialog:false});b.always(function(){setTimeout(function(){c.keepAlive()},a)})}};Core.KeepAliveController=Sys.extend(Core.Controller,Core.KeepAliveController,"Core.KeepAliveController");Sys.ns("Core");Core.KeepAliveModel={constructor:function(){Core.KeepAliveModel.superclass.constructor.apply(this,arguments)},setupData:function(){var d=this,b=Resources.readData("queryData"),c=b.keepAliveURL,e=Resources.readData("sessionID"),a=b.keepAliveInterval;if(Sys.isDefined(c)&&Sys.isDefined(a)&&Sys.isDefined(e)&&Sys.utils.isUrl(c)&&Sys.utils.toInt(a)>=5){d.storeData("url",c+"?sessId="+e);d.storeData("interval",a*1000)}}};Core.KeepAliveModel=Sys.extend(Core.Model,Core.KeepAliveModel,"Core.KeepAliveModel");Sys.ns("Core");Core.PlayForRealPromo={constructor:function(){Core.PlayForRealPromo.superclass.constructor.apply(this,arguments)},getStateChanges:function(){return{idle:{waitEvents:["notify:playForRealPromo:completed"]}}},getDefaultMVCClasses:function(){return{model:Core.PlayForRealPromoModel,view:Core.View,controller:Core.PlayForRealPromoController}}};Core.PlayForRealPromo=Sys.extend(Core.Module,Core.PlayForRealPromo,"Core.PlayForRealPromo");Sys.ns("Core");Core.PlayForRealPromoController={constructor:function(){Core.PlayForRealPromoController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringIdleState":a.onEnteringIdleState})},onEnteringIdleState:function(){var b=this,a=b.model.readData("roundsLeft");if(a===0){b.requestDialog()}else{b.complete()}if(Sys.isDefined(a)){b.model.handleRounds()}},requestDialog:function(){this.fireEvent("request:dialogWindow.showDialog",this.model.getDialog(this))},complete:function(){this.fireEvent("notify:playForRealPromo:completed")}};Core.PlayForRealPromoController=Sys.extend(Core.Controller,Core.PlayForRealPromoController,"Core.PlayForRealPromoController");Sys.ns("Core");Core.PlayForRealPromoModel={constructor:function(){Core.PlayForRealPromoModel.superclass.constructor.apply(this,arguments)},getDialog:function(a){return{title:Services.languageManager.getText(Language.Keys.youPlayingForFun),buttons:[{text:Services.languageManager.getText(Language.Keys.btn_login),scope:a,action:function(){Environment.goToLobby("4")}},{text:Services.languageManager.getText(Language.Keys.btn_continue),scope:a,action:function(){a.complete()}}]}},setupData:function(){var c=this,b=Resources.readData("gameServerInitResponse");if(b.playforfun&&Sys.isDefined(b["playforrealpromo.rounds"])){var a=Sys.utils.toInt(b["playforrealpromo.rounds"]);c.storeData("roundsLeft",a);c.storeData("rounds",a)}},handleRounds:function(){var a=this.readData("roundsLeft"),b;if(a===0){b=this.readData("rounds")}else{b=--a}this.storeData("roundsLeft",b)}};Core.PlayForRealPromoModel=Sys.extend(Core.Model,Core.PlayForRealPromoModel,"Core.PlayForRealPromoModel");Sys.ns("Core");Core.PlayForRealPromoDesktopModel={constructor:function(){Core.PlayForRealPromoDesktopModel.superclass.constructor.apply(this,arguments)},getDialog:function(a){return{title:Services.languageManager.getText(Language.Keys.youPlayingForFun),buttons:[{text:Services.languageManager.getText(Language.Keys.btn_continue),scope:a,action:function(){a.complete()}}]}}};Core.PlayForRealPromoDesktopModel=Sys.extend(Core.PlayForRealPromoModel,Core.PlayForRealPromoDesktopModel,"Core.PlayForRealPromoDesktopModel");Sys.ns("Core");Core.CountUp={constructor:function(){Core.CountUp.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation"]},getDefaultMVCClasses:function(){return{model:Core.CountUpModel,view:Core.CountUpView,controller:Core.CountUpController}}};Core.CountUp=Sys.extend(Core.Module,Core.CountUp,"Core.CountUp");Sys.ns("Core");Core.CountUpModel={constructor:function(){Core.CountUpModel.superclass.constructor.apply(this,arguments);this.setState("stopped")},setupData:function(){this.defineEasingMethods()},defineEasingMethods:function(){var a={"ease-in":0,"ease-out":1,linear:0.5};this.storeData("easingMethods",a)}};Core.CountUpModel=Sys.extend(Core.Model,Core.CountUpModel,"Core.CountUpModel");Sys.ns("Core");Core.CountUpView={constructor:function(){Core.CountUpView.superclass.constructor.apply(this,arguments)},NUMBER_IMAGE:undefined,NUMBER_WIDTH:80,NUMBER_HEIGHT:100,NUMBER_FONT:"bold 100px Verdana",NUMBER_OFFSET:0,NUMBER_TEXT_OPERATIONS:[{fillStyle:"#FFFFFF"},{lineWidth:5,strokeStyle:"#00000",drawType:"stroke"}],COUNT_UP_LEFT:undefined,COUNT_UP_TOP:250,COUNT_UP_DEPTH:100,COUNT_UP_EASING_TYPE:"ease-out",SHOW_TOTAL_DURATION:3000,configureStartAnimation:function(a){},configureEndAnimation:function(){},createItems:function(){var a=this;a.countUpItem=a.createCountUpItem();a.list.add(a.countUpItem)},initAnimations:function(){this.scaleFactor=this.getScaleFactor();this.createList();this.createItems();Game.stage.view.addToRenderLoop(this.list);this.list.stop()},getScaleFactor:function(){return Resources.readData("config").mobileResourceToVirtualScale||1},createList:function(){this.list=new Animation.CanvasAnimationList({})},createCountUpItem:function(){var a=this,b=Animation.utils.text.createNumberDrawingProperties(a);return new Animation.CanvasAnimationItem({left:Math.round(a.COUNT_UP_LEFT*a.scaleFactor)||Environment.getStageResolution().width/2,top:Math.round(a.COUNT_UP_TOP*a.scaleFactor),width:0,height:0,depth:a.COUNT_UP_DEPTH,executeBefore:function(c){var i=this,e,g,f=this,h=f.value.toString(),d;Animation.utils.text.drawTextFromImage(h,a.NUMBER_OFFSET,i.pivot.x,i.pivot.y,true,b.image,b.charMap,b.width,b.height,c);if(Sys.isDefined(f.fireOnValue)){e=f.fireOnValue.length;for(d=-1;++d<e;){g=f.fireOnValue[d];if(!g.fired&&f.value>=g.value){g.scope.fireEvent(g.event,g.argument);g.fired=true}}}},operations:{}})},setCountUpValues:function(a){var b=this,c=b.countUpItem.prop;c.fireOnValue=a.fireEventsOnValue;c.operations={value:[{time:0,value:a.from,support:b.model.readData("easingMethods")[b.COUNT_UP_EASING_TYPE]*a.to,numDecimals:0},{time:a.duration,value:a.to,fireEvent:{event:"view:countUpComplete",scope:b}},{time:a.duration+1,value:a.to},{time:a.duration+2,value:a.to,goTo:2}]};b.configureStartAnimation(a.duration)},start:function(a){this.list.restore();this.setCountUpValues(a);this.list.play()},stop:function(){this.list.stop()},pause:function(){this.list.pause()},resume:function(){this.list.play()},showTotal:function(e){var c=this,b,d=[],a;e=e||{};c.list.stop();b=c.countUpItem.prop.operations.value[1].value;c.countUpItem.prop.fireOnValue.length=0;c.list.restore();d.push({value:b,time:0});if(e.showUntilStopped){d.push({value:b,time:1,goTo:0})}else{a=Sys.isDefined(e.showDuration)?e.showDuration:c.SHOW_TOTAL_DURATION;d.push({value:b,time:a,fireEvent:{event:"view:showTotalDurationPassed",scope:c}})}c.countUpItem.value(d);c.configureEndAnimation(a);c.list.play()}};Core.CountUpView=Sys.extend(Core.View,Core.CountUpView,"Core.CountUpView");Sys.ns("Core");Core.CountUpController={constructor:function(){Core.CountUpController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this,b={"view:countUpComplete":a.onCountUpComplete,"view:showTotalDurationPassed":a.stop};b["request:"+a.MODULE_NAME+".start"]=a.start;b["request:"+a.MODULE_NAME+".pause"]=a.pause;b["request:"+a.MODULE_NAME+".resume"]=a.resume;b["request:"+a.MODULE_NAME+".stop"]=a.stop;b["request:"+a.MODULE_NAME+".showTotal"]=a.showTotal;a.on(b)},start:function(a){this.view.start(a);this.model.setState("countingUp")},stop:function(){var a=this;if(!a.model.isState("stopped")){a.model.setState("stopped");a.view.stop();a.fireEvent("notify:"+this.MODULE_NAME+".hidden")}},pause:function(){this.view.pause()},resume:function(){if(!this.model.isState("stopped")){this.view.resume()}},showTotal:function(a){if(!this.model.isState("showingTotal")){this.view.showTotal(a);this.model.setState("showingTotal")}},onCountUpComplete:function(){this.fireEvent("notify:"+this.MODULE_NAME+".countUpComplete")}};Core.CountUpController=Sys.extend(Core.Controller,Core.CountUpController,"Core.CountUpController");Sys.ns("Game.Slots");Game.Slots.BigWinCountUp={constructor:function(){Game.Slots.BigWinCountUp.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.CountUpModel,view:Game.Slots.BigWinCountUpView,controller:Core.CountUpController}}};Game.Slots.BigWinCountUp=Sys.extend(Core.CountUp,Game.Slots.BigWinCountUp,"Game.Slots.BigWinCountUp");Sys.ns("Game.Slots");Game.Slots.BigWinCountUpView={constructor:function(){Game.Slots.BigWinCountUpView.superclass.constructor.apply(this,arguments)},IMAGE:undefined,CHARACTER_WIDTH:90,CHARACTER_HEIGHT:100,FONT:"bold 100px Verdana",OFFSET:0,TEXT_OPERATIONS:[{fillStyle:"#FFFFFF"},{lineWidth:5,strokeStyle:"#00000",drawType:"stroke"}],LEFT:undefined,TOP:188,DEPTH:100,EASING:"ease-out",SHOW_TOTAL_DURATION:1000,configureStartAnimation:function(a){this.countUpItem.prop.ownOpacity=1},configureEndAnimation:function(b){var a=this;a.countUpItem.prop.operations.fade=[{value:1,time:0},{value:0,time:b}]}};Game.Slots.BigWinCountUpView=Sys.extend(Core.CountUpView,Game.Slots.BigWinCountUpView,"Game.Slots.BigWinCountUpView");Sys.ns("Core");Core.DialogWindow={constructor:function(){Core.DialogWindow.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.DialogWindowModel,view:Core.DialogWindowBaseView,controller:Core.DialogWindowController}},getMixinDependencies:function(){return[{userInput:{inputEvents:["start","end","move","scroll"]}},"orientation"]}};Core.DialogWindow=Sys.extend(Core.Module,Core.DialogWindow,"Core.DialogWindow");Sys.ns("Core");Core.DialogWindowController={constructor:function(){Core.DialogWindowController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var b=this,a={"request:dialogWindow.showDialog":b.onShowDialogRequest,"request:dialogWindow.removeDialog":b.onRemoveDialogRequest,"request:dialogWindow.closeCurrentDialog":b.onCloseDialogRequest,"view:dialogShown":b.onDialogShown,"view:showingDialog":b.onShowingDialog,"view:pauseGame":b.pauseGame};a["notify:userInputManager."+b.MODULE_NAME+"ExclusiveStart"]=b.onUserInputStart;a["notify:userInputManager."+b.MODULE_NAME+"ExclusiveEnd"]=b.onUserInputEnd;a["notify:userInputManager."+b.MODULE_NAME+"ExclusiveMove"]=b.onUserInputMove;a["notify:userInputManager."+b.MODULE_NAME+"ExclusiveScroll"]=b.onUserInputScroll;b.on(a)},onShowDialogRequest:function(a){var b=this;if(!b.model.isState("showing")){b.view.showDialog(a)}else{if(a.fatal&&!b.model.readData("currentDialogConfig").fatal){b.model.addAsFirst(a);b.view.closeCurrentDialog()}else{b.model.queue(a)}}},onRemoveDialogRequest:function(d){var c=this,a=c.model.isState("showing"),b=c.model.readData("currentDialogConfig");if(a&&Sys.isDefined(b)&&Sys.isDefined(b.id)&&b.id===d){c.view.closeCurrentDialog();c.fireEvent("request:userInputManager.deactivateExclusivity",c.MODULE_NAME)}else{this.model.remove(d)}},onCloseDialogRequest:function(){var a=this;if(Sys.isDefined(a.model.readData("currentDialogConfig"))&&!a.model.readData("currentDialogConfig").fatal){a.view.closeCurrentDialog();a.fireEvent("request:userInputManager.deactivateExclusivity",a.MODULE_NAME)}},onDialogShown:function(a){var b=this;if(b.model.hasQueuedDialog()){b.view.showNextDialog()}else{b.fireEvent("request:quickSettingsMenu.externalActivate",b.MODULE_NAME);b.fireEvent("request:enableBasicGamePanel",b.MODULE_NAME);b.fireEvent("notify:dialogWindow.allDialogsClosed")}b.fireEvent("notify:dialogWindow.dialogShown",a.id)},onShowingDialog:function(){var a=this;a.fireEvent("request:userInputManager.activateExclusivity",a.MODULE_NAME);a.fireEvent("request:quickSettingsMenu.externalDeactivate",a.MODULE_NAME);a.fireEvent("request:disableBasicGamePanel",a.MODULE_NAME);a.fireEvent("notify.dialogWindow.showingDialog")},pauseGame:function(){this.fireEvent("request:stopGame.pause")},onUserInputStart:function(c){var b=this,a=b.view.getButtonFromCoordinate(c);b.view.handleScrolling("start",c);if(a){b.model.storeData("activeButton",a)}},onUserInputEnd:function(d){var c=this,a=Sys.UserInputUtils.getDOMElementFromCoordinates(d),b=c.model.readData("activeButton");c.view.handleScrolling("end",d);if(Sys.isDefined(b)&&Sys.UserInputUtils.isParentAndChildElements(b.element,a)){b.action();c.fireEvent("request:userInputManager.deactivateExclusivity",c.MODULE_NAME)}c.model.removeData("activeButton")},onUserInputMove:function(a){this.view.handleScrolling("move",a)},onUserInputScroll:function(b,a){this.view.handleScrolling("scroll",b,a)},onPortrait:function(){this.view.handleScrolling("orientation")},onLandscape:function(){this.view.handleScrolling("orientation")}};Core.DialogWindowController=Sys.extend(Core.Controller,Core.DialogWindowController,"Core.DialogWindowController");Sys.ns("Core");Core.DialogWindowModel={constructor:function(){Core.DialogWindowModel.superclass.constructor.apply(this,arguments)},setupData:function(){this.requestQueue=[];Services.storage.storeData("dialog.showing",false)},queue:function(a){this.requestQueue.push(a)},addAsFirst:function(a){this.requestQueue.unshift(a)},getNextDialogConfig:function(){if(this.requestQueue.length>0){return this.requestQueue.shift()}else{return undefined}},remove:function(b){var a;for(a=0;a<this.requestQueue.length;a++){if(this.requestQueue[a].id===b){this.requestQueue.splice(a,1);break}}},hasQueuedDialog:function(){return this.requestQueue.length>0}};Core.DialogWindowModel=Sys.extend(Core.Model,Core.DialogWindowModel,"Core.DialogWindowModel");Sys.ns("Core");Core.DialogWindowView={constructor:function(){Core.DialogWindowView.superclass.constructor.apply(this,arguments);this.dialogDOMElement=new Core.DialogWindowDOMElement()},button1Clicked:function(){var a=this.model.readData("currentDialogConfig");this.handleButtonClick(a.buttons[0],!a.fatal)},button2Clicked:function(){var a=this.model.readData("currentDialogConfig");this.handleButtonClick(a.buttons[1],!a.fatal)},handleButtonClick:function(b,a){if(b&&b.action){b.action.call(b.scope||window)}if(a){this.closeCurrentDialog()}},hideGame:function(){document.getElementById("gameWrapper").classList.add("hideGame");this.fireEvent("view:pauseGame")},showDialog:function(a){var c=this,b=c.dialogDOMElement;b.setTitle(a.title);b.setMessage(a.text);b.setScrollable(b.text.el.textContent.length>150);b.hideButtons();if(a.buttons.length===2){b.showDualButtons(a.buttons[0].text,a.buttons[1].text)}else{if(a.buttons.length===1){b.showSingleButton(a.buttons[0].text)}}c.model.storeData("currentDialogConfig",a);c.model.setState("showing");c.fireEvent("view:showingDialog");b.show();Services.storage.storeData("dialog.showing",true);c.dialogDOMElement.scroll.show();c.dialogDOMElement.scroll.scrollTo(0,0,false);if(Sys.isDefined(a.hideGame)&&a.hideGame){c.hideGame()}},getButtonFromCoordinate:function(h){var e=this,c=Sys.UserInputUtils.getDOMElementFromCoordinates(h),a=e.dialogDOMElement.singleButton.getContainer().el,b=e.dialogDOMElement.leftDualButton.getContainer().el,f=e.dialogDOMElement.rightDualButton.getContainer().el,g,d;if(Sys.UserInputUtils.isParentAndChildElements(a,c)){g=a}if(!Sys.isDefined(g)&&Sys.UserInputUtils.isParentAndChildElements(b,c)){g=b}if(!Sys.isDefined(g)&&Sys.UserInputUtils.isParentAndChildElements(f,c)){g=f}switch(g){case a:case b:d=e.button1Clicked.bind(e);break;case f:d=e.button2Clicked.bind(e);break;default:return undefined}return{element:g,action:d}},showNextDialog:function(){var a=this.model.getNextDialogConfig();if(a){this.showDialog(a)}},closeCurrentDialog:function(){this.dialogDOMElement.close();this.model.setState("idle");this.fireEvent("view:dialogShown",this.model.readData("currentDialogConfig"));Services.storage.storeData("dialog.showing",false)},handleScrolling:function(a,d,c){var b=this;if(b.dialogDOMElement.scroll){switch(a){case"start":b.dialogDOMElement.scroll.onUserInputStart(d);break;case"end":b.dialogDOMElement.scroll.onUserInputEnd(d);break;case"move":b.dialogDOMElement.scroll.onUserInputMove(d);break;case"scroll":b.dialogDOMElement.scroll.onUserInputScroll(d,c);break;case"orientation":b.dialogDOMElement.scroll.show();break}}}};Core.DialogWindowView=Sys.extend(Core.View,Core.DialogWindowView,"Core.DialogWindowView");Sys.ns("Gui");Core.DialogWindowDOMElement={constructor:function(){var a=this;a.initParentAsWrapper();a.initContainer();a.initTitle();a.initText();a.initButtonContainer();a.initSingleButton();a.initDualButtons()},initParentAsWrapper:function(){Core.DialogWindowDOMElement.superclass.constructor.call(this,{tag:"div",id:"dialogWindowWrapper",cls:"dialogWindowWrapper hidden"});document.body.appendChild(this.getEl())},initContainer:function(){this.container=new Sys.Element({tag:"div",id:"dialogWindowContainer",cls:"dialogWindowContainer"});this.add(this.container)},initTitle:function(){this.title=this.container.add(new Sys.Element({tag:"div",id:"dialogWindowTitle",cls:"dialogWindowTitle"}))},initText:function(){var a=this;a.text=new Sys.Element({tag:"div",id:"dialogWindowText",cls:"dialogWindowText"});a.scroll=new Interface.utils.DOMScrollableContent({content:a.text,id:"dialogWindowScroll",CSS:{base:"dialogWindowScrollWrapper"}});a.container.add(a.scroll.container);a.scroll.addScrollBar();a.scroll.enable()},initButtonContainer:function(){this.buttonContainer=new Sys.Element({tag:"div",id:"dialogWindowButtonContainer",cls:"dialogWindowButtonContainer"});this.container.add(this.buttonContainer)},initSingleButton:function(){this.singleButton=new Interface.utils.Button({id:"dialogWindowSingleButton",CSS:{base:"button dialogWindowSingleButton"},hidden:true});this.buttonContainer.add(this.singleButton.getContainer())},initDualButtons:function(){var a=this;a.leftDualButton=new Interface.utils.Button({id:"dialogWindowLeftDualButton",CSS:{base:"button dialogWindowDualButton dialogWindowRightButton"},hidden:true});a.buttonContainer.add(a.leftDualButton.getContainer());a.rightDualButton=new Interface.utils.Button({id:"dialogWindowRightDualButton",CSS:{base:"button dialogWindowDualButton dialogWindowLeftButton"},hidden:true});a.buttonContainer.add(a.rightDualButton.getContainer())},show:function(){this.removeCSSClass("hidden")},close:function(){this.addCSSClass("hidden")},setTitle:function(a){this.title.el.textContent=a},setMessage:function(e){var c=this,b;if(Sys.isDefined(e)){var a=c.parseHyperlink(e);var d=new Sys.Element({tag:"p"});d.addChildren(a);c.text.removeAll();c.text.addChildren([d.el])}else{c.text.el.textContent=""}},parseHyperlink:function(d){d=d||"";var a=/\[([^\]]+)\]\(([^)]+)\)/,e=d.split(/(\[[^\]]+\]\([^)]+\))/),c={started:"notify:userInputManager.dialogWindowExclusiveStart",ended:"notify:userInputManager.dialogWindowExclusiveEnd",move:"notify:userInputManager.dialogWindowExclusiveMove",hover:"notify:userInputManager.dialogWindowExclusiveHover"},b,f=0;e.forEach(function(i,g){var h;if(g%2===1){h=a.exec(i);b=new Interface.utils.Button({id:"dialogWindow_link_"+(f++),label:h[1],CSS:{base:"dialogWindow_link"},clickCallback:function(){Sys.utils.openURL(h[2])},userInputEvents:c});b.enable();e[g]=b.getContainer().getEl()}else{e[g]=document.createTextNode(e[g])}});return e},showSingleButton:function(b){var a=this;a.singleButton.setText(b);a.singleButton.enable();a.singleButton.show("inline-block");a.leftDualButton.disable();a.leftDualButton.hide();a.rightDualButton.disable();a.rightDualButton.hide()},showDualButtons:function(b,a){var c=this;c.singleButton.disable();c.singleButton.hide();c.leftDualButton.setText(b);c.leftDualButton.enable();c.leftDualButton.show("inline-block");c.rightDualButton.setText(a);c.rightDualButton.enable();c.rightDualButton.show("inline-block")},hideButtons:function(){var a=this;a.singleButton.disable();a.singleButton.hide();a.leftDualButton.disable();a.leftDualButton.hide();a.rightDualButton.disable();a.rightDualButton.hide()},hideGame:function(){this.addCls("hideGame")},setScrollable:function(b){var a="scrollable";if(b){this.addCSSClass(a)}else{this.removeCSSClass(a)}}};Core.DialogWindowDOMElement=Sys.extend(Sys.Element,Core.DialogWindowDOMElement,"Core.DialogWindowDOMElement");Sys.ns("Core");Core.DialogWindowBaseView={BASE_CSS:"interface-dialogWindow_base",PORTRAIT_CSS:"interface-dialogWindow_portrait",LANDSCAPE_CSS:"interface-dialogWindow_landscape",constructor:function(){var a=this;Core.DialogWindowBaseView.superclass.constructor.apply(a,arguments);a.container=a.dialogDOMElement},onPortrait:function(){var a=this;Mixins.orientation.view.methods.onPortrait.call(a)},onLandscape:function(){var a=this;Mixins.orientation.view.methods.onLandscape.call(a)},adaptToOrientation:function(a){Mixins.orientation.view.methods.setStyle.call(this,a)}};Core.DialogWindowBaseView=Sys.extend(Core.DialogWindowView,Core.DialogWindowBaseView,"Core.DialogWindowBaseView");Sys.ns("Core");Core.DialogWindowMobileView={PORTRAIT_CSS:"interface-dialogWindow-mobile_portrait",LANDSCAPE_CSS:"interface-dialogWindow-mobile_landscape",constructor:function(){Core.DialogWindowMobileView.superclass.constructor.apply(this,arguments)}};Core.DialogWindowMobileView=Sys.extend(Core.DialogWindowBaseView,Core.DialogWindowMobileView,"Core.DialogWindowMobileView");Sys.ns("Core");Core.ResponseParser={constructor:function(){Core.ResponseParser.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Core.ResponseParserController}}};Core.ResponseParser=Sys.extend(Core.Module,Core.ResponseParser,"Core.ResponseParser");Sys.ns("Core");Core.ResponseParserController={constructor:function(){Core.ResponseParserController.superclass.constructor.apply(this,arguments)},init:function(){Core.ResponseParserController.superclass.init.apply(this,arguments);this.doIntegrationSpecificResponseHandling(this.parseServerResponse(Resources.readData("unParsedGameServerInitResponse")))},setupEvents:function(){this.on({"notify:serverManager.serverResponseReceived":this.parseAndBroadcastServerResponse})},parseAndBroadcastServerResponse:function(e,c){var f=this,a=(Sys.isDefined(c))?c:"notify:responseParser.responseParsed",b=f.parseServerResponse(e.responseText),d=Object.keys(b).length;b=f.doIntegrationSpecificResponseHandling(b);if(e.responseText.trim().length===0){f.fireEvent("request:errorManager.handleError")}else{if(d>1){f.fireEvent(a,b)}}},parseServerResponse:function(a){return Sys.utils.parseQueryStringToNestedObject(a)},doIntegrationSpecificResponseHandling:function(a){return a}};Core.ResponseParserController=Sys.extend(Core.Controller,Core.ResponseParserController,"Core.ResponseParserController");Sys.ns("Core");Core.ErrorManager={constructor:function(){Core.ErrorManager.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Core.ErrorManagerController,model:Core.ErrorManagerModel}}};Core.ErrorManager=Sys.extend(Core.Module,Core.ErrorManager,"Core.ErrorManager");Sys.ns("Core");Core.ErrorManagerModel={constructor:function(){Core.ErrorManagerModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=Resources.readData("queryData"),b=Sys.isDefined(a.depositAvailable)&&a.depositAvailable===true;this.storeData("depositAvailable",b);this.storeData("dialogConfig",this.setupDialogConfig(b))},setupDialogConfig:function(b){var a={};a.http={title:Services.languageManager.getText(Language.Keys.reload),text:Services.languageManager.getText(Language.Keys.connectionLost),buttons:[{type:"casino",reason:"9"},{type:"reload"}],fatal:true};a[11]={title:Services.languageManager.getText(Language.Keys.playLimit),text:Services.languageManager.getText("11"),buttons:[{type:"casino"}]};a[12]={title:Services.languageManager.getText(Language.Keys.freeRounds_expired),buttons:[{type:"casino"}],fatal:true};a[13]={title:Services.languageManager.getText(Language.Keys.playLimit),text:Services.languageManager.getText("13"),buttons:[{type:"reduceBetAndRevertSpin"},{type:"closeAndRevertSpin"}]};a[20]={title:Services.languageManager.getText(Language.Keys.sessionTimeOut),text:Services.languageManager.getText(Language.Keys.returnToLobby),buttons:[{type:"casino",reason:"3"}],fatal:true};Sys.each([10,15,51,100,101,102],function(c){a[c]={title:Services.languageManager.getText(Language.Keys.outOfMoney),text:Services.languageManager.getText(Language.Keys.deposit),buttons:b?[{type:"deposit"},{type:"reduceBetAndRevertSpin"}]:[{type:"casino"},{type:"reduceBetAndRevertSpin"}]}});Sys.each([0,53,56,58],function(c){a[c]={title:Services.languageManager.getText(Language.Keys.gameUnavailable)+" ("+c+")",buttons:[{type:"casino",reason:"9"},{type:"reload"}],fatal:true}});a[70]={title:Services.languageManager.getText(Language.Keys.accountUnavailable),buttons:[{type:"casino"},{type:"reload"}],fatal:true};a.generic={title:Services.languageManager.getText(Language.Keys.error),text:Services.languageManager.getText(Language.Keys.returnToLobby),buttons:[{type:"casino",reason:"9"}],fatal:true,hideGame:true};a.gameInactive={title:Services.languageManager.getText(Language.Keys.gameUnavailable),text:Services.languageManager.getText(Language.Keys.lostConnectInactivity),buttons:[{type:"casino",reason:"9"},{type:"reload"}],fatal:true,hideGame:true};return a},getDialogConfig:function(a){var c=this.readData("dialogConfig"),b;if(Sys.isDefined(c[a])){b=c[a]}else{b=c.generic}b.errorCode=a;return b},setUpOutOfMoneyErrorConfig:function(){var f=Services.languageManager.getText(Language.Keys.outOfMoney),c=this.readData("depositAvailable"),b=Services.moneyManager.getBalanceCents(),e=Services.moneyManager.getMinimumBetCents(),d,a;if(b>=e){if(c){d=Services.languageManager.getText(Language.Keys.deposit);a=[{type:"deposit"},{type:"reduceBet"}]}else{d=Services.languageManager.getText(Language.Keys.reduce);a=[{type:"reduceBet"},{type:"close"}]}}else{d=Services.languageManager.getText(Language.Keys.depositPlay);if(c){a=[{type:"deposit"},{type:"close"}]}else{a=[{type:"close"}]}}return{title:f,text:d,buttons:a,errorCode:100}}};Core.ErrorManagerModel=Sys.extend(Core.Model,Core.ErrorManagerModel,"Core.ErrorManagerModel");Sys.ns("Core");Core.ErrorManagerController={constructor:function(){Core.ErrorManagerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){this.on({"request:errorManager.handleError":this.showDialogForErrorCode,"request:errorManager.handleRequestError":this.handleRequestError,"request:errorManager.handleGameInactive":this.handleGameInactive,"request:errorManager.handleClientOutOfMoneyError":this.handleClientOutOfMoneyError})},showDialog:function(a){var b=(a.errorCode==="http")?0:a.errorCode;this.fireEvent("notify:errorManager.error",b,Services.languageManager.getText(b));this.fireEvent("request:dialogWindow.showDialog",a)},showDialogForErrorCode:function(a){this.showDialog(this.getDialogConfig(a))},handleRequestError:function(b){var c=this,a=c.handleHttpErrors(b);if(!a){a=c.handleIntegrationSpecificErrors(b)}if(!a){a=c.handleGameSpecificErrors(b)}if(!a){a=c.handleServerErrors(b)}if(!a){c.fireEvent("notify:errorManager.noErrorDetected")}else{if(a.fatal){c.fireEvent("request:audioPlayer.stopAll")}c.showDialog(a)}},handleHttpErrors:function(a){if(Sys.utils.httpRequestIsOK(a)){return undefined}return this.getDialogConfig("http")},handleIntegrationSpecificErrors:function(a){},handleGameSpecificErrors:function(a){},handleServerErrors:function(a){var b=Sys.utils.getErrorCode(a);if(!Sys.isDefined(b)){return undefined}return this.getDialogConfig(b)},handleGameInactive:function(){},handleClientOutOfMoneyError:function(){var b=this,a=b.model.setUpOutOfMoneyErrorConfig();a.buttons=b.getButtons(a.buttons);b.showDialog(a)},getDialogConfig:function(b){var a=this.model.getDialogConfig(b);return{title:a.title,text:a.text,buttons:this.getButtons(a.buttons),fatal:a.fatal,hideGame:!!(Sys.isDefined(a.hideGame)&&a.hideGame),errorCode:b}},getButtons:function(c){var b=[],a;for(a=0;a<c.length;a++){b.push(this.getButton(c[a]))}return b},getButton:function(a){var b=this;switch(a.type){case"casino":return{text:Services.languageManager.getText(Language.Keys.btn_casino),action:function(){b.onButtonInteraction();Environment.goToLobby(a.reason)}};case"reload":return{text:Services.languageManager.getText(Language.Keys.btn_reload),action:function(){b.onButtonInteraction();Environment.reload()}};case"close":return{text:Services.languageManager.getText(Language.Keys.btn_close),action:function(){b.onButtonInteraction()}};case"closeAndRevertSpin":return{text:Services.languageManager.getText(Language.Keys.btn_close),action:function(){b.onButtonInteraction();b.revertSpin()}};case"reduceBetAndRevertSpin":return{text:Services.languageManager.getText(Language.Keys.btn_reduceBet),action:function(){b.onButtonInteraction();b.revertSpin();b.openBetSettings()}};case"reduceBet":return{text:Services.languageManager.getText(Language.Keys.btn_reduceBet),action:function(){b.onButtonInteraction();b.openBetSettings()}};case"deposit":return{text:Services.languageManager.getText(Language.Keys.btn_deposit),action:function(){b.onButtonInteraction();Services.moneyManager.reloadBalance();Environment.goToCashier()}};default:return{text:"[ERROR]",action:console.error.bind(console,"this button was not correctly configured in the error manager")}}},openBetSettings:function(){this.fireEvent("request:betSettings.show")},revertSpin:function(){this.fireEvent("request:moneyManager.revertBet");this.fireEvent("request:spin.activateDefaultOutcome","basic")},onButtonInteraction:function(){this.fireEvent("notify:errorManager.errorDialogClosed")}};Core.ErrorManagerController=Sys.extend(Core.Controller,Core.ErrorManagerController,"Core.ErrorManagerController");Sys.ns("Core");Core.ErrorManagerDesktopModel={constructor:function(){Core.ErrorManagerDesktopModel.superclass.constructor.apply(this,arguments)},setUpOutOfMoneyErrorConfig:function(){var e=Services.languageManager.getText(Language.Keys.outOfMoney),b=Services.moneyManager.getBalanceCents(),d=Services.moneyManager.getMinimumBetCents(),c,a=[{type:"close"}];if(b>=d){c=Services.languageManager.getText(Language.Keys.reduce)}else{c=Services.languageManager.getText(Language.Keys.depositPlay)}return{title:e,text:c,buttons:a,errorCode:100}},setupDialogConfig:function(b){var a=Core.ErrorManagerDesktopModel.superclass.setupDialogConfig.apply(this,arguments);a.http.buttons=[{type:"reload"}];a[11].buttons=[{type:"reload"}];a[12].buttons=[{type:"reload"}];a[13].buttons=[{type:"closeAndRevertSpin"}];a[20].buttons=[];a[20].text=Services.languageManager.getText("20");Sys.each([10,15,51,100,101,102],function(c){a[c].buttons=[{type:"closeAndRevertSpin"}]});Sys.each([0,53,56,58],function(c){a[c].buttons=[{type:"reload"}]});a[70].buttons=[{type:"reload"}];a.generic.buttons=[{type:"reload"}];a.generic.text=Services.languageManager.getText(Language.Keys.reload);a.gameInactive.buttons=[{type:"reload"}];return a}};Core.ErrorManagerDesktopModel=Sys.extend(Core.ErrorManagerModel,Core.ErrorManagerDesktopModel,"Core.ErrorManagerDesktopModel");Sys.ns("Core");Core.LocalStorageManager={constructor:function(){Core.LocalStorageManager.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.LocalStorageManagerModel,controller:Core.LocalStorageManagerController}}};Core.LocalStorageManager=Sys.extend(Core.Module,Core.LocalStorageManager,"Core.LocalStorageManager");Sys.ns("Core");Core.LocalStorageManagerController={constructor:function(){Core.LocalStorageManagerController.superclass.constructor.apply(this,arguments)},storeData:function(a,b){this.model.writeToStorage(a,b)},readData:function(a){return this.model.readFromStorage(a)},removeData:function(a){this.model.removeFromStorage(a)},hasData:function(a){return this.model.hasData(a)}};Core.LocalStorageManagerController=Sys.extend(Core.Controller,Core.LocalStorageManagerController,"Core.LocalStorageManagerController");Sys.ns("Core");Core.LocalStorageManagerModel={constructor:function(){Core.LocalStorageManagerModel.superclass.constructor.apply(this,arguments)},writeToStorage:function(a,b){if(this.readData("storageActive")){if(Sys.isString(a)&&Sys.isString(b)){this._setItemInStorage(this.accessKey+a,b)}}},readFromStorage:function(a){var b=this;if(b.readData("storageActive")){if(!Sys.isDefined(a)){return b.getAllData()}if(Sys.isString(a)){return b._getItemFromStorage(b.accessKey+a)}}return false},removeFromStorage:function(a){if(this.readData("storageActive")){if(Sys.isString(a)){this._removeItemFromStorage(this.accessKey+a)}}},hasData:function(a){if(Sys.isDefined(a)){if(Sys.isString(this.readFromStorage(a))){return true}}return false},setupData:function(){var a=this,b=Resources.readData("queryData");a.accessKey=a.createAccessKey(b.operatorId,b.gameId,Resources.readData("sessionID"));a.storeData("storageActive",a.isLocalStorageSupported()&&Sys.isDefined(a.accessKey))},createAccessKey:function(a,b,c){if(Sys.isDefined(a)&&Sys.isDefined(b)&&Sys.isDefined(c)){return this.hashValue(a+"."+b+"."+c)+"."}else{return undefined}},activate:function(){this.storeData("storageActive",true)},deactivate:function(){this.storeData("storageActive",false)},getAllData:function(){var c=this,d={},b=0,a=c._getKeyFromStorage(b);while(a){if(a.indexOf(c.accessKey)===0){d[a.replace(c.accessKey,"")]=c._getItemFromStorage(a)}++b;a=c._getKeyFromStorage(b)}return d},hashValue:function(c){var d=2285455121,b,a;if(!Sys.isString(c)){return null}for(a=0,b=c.length;a<b;a++){d+=c.charCodeAt(a)*(a+1)}return d},isLocalStorageSupported:function(){if((typeof window.localStorage==="object")){try{this._setItemInStorage("availabilityCheck","true");this._removeItemFromStorage("availabilityCheck");return true}catch(a){return false}}return false},_setItemInStorage:function(a,b){localStorage.setItem(a,b)},_removeItemFromStorage:function(a){localStorage.removeItem(a)},_getItemFromStorage:function(a){return localStorage.getItem(a)},_getKeyFromStorage:function(a){return localStorage.key(a)}};Core.LocalStorageManagerModel=Sys.extend(Core.Model,Core.LocalStorageManagerModel,"Core.LocalStorageManagerModel");Sys.ns("Core");Core.AutoPlayer={constructor:function(){Core.AutoPlayer.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.AutoPlayerModel,controller:Core.AutoPlayerController}},getMixinDependencies:function(){return["serverResponse"]}};Core.AutoPlayer=Sys.extend(Core.Module,Core.AutoPlayer,"Core.AutoPlayer");Sys.ns("Core");Core.AutoPlayerController={constructor:function(){Core.AutoPlayerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:autoPlayer.stop":a.stop,"request:autoPlayer.pause":a.pause,"request:autoPlayer.start":a.start,"request:autoPlayer.resume":a.resume,"notify:serverManager.serverErrorReceived":a.stop,"notify:stateHandler.leavingIdleState":a.onLeavingIdleState,"notify:stateHandler.enteringIdleState":a.onEnteringIdleState,"notify:stateHandler.enteringStandardWinPresentationState":a.onEnteringWinPresentationState,"notify:stateHandler.enteringBigWinState":a.onEnteringWinPresentationState,"notify:spinButton.clicked":a.onSpinButtonClicked,"notify.dialogWindow.showingDialog":a.onShowingDialog,"notify:dialogWindow.allDialogsClosed":a.onAllDialogsClosed,"notify:settingsManager.settingChanged":a.onSettingChanged,"notify:errorManager.error":a.stop})},playRound:function(){if(this.model.readData("nrRounds")>0){this.reduceNumberOfRounds();this.requestRoundStart()}},start:function(){var a=this;if(!a.model.readData("spinning")&&a.model.isState("WAITING")){a.play();a.requestRoundStart()}},stop:function(){var c=this,b=c.fireEvent.bind(c),a=c.model;if(!a.isState("STOPPED")){b("request:spinButton.removeProperty","visibleDuringRound",c.MODULE_NAME);b("request:spinButton.hideCounter");b("request:spinButton.removeDisplayType","autoPlay");b("request:spinButton.removeDisplayType","autoPlayStop");b("request:quickStopper.enableInMode","autoPlay");b("request:playModeManager.removeMode","autoplay");a.setState("STOPPED");a.storeData("nrRounds",0);b("request:settingsManager.storeData","autoPlayNrSpins",0);b("request:spinButton.enable",c.MODULE_NAME);b("request:betSettings.enable",c.MODULE_NAME);b("request:maxBetButton.enable",c.MODULE_NAME);c.signalStopped()}},pause:function(){if(this.model.isState("PLAYING")){this.model.setState("PAUSED")}},resume:function(){var a=this;if(this.model.isState("PAUSED")){this.model.setState("PLAYING");if(!a.model.readData("spinning")){a.playRound()}}},play:function(){var a=this;if(!a.model.isState("PLAYING")&&a.model.readData("nrRounds")>0){a.model.setState("PLAYING");a.fireEvent("request:spinButton.removeDisplayType","autoPlay");a.fireEvent("request:spinButton.addDisplayType","autoPlayStop");a.fireEvent("request:quickStopper.disableInMode","autoPlay");a.fireEvent("request:spinButton.disable",a.MODULE_NAME);a.fireEvent("request:betSettings.disable",a.MODULE_NAME);a.fireEvent("request:maxBetButton.disable",a.MODULE_NAME);a.fireEvent("notify:autoPlayer.starting");a.fireEvent("request:playModeManager.addMode","autoplay");a.reduceNumberOfRounds()}},onSpinButtonClicked:function(b){var c=this,a=c.model;if(Sys.isDefined(b)&&b.hasOwnProperty("skip")&&b.skip===true){return false}if(a.isState("PLAYING")||a.isState("PAUSED")||a.isState("STOPPING")){c.stop()}return true},onEnteringIdleState:function(){var b=this,a=b.model;a.storeData("spinning",false);if(a.isState("PLAYING")){b.playRound()}if(a.isState("STOPPING")){b.stop()}if(a.isState("WAITING")){b.fireEvent("request:playModeManager.addMode","autoplay");b.play();b.requestRoundStart()}},onLeavingIdleState:function(){var a=this;a.model.storeData("spinning",true);if(a.model.isState("WAITING")){a.fireEvent("request:playModeManager.addMode","autoplay");a.play()}if(a.model.isState("PLAYING")){a.fireEvent("request:spinButton.updateCounter",a.model.readData("nrRounds"))}},onEnteringWinPresentationState:function(){var b=this,a=b.model;if(a.isState("STOPPING")&&Services.settingsManager.getSetting("autoPlayNrSpins")>0){b.fireEvent("request:settingsManager.storeData","autoPlayNrSpins",0)}},onShowingDialog:function(){if(this.model.readData("nrRounds")>0){this.pause()}},onAllDialogsClosed:function(){if(this.model.readData("nrRounds")>0){this.resume()}},signalStopped:function(){this.fireEvent("notify:autoPlayer.stopped")},reduceNumberOfRounds:function(){this.model.playRound();this.fireEvent("request:spinButton.updateCounter",this.model.readData("nrRounds"));this.fireEvent("notify:autoPlayer.reduceCounter",this.model.readData("nrRounds"))},onSettingChanged:function(a,c){var b=this;if(a==="autoPlayNrSpins"&&c!==b.model.readData("nrRounds")){b.model.storeData("nrRounds",c);if(c===0){b.stop()}else{b.fireEvent("notify:autoPlayer.enabled",c);b.fireEvent("request:spinButton.showCounter",c);b.fireEvent("request:spinButton.addDisplayType","autoPlay");b.fireEvent("request:spinButton.addProperty","visibleDuringRound",b.MODULE_NAME);b.model.setState("WAITING");b.model.storeData("startingBalance",Services.moneyManager.getBalanceCents())}}else{if(["stopAutoplayIfBalanceIncreasedBy","stopAutoplayIfBalanceDecreasedBy","stopAutoplayOnAnyWin","stopAutoplayIfWinExceeds"].contains(a)){b.model.storeData(a,c)}}},requestRoundStart:function(){var a=this;a.fireEvent("notify:autoPlayer.startRound",a.model.readData("nrRounds"));a.fireEvent("request:spinButton.startRound")}};Core.AutoPlayerController=Sys.extend(Core.Controller,Core.AutoPlayerController,"Core.AutoPlayerController");Sys.ns("Core");Core.AutoPlayerModel={constructor:function(){Core.AutoPlayerModel.superclass.constructor.apply(this,arguments)},playRound:function(){var a=this.readData("nrRounds")-1;if(a<=0){a=0;this.setState("STOPPING")}this.storeData("nrRounds",a)},storeData:function(a,b){Core.AutoPlayerModel.superclass.storeData.apply(this,arguments);if(a==="nrRounds"){Services.storage.storeData("autoPlayer.roundsLeft",b)}},shouldPlayAnotherRound:function(){return this.isState("PLAYING")},processServerResponse:function(g){var j=this,d=g.credit,h,k,f=j.readData("startingBalance"),l=j.readData("stopAutoplayIfBalanceIncreasedBy"),a=j.readData("stopAutoplayIfBalanceDecreasedBy"),e=j.readData("stopAutoplayOnAnyWin"),i=j.readData("stopAutoplayIfWinExceeds"),c=false,b=Services.moneyManager.getBetCents();if(!j.isState("STOPPED")){if(Sys.isDefined(g.wins)){h=g.wins.cents;k=g.wins.centsTotal}if((l!==false&&l!==0)&&(d>=f+l)){c=true}if((a!==false&&a!==0)&&(d-b<f-a)){c=true}if(e===true){if((Sys.isDefined(h)&&h>0)||(Sys.isDefined(k)&&k>0)){c=true}}if(i!==false&&i!==0){if((Sys.isDefined(h)&&h>=i)||(Sys.isDefined(k)&&k>=i)){c=true}}if(c){j.setState("STOPPING")}}},setupData:function(){var a=this,b=a.storeData.bind(a);b("nrRounds",0);a.setState("STOPPED");b("spinning",true);b("startingBalance",0);b("stopAutoplayIfBalanceIncreasedBy",false);b("stopAutoplayIfBalanceDecreasedBy",false);b("stopAutoplayOnAnyWin",false);b("stopAutoplayIfWinExceeds",false)}};Core.AutoPlayerModel=Sys.extend(Core.Model,Core.AutoPlayerModel,"Core.AutoPlayerModel");Sys.ns("Core");Core.G4={constructor:function(){Core.G4.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.G4Model,view:Core.View,controller:Core.G4Controller}},getStateChanges:function(){var a=this.model;return{minimumRoundTimeEnforcement:{state:{name:"MinimumRoundTimeEnforcement",execute:function(b){},waitEvents:{"notify:g4.minimumRoundTimePassed":false}}},stopped:{queue:[function(b){if(a.isG4()&&a.isNewRound()){b.stateHandler.pushState(b.states.minimumRoundTimeEnforcement)}}]}}}};Core.G4=Sys.extend(Core.Module,Core.G4,"Core.G4");Sys.ns("Core");Core.G4Model={constructor:function(){Core.G4Model.superclass.constructor.apply(this,arguments)},setupData:function(){var b=this,a=Resources.readData("gameServerInitResponse");b.storeData("isG4",a.g4mode);b.storeData("G4Config",b.setupG4Config());b.storeData("isNewRound",false);b.storeData("roundTimeLimit",3000);b.storeData("disabledDuringRound",false)},isG4:function(){return this.readData("isG4")},setupG4Config:function(){return{settings:[{name:"quickSpin",enabled:false,offValue:false}],modules:[{name:"systemClock",enabled:true},{name:"quickStopper",enabled:false}]}},getMinimumTimeLeft:function(){var b=this,a=b.getRoundStartTime()+b.readData("roundTimeLimit"),c=a-Date.now();return c>0?c:0},isNewRound:function(){return this.readData("isNewRound")},setRoundStartTime:function(){var a=Date.now();this.storeData("roundStartTime",a)},getRoundStartTime:function(){return this.readData("roundStartTime")},getG4Config:function(b){var a=this.readData("G4Config");if(a.hasOwnProperty(b)){return a[b]}}};Core.G4Model=Sys.extend(Core.Model,Core.G4Model,"Core.G4Model");Sys.ns("Core");Core.G4DesktopModel={constructor:function(){Core.G4DesktopModel.superclass.constructor.apply(this,arguments)},setupData:function(){Core.G4DesktopModel.superclass.setupData.apply(this,arguments);this.storeData("disabledDuringRound",true)}};Core.G4DesktopModel=Sys.extend(Core.G4Model,Core.G4DesktopModel,"Core.G4DesktopModel");Sys.ns("Core");Core.G4Controller={constructor:function(){Core.G4Controller.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringBeforeLoaderCloseState":a.initG4IfActive,"notify:stateHandler.enteringMinimumRoundTimeEnforcementState":a.minimumRoundTimeEnforcement,"notify:stateHandler.enteringSpinningState":a.onStartSpin})},initG4IfActive:function(){var b=this,a;if(b.model.readData("isG4")){a=b.model.readData("G4Config");b.requestModuleChanges(a.modules);b.requestSettingChanges(a.settings);if(b.model.readData("disabledDuringRound")){b.fireEvent("request:spinButton.addProperty","disabledDuringRound",b.MODULE_NAME)}}},minimumRoundTimeEnforcement:function(){var c=this,d,a,b;if(c.model.isNewRound()){b=c.model.getMinimumTimeLeft();a=c.model.readData("roundExtensionTimer");if(b>0){if(Sys.isDefined(a)){clearTimeout(a)}d=setTimeout(function(){c.fireEvent("notify:g4.minimumRoundTimePassed")},b);c.model.storeData("roundExtensionTimer",d)}else{c.fireEvent("notify:g4.minimumRoundTimePassed")}}},onStartSpin:function(){this.model.storeData("isNewRound",true);this.model.setRoundStartTime()},requestSettingChanges:function(a){var b=this;Sys.each(a,function(c){if(c.enabled){b.dispatchRequestEnableSettingEvent(c.name)}else{if(!c.enabled){b.dispatchRequestDisableSettingEvent(c.name,c.offValue)}}})},requestModuleChanges:function(a){var b=this;Sys.each(a,function(c){if(c.enabled){b.dispatchRequestEnableModuleEvent(c.name)}else{if(!c.enabled){b.dispatchRequestDisableModuleEvent(c.name)}}})},dispatchRequestDisableSettingEvent:function(a,b){var c=this;if(Sys.isDefined(b)){c.fireEvent("request:settingsManager.storeValue",a,b)}c.fireEvent("request:settingsManager.disableSetting",a);c.fireEvent("request:settingsManager.lockSetting",a,c.MODULE_NAME)},dispatchRequestEnableSettingEvent:function(a){this.fireEvent("request:settingsManager.enableSetting",a)},dispatchRequestDisableModuleEvent:function(a){this.fireEvent("request:"+a+".disableInMode","g4")},dispatchRequestEnableModuleEvent:function(a){this.fireEvent("request:"+a+".enableInMode","g4")}};Core.G4Controller=Sys.extend(Core.Controller,Core.G4Controller,"Core.G4Controller");Sys.ns("Core");Core.PlayModeManager={constructor:function(){Core.PlayModeManager.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.PlayModeManagerModel,controller:Core.PlayModeManagerController}}};Core.PlayModeManager=Sys.extend(Core.Module,Core.PlayModeManager,"Core.PlayModeManager");Sys.ns("Core");Core.PlayModeManagerController={USE_LOGGING:false,constructor:function(){Core.PlayModeManagerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:playModeManager.addMode":a.addMode,"request:playModeManager.removeMode":a.removeMode})},addMode:function(a){this.model.addMode(a)},removeMode:function(a){this.model.removeMode(a)}};Core.PlayModeManagerController=Sys.extend(Core.Controller,Core.PlayModeManagerController,"Core.PlayModeManagerController");Sys.ns("Core");Core.PlayModeManagerModel={constructor:function(){Core.PlayModeManagerModel.superclass.constructor.apply(this,arguments)},addMode:function(b){var a=this.readData("modes");if(a.indexOf(b)===-1){a.push(b);this.storeModeString()}},removeMode:function(c){var b=this.readData("modes"),a=b.indexOf(c);if(a>=0){b.splice(a,1);this.storeModeString()}},getModeString:function(){var b=this.readData("modes"),d=b.length,c="",a;for(a=-1;++a<d;){c+=((a>0)?",":"")+b[a]}return c},setupData:function(){this.storeData("modes",[]);this.storeModeString()},storeModeString:function(){Services.storage.storeData(this.MODULE_NAME+".modes",this.getModeString())}};Core.PlayModeManagerModel=Sys.extend(Core.Model,Core.PlayModeManagerModel,"Core.PlayModeManagerModel");Sys.ns("Core.Slots");Core.Slots.FreeRounds={constructor:function(){Core.Slots.FreeRounds.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model;return{beforeLoaderClose:{queue:[function(b){if(a.hasFreeRounds()&&!a.readData("hasShownSplash")){b.stateHandler.pushState(b.states.freeRoundsDialog)}}]},freeRoundsDialog:{state:{name:"FreeRoundsDialog",execute:function(){},waitEvents:{}}}}},getDefaultMVCClasses:function(){return{model:Core.Slots.FreeRoundsModel,controller:Core.Slots.FreeRoundsController}}};Core.Slots.FreeRounds=Sys.extend(Core.Module,Core.Slots.FreeRounds,"Core.Slots.FreeRounds");Sys.ns("Core.Slots");Core.Slots.FreeRoundsController={constructor:function(){Core.Slots.FreeRoundsController.superclass.constructor.apply(this,arguments)},init:function(){Core.Slots.FreeRoundsController.superclass.init.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringFreeRoundsDialogState":a.startFreeRounds,"notify:responseParser.responseParsed":a.model.handleFreeRounds.bind(a.model)})},startFreeRounds:function(){var a=this;a.addListener("notify:stateHandler.enteringIdleState",a.endFreeRoundsIfSpent);a.addListener("notify:stateHandler.leavingIdleState",a.onFreeRoundStart);a.disableSettings();a.requestUpdateCounter();a.fireEvent("request:spinButton.showCounter");a.fireEvent("request:maxBetButton.disable",a.MODULE_NAME);a.fireEvent("request:betSettings.hideCashDisplay");a.fireEvent("notify:freeRounds.started",a.model.readData("freeRoundsLeft"));a.requestDialog({title:Services.languageManager.getText(Language.Keys.roundsLeft),text:Services.languageManager.getText(Language.Keys.haveFreeRounds,[a.model.readData("freeRoundsLeft")]),buttonText:Language.Keys["continue"],action:a.fireEvent.bind(a,"notify:freeRounds.dialogClosed")});a.model.storeData("hasShownSplash",true);a.model.storeData("totalFreeRounds",a.model.readData("freeRoundsLeft"))},onFreeRoundStart:function(){var c=this,b=c.model.readData("totalFreeRounds"),a=c.model.readData("freeRoundsLeft");c.fireEvent("notify:freeRounds.nextRound",b,a)},disableSettings:function(){var a=this;a.fireEvent("request:settingsManager.storeData","quickSpin",false);a.fireEvent("request:settingsManager.lockSetting","quickSpin",a.MODULE_NAME);a.fireEvent("request:settingsManager.storeData","autoPlayNrSpins",0);a.fireEvent("request:settingsManager.lockSetting","autoPlayNrSpins",a.MODULE_NAME)},endFreeRoundsIfSpent:function(){var a=this;a.requestUpdateCounter();if(a.model.readData("freeRoundsLeft")<=0){a.fireEvent("notify:freeRounds.ended");a.requestDialog({title:Services.languageManager.getText(Language.Keys.freeRoundsFinished),text:Services.languageManager.getText(Language.Keys.roundsUseAcctMoney)+" "+Services.languageManager.getText(Language.Keys.reload),buttonText:Language.Keys.btn_reload,action:function(){Environment.reload()}})}},requestUpdateCounter:function(){var b=this,a=b.model.readData("freeRoundsLeft");if(a>0){b.fireEvent("request:spinButton.updateCounter",a)}else{b.fireEvent("request:spinButton.hideCounter")}Services.storage.storeData("freeRounds.roundsLeft",a)},requestDialog:function(a){var b=this;b.fireEvent("request:dialogWindow.showDialog",{title:a.title,text:a.text,buttons:[{scope:b,text:Services.languageManager.getText(a.buttonText),action:a.action}]})}};Core.Slots.FreeRoundsController=Sys.extend(Core.Controller,Core.Slots.FreeRoundsController,"Core.Slots.FreeRoundsController");Sys.ns("Core.Slots");Core.Slots.FreeRoundsModel={constructor:function(){Core.Slots.FreeRoundsModel.superclass.constructor.apply(this,arguments)},setupData:function(){var b=this,a=Resources.readData("gameServerInitResponseObject");b.storeData("hasShownSplash",false);b.handleFreeRounds(a)},hasFreeRounds:function(){var a=this.readData("freeRoundsLeft");return Sys.isDefined(a)&&a>0},handleFreeRounds:function(a){if(Sys.isDefined(a.freeRoundsLeft)){this.storeData("freeRoundsLeft",a.freeRoundsLeft)}}};Core.Slots.FreeRoundsModel=Sys.extend(Core.Model,Core.Slots.FreeRoundsModel,"Core.Slots.FreeRoundsModel");Sys.ns("Core.Slots");Core.Slots.ServerManager={constructor:function(){Core.Slots.ServerManager.superclass.constructor.apply(this,arguments)},getStateChanges:function(){return{spinning:{queue:[function(a){a.stateHandler.pushState(a.states.processServerResponse)}]},processServerResponse:{state:{name:"ProcessServerResponse",execute:function(a){},waitEvents:{}}}}},getDefaultMVCClasses:function(){return{model:Core.Slots.ServerManagerModel,view:Core.View,controller:Core.Slots.ServerManagerController}}};Core.Slots.ServerManager=Sys.extend(Core.Module,Core.Slots.ServerManager,"Core.Slots.ServerManager");Sys.ns("Core.Slots");Core.Slots.ServerManagerController={constructor:function(){Core.Slots.ServerManagerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Core.Slots.ServerManagerController.superclass.setupEvents.apply(this,arguments);a.on({"notify:responseParser.responseParsed":a.storeNextAction,"notify:settingsManager.settingChanged":a.onSettingsChanged})},onSettingsChanged:function(a,b){if(a==="betLevel"||a==="denomination"||a==="betLines"){this.model.storeData("parameters:"+a,b)}},sendAction:function(b,a){b=(b==="nextAction")?this.model.readData("nextAction"):b;Core.Slots.ServerManagerController.superclass.sendAction.call(this,b,a)},storeNextAction:function(a){this.model.storeData("nextAction",a.nextaction)}};Core.Slots.ServerManagerController=Sys.extend(Core.ServerManagerController,Core.Slots.ServerManagerController,"Core.Slots.ServerManagerController");Sys.ns("Core.Slots");Core.Slots.ServerManagerModel={constructor:function(){Core.Slots.ServerManagerModel.superclass.constructor.apply(this,arguments)},setupData:function(){var d=this;Core.Slots.ServerManagerModel.superclass.setupData.apply(d,arguments);var c=Resources.readData("gameServerInitResponse"),a=c["bl.standard"].split(",").length,b="0-"+(a-1).toString();d.storeData("parameters:betLines",b);d.storeData("nextAction",c.nextaction)},getActionParameters:function(a){var b=this.getBaseParameters(a);switch(a){case"init":return b+this.getInitParameters();case"jmxinit":return b+this.getJMXInitParameters();case"paytable":return b+this.getPaytableParameters();case"spin":return b+this.getSpinParameters();case"initfreespin":return b+this.getInitFreespinParameters();case"respin":case"freespin":return b+this.getFreespinParameters();default:return b}},getBaseParameters:function(a){return"action="+a+"&sessid="+this.readData("parameter:sessionID")+"&gameId="+this.readData("parameter:gameID")+"&wantsfreerounds=true&wantsreels=true"},getInitParameters:function(){return""},getJMXInitParameters:function(){return this.getInitParameters()},getPaytableParameters:function(){return""},getSpinParameters:function(){var c=this,b="&bet.betlevel="+c.readData("parameters:betLevel")+"&bet.denomination="+c.readData("parameters:denomination")+"&bet.betlines="+c.readData("parameters:betLines"),a=c.readData("parameter:jmx");if(a){b+="&"+a}return b},getInitFreespinParameters:function(){return this.getInitParameters()},getFreespinParameters:function(){var b=this.getInitParameters(),a=this.readData("parameter:jmx");if(a){b+="&"+a}return b}};Core.Slots.ServerManagerModel=Sys.extend(Core.ServerManagerModel,Core.Slots.ServerManagerModel,"Core.Slots.ServerManagerModel");Sys.ns("Core.Slots");Core.Slots.ResponseParser={constructor:function(){Core.Slots.ResponseParser.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.Model,view:Core.View,controller:Core.Slots.ResponseParserController}}};Core.Slots.ResponseParser=Sys.extend(Core.ResponseParser,Core.Slots.ResponseParser,"Core.Slots.ResponseParser");Sys.ns("Core.Slots");Core.Slots.ResponseParserController={constructor:function(){Core.Slots.ResponseParserController.superclass.constructor.apply(this,arguments)},parseServerResponse:function(d){var b=this,c=Core.Slots.ResponseParserController.superclass.parseServerResponse.call(b,d),a;if(c.gamestate){c.currentGameState=b.getCurrentGameState(c)}if(c.rs){a=this.parseReelInfo(c);c.reelInfo=a;c.nearWinList=this.parseNearWin(c);if(c.ws){c.wins=b.parseWinSituations(c,a);c.wins.winType=b.setWinType(c.wins.coins,Services.moneyManager.getBetCoins());c.wins.centsTotal=c.totalwin.cents;c.wins.coinsTotal=c.totalwin.coins}else{if(Sys.isDefined(c.totalwin)){c.wins={centsTotal:c.totalwin.cents,coinsTotal:c.totalwin.coins}}}}else{if(Sys.isDefined(c.totalwin)){c.wins={centsTotal:c.totalwin.cents,coinsTotal:c.totalwin.coins}}}return c},getCurrentGameState:function(c){var b=this,a=b.model.readData("currentServerGameState");if(c.gamestate.current){b.model.storeData("currentServerGameState",c.gamestate.current)}else{b.model.storeData("currentServerGameState",c.gamestate)}if(!a){a=b.model.readData("currentServerGameState");if(a==="basic"){b.fireEvent("request:playModeManager.addMode","basic")}}return a},parseNearWin:function(b){var a;if(Sys.isDefined(b.rs.i0)){a=b.rs.i0.nearwin;if(Sys.isArray(a)){return a}else{if(Sys.isNumber(a)){return[a]}}}return undefined},setWinType:function(e,a){var b=Resources.readData("config"),d=b.winTypes,c="";if(e>0){if((e>=a*d.smallWin.from)&&(e<a*d.smallWin.to)){c="smallWin"}else{if((e>=a*d.mediumWin.from)&&(e<a*d.mediumWin.to)){c="mediumWin"}else{if((e>=a*d.largeWin.from)&&(e<a*d.largeWin.to)){c="largeWin"}else{if(e>=a*d.bigWin.from){c="bigWin"}}}}}return c},parseReelInfo:function(a){return Sys.utils.parseReelInfo(a)},parseWinSituations:function(b,c){var d=0,a=[],e;if(b.ws){while(b.ws["i"+d]){a.push(b.ws["i"+d]);d++}}e=this.parseWinLayouts(a,c);this.doGameSpecificWinSituationParsing(e,a);return e},parseWinLayouts:function(a,f){var b,g,c,d=[],i,j=0,h=0,e=0;for(b=0;b<a.length;b++){d.push({betline:Sys.isNumber(a[b].betline)?a[b].betline+1:undefined,positions:[],reelset:a[b].reelset,wins:{}});if(Sys.isDefined(a[b].pos)){for(g=0;Sys.isDefined(a[b].pos["i"+g]);g++){i={};i.reelIndex=a[b].pos["i"+g][0];i.symbolIndex=a[b].pos["i"+g][1];i=Sys.apply(i,f[i.reelIndex].symbols[i.symbolIndex]);d[b].positions.push(i)}d[b].positions.sort(this.sortSymbols)}for(c=0;Sys.isDefined(a[b].types["i"+c])&&Sys.isDefined(a[b].types["i"+c].wintype);c++){d[b].wins.type=a[b].types["i"+c].wintype;if(a[b].types["i"+c].wintype==="coins"){d[b].wins.coins=a[b].types["i"+c].coins;d[b].wins.cents=a[b].types["i"+c].cents;j+=a[b].types["i"+c].coins;h+=a[b].types["i"+c].cents}else{if(a[b].types["i"+c].wintype==="freespins"){d[b].wins.freespins=a[b].types["i"+c].freespins;e+=a[b].types["i"+c].freespins}else{}}}}d.sort(this.sortWinSituations);return{winSituations:d,coins:j,cents:h,freespins:e}},sortSymbols:function(b,a){return b.reelIndex-a.reelIndex},sortWinSituations:function(b,a){if(b.wins.coins){if(a.wins.coins){return a.wins.coins-b.wins.coins}else{return -1}}else{if(a.wins.coins){return 1}}return a.wins.freespins-b.wins.freespins},doGameSpecificWinSituationParsing:function(b,a){}};Core.Slots.ResponseParserController=Sys.extend(Core.ResponseParserController,Core.Slots.ResponseParserController,"Core.Slots.ResponseParserController");Sys.ns("Core.Audio");Core.Audio.AudioPlayer={ENGINE:false,constructor:function(){Core.Audio.AudioPlayer.superclass.constructor.apply(this,arguments)},getStateChanges:function(){return{setupGame:{waitEvents:["notify:audioPlayer.ready"]}}},getMixinDependencies:function(){return["trigger"]},getDefaultMVCClasses:function(){if(Platform.hasWebAudioContext){return{model:Core.Audio.AudioPlayerModel,view:this.ENGINE?Core.Audio.AudioPlayerEngineView:Core.Audio.AudioPlayerView,controller:Core.Audio.AudioPlayerController}}else{return{model:Core.Audio.AudioPlayerModel,view:Core.Audio.Legacy.LegacyAudioPlayerView,controller:Core.Audio.AudioPlayerController}}}};Core.Audio.AudioPlayer=Sys.extend(Core.Module,Core.Audio.AudioPlayer,"Core.Audio.AudioPlayer");Sys.ns("Core.Audio");Core.Audio.AudioPlayerController={constructor:function(){Core.Audio.AudioPlayerController.superclass.constructor.apply(this,arguments)},init:function(){var a=this;Core.Audio.AudioPlayerController.superclass.init.apply(a,arguments);a.soundsToLoadOnEnable=["main"];if(Sys.isDefined(Resources.readData("preloadedAudio"))){a.model.storeData("hasPreloadedAudio",true);a.view.decodePreloadedAudio()}else{setTimeout(function(){a.fireEvent("notify:audioPlayer.ready")},0);a.model.storeData("hasPreloadedAudio",false)}},setupEvents:function(){var a=this;a.on({pageVisibilityChanged_event:a.onPageVisibilityChanged,"request:audioPlayer.play":a.play,"request:audioPlayer.stop":a.stop,"request:audioPlayer.stopAll":a.stopAll,"request:audioPlayer.stopNonLooping":a.stopNonLooping,"request:audioPlayer.loadSounds":a.loadSounds,"request:audioPlayer.disableEventInteractions":a.onDisableEventInteractions,"notify:stateHandler.leavingBeforeLoaderCloseState":a.onBeforeLoaderClose,"notify:resourceLoader.soundLoaded":a.view.onSoundResourceLoaded.bind(a.view),"notify:resourceLoader.soundLoadingFailed":a.handleLoadError,"notify:settingsManager.settingChanged":a.onSettingsChanged,"view:loadResource":a.fireEvent.bind(a,"request:resourceLoader.loadResource"),"view:soundLoaded":a.onSoundLoaded,"view:audioLoadError":a.handleLoadError})},registerTriggers:function(){Services.trigger.registerTrigger("notify:audioPlayer.soundLoaded",this,"When the sound is loaded")},onDisableEventInteractions:function(){var a=this;a.removeListener("request:audioPlayer.play");a.removeListener("request:audioPlayer.stop");a.removeListener("request:audioPlayer.stopAll");a.removeListener("request:audioPlayer.stopNonLooping")},onSoundLoaded:function(){this.fireEvent("notify:audioPlayer.soundLoaded");this.fireEvent("notify:audioPlayer.ready")},onBeforeLoaderClose:function(){this.setAudioState(this.model.readData("hasPreloadedAudio"))},onSettingsChanged:function(a,b){if(a==="volume"){this.adjustVolume(b)}},loadSounds:function(a){var b=this;a=a||["main"];if(!Sys.isArray(a)){a=[a]}if(b.model.isState("audioEnabled")){b.fireEvent("notify:audioPlayer.loadingSound");Sys.each(a,function(c){b.view.loadSounds(c)})}else{Sys.each(a,function(c){if(!b.soundsToLoadOnEnable.contains(c)){b.soundsToLoadOnEnable.push(c)}})}},adjustVolume:function(a){if(Sys.isNumber(a)&&a>=0&&a<=1){this.view.setVolume(a);if(a>0){this.setAudioState(true)}}},setAudioState:function(a){var b=this,c=a?"audioEnabled":"audioDisabled";b.model.setState(c);b.fireEvent("notify:audioPlayer.audioStateSet",c);if(a&&b.soundsToLoadOnEnable.length>0&&!b.model.readData("hasPreloadedAudio")){b.loadSounds(b.soundsToLoadOnEnable);b.soundsToLoadOnEnable.length=0}},onPageVisibilityChanged:function(c){var b=this,a;if(c&&b.model.isState("audioEnabled")){b.model.setState("audioDisabled:hidden");b.adjustVolume(0)}else{if(!c&&this.model.isState("audioDisabled:hidden")){this.model.setState("audioEnabled");a=Services.settingsManager.getSetting("volume");b.adjustVolume(a)}}},play:function(b){var a=this;if(!a.model.isState("audioEnabled")&&Sys.isDefined(b)&&Sys.isDefined(b.callback)){b.callback();delete b.callback}a.view.play(b);a.fireEvent("notify:audioPlayer.playing",b)},stop:function(b,a){this.view.stop(b,a);this.fireEvent("notify:audioPlayer.stop",b)},stopAll:function(){this.view.abort();this.fireEvent("notify:audioPlayer.stopAll")},stopNonLooping:function(){this.view.stopNonLooping();this.fireEvent("notify:audioPlayer.stopNonLooping")},handleLoadError:function(){}};Core.Audio.AudioPlayerController=Sys.extend(Core.Controller,Core.Audio.AudioPlayerController,"Core.Audio.AudioPlayerController");Sys.ns("Core.Audio");Core.Audio.AudioPlayerModel={constructor:function(){Core.Audio.AudioPlayerModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=Resources.readData("audioConfig");this.storeData("clips",a.clips);this.storeData("files",a.files)}};Core.Audio.AudioPlayerModel=Sys.extend(Core.Model,Core.Audio.AudioPlayerModel,"Core.Audio.AudioPlayerModel");Sys.ns("Core.Audio");Core.Audio.AudioPlayerView={constructor:function(){Core.Audio.AudioPlayerView.superclass.constructor.apply(this,arguments)},init:function(a){var b=this;b.model=a.model;b.MODULE_NAME=a.name;b.audioPlaying={};b.audioResources={};b.audioBuffers={};b.soundsToLoad=[];b.initializedAudio=false;b.context=new webkitAudioContext();b.callbacks={};b.duckingSounds={};b.duckingRestore={}},setVolume:function(b){var a=this;if(a.initializedAudio&&Sys.isNumber(b)){a.nodes.mainVolume.gain.value=b}},play:function(e){var d=this,c,g,b,f,a;if(!Sys.isDefined(e.source)){c=d.setUpSource(e)}else{c=e}if(!Sys.isDefined(c)){return}c.source.playbackRate.value=1;b=d.audioPlaying[e.syncWithId];if(!Sys.isEmpty(b)){f=d.context.currentTime-b[0].initTime;a=(f%c.duration);c.duration-=a;c.start=a+c.clipOffsetFromFileStart}g=d.getId(e);d.addToPlayingList(g,c);d.setupCallback(e.callback,c,g);if(!e.loop){d.setupCallback(d.clipFinished.bind(d,c,g),c,g)}if(Sys.isDefined(c.ducking)){d.duckSounds(c.ducking,c,g,e)}c.initTime=d.context.currentTime+c.delay-c.start+c.clipOffsetFromFileStart;if(e.loop===true&&d.canPlayWithoutDuration){if(c.start>0){c.source.noteGrainOn(d.context.currentTime+c.delay,c.start);c.source.onended=function(){if(!c.stopped){d.play(e)}};c.stopped=false}else{c.source.noteGrainOn(d.context.currentTime+c.delay)}}else{c.source.noteGrainOn(d.context.currentTime+c.delay,c.start,c.duration)}},duckSounds:function(f,k,d,e){var m=this,p=Object.keys(f),a=p.length,l,g,o,c,j,b,n,h;for(h=-1;++h<a;){b=p[h];n=f[b];g=m.duckingSounds[b];o=Sys.isDefined(n.duration)?n.duration:k.duration;l=m.context.currentTime+k.delay+Math.min(k.duration,o);if(Sys.isObj(g)){if(g.finishedAt>l){continue}c=m.callbacks[g.duckedBy].funcs.indexOf(g.restoreUsing);if(c>-1){m.callbacks[g.duckedBy].funcs.splice(c,1)}}m.changePlayingSoundVolume(b,n,k,e);j=m.restoreDuckedSound.bind(m,b,n);m.setupCallback(j,k,d,e.loop);m.duckingSounds[b]={duckedBy:d,restoreUsing:j,finishedAt:l}}},changePlayingSoundVolume:function(c,d,f,b){var g=this,a=g.audioPlaying[c],i=g.context.currentTime+(f.delay||0),h=i+(d.duration||f.duration||0),j,e;Sys.each(a,function(k){j=k.gainNode.gain;j.setTargetAtTime(d.value,i,d.attack);e=Math.max(j.value,g.duckingRestore[c]||0);if(!b.loop){j.setTargetAtTime(e,h,d.release)}g.duckingRestore[c]=e},g)},restoreDuckedSound:function(b,a){this.restoreGainValue(b,a);this.duckingSounds[b]=undefined},restoreGainValue:function(c,b){var d=this,a=d.audioPlaying[c],e;if(!Sys.isDefined(d.duckingRestore[c])){return}Sys.each(a,function(f){e=f.gainNode.gain;e.cancelScheduledValues(d.context.currentTime);e.setTargetAtTime(d.duckingRestore[c],d.context.currentTime,b.release)},d)},clipFinished:function(b,c){var a=this.audioPlaying[c].indexOf(b);while(a>=0){this.audioPlaying[c].splice(a,1);a=this.audioPlaying[c].indexOf(b)}},stop:function(e,b){var d=this,c,a;if(!Sys.isDefined(d.audioPlaying[e])){return}for(a=0;a<d.audioPlaying[e].length;a++){c=d.audioPlaying[e][a];if(Sys.isDefined(c)){d.stopClip(c,b)}}d.removeFromPlayingList(e);if(Sys.isDefined(d.callbacks[e])){clearTimeout(d.callbacks[e].timeout);d.callArrayOfCallbacks(e)}},stopClip:function(e,c){var d=this,b=Sys.isDefined(c)?c:e.fadeOut,f=d.context.currentTime,a=f;if(b){e.gainNode.gain.exponentialRampToValueAtTime(b.from,f);e.gainNode.gain.exponentialRampToValueAtTime(b.to,f+b.time);a+=b.time}e.stopped=true;e.source.noteOff(a)},stopNonLooping:function(){var b=this,a;Sys.iterate(b.audioPlaying,function(d,c){a=[];Sys.each(c,function(e){if(audio.source.loop){a.push(e)}else{b.stopClip(e)}});b.audioPlaying[d].length=0;b.audioPlaying[d]=a})},abort:function(){var a=this;Sys.iterate(a.audioPlaying,function(b){a.stop(b)})},getId:function(a){return a.id||"audioPlayer.noID"},addToPlayingList:function(b,a){if(!Sys.isDefined(this.audioPlaying[b])){this.audioPlaying[b]=[]}this.audioPlaying[b].push(a)},removeFromPlayingList:function(a){this.audioPlaying[a].length=0},setUpSource:function(g){var i=this,d=i.setUpSourceParams(g),h,c=this.context.currentTime,a,e,b;if(!Sys.isDefined(d)){return undefined}a=i.context.createBufferSource();a.buffer=d.sourceBuffer;e=i.context.createGainNode();e.gain.value=d.gain;a.connect(e);if(d.fadeIn){h=d.fadeIn;e.gain.exponentialRampToValueAtTime(h.from,c);e.gain.exponentialRampToValueAtTime(h.to,c+h.time)}if(d.fadeOut&&!d.loop){h=d.fadeOut;var f=c+d.start+(d.duration-h.time);e.gain.exponentialRampToValueAtTime(h.from,f);e.gain.exponentialRampToValueAtTime(h.to,f+h.time)}a.loop=d.loop;if(a.loop&&Sys.isDefined(d.start)){a.loopStart=d.start;a.loopEnd=d.start+d.duration}if(Sys.isDefined(d.filter)){b=this.filter(d.filter);e.connect(b);b.connect(i.nodes.mainVolume)}else{e.connect(i.nodes.mainVolume)}d=Sys.apply(d,{source:a,gainNode:e,filterNode:b});return d},setUpSourceParams:function(f){if(!Sys.isDefined(f.name)){return undefined}var i=this,a=Sys.isDefined(f.buffer)?f.buffer:"main",e=i.model.readData("clips")[a][f.name],h=i.audioBuffers[a],j=1,g,b,c,d;if(!Sys.isDefined(e)){return undefined}if(!Sys.isDefined(h)){return undefined}if(!Sys.isAudioBuffer(h)){if(Sys.isAudioBuffer(h[f.name])){h=h[f.name]}else{return undefined}}if(Sys.isDefined(f.volume)){j=f.volume}else{if(Sys.isDefined(e.volume)){j=e.volume}}g=Sys.isDefined(e.start)?e.start:0;b=g;if(Sys.isDefined(f.offset)){b+=f.offset}c=h.duration-b;if(Sys.isDefined(f.duration)){c=Math.min(c,f.duration)}else{if(Sys.isDefined(e.duration)){c=Math.min(c,e.duration)}}d={sourceBuffer:h,delay:Sys.isDefined(f.delay)?f.delay:0,start:b,duration:c,clipOffsetFromFileStart:g,gain:j,loop:f.loop===true,fadeIn:Sys.isDefined(f.fadeIn)?f.fadeIn:false,fadeOut:Sys.isDefined(f.fadeOut)?f.fadeOut:false,filter:f.filter,ducking:e.duck};return d},setupCallback:function(h,e,g,a){var d=this,f=(e.delay+e.duration)*1000,b,c;if(!Sys.isDefined(h)){return}b=function(){d.callArrayOfCallbacks(g)};if(Sys.isObj(d.callbacks[g])){if(Sys.isEmpty(d.callbacks[g].funcs)&&!a){d.callbacks[g].timeout=setTimeout(b,f)}d.callbacks[g].funcs.push(h)}else{if(!a){c=setTimeout(b,f)}d.callbacks[g]={timeout:c,funcs:[h]}}},filter:function(a){var b=this.context.createBiquadFilter();a.type=a.type||"allpass";b.type=Sys.isString(b.type)?a.type:b[a.type.toUpperCase()];if(Sys.isDefined(a.frequency)){b.frequency.value=a.frequency}if(Sys.isDefined(a.q)){b.Q.value=a.q}if(Sys.isDefined(a.gain)){b.gain.value=a.q}return b},createMainNodes:function(){var c=this,a=c.context,b;b=a.createGainNode();b.gain.value=Services.settingsManager.getSetting("volume");c.nodes={mainVolume:b}},connectMainNodes:function(){var b=this,a=b.nodes;a.mainVolume.connect(b.context.destination)},loadSounds:function(f){f=f||"main";var e=this,c=e.model.readData("files")[f],d,a,g,b;if(Sys.isObj(c)){a=Object.keys(c);g=a.length;for(b=-1;++b<g;){d=e.loadSoundResource(f+"/"+a[b],c[a[b]])}}else{d=e.loadSoundResource(f,c)}if(d&&f==="main"){this.fakeSound()}},loadSoundResource:function(b,a){var c=this;if(!c.soundsToLoad.contains(b)&&Sys.isDefined(a)){c.soundsToLoad.push(b);c.fireEvent("view:loadResource",{name:b,type:"audioFile",url:a,successEvent:"notify:resourceLoader.soundLoaded",failEvent:"notify:resourceLoader.soundLoadingFailed"});return true}c.fireEvent("view:audioLoadError","No config entry for sound resource",b);return false},fakeSound:function(){var a=this.context.createOscillator();a.frequency.value=440;var b=this.context.createGainNode();b.gain.value=0;a.connect(b);b.connect(this.context.destination);a.noteOn(0);a.noteOff(0);a.disconnect(0);b.disconnect(0)},checkAPICompability:function(c){var g=this,b=g.model.readData("clips"),a=c,f,i=true;if(Sys.isDefined(b[c])){var d=Object.keys(b[c]);a=d[d.length-1]}f=g.setUpSource({name:a,volume:0});try{f.source.noteGrainOn(0,0);f.source.noteOff(g.context.currentTime)}catch(h){i=false}g.canPlayWithoutDuration=i},onSoundResourceLoaded:function(b,e){var d=this,h=b.split("/"),c,a=b,g=d.audioResources,f=d.audioBuffers;if(h.length>1){c=h[0];a=h[1];g=g[c];f=f[c];if(!Sys.isDefined(g)){g={};d.audioResources[c]=g;f={};d.audioBuffers[c]=f}}g[a]=e;d.context.decodeAudioData(e,function(i){var j=d.soundsToLoad.indexOf(b);f[a]=i;if(!d.initializedAudio){d.setupEvents();d.createMainNodes();d.connectMainNodes();d.checkAPICompability(a);d.initializedAudio=true}if(j>=0){d.soundsToLoad.splice(j,1);if(d.soundsToLoad.length===0){d.fireEvent("view:soundLoaded")}}},d.fireEvent.bind(d,"view:audioLoadError","Failed to decode audio file",b))},decodePreloadedAudio:function(){var b=this,a=Resources.readData("preloadedAudio");Sys.iterate(a,function(c){b.soundsToLoad.push(c)});Sys.iterate(a,function(c,d){b.onSoundResourceLoaded(c,d)})},callArrayOfCallbacks:function(b){var a=this;Sys.each(a.callbacks[b].funcs,function(c){c.call(a)});a.callbacks[b].funcs=[]}};Core.Audio.AudioPlayerView=Sys.extend(Core.View,Core.Audio.AudioPlayerView,"Core.Audio.AudioPlayerView");Sys.ns("Core.Audio.Legacy");Core.Audio.Legacy.LegacyAudioPlayerView={constructor:function(){Core.Audio.Legacy.LegacyAudioPlayerView.superclass.constructor.apply(this,arguments);this.audioElements={};this.clipsToLoad=[];this.callbacks={}},setupEvents:function(){var a=this;a.on({"model:audioDisabled":a.abort,"model:audioDisabled:hidden":a.abort})},play:function(e){e.buffer=e.buffer||"main";var d=this,b=d.audioElements[e.buffer],a=e.name,g=d.model.readData("clips")[e.buffer][a],f;if(Sys.isDefined(b)&&d.model.isState("audioEnabled")){f=b[e.name];if(Sys.isDefined(f)){if(d.currentClip){d.stopCurrentClip()}if(!Sys.isDefined(e.volume)){e.volume=Sys.isDefined(g.volume)?g.volume:1}if(e.loop){e.loopHandler=function(){f.play()};f.addEventListener("ended",e.loopHandler,false)}d.currentClip=e;f.volume=Services.settingsManager.getSetting("volume")*e.volume;d.setupCallback(e.callback,f.duration,e.id,e.loop);try{f.play()}catch(c){}}}},stopCurrentClip:function(){var c=this.currentClip,b=this.audioElements[c.buffer][c.name];try{b.currentTime=0}catch(a){}b.pause();if(c.loop){b.removeEventListener("ended",c.loopHandler,false)}this.currentClip=undefined;if(Sys.isDefined(this.callbacks[c.id])){clearTimeout(this.callbacks[c.id].timeout);this.callArrayOfCallbacks(c.id)}},stop:function(a){if(Sys.isDefined(this.currentClip)&&this.currentClip.id===a){this.stopCurrentClip()}},stopNonLooping:function(){if(Sys.isDefined(this.currentClip)&&!this.currentClip.loop){this.stopCurrentClip()}},abort:function(){if(Sys.isDefined(this.currentClip)){this.stopCurrentClip()}},setVolume:function(a){var b=this.currentClip;if(Sys.isDefined(b)){this.audioElements[b.buffer][b.name].volume=a*b.volume}},loadSounds:function(c){var b=this,a,d;c=c||"main";if(!Sys.isObj(b.audioElements[c])){a=b.model.readData("files")[c];if(Sys.isDefined(a)){b.audioElements[c]={};Sys.iterate(a,function(e,f){d=c+":"+e;b.clipsToLoad.push(d);b.fireEvent("view:loadResource",{name:d,type:"audioElementSource",url:f,successEvent:"notify:resourceLoader.soundLoaded",failEvent:"notify:resourceLoader.soundLoadingFailed"})})}else{b.fireEvent("view:audioLoadError","No config entry for sound resource",c)}}else{if(b.clipsToLoad.length===0){b.fireEvent("view:soundLoaded")}}},onSoundResourceLoaded:function(a,c){var b=this,d=b.clipsToLoad.indexOf(a),e=a.split(":");b.audioElements[e[0]][e[1]]=c;if(d>=0){b.clipsToLoad.splice(d,1);if(b.clipsToLoad.length===0){b.fireEvent("view:soundLoaded")}}},callArrayOfCallbacks:function(b){var a=this;Sys.each(a.callbacks[b].funcs,function(c){c.call(a)});a.callbacks[b].funcs=[]},setupCallback:function(h,f,g,a){var d=this,e=f*1000,b,c;if(!Sys.isDefined(h)){return}b=function(){d.callArrayOfCallbacks(g)};if(Sys.isObj(d.callbacks[g])){if(Sys.isEmpty(d.callbacks[g].funcs)&&!a){d.callbacks[g].timeout=setTimeout(b,e)}d.callbacks[g].funcs.push(h)}else{if(!a){c=setTimeout(b,e)}d.callbacks[g]={timeout:c,funcs:[h]}}}};Core.Audio.Legacy.LegacyAudioPlayerView=Sys.extend(Core.View,Core.Audio.Legacy.LegacyAudioPlayerView,"Core.Audio.Legacy.LegacyAudioPlayerView");Sys.ns("Core");Core.ResourceLoader={constructor:function(){Core.ResourceLoader.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.ResourceLoaderModel,view:Core.ResourceLoaderView,controller:Core.ResourceLoaderController}}};Core.ResourceLoader=Sys.extend(Core.Module,Core.ResourceLoader,"Core.ResourceLoader");Sys.ns("Core");Core.ResourceLoaderController={constructor:function(){Core.ResourceLoaderController.superclass.constructor.apply(this,arguments);this.requestedResources={}},setupEvents:function(){var a=this;Core.ResourceLoaderController.superclass.setupEvents.call(a);a.on({"request:resourceLoader.loadResource":a.loadResource,"request:resourceLoader.removeLoadAnimation":a.removeLoadAnimation})},removeLoadAnimation:function(){this.model.setState("clearAnimations")},loadResource:function(c){var b=this,a=b.requestedResources[c.url];if(Sys.isObj(a)){if(a.status==="fetched"&&c.successEvent){b.fireEvent(c.successEvent,c.name,a.data)}else{if(a.status==="fetching"){a.requesters.push(c)}}}else{if(c.showLoadAnimation){b.model.setState("showLoadAnimation")}b.requestedResources[c.url]={status:"fetching",requesters:[c]};switch(c.type){case"audioFile":b.fetchAudioFile(c);break;case"audioElementSource":b.fetchAudioElementSource(c);break;case"JSON":b.fetchJSON(c);break;default:b.fetchGenericResource(c)}}},fetchAudioFile:function(c){var b=this,a=Sys.utils.httpGet({url:c.url,responseType:"arraybuffer"});a.fail(b.failedToLoadResource.bind(b,c)).then(function(d){b.fetchedResource(c,d.response)})},fetchAudioElementSource:function(c){var b=this,d=document.createElement("audio"),a=Sys.utils.httpGet({url:c.url});a.fail(b.failedToLoadResource.bind(b,c)).then(function(){d.src=c.url;d.load();b.fetchedResource(c,d)})},fetchJSON:function(c){var b=this,a=Sys.utils.httpGet({url:c.url});a.fail(b.failedToLoadResource.bind(b,c)).then(function(d){b.fetchedResource(c,d.responseText)})},fetchGenericResource:function(c){var b=this,a=Sys.utils.httpGet({url:c.url});a.fail(b.failedToLoadResource.bind(b,c)).then(function(d){b.fetchedResource(c,d)})},failedToLoadResource:function(c){var b=this,a=this.requestedResources[c.url].requesters;delete this.requestedResources[c.url];Sys.each(a,function(d){if(Sys.isDefined(d.failEvent)){b.fireEvent(d.failEvent,c.name)}})},fetchedResource:function(d,c){var a=this,b=a.requestedResources[d.url];b.status="fetched";b.data=c;Sys.each(b.requesters,function(e){if(Sys.isDefined(e.successEvent)){a.fireEvent(e.successEvent,d.name,c)}});b.requesters=[]}};Core.ResourceLoaderController=Sys.extend(Core.Controller,Core.ResourceLoaderController,"Core.ResourceLoaderController");Sys.ns("Core");Core.ResourceLoaderModel={constructor:function(){Core.ResourceLoaderModel.superclass.constructor.apply(this,arguments)},init:function(a){var b=Resources.readData("gameServerInitResponse");Core.ResourceLoaderModel.superclass.init.call(this,a);this.storeData("isRestore",b.restore)}};Core.ResourceLoaderModel=Sys.extend(Core.Model,Core.ResourceLoaderModel,"Core.ResourceLoaderModel");Sys.ns("Core");Core.ResourceLoaderView={SPINNER:{width:132,height:130,sprite:"loadingAnimation",frameWidth:132,frameHeight:130,totalSpriteWidth:1188,duration:1000,endFrame:8},FADE:{RESTORE:{startOpacity:1,endOpacity:1,duration:100},STANDARD:{startOpacity:0,endOpacity:0.2,duration:100}},constructor:function(){Core.ResourceLoaderView.superclass.constructor.apply(this,arguments)},init:function(a){var b=this;Core.ResourceLoaderView.superclass.init.call(b,a);b.loaderList=new Animation.CanvasAnimationList({});b.fadeList=new Animation.CanvasAnimationList({});b.bonusGameName="";b.loading=Services.languageManager.getText(Language.Keys.loading);b.loaderItem=b.createLoadItem();b.fadeItem=b.createFadeItem();b.loaderList.add(b.loaderItem)},setupEvents:function(){var a=this;a.on({"model:showLoadAnimation":a.showLoadAnimation,"model:hideLoadAnimation":a.hideLoadAnimation,"model:clearAnimations":a.removeAnimations})},createFadeItem:function(){var b=this.getLayeringValues(),a=this.FADE.STANDARD;return new Animation.CanvasAnimationItem({fullScreen:true,depth:b.fade,opacity:0,executeBefore:function(c){var d=this;c.fillStyle="rgb(0,0,0)";c.fillRect(d.pivot.x,d.pivot.y,d.width,d.height)},operations:{fade:[{time:0,value:a.startOpacity},{time:a.duration,value:a.endOpacity},{time:a.duration+1,value:a.endOpacity,goTo:1}]}})},createLoadItem:function(){var a=this.SPINNER,c=this.getLayeringValues(),b=Environment.getStageResolution();return new Animation.CanvasAnimationItem({left:Math.round((b.width-a.width)/2),top:Math.round((b.height-a.height)/2),width:a.width,height:a.height,frameWidth:a.frameWidth,frameHeight:a.frameHeight,totalSpriteWidth:a.totalSpriteWidth,image:a.sprite,spriteArray:Game.stage.view.animationManager.getSpriteSequence(a.sprite),depth:c.spinner,operations:{sprite:[{time:0,value:0},{time:a.duration,value:a.endFrame,goTo:0}]}})},showLoadAnimation:function(){var c=this,d=c.model.readData("isRestore"),a=c.fadeItem.prop.operations.fade,b=(d)?c.FADE.RESTORE:c.FADE.STANDARD;c.loaderItem.restore();c.fadeItem.restore();a[0].value=b.startOpacity;a[1].value=b.duration;a[1].value=b.endOpacity;a[2].value=b.duration+1;a[2].value=b.endOpacity;c.bonusGameName="";c.fadeList.add(c.fadeItem);Game.stage.view.addToRenderLoop(c.loaderList);Game.stage.view.addToRenderLoop(c.fadeList);c.isRestore=d},hideLoadAnimation:function(){Game.stage.view.removeFromRenderLoop(this.loaderList,"base");if(this.isRestore){this.clearFade()}},clearFade:function(){this.fadeList.items=[];Game.stage.view.removeFromRenderLoop(this.fadeList,"base")},removeAnimations:function(){Game.stage.view.removeFromRenderLoop(this.loaderList,"base");this.clearFade()},getLayeringValues:function(){return Layering.Game.ResourceLoader}};Core.ResourceLoaderView=Sys.extend(Core.View,Core.ResourceLoaderView,"Core.ResourceLoaderView");Sys.ns("Core");Core.KeyboardManager={constructor:function(){Core.KeyboardManager.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return[{userInput:{inputEvents:["keyUp","keyDown"],listenToUserInput:true}},"properties"]},getDefaultMVCClasses:function(){return{model:Core.KeyboardManagerModel,controller:Core.KeyboardManagerController}}};Core.KeyboardManager=Sys.extend(Core.Module,Core.KeyboardManager,"Core.KeyboardManager");Sys.ns("Core");Core.KeyboardManagerController={constructor:function(){Core.KeyboardManagerController.superclass.constructor.apply(this,arguments)},onUserInputKeyDown:function(b,a){this.handleUserInput(a.keyCode,"down");this.model.storeData("currentState","down")},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringStoppedState":a.model.storeData.bind(a.model,"quickStopAvailable",true),"notify:stateHandler.enteringSpinningState":a.model.storeData.bind(a.model,"quickStopAvailable",false)})},onUserInputKeyUp:function(b,a){this.handleUserInput(a.keyCode,"up");this.model.storeData("currentKey","");this.model.storeData("currentState","up")},handleUserInput:function(f,e){var d=this,b=d.model,c=b.getKey(f),a=(b.readData("currentKey")!==f||b.readData("currentState")!==e);if(!b.hasProperty("disabled")&&a&&Sys.isDefined(c)&&c.triggerOnState.contains(e)){b.storeData("currentKey",f);d[c.action].call(d,e)}},onSpaceBarPressed:function(b){var a=this;if(Services.settingsManager.getSetting("spacebarToSpin")){if(b==="up"){a.fireEvent("request:spinButton.released");a.fireEvent("request:abortPresentation");if(!a.model.readData("quickStopAvailable")){a.fireEvent("request:quickStopper.quickStop")}}else{if(b==="down"){window.onkeydown=function(c){return c.keyCode!==32};this.fireEvent("request:spinButton.pressed")}}}}};Core.KeyboardManagerController=Sys.extend(Core.Controller,Core.KeyboardManagerController,"Core.KeyboardManagerController");Sys.ns("Core");Core.KeyboardManagerModel={KEY_MAP:{32:{action:"onSpaceBarPressed",triggerOnState:["down","up"]}},constructor:function(){Core.KeyboardManagerModel.superclass.constructor.apply(this,arguments)},getKey:function(a){return this.KEY_MAP[a]}};Core.KeyboardManagerModel=Sys.extend(Core.Model,Core.KeyboardManagerModel,"Core.KeyboardManagerModel");Sys.ns("Game");Game.Stage={constructor:function(){Game.Stage.superclass.constructor.apply(this,arguments)},getStateChanges:function(){return{setupGame:{waitEvents:["notify:animationManager.allImagesLoaded"]}}},getDefaultMVCClasses:function(){return{model:Game.StageModel,view:Game.StageView,controller:Game.StageController}}};Game.Stage=Sys.extend(Core.Module,Game.Stage,"Game.Stage");Sys.ns("Game");Game.StageController={constructor:function(){Game.StageController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringBeforeLoaderCloseState":a.startRenderLoop,"request:stage.setupImages":a.onSetupImages,"request:stage.elevate":a.view.elevate.bind(a.view),"request:stage.lower":a.view.lower.bind(a.view),"request:stage.pauseAnimation":a.view.pauseAnimation.bind(a.view),pageVisibilityChanged_event:a.onVisibilityChange})},onVisibilityChange:function(b){var a=this;if(!b){a.view.forceRedraw()}},startRenderLoop:function(){this.model.setState("playRenderLoop")},switchScenes:function(a){this.model.switchScenes(a)},getGameContainer:function(){return this.view.getGameContainer()},onSetupImages:function(a){this.view.setupImages(a)}};Game.StageController=Sys.extend(Core.Controller,Game.StageController,"Game.StageController");Sys.ns("Game");Game.StageModel={constructor:function(){Game.StageModel.superclass.constructor.apply(this,arguments)},setupData:function(){var b=this,a=Resources.readData("config");b.storeData("images",Resources.readData("images"));b.storeData("sprites",a.sprites);b.storeData("reelConfig",a.reel);b.storeData("reelGroups",a.reelGroups);b.storeData("scenes",a.scenes);b.switchScenes("base")},getSymbolConfiguration:function(c,a){var b=this;if(Sys.isDefined(b.readData("reelGroups"))){return b.getNewSymbolConfiguration(c,a)}else{if(Sys.isDefined(b.readData("reelConfig"))){return b.getLegacySymbolConfiguration(c,a)}}},getCurrentReelGroupConfiguration:function(){var a=this;if(Sys.isDefined(a.readData("reelGroups"))){return a.getCompatibleReelGroupConfiguration()}else{if(Sys.isDefined(a.readData("reelConfig"))){return a.readData("reelConfig")}}},getCompatibleReelGroupConfiguration:function(){var b=this.readData("reelGroups")["default"],m=this.readData("reelConfig")||{},h=m.reelFrame||{},n=b.reelLayout,l=n.standard,c={},d=l.left||0,o=l.top||0,a=0,f=l.numberOfOutcomeSymbols||0,e=b.numberOfReels,g=l.symbolWidths.standard,p=l.symbolHeights.standard,j,k;c=Sys.applyProperties(c,l);c.symbolWidth=Sys.isNumber(m.symbolWidth)?m.symbolWidth:g;c.symbolHeight=Sys.isNumber(m.symbolHeight)?m.symbolHeight:p;c.symbolCols=Sys.isNumber(m.symbolCols)?m.symbolCols:b.numberOfReels;for(k=-1;++k<e;){j=n[k];if(k>0){d=Math.min(d,Sys.isNumber(j.left)?j.left:d);o=Math.min(o,Sys.isNumber(j.top)?j.top:o);a=Math.max(a,Sys.isNumber(j.left)?j.left:d)}else{d=Sys.isNumber(j.left)?j.left:d;o=Sys.isNumber(j.top)?j.top:o;a=d}f=Math.max(f,(j.numberOfOutcomeSymbols||0))}a=a+g-d;c.symbolRows=Sys.isNumber(m.symbolRows)?m.symbolRows:f;c.reelFrame={left:Sys.isNumber(h.left)?h.left:d,top:Sys.isNumber(h.top)?h.top:o,width:Sys.isNumber(h.width)?h.width:a,height:Sys.isNumber(h.height)?h.height:f*p};c.reelAreaTop=Sys.isNumber(m.reelAreaTop)?m.reelAreaTop:o;c.reelAreaLeft=Sys.isNumber(m.reelAreaLeft)?m.reelAreaLeft:d;c.reelSpacing=Sys.isNumber(m.reelSpacing)?m.reelSpacing:Math.round((a-(g*e))/(e-1));c.symbolSpacing=Sys.isNumber(m.symbolSpacing)?m.symbolSpacing:Math.round(l.symbolCenterToCenter-p);return c},getLegacySymbolConfiguration:function(e,b){var d=this.readData("reelConfig"),c=d.symbolWidth,a=d.symbolHeight;return{width:c,height:a,top:d.reelAreaTop+(b*(a+d.symbolSpacing)),left:d.reelAreaLeft+(e*(c+d.reelSpacing))}},getNewSymbolConfiguration:function(f,c){var d=this.readData("reelGroups")["default"].reelLayout,e=d[f.toString()],g=d.standard,b=e.top||g.top,a=g.outcomeOffset||0;return{width:g.symbolWidths.standard,height:g.symbolHeights.standard,top:b+a+(c*g.symbolCenterToCenter),left:e.left}},switchScenes:function(a){this.storeData("currentScene",a);this.setState("switchScene",a)}};Game.StageModel=Sys.extend(Core.Model,Game.StageModel,"Game.StageModel");Sys.ns("Game");Game.StageView={constructor:function(){Game.StageView.superclass.constructor.apply(this,arguments)},init:function(a){this.model=a.model;this.setupAnimationManager();this.setupEvents()},setupAnimationManager:function(){var b=this,a=Environment.getResolution();b.animationManager=new Animation.CanvasAnimationManager({parent:document.getElementById("gameElements"),images:b.model.readData("images"),sprites:b.model.readData("sprites"),top:"0px",left:"0px",height:a.height,width:a.width,scenes:b.model.readData("scenes")})},setupEvents:function(){var a=this;a.on({"model:switchScene":a.switchScenes,"model:playRenderLoop":a.playRenderLoop})},pauseAnimation:function(){this.animationManager.pauseAnimation()},switchScenes:function(a){this.animationManager.switchScenes(a)},clearScene:function(a){this.animationManager.clearScene(a)},playRenderLoop:function(){var a=this.model.readData("currentScene");this.animationManager.start(a)},addToRenderLoop:function(a,b){this.animationManager.addToRenderLoop(a,b)},removeFromRenderLoop:function(a,b){this.animationManager.removeList(a,b)},addImages:function(a){this.animationManager.addImages(a)},setupImages:function(a){this.animationManager.setupImages(a[0],a[1])},getGameContainer:function(){return document.getElementById("gameElements")},elevate:function(){this.getGameContainer().classList.add("elevated")},lower:function(){this.getGameContainer().className=this.getGameContainer().className.replace(/\belevated\b/,"")},forceRedraw:function(){this.animationManager.forceCanvasRedraw()}};Game.StageView=Sys.extend(Core.View,Game.StageView,"Game.StageView");Sys.ns("Game.Slots");Game.Slots.QuickStopper={constructor:function(){Game.Slots.QuickStopper.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["userInput","animation","trigger"]},getDefaultMVCClasses:function(){return{model:Game.Slots.QuickStopperModel,view:Game.Slots.QuickStopperView,controller:Game.Slots.QuickStopperController}}};Game.Slots.QuickStopper=Sys.extend(Core.Module,Game.Slots.QuickStopper,"Game.Slots.QuickStopper");Sys.ns("Game.Slots.Slots");Game.Slots.QuickStopperController={constructor:function(){Game.Slots.QuickStopperController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:quickStopper.disableInMode":a.disableInMode,"request:quickStopper.enableInMode":a.enableInMode,"request:quickStopper.quickStop":a.performQuickStop,"notify:spin.spinAnimationStarted":a.spinStarted,"notify:spin.spinAnimationComplete":a.spinStopped,"notify:spinButton.clicked":a.performQuickStop,"notify:spinButton.clickedWhileHidden":a.performQuickStop})},registerTriggers:function(){Services.trigger.registerTrigger("notify:quickStopper.quickStop",this,"When a quick stop is performed.")},onUserInputStart:function(a){if(Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(),a)){this.performQuickStop()}},spinStarted:function(){this.startListeningToUserInput();this.model.setState("spinning")},disableInMode:function(a){this.model.setDisabledMode(a)},enableInMode:function(a){this.model.removeDisabledMode(a)},spinStopped:function(){var a=this;a.stopListeningToUserInput();a.model.setState("stopped");a.fireEvent("request:spinButton.enable",a.MODULE_NAME)},performQuickStop:function(){var a=this;if(a.model.canQuickStop()){a.model.setState("quickStop");a.fireEvent("notify:quickStopper.quickStop");a.fireEvent("request:audioPlayer.play",{name:"quickStop"});a.fireEvent("request:spinButton.disable",a.MODULE_NAME)}}};Game.Slots.QuickStopperController=Sys.extend(Core.Controller,Game.Slots.QuickStopperController,"Game.Slots.QuickStopperController");Sys.ns("Game.Slots.Slots");Game.Slots.QuickStopperModel={constructor:function(){Game.Slots.QuickStopperModel.superclass.constructor.apply(this,arguments)},canQuickStop:function(){return this.isState("spinning")&&!this.isInDisabledMode()},setupData:function(){var b=this,c=Game.stage.model.getCurrentReelGroupConfiguration(),a=c.symbolWidth*c.symbolCols+c.reelSpacing*(c.symbolCols-1);b.storeData("layout",{width:a,height:c.visibleLength,top:c.reelAreaTop,left:c.reelAreaLeft,depth:Layering.Game.Slots.QuickStop.flash});b.storeData("disabledInModes",[])},isInDisabledMode:function(){return(this.readData("disabledInModes").length>0)},setDisabledMode:function(c){var b=this,a=b.readData("disabledInModes");if(a.indexOf(c)===-1){a.push(c);b.storeData("disabledInModes",a)}else{}},removeDisabledMode:function(d){var c=this,b=c.readData("disabledInModes"),a=b.indexOf(d);if(a>-1){b.splice(a,1);c.storeData("disabledInModes",b)}else{}}};Game.Slots.QuickStopperModel=Sys.extend(Core.Model,Game.Slots.QuickStopperModel,"Game.Slots.QuickStopperModel");Sys.ns("Game.Slots");Game.Slots.QuickStopperView={constructor:function(){Game.Slots.QuickStopperView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this,a=b.model.readData("layout");b.animationList=new Animation.CanvasAnimationList();b.item=new Animation.CanvasAnimationItem({top:a.top,left:a.left,width:a.width,height:a.height,depth:a.depth,executeBefore:function(c){var d=this;c.fillStyle="#FFFFFF";c.fillRect(d.pivot.x,d.pivot.y,d.width,d.height)},operations:{fade:[{time:0,value:0},{time:100,value:0.2},{time:200,value:0}]}});b.animationList.add(b.item);Game.stage.view.addToRenderLoop(b.animationList);b.animationList.stop()},setupEvents:function(){var a=this;a.on({"model:quickStop":a.quickStop})},quickStop:function(){this.animationList.restore();this.animationList.play()}};Game.Slots.QuickStopperView=Sys.extend(Core.View,Game.Slots.QuickStopperView,"Game.Slots.QuickStopperView");Sys.ns("Game");Game.Background={constructor:function(){Game.Background.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation"]},getDefaultMVCClasses:function(){return{controller:Game.BackgroundController,view:Game.BackgroundView}}};Game.Background=Sys.extend(Core.Module,Game.Background,"Game.Background");Sys.ns("Game");Game.BackgroundController={constructor:function(){Game.BackgroundController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:background.changeImage":a.changeImage,"request:background.restoreImage":a.restoreImage})},changeImage:function(a){this.view.changeImage(a)},restoreImage:function(){this.view.restoreImage()}};Game.BackgroundController=Sys.extend(Core.Controller,Game.BackgroundController,"Game.BackgroundController");Sys.ns("Game");Game.BackgroundView={BACKGROUND_IMAGE:"background",constructor:function(){Game.BackgroundView.superclass.constructor.apply(this,arguments)},changeImage:function(b){var a=Resources.readData("animationImages");if((Sys.isString(b)&&Sys.isDefined(a[b]))||Sys.isObj(b)){this.item.prop.image=b}},restoreImage:function(){this.item.prop.image=this.BACKGROUND_IMAGE},initAnimations:function(){var b=this,c=new Animation.CanvasAnimationList({}),a=new Animation.CanvasAnimationItem({fullScreen:true,depth:Layering.Game.Background.image,image:b.BACKGROUND_IMAGE});c.add(a);b.list=c;b.item=a;Game.stage.view.addToRenderLoop(c)}};Game.BackgroundView=Sys.extend(Core.View,Game.BackgroundView,"Game.BackgroundView");Sys.ns("Game");Game.Movie={constructor:function(){Game.Movie.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation"]},getDefaultMVCClasses:function(){return{view:Game.MovieView,controller:Game.MovieController}}};Game.Movie=Sys.extend(Core.Module,Game.Movie,"Game.Movie");Sys.ns("Game");Game.MovieController={constructor:function(){Game.MovieController.superclass.constructor.apply(this,arguments)},onUserInputEnd:function(a){if(this.view.inputTargetsButton(Sys.UserInputUtils.getCoordinatesRelativeToElement(a,Game.stage.getGameContainer()))){this.close()}},setupEvents:function(){var b=this,a={"view:animationComplete":b.close};a["notify:userInputManager."+b.MODULE_NAME+"ExclusiveEnd"]=b.onUserInputEnd;b.on(a)},show:function(){var a=this;a.fireEvent("request:userInputManager.activateExclusivity",a.MODULE_NAME);a.fireEvent("request:disableBasicGamePanel",a.MODULE_NAME);a.view.play()},close:function(){var a=this;a.fireEvent("request:userInputManager.deactivateExclusivity",a.MODULE_NAME);a.fireEvent("request:enableBasicGamePanel",a.MODULE_NAME);Services.settingsManager.storeSetting("volume",a.previousVolume,true);a.view.stop()}};Game.MovieController=Sys.extend(Core.Controller,Game.MovieController,"Game.MovieController");Sys.ns("Game");Game.MovieView={SRC:"movie",DURATION:10000,MOVIE_BUTTON_CONTINUE:{fontSize:30,fontFamily:"Arial",key:Language.Keys.skipIntro,uppercase:false,centerX:640,centerY:640,width:400,height:200,maxWidth:400,operations:[{fillStyle:"#FFFFFF",drawType:"fill"}]},constructor:function(){Game.MovieView.superclass.constructor.apply(this,arguments);this.scale=Environment.getVirtualToWindowScale(3)},play:function(){this.movieList.restore();this.movieList.play()},stop:function(){this.movieList.stop()},inputTargetsButton:function(f){var e=this,c=e.MOVIE_BUTTON_CONTINUE,b=e.scaleValue(c.width),d=e.scaleValue(c.height),a=e.scaleValue(c.centerX)-(b/2),g=e.scaleValue(c.centerY)-(d/2);return(f.x>=a&&f.x<=a+b&&f.y>=g&&f.y<=g+d)},initAnimations:function(){var b=this,d=new Animation.List({}),a=b.MOVIE_BUTTON_CONTINUE,c=b.getLayeringValues();b.movieItem=b.getMovieAnimation(c.video);b.continueButtonItem=b.getContinueButtonItem(a,c.button,Services.languageManager.getText(a.key));b.blackScreenItem=new Animation.Item({fullScreen:true,depth:c.video-1,executeBefore:function(e){e.fillRect(0,0,this.width,this.height)},operations:{fade:[{time:0,value:1},{time:b.DURATION/2,value:1,goTo:0}]}});d.add(b.blackScreenItem);d.add(b.movieItem);d.add(b.continueButtonItem);Game.stage.view.addToRenderLoop(d);d.stop();b.movieList=d},getMovieAnimation:function(b){var a=this;return new Animation.VideoItem({src:a.SRC,fullScreen:true,depth:b,callbacks:{canPlayThrough:a.fireEvent("view:introMovieBuffered")},operations:{fade:[{time:0,value:1},{time:a.DURATION,value:1,fireEvent:{event:"view:animationComplete",scope:a}}]}})},getContinueButtonItem:function(d,f,h){var e=this.DURATION,c=document.createElement("canvas"),b=c.getContext("2d"),a=d.width,i=d.height,g=new Animation.CanvasAnimationItem({width:a,height:i,top:d.centerY-Math.round(i/2),left:d.centerX-Math.round(a/2),depth:f,image:c,customProps:{context:b},operations:{fade:[{time:0,value:1},{time:e,value:1}]}});c.width=a;c.height=i;b.textAlign="center";b.textBaseline="middle";h=(d.uppercase===true)?h.toUpperCase():h;Animation.utils.text.performOperations(h,d.fontSize+"px "+d.fontFamily,Math.round(d.width/2),Math.round(d.height/2),d.operations,b);return g},getLayeringValues:function(){return Layering.Game.Movie},scaleValue:function(a){return Math.round(this.scale*a)}};Game.MovieView=Sys.extend(Core.View,Game.MovieView,"Game.MovieView");Sys.ns("Game");Game.IntroMovie={constructor:function(){Game.IntroMovie.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model;return{showingIntroMovie:{state:{name:"ShowingIntroMovie",execute:function(){},waitEvents:{"notify:introMovie.closed":false}}},beforeLoaderClose:{queue:[function(b){if(a.shouldShowIntroMovie()){b.stateHandler.pushState(b.states.showingIntroMovie)}}]},setupGame:{waitEvents:["notify:introMovie.buffered"]}}},getMixinDependencies:function(){return["animation"]},getDefaultMVCClasses:function(){return{model:Game.IntroMovieModel,controller:Game.IntroMovieController,view:Game.IntroMovieView}}};Game.IntroMovie=Sys.extend(Game.Movie,Game.IntroMovie,"Game.IntroMovie");Sys.ns("Game");Game.IntroMovieController={constructor:function(){Game.IntroMovieController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Game.IntroMovieController.superclass.setupEvents.apply(this,arguments);a.on({"notify:stateHandler.enteringShowingIntroMovieState":a.show,"view:introMovieBuffered":a.fireEvent.bind(a,"notify:introMovie.buffered"),"notify:moduleLoader.finishedLoadingModules":a.onModulesFinishedLoading,"notify:stateHandler.leavingShowingIntroMovieState":a.view.stopBlackScreen.bind(a.view),"request:introMovie.close":a.close.bind(a)})},close:function(){var a=this;Game.IntroMovieController.superclass.close.apply(a,arguments);a.fireEvent("request:ambienceManager.ambiencePauseSwitch",false);a.fireEvent("request:stage.lower");a.fireEvent("notify:introMovie.closed");Services.storage.storeData("IntroMovie.showing",false)},show:function(){Game.IntroMovieController.superclass.show.apply(this,arguments);this.fireEvent("request:ambienceManager.ambiencePauseSwitch",true);this.fireEvent("request:stage.elevate");Services.storage.storeData("IntroMovie.showing",true)},onModulesFinishedLoading:function(){var a=this;if(a.model.shouldShowIntroMovie()){a.previousVolume=Services.settingsManager.getSetting("volume");Services.settingsManager.storeSetting("volume",0,true)}}};Game.IntroMovieController=Sys.extend(Game.MovieController,Game.IntroMovieController,"Game.IntroMovieController");Sys.ns("Game");Game.IntroMovieModel={constructor:function(){Game.IntroMovieModel.superclass.constructor.apply(this,arguments)},shouldShowIntroMovie:function(){return this.readData("initNotRestore")&&Services.settingsManager.getSetting("showIntroMovie")},setupData:function(){var a=Resources.readData("gameServerInitResponse");this.storeData("initNotRestore",a.clientaction==="init"&&a.restore!==true);Services.storage.storeData("IntroMovie.showing",false)}};Game.IntroMovieModel=Sys.extend(Core.Model,Game.IntroMovieModel,"Game.IntroMovieModel");Sys.ns("Game");Game.IntroMovieView={SRC:"introMovie",constructor:function(){Game.IntroMovieView.superclass.constructor.apply(this,arguments)},stop:function(){var a=this;a.movieItem.stop();a.continueButtonItem.stop()},stopBlackScreen:function(){this.blackScreenItem.stop()}};Game.IntroMovieView=Sys.extend(Game.MovieView,Game.IntroMovieView,"Game.IntroMovieView");Sys.ns("Core");Core.Slots.BufferedSpin={constructor:function(){Core.Slots.BufferedSpin.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model;return{idle:{queue:[function(b){b.stateHandler.pushState(b.states.validateSpin);b.stateHandler.pushState(b.states.spinning)}],waitEvents:["notify:spin.roundStart"]},validateSpin:{state:{name:"ValidateSpin",execute:function(b){if(a.readData("isValidServerResponse")){b.stateHandler.pushState(b.states.stopped);b.stateHandler.pushState(b.states.stopping);b.stateHandler.pushState(b.states.beforeStopping)}else{b.stateHandler.pushState(b.states.idle)}},waitEvents:{"notify:spin:serverResponseReceived":false}}},spinning:{state:{name:"Spinning",execute:function(b){},waitEvents:{"notify:spin:serverResponseReceived":false}}},beforeStopping:{state:{name:"BeforeStopping",execute:function(){},waitEvents:{}}},stopping:{state:{name:"Stopping",execute:function(b){},waitEvents:{"notify:spin.AllIsStopped":false}}},stopped:{state:{name:"Stopped",execute:function(b){},waitEvents:{}}}}},getMixinDependencies:function(){return["animation","trigger"]},getDefaultMVCClasses:function(){return{model:Core.Slots.BufferedSpinModel,view:Core.Slots.BufferedSpinView,controller:Core.Slots.BufferedSpinController}}};Core.Slots.BufferedSpin=Sys.extend(Core.Module,Core.Slots.BufferedSpin,"Core.Slots.BufferedSpin");Sys.ns("Core.Slots");Core.Slots.BufferedSpinModel={constructor:function(){Core.Slots.BufferedSpinModel.superclass.constructor.apply(this,arguments)},setupData:function(){var b=this,a=Resources.readData("gameServerInitResponse");b.storeData("nearWinEnabled",a.nearwinallowed);b.storeData("isValidServerResponse",false);b.storeData("initialOutcomes",b.parseInitialOutcomes());Resources.storeData("symbolLayout",[])},parseInitialOutcomes:function(){var c=this,b=Resources.readData("gameServerInitResponseObject"),d=b.rs,a={};Sys.iterate(d,function(f,e){a[e.id]=Sys.utils.parseReelInfo(b,e.id)});return a},setInitialOutcomeInfo:function(b,a){var c=this.readData("initialOutcomes");c[b]=a;this.storeData("initialOutcomes",c)},setDefaultOutcome:function(b){var c=this,a=c.getDefaultOutcome(b);c.setInitialOutcomeInfo(b,a)}};Core.Slots.BufferedSpinModel=Sys.extend(Core.Model,Core.Slots.BufferedSpinModel,"Core.Slots.BufferedSpinModel");Sys.ns("Core.Slots");Core.Slots.BufferedSpinView={SPIN_SOUNDS:{basic:{spinStart:{id:"spinStart",name:"spinStart"},reelSpin:{id:"reelSpin",name:"reelSpin",loop:true},reelBounce:{id:"reelBounce",name:"reelBounce"},reelStop:{id:"reelStop",name:"reelStop"}}},constructor:function(){Core.Slots.BufferedSpinView.superclass.constructor.apply(this,arguments)},pauseStopSequenceConfig:{},initAnimations:function(){var d=this,b=Resources.readData("config").reelGroups,e=d.model.readData("currentReelSet"),a,c=[],g={},h={},f=this.model.readData("spinType");Sys.iterate(b,function(j,i){a=new Core.Slots.ReelGroup(j,i,{reelStartCompleteCallback:d.onReelStartComplete.bind(d,j),reelStartedStoppingCallback:d.onReelStartedStopping.bind(d,j),reelBounceStartCallback:d.onReelStartedBouncing.bind(d,j),reelStoppedCallback:d.onReelStopped.bind(d,j),fillerEventCallback:d.onFillerEvent.bind(d)},{nearWinEnabled:d.model.readData("nearWinEnabled")});if(Sys.isDefined(f)){a.setSpinType(f)}c.push(a);Sys.each(i.reelSets,function(k){g[k]=a});h[j]=a});d.reelGroups=c;d.reelSetToGroupMapping=g;d.groupNameToGroupMapping=h;if(Sys.isDefined(e)){d.activateReelSet(e,d.model.readData("startScene"))}},onReelStartComplete:function(a,c){var b=this;b.fireEvent("view:startSpinComplete",c);if(!b.spinSoundStarted){b.fireEvent("view:playAudio",b.getSoundConfig("reelSpin"));b.spinSoundStarted=true}},onReelStartedStopping:function(a,b){this.fireEvent("view:reelStopStarted",b)},onReelStartedBouncing:function(a,b){this.playReelSpecificSound("reelBounce",b);this.fireEvent("view:reelStopBouncingStarted",b)},onReelStopped:function(b,e){var d=this,c=d.groupNameToGroupMapping[b].reelLists[e],a=d.currentReelGroup();d.playReelSpecificSound("reelStop",e);d.updateSymbolLayout(c,e);d.fireEvent("view:reelStoppedSpinning",e);if(e===d.lastReelToStop){d.fireEvent("view:stopAudio",d.getSoundConfig("reelSpin").id);d.fireEvent("view:allReelsStoppedSpinning")}if(a.nearWinEnabled===true&&Sys.isDefined(a.nearWinList)&&a.nearWinList.length>0){if(a.nearWinList.indexOf(e+1)===0){d.fireEvent("view:nearWinStarted",e+1)}}},updateSymbolLayout:function(a,b){Resources.readData("symbolLayout")[b]=a.getSymbolLayout()},changeCurrentReelStopDelays:function(a){this.currentReelGroup().changeCurrentReelStopDelays(a)},resetCurrentReelStopDelays:function(){this.currentReelGroup().resetCurrentReelStopDelays()},getSoundConfig:function(a){var c=this,b=c.model.readData("currentReelSet"),d=c.SPIN_SOUNDS,e=d.basic[a];if(Sys.isDefined(d[b])&&Sys.isDefined(d[b][a])){e=d[b][a]}return e},playReelSpecificSound:function(a,c){var b=this.getSoundConfig(a),d=Sys.applyProperties({},b);d.id+=c;this.fireEvent("view:playAudio",d)},startSpin:function(c){var d=this,a=d.currentReelGroup(),b=a.getReelCount()-1;d.fireEvent("view:playAudio",d.getSoundConfig("spinStart"));if(Sys.isDefined(c)){for(;b>=0;--b){if(!c.contains(b)){break}}}d.lastReelToStop=b;d.isStopSequenceResuming=false;d.spinSoundStarted=false;a.lastReelToStop=d.lastReelToStop;a.startSpin(c)},stopSpin:function(b,a,c){this.currentReelGroup().stopSpin(b,a,c)},cancelSpin:function(){this.currentReelGroup().cancelSpin()},pauseStopSequence:function(a,b){this.currentReelGroup().pauseStopSequence(a,b)},resumeStopSequence:function(a,b){this.currentReelGroup().resumeStopSequence(a,b)},activateReelSet:function(b,e){var c=this,a,d;if(Sys.isDefined(c.reelSetToGroupMapping)){a=c.reelSetToGroupMapping[b];if(Sys.isDefined(a)){a.activate(b,e);c.model.storeData("currentReelSet",b);d=c.model.readData("initialOutcomes")[b];if(Sys.isDefined(d)){a.presentOutcome(d,c.model.readData("serverResponse"))}a.reelLists.forEach(function(g,f){c.updateSymbolLayout(g,f)})}}else{c.model.storeData("currentReelSet",b);c.model.storeData("startScene",e)}},deactivateReelSet:function(b){var c=this,a;if(!Sys.isDefined(b)){b=c.model.readData("currentReelSet")}if(Sys.isDefined(c.reelSetToGroupMapping)){a=c.reelSetToGroupMapping[b];if(Sys.isDefined(a)){a.deactivate(b)}}else{if(b===c.model.readData("currentReelSet")){c.model.removeData("currentReelSet");c.model.removeData("startScene")}}},setSymbols:function(a){this.currentReelGroup().setSymbols(a)},hide:function(){this.currentReelGroup().hide()},show:function(){this.currentReelGroup().show()},currentReelGroup:function(){return this.reelSetToGroupMapping[this.model.readData("currentReelSet")]},setReelVisibility:function(a){},handleSymbols:function(a,b){},setSpinType:function(c){var b=-1,a=this.reelGroups;if(Sys.isDefined(a)){for(;++b<a.length;){a[b].setSpinType(c)}}this.model.storeData("spinType",c)},quickStop:function(){var c=this,b=c.model.readData("currentReelSet"),a;if(Sys.isDefined(c.reelSetToGroupMapping)){a=c.reelSetToGroupMapping[b];if(Sys.isDefined(a)){a.quickStop()}}},hideSymbols:function(b){var c=this,a=c.currentReelGroup();a.hideSymbols(b)},showSymbols:function(b){var c=this,a=c.currentReelGroup();a.showSymbols(b)},setTimeToMoveOneSlot:function(b){var a=this.currentReelGroup();a.setTimeToMoveOneSlot(b)},onFillerEvent:function(){var a=["view:fillerEvent"];a.push.apply(a,Array.prototype.slice.call(arguments,0));this.fireEvent.apply(this,a)}};Core.Slots.BufferedSpinView=Sys.extend(Core.View,Core.Slots.BufferedSpinView,"Core.Slots.BufferedSpinView");Sys.ns("Core.Slots");Core.Slots.BufferedSpinController={constructor:function(){Core.Slots.BufferedSpinController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:responseParser.responseParsed":a.serverResponse,"notify:stateHandler.enteringSpinningState":a.wantStartSpin,"notify:stateHandler.enteringStoppingState":a.wantStopSpin,"notify:quickStopper.quickStop":a.quickStop,"notify:settingsManager.settingChanged":a.onSettingsChanged,"request:spin.startNewRound":a.startNewRound,"request:spin.activateReelset":a.activateReelSet,"request:spin.activateInitReelset":a.activateReelSet,"request:spin.deactivateReelset":a.deactivateReelSet,"request:spin.startSpin":a.startSpin,"request:spin.stopSpin":a.stopSpin,"request:spin.cancelSpin":a.cancelSpin,"request:spin.activateDefaultOutcome":a.cancelSpin,"request:spin.setSymbols":a.setSymbols,"request:spin.pauseStopSequence":a.pauseStopSequence,"request:spin.resumeStopSequence":a.resumeStopSequence,"request:spin.updateInitReelInfo":a.setInitialOutcomeInfo,"request:spin.hideSymbols":a.hideSymbols,"request:spin.showSymbols":a.showSymbols,"request:spin.setTimeToMoveOneSlot":a.setTimeToMoveOneSlot,"request:spin.changeCurrentReelStopDelays":a.changeCurrentReelStopDelays,"request:spin.resetCurrentReelStopDelays":a.resetCurrentReelStopDelays,"view:startSpinComplete":a.onStartSpinComplete,"view:reelStoppedSpinning":a.announceReelStopped,"view:reelStopBouncingStarted":a.announceReelStopBouncingStarted,"view:allReelsStoppedSpinning":a.announceSpinComplete,"view:stopSequencePaused":a.announceSpinStopSequencePaused,"view:stopSequenceResumed":a.announceSpinStopSequenceResumed,"view:resumeStopSequence":a.resumeStopSequence,"view:reelStopStarted":a.announceStopSpinStarted,"view:fillerEvent":a.announceFillerEvent,"view:nearWinStarted":a.announceNearWinStarted,"view:playAudio":a.fireEvent.bind(a,"request:audioPlayer.play"),"view:stopAudio":a.fireEvent.bind(a,"request:audioPlayer.stop")})},registerTriggers:function(a){a.registerTrigger("notify:spin.reelStopStarted",this,"The stop spin has started on the given reel.");a.registerTrigger("notify:spin.reelStopBouncingStarted",this,"Reel stop bounce started.");a.registerTrigger("notify:spin.spinAnimationStarted",this,"When reel starts spinning.");a.registerTrigger("notify:quickStopper.quickStop",this,"When spin is quick stopped.");a.registerTrigger("notify:spin.nearWinStarted",this,"Near win started.");a.registerTrigger("notify:spin.spinAnimationComplete",this,"When spin animation complete.")},serverResponse:function(a){this.fireEvent("request:spin.child.storeServerResponse",a);if(!a.clientaction.contains("init")&&a.clientaction!=="endbonus"){this.model.storeData("isValidServerResponse",true);this.fireEvent("notify:spin:serverResponseReceived")}this.model.storeData("serverResponse",a)},wantStartSpin:function(){this.fireEvent("request:spin.child.wantStartSpin");this.fireEvent("request:serverManager.sendAction","nextAction")},wantStopSpin:function(){this.fireEvent("request:spin.child.wantStopSpin")},quickStop:function(){this.view.quickStop()},onSettingsChanged:function(a,c){var b=this;if(a==="quickSpin"){b.updateSpinType();if(c){b.fireEvent("request:spinButton.addDisplayType","quickSpin")}else{b.fireEvent("request:spinButton.removeDisplayType","quickSpin")}}},changeCurrentReelStopDelays:function(a){this.view.changeCurrentReelStopDelays(a)},resetCurrentReelStopDelays:function(){this.view.resetCurrentReelStopDelays()},updateSpinType:function(){var a=this;if(Services.settingsManager.getSetting("quickSpin")){a.view.setSpinType("quickSpin")}else{a.view.setSpinType("standard")}},setInitialOutcomeInfo:function(b,a){this.model.setInitialOutcomeInfo(b,a)},startNewRound:function(){var a=this;if(a.waitingToStart){return}if(Services.moneyManager.canPlaceAnotherBet()){a.performSpin()}else{a.waitingToStart=true;Services.moneyManager.reloadBalance().done(function(){if(Services.moneyManager.canPlaceAnotherBet()){a.performSpin()}else{a.fireEvent("request:errorManager.handleClientOutOfMoneyError")}}).fail(function(){a.fireEvent("request:errorManager.handleClientOutOfMoneyError")}).always(function(){a.waitingToStart=false})}},performSpin:function(){this.updateSpinType();this.fireEvent("notify:spin.roundStart");Services.moneyManager.placeBet()},activateReelSet:function(a,b){this.view.activateReelSet(a,b);this.fireEvent("notify:spin.reelSetActivated",a)},deactivateReelSet:function(){this.view.deactivateReelSet()},startSpin:function(b,d){var c=this,a=c.getHeldReels();c.aborted=false;c.dialogClosed=false;c.allReelsHaveStopped=false;c.model.storeData("isValidServerResponse",false);c.announceSpinStarted(b);if(b!=="respin"&&c.model.readData("currentReelSet")!==b){c.activateReelSet(b,d)}c.view.startSpin(a)},stopSpin:function(b,a,c){this.view.stopSpin(b,a,c);this.setInitialOutcomeInfo(this.model.readData("currentReelSet"),b)},setSymbols:function(a){this.view.setSymbols(a)},pauseStopSequence:function(a,b){this.view.pauseStopSequence(a,b)},resumeStopSequence:function(a,b){this.view.resumeStopSequence(a,b)},cancelSpin:function(){var a=this;a.view.cancelSpin();a.fireEvent("notify:spin:serverResponseReceived");a.fireEvent("notify:spin.spinCanceled");a.fireEvent("notify:spin.spinAnimationComplete");a.fireEvent("request:spin.child.revertSpin")},hideSymbols:function(a){this.view.hideSymbols(a)},showSymbols:function(a){this.view.showSymbols(a)},setTimeToMoveOneSlot:function(a){this.view.setTimeToMoveOneSlot(a)},announceSpinStarted:function(a){this.fireEvent("notify:spin.spinAnimationStarted",a)},onStartSpinComplete:function(a){this.fireEvent("notify:spin.startSpinComplete",a)},announceReelStopped:function(a){this.fireEvent("notify:spin.reelStoppedSpinning",a)},announceReelStopBouncingStarted:function(a){this.fireEvent("notify:spin.reelStopBouncingStarted",a)},announceSpinComplete:function(){var a=this;if(a.aborted){if(a.dialogClosed){a.view.show()}}a.allReelsHaveStopped=true;this.fireEvent("notify:spin.spinAnimationComplete");this.fireEvent("notify:spin.AllIsStopped")},announceSpinStopSequencePaused:function(){this.fireEvent("notify:spin.stopSequencePaused")},announceSpinStopSequenceResumed:function(){this.fireEvent("notify:spin.stopSequenceResumed")},announceStopSpinStarted:function(a){this.fireEvent("notify:spin.reelStopStarted",a)},announceFillerEvent:function(b){var a=[];a.push("notify:spin."+b);a.push.apply(a,Array.prototype.slice.call(arguments,1));this.fireEvent.apply(this,a)},announceNearWinStarted:function(a){this.fireEvent("notify:spin.nearWinStarted",a)},getHeldReels:function(){var a=[];this.model.readData("serverResponse").reelInfo.forEach(function(c,b){if(c.hold){a.push(b)}});return a}};Core.Slots.BufferedSpinController=Sys.extend(Core.Controller,Core.Slots.BufferedSpinController,"Core.Slots.BufferedSpinController");Sys.ns("Core.Slots");Core.Slots.ReelGroup=function(d,a,c,b){this.constructor(d,a,c,b)};Core.Slots.ReelGroup.prototype={constructor:function(e,a,d,b){var c=this;c.createSymbolBuffer(a.numberOfReels,a.fillers,d);c.createReelLists(e,a.numberOfReels,a.reelLayout,d);c.spinType="standard";c.spinTimes=a.spinTimes;c.gameModeSpinTimes=a.spinTimes.gameModes||{};c.nearWinEnabled=b.nearWinEnabled;c.lastReelToStop=c.getReelCount()-1},createSymbolBuffer:function(c,b,a){this.symbolBuffer=new Core.Slots.SymbolBuffer(c,b,a)},createReelLists:function(m,c,g,j){var l=this,f=0,e,k=Layering.Game.Slots.Spin[m].symbols,d=l.symbolBuffer,h,a,b=[];l.reelLists=[];l.slotLengthGroups={};for(;f<c;f++){e=Sys.applyProperties({},g.standard);if(Sys.isDefined(g[f])){Sys.applyProperties(e,g[f])}e.id=m+"_"+f;e.baseDepth+=k;e.symbolRetrievalFunction=d.getSymbols.bind(d,f);Sys.applyProperties(e,l.getReelSpecificCallbacks(f,j));h=new Animation.BufferedReelList(e);a=h.getSlotLength();if(!Sys.isDefined(l.slotLengthGroups[a])){l.slotLengthGroups[a]=[]}l.slotLengthGroups[a].push(h);b.push(h.getVisibleSymbolsCount());l.reelLists.push(h)}l.symbolBuffer.setVisibleSymbolsCounts(b)},getReelSpecificCallbacks:function(d,c){var b=this,a={};a.reelStartCompleteCallback=function(){if(d===b.lastReelToStop){b.startSpinCompleteTime=Date.now();b.tryToStartStopSequence()}c.reelStartCompleteCallback(d)};a.reelStartedStoppingCallback=function(){c.reelStartedStoppingCallback(d)};a.reelBounceStartCallback=function(){c.reelBounceStartCallback(d)};a.reelStoppedCallback=function(){c.reelStoppedCallback(d)};return a},startSpin:function(b){var c=this,a=c.reelLists;b=Sys.isDefined(b)?b:[];c.symbolBuffer.cleanUp();c.symbolBuffer.setHeldReels(b);c.syncReels();c.hasBeenToldToStop=false;c.isQuickStopped=false;c.startSpinCompleteTime=undefined;c.hasPassedMinimumSpinTime=false;c.stopStartTime=undefined;c.stopSequencePausers=Sys.utils.init2dMatrix(c.getReelCount(),0);Sys.each(a,function(d,e){if(!b.contains(e)){d.startSpin()}})},syncReels:function(){var e=this,c,a,f,b,d=e.symbolBuffer.workspace.heldReels;Sys.iterate(this.slotLengthGroups,function(h,g){c=0;a=Number(h);Sys.each(g,function(i){c=Math.max(c,i.getBufferOffset())});Sys.each(g,function(i){f=i.getBufferOffset();b=e.reelLists.indexOf(i);if(b>-1&&!d.contains(b)&&f<c){i.setBufferOffset(c)}})})},setSpinType:function(a){this.spinType=a},stopSpin:function(b,a,d){var c=this;c.symbolBuffer.setOutcome(b,d);c.nearWinList=a;c.hasBeenToldToStop=true;c.tryToStartStopSequence()},cancelSpin:function(){this.presentOutcome(Resources.readData("config").reelSets[this.activeReelSet].noWinOutcome)},presentOutcome:function(d,e){var c=this,b=c.symbolBuffer,a=c.reelLists;c.hasBeenToldToStop=false;c.stopSequencePausers=Sys.utils.init2dMatrix(c.getReelCount(),0);b.cleanUp();b.clearBuffer();a.forEach(function(f){f.reset()});b.setOutcome(d,e);c.stopNow();a.forEach(function(f){f.presentOutcome()})},setTimeToMoveOneSlot:function(b){var a=this.reelLists;a.forEach(function(c){c.setTimeToMoveOneSlot(b)})},stopNow:function(){var d=this,a=d.getReelCount(),c=[],b;for(b=-1;++b<a;){if(d.stopSequencePausers[b].length===0){c[b]=0}else{c[b]=Infinity;break}}for(;++b<a;){c[b]=Infinity}d.symbolBuffer.setStopDistance(c)},calculateSymbolsBeforeOutcome:function(){var o=this,n=o.getReelCount(),h=o.spinTimes[o.spinType],q=o.gameModeSpinTimes[o.activeReelSet]||{},k=q[o.spinType]||{},b=h.minimumSpinTime,g=Sys.isNumber(h.nearWinDelay)?h.nearWinDelay:0,l=[],a,d=h.reelStopDelays,j,p=o.symbolBuffer.getIndexOfLastStoppingReel(),r=o.nearWinList,e,c,m=0,f=o.getRuntimeReelStopDelayOverride();if(Sys.isNumber(k.minimumSpinTime)){b=k.minimumSpinTime}if(Sys.isNumber(k.nearWinDelay)){g=k.nearWinDelay}if(Sys.isArray(k.reelStopDelays)){d=k.reelStopDelays}if(Sys.isArray(f)){d=f}a=(b-(Date.now()-o.startSpinCompleteTime));for(j=-1;++j<=p;){l[j]=0}for(j=p;++j<n;){if(o.stopSequencePausers[j].length===0){e=a+d[j];if(o.nearWinEnabled&&Sys.isArray(r)){e+=g*(r.indexOf(j)+1)}c=Math.round(e/o.reelLists[j].getTimeToMoveOneSlot())+m;if(c<0){m=-c;c=0}l[j]=c}else{l[j]=Infinity;break}}for(;++j<n;){l[j]=Infinity}return l},tryToStartStopSequence:function(){var a=this;if(a.canStop()){if(a.isQuickStopped){a.stopNow()}else{a.symbolBuffer.setStopDistance(a.calculateSymbolsBeforeOutcome())}}},canStop:function(){return this.hasBeenToldToStop&&Sys.isDefined(this.startSpinCompleteTime)},pauseStopSequence:function(a,e){var d=this,c,b=d.getReelCount();if(!Sys.isDefined(a)||!Sys.isDefined(e)){return}d.stopSequencePausers[e].push(a);c=d.symbolBuffer.getStopDistance();for(;e<b;++e){c[e]=Infinity}d.symbolBuffer.setStopDistance(c)},resumeStopSequence:function(a,d){var c=this,b;if(!Sys.isDefined(a)||!Sys.isDefined(d)){return}b=c.stopSequencePausers[d].indexOf(a);if(b>=0){c.stopSequencePausers[d].splice(b,1);if(c.stopSequencePausers[d].length===0){c.tryToStartStopSequence()}}},getReelCount:function(){return this.reelLists.length},setSymbols:function(b){var c=-1,a=this.reelLists;for(;++c<a.length;){if(Sys.isDefined(b[c])){a[c].setSymbols(b[c])}}},hide:function(){Sys.each(this.reelLists,function(a){a.stop()})},show:function(){Sys.each(this.reelLists,function(a){a.show()})},hideReel:function(b){var a=this.reelLists[b];if(Sys.isDefined(a)){a.stop()}},showReel:function(b){var a=this.reelLists[b];if(Sys.isDefined(a)){a.play()}},hideSymbolsOnReel:function(c,b){var a=this.reelLists[c];if(Sys.isDefined(a)){a.hideSymbols(b)}},hideSymbols:function(a){var b=this;Sys.iterate(a,function(d,c){b.hideSymbolsOnReel(d,c)})},showSymbolsOnReel:function(c,b){var a=this.reelLists[c];if(Sys.isDefined(a)){a.showSymbols(b)}},showSymbols:function(a){var b=this;Sys.iterate(a,function(d,c){b.showSymbolsOnReel(d,c)})},activate:function(a,c){var b=this;if(Sys.isDefined(b.activeReelSet)){b.deactivate(b.activeReelSet)}Sys.each(b.reelLists,function(d){Game.stage.view.addToRenderLoop(d,c)});b.symbolBuffer.activateReelSet(a);b.activeReelSet=a;b.scene=c;b.updateSpinTimings(a)},deactivate:function(a){var b=this;if(a===b.activeReelSet){Sys.each(b.reelLists,function(c){Game.stage.view.removeFromRenderLoop(c,b.scene)});b.activeReelSet=undefined}},quickStop:function(){var a=this;a.isQuickStopped=true;if(a.canStop()){a.stopNow()}},updateSpinTimings:function(a){var b=this.gameModeSpinTimes;if(b[a]&&Sys.isNumber(b[a].timeToMoveOneSlot)){this.setTimeToMoveOneSlot(b[a].timeToMoveOneSlot)}},getRuntimeReelStopDelayOverride:function(){var a=this;if(Sys.isDefined(a.runtimeReelStopDelaysOverride)&&Sys.isDefined(a.runtimeReelStopDelaysOverride[a.activeReelSet])&&Sys.isDefined(a.runtimeReelStopDelaysOverride[a.activeReelSet][a.spinType])){return a.runtimeReelStopDelaysOverride[a.activeReelSet][a.spinType]}return null},changeCurrentReelStopDelays:function(a){var b=this;if(b.isValidReelStopDelays(a)){b.runtimeReelStopDelaysOverride=b.runtimeReelStopDelaysOverride||[];b.runtimeReelStopDelaysOverride[b.activeReelSet]=b.runtimeReelStopDelaysOverride[b.activeReelSet]||[];b.runtimeReelStopDelaysOverride[b.activeReelSet][b.spinType]=a}},resetCurrentReelStopDelays:function(){var a=this;if(Sys.isDefined(a.runtimeReelStopDelaysOverride)&&Sys.isDefined(a.runtimeReelStopDelaysOverride[a.activeReelSet])&&Sys.isDefined(a.runtimeReelStopDelaysOverride[a.activeReelSet][a.spinType])){delete a.runtimeReelStopDelaysOverride[a.activeReelSet][a.spinType]}},isValidReelStopDelays:function(a){if(!Sys.isArray(a)){return false}if(a.length!==this.getReelCount()){return false}for(var b=0;b<a.length;b++){if(!Sys.isNumber(a[b])||a[b]<0){return false}}return true}};Sys.ns("Core.Slots");Core.Slots.Filler=function(){};Core.Slots.Filler.prototype={fill:function(){return true},cleanUp:function(){},analyzePipeBuffer:function(g,a,d){var f=[],h=-1,e,c,b;if(!Sys.isDefined(d)){d=[this.workspace.symbols.any]}for(b=-1;++b<g.length;){e=d.contains(g[b]);c=h===-1;if(e&&c){h=b}else{if(!e&&!c){f.push({start:h,length:b-h});h=-1}}}if(h!==-1){f.push({start:h,length:a?g.length-h:Infinity})}return f},fillSlots:function(b,a,c){if(c<0||c>=a.length){return}a.splice.apply(a,[c,b.length].concat(b))},setReelSet:function(){},wrapSymbols:function(c){var a=[],b;for(b=-1;++b<c.length;){a.push(this.wrapSymbol(c[b]))}return a},wrapSymbol:function(a){return{symbol:a}},evenBuffer:function(b){var e=this,d,c=e.workspace,a=0,f=false;for(d=-1;++d<b.length;){a=Math.max(a,b[d].length)}for(d=-1;++d<b.length;){if(!c.outcomeInsertedOnReel[d]){while(b[d].length<a){b[d].push(c.symbolConstants.any)}}f=f||e.slotsLeftInPipe(b[d])}return f},slotsLeftInBuffer:function(a,c){var b=-1;for(;++b<a.length;){if(this.slotsLeftInPipe(a[b],c)){return true}}return false},slotsLeftInPipe:function(b,c){var a=-1;for(;++a<b.length;){if(Sys.isObj(b[a])){continue}if(!Sys.isDefined(c)||c.contains(b[a])){return true}}return false},pipeBufferContainsOutcome:function(b){var a=-1;for(;++a<b.length;){if(b[a].isOutcomeSymbol){return true}}return false},processOutcome:function(){},updateStoppingDistances:function(){}};Sys.ns("Core.Slots");Core.Slots.SimpleFakeReelFiller={constructor:function(a){var b=this;Core.Slots.SimpleFakeReelFiller.superclass.constructor.apply(b,arguments);b.workspace=a;b.setReelSet(a.currentReelSet);b.cleanUp()},fill:function(d){var k=this,f,b,g,c=k.reelPositions,l=k.workspace.symbolConstants,e=[l.any,l.fakeReel],a,h;for(f=-1;++f<d.length;){g=d[f];if(!k.slotsLeftInPipe(g,e)){continue}a=k.reelStrips[f];h=c[f];for(b=-1;++b<g.length;){if(e.contains(g[b])){g[b]=k.wrapSymbol(a[h]);h=++h%a.length}}c[f]=h}return false},setReelSet:function(d){var c=this,a=Resources.readData("config").reelSets,b=Sys.isDefined(a[d])?a[d]:a.basic;if(Sys.isDefined(b)){c.reelStrips=b.fakeReels;c.reelPositions=Sys.utils.initArray(c.reelStrips.length,0)}}};Core.Slots.SimpleFakeReelFiller=Sys.extend(Core.Slots.Filler,Core.Slots.SimpleFakeReelFiller,"Core.Slots.SimpleFakeReelFiller");Sys.ns("Core.Slots");Core.Slots.SimpleOutcomeFiller={constructor:function(a){Core.Slots.SimpleOutcomeFiller.superclass.constructor.apply(this,arguments);this.workspace=a;this.cleanUp()},fill:function(g,e){var l=this,h,d=l.workspace,k,b=d.currentOutcome,f=0,j,a,c;if(!Sys.isDefined(b)){return l.slotsLeftInBuffer(g)}for(h=-1;++h<g.length;){j=g[h];if(!l.slotsLeftInPipe(j,[d.symbolConstants.any])){continue}k=d.symbolsBeforeOutcome[h];if(k>=j.length||!l.hasInsertedPreviousOutcome(h)){break}if(d.outcomeInsertedOnReel[h]){continue}a=b[h].symbols.slice(0);c=l.findOutcomeStart(l.analyzePipeBuffer(j,e,[d.symbolConstants.any]),a.length,Math.max(f,k));if(c>=0){l.fillSlots(l.wrapSymbols(a.reverse()),j,c);d.outcomeInsertedOnReel[h]=true;f=c}}return l.slotsLeftInBuffer(g)},hasInsertedPreviousOutcome:function(a){return a===0||this.workspace.outcomeInsertedOnReel[a-1]},findOutcomeStart:function(e,g,d){var b,f,a,c;for(c=-1;++c<e.length;){b=e[c];if(b.start>=d){f=b.start;a=b.length}else{f=d;a=b.length-(d-b.start)}if(a>=g){return f}}return -1},wrapSymbol:function(a){return{symbol:a,isOutcomeSymbol:true}}};Core.Slots.SimpleOutcomeFiller=Sys.extend(Core.Slots.Filler,Core.Slots.SimpleOutcomeFiller,"Core.Slots.SimpleOutcomeFiller");Sys.ns("Interface");Interface.Keyboard={constructor:function(){Interface.Keyboard.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["orientation",{userInput:{listenToUserInput:true}}]},getDefaultMVCClasses:function(){return{model:Core.Model,controller:Interface.KeyboardController,view:Interface.KeyboardView}}};Interface.Keyboard=Sys.extend(Core.Module,Interface.Keyboard,"Interface.Keyboard");Sys.ns("Interface");Interface.KeyboardController={MAX_LENGTH:8,constructor:function(){Interface.KeyboardController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:keyboard.open":a.open,"request:keyboard.close":a.close,"request:keyboard.cancel":a.cancel,"view:ok":a.onOkClicked,"view:cancel":a.onCancelClicked,"view:back":a.onBackKeyClicked,"view:keyClicked":a.onKeyClicked})},open:function(a){var b=this;if(b.model.readData("isOpen")===true){return}b.fireEvent("request:userInputManager.activateExclusivity",b.MODULE_NAME);a=a||{};if(a.formatFunction&&Sys.isFunc(a.formatFunction)){b.formatFunc=a.formatFunction}b.model.storeData("info",Sys.isDefined(a.info)?a.info:"");b.model.storeData("label",Sys.isDefined(a.label)?a.label:"");b.model.storeData("isOpen",true);b.model.storeData("minValue",a.minValue);b.updateModel("0");b.okCallback=a.okCallback;b.cancelCallback=a.cancelCallback;b.view.show()},close:function(){var a=this;a.fireEvent("request:userInputManager.deactivateExclusivity",a.MODULE_NAME);a.view.hide();a.model.storeData("isOpen",false)},cancel:function(){if(this.model.readData("isOpen")){this.onCancelClicked()}},onOkClicked:function(){var a=this;if(Sys.isFunc(a.okCallback)){a.okCallback({formattedInput:a.model.readData("formattedInputField"),input:a.model.readData("inputField"),value:parseInt(a.model.readData("inputField")),cents:parseInt(a.model.readData("inputField"))*100})}a.close()},onCancelClicked:function(){var a=this;a.updateModel("0");if(Sys.isFunc(a.cancelCallback)){a.cancelCallback({formattedInput:a.model.readData("formattedInputField"),input:a.model.readData("inputField"),value:parseInt(a.model.readData("inputField")),cents:parseInt(a.model.readData("inputField"))*100})}a.close()},onKeyClicked:function(b){var c=this,a=c.model.readData("inputField");if(a.length<c.MAX_LENGTH){a=Sys.utils.toInt(a)+b}c.updateModel(a);c.view.update()},onBackKeyClicked:function(){var b=this,a=b.model.readData("inputField");a=a.substring(0,a.length-1);a=a.length===0?"0":a;b.updateModel(a);b.view.update()},updateModel:function(a){var c=this,b=c.model;b.storeData("formattedInputField",c.formatFunc(a));b.storeData("inputField",a);b.storeData("value",parseInt(a));b.storeData("cents",parseInt(a)*100);b.storeData("isOkButtonEnabled",c.isInputValid())},formatFunc:function(a){return Services.moneyManager.formatMoneyCurrencySign(Sys.utils.toInt(a)*100,undefined,0)},isInputValid:function(){var b=this,c=b.model.readData("minValue"),a=b.model.readData("cents");return c===undefined||(c>0&&c<=a)}};Interface.KeyboardController=Sys.extend(Core.Controller,Interface.KeyboardController,"Interface.KeyboardController");Sys.ns("Interface");Interface.KeyboardView={RENDER_TARGET:"gameWrapper",KEYPAD:"keyboardKeypad",constructor:function(){Interface.KeyboardView.superclass.constructor.apply(this,arguments)},init:function(){var a=this;Interface.KeyboardView.superclass.init.apply(this,arguments);a.container=new Sys.Element({id:"keyboard",tag:"div",cls:"interface-keyboard_container",renderTo:a.RENDER_TARGET,style:"display:none;"});a.info=new Sys.Element({id:"keyboardInfo",tag:"div",cls:"info",renderTo:"keyboard",innerHTML:a.model.readData("info")});a.label=new Sys.Element({id:"keyboardFieldContainerLabel",tag:"div",cls:"label",renderTo:"keyboard",innerHTML:a.model.readData("label")});a.fieldContainer=new Sys.Element({id:"keyboardFieldContainer",tag:"div",cls:"fieldContainer",renderTo:"keyboard"});a.value=new Sys.Element({id:"",tag:"div",cls:"value",renderTo:"keyboardFieldContainer",innerHTML:a.model.readData("formattedInputField")});a.keypad=new Sys.Element({id:a.KEYPAD,tag:"div",cls:"keypad digits",renderTo:"keyboard"});a.initKeyboard()},initKeyboard:function(){var d=this,c,a=["1","2","3","4","5","6","7","8","9","0"],b;d.keys=[];for(c=0;c<a.length;c++){b=new Interface.utils.DOMButton({id:"keypad_num_"+a[c],textContent:a[c],clickCallback:d.fireEvent.bind(d,"view:keyClicked",a[c]),renderTo:d.KEYPAD,baseCSS:"button num_"+a[c],exclusiveUserInput:d.MODULE_NAME});d.keys.push(b)}d.cancelButton=new Interface.utils.DOMButton({id:"keypad_cancel",textContent:"",clickCallback:d.fireEvent.bind(d,"view:cancel"),renderTo:d.KEYPAD,baseCSS:"button cancelButton ",exclusiveUserInput:d.MODULE_NAME});d.okButton=new Interface.utils.DOMButton({id:"keypad_ok",textContent:"",clickCallback:d.fireEvent.bind(d,"view:ok"),renderTo:d.KEYPAD,baseCSS:"button okButton",exclusiveUserInput:d.MODULE_NAME});d.backButton=new Interface.utils.DOMButton({textContent:"",clickCallback:d.fireEvent.bind(d,"view:back"),renderTo:"keyboardFieldContainer",baseCSS:"button removeDigit",exclusiveUserInput:d.MODULE_NAME})},show:function(){this.update();this.container.el.style.display="block"},hide:function(){this.container.el.style.display="none"},update:function(){var c=this,b=c.model,a=b.readData("isOkButtonEnabled");c.label.getEl().innerHTML=b.readData("label");c.info.getEl().innerHTML=b.readData("info");c.value.getEl().innerHTML=b.readData("formattedInputField");if(a){c.okButton.enable()}else{c.okButton.disable()}}};Interface.KeyboardView=Sys.extend(Core.View,Interface.KeyboardView,"Interface.KeyboardView");Sys.ns("Interface");Interface.Ticker={constructor:function(){Interface.Ticker.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["properties"]},getDefaultMVCClasses:function(){return{controller:Interface.TickerController,view:Interface.TickerBaseView,model:Core.Model}}};Interface.Ticker=Sys.extend(Core.Module,Interface.Ticker,"Interface.Ticker");Sys.ns("Interface");Interface.TickerBaseView={BASE_CSS:"interface-ticker_container",CONTENT_CSS:"interface-ticker_text",BACKGROUND_URI:"interface-ticker_uri",RENDER_TARGET:"gameWrapper",ANIMATION_SPEED:20000,constructor:function(){Interface.TickerBaseView.superclass.constructor.apply(this,arguments)},enable:function(){},disable:function(){},update:function(){}};Interface.TickerBaseView=Sys.extend(Core.View,Interface.TickerBaseView,"Interface.TickerBaseView");Sys.ns("Interface");Interface.TickerMobileView={constructor:function(){Interface.TickerMobileView.superclass.constructor.apply(this,arguments);this.constructDOMElement();this.setupAnimation()},enable:function(){var a=this;if(a.model.hasProperty("enabled")){a.container.el.style.display="block";a.update();a.fireEvent("view:enabled")}},disable:function(){var a=this;if(!a.model.hasProperty("enabled")){a.container.el.style.display="none";a.update();a.fireEvent("view:disabled")}},update:function(){var b=this,a=b.model.readData("content");b.textContainer.removeAll();if(Sys.isDefined(a)){if(!Sys.isArray(a)){b.textContainer.add(a)}else{a.forEach(function(c){b.textContainer.add(c)})}}if(b.model.readData("animate")===true){b.textContainer.el.style.paddingLeft="100%";b.textContainer.el.style.width="auto";b.animation.run(b.textContainer.el)}else{b.textContainer.el.style.paddingLeft="0";b.textContainer.el.style.width="100%";b.animation.removeAnimation(b.textContainer.el)}},constructDOMElement:function(){var a=this;a.container=new Sys.Element({id:"ticker",tag:"div",cls:a.BASE_CSS+" "+a.BACKGROUND_URI,renderTo:a.RENDER_TARGET});a.textContainer=new Sys.Element({tag:"div",cls:a.CONTENT_CSS});a.container.add(a.textContainer)},setupAnimation:function(){var a=this;if(!Sys.isDefined(a.animation)){a.animationConfig={name:"scrollingAnimation",duration:a.ANIMATION_SPEED,timingFunction:"linear",iterationCount:"infinite",frames:{"0%":{"-webkit-transform":"translateX(0);","-moz-transform":"translateX(0);","-o-transform":"translateX(0);","-MS-transform":"translateX(0);",transform:"translateX(0);"},"100%":{"-webkit-transform":"translateX(-100%);","-moz-transform":"translateX(-100%);","-o-transform":"translateX(-100%);","-MS-transform":"translateX(-100%);",transform:"translateX(-100%);"}}};a.animation=new Interface.utils.CSSAnimation(a.animationConfig)}}};Interface.TickerMobileView=Sys.extend(Interface.TickerBaseView,Interface.TickerMobileView,"Interface.TickerMobileView");Sys.ns("Interface");Interface.TickerController={constructor:function(){Interface.TickerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:ticker.enable":a.enable,"request:ticker.disable":a.disable,"request:ticker.setText":a.setText,"view:enabled":a.viewEnabled,"view:disabled":a.viewDisabled})},enable:function(c,a){var b=this;b.addProperty("enabled",c);b.model.storeData("animate",a===true);b.view.enable()},disable:function(b){var a=this;a.removeProperty("enabled",b);a.model.storeData("animate",false);a.view.disable()},setText:function(b){var a=this;a.model.storeData("content",b);a.view.update()},viewEnabled:function(){var c=this,b=c.model.readData("spinButtonAlignment")||false,a={orientation:"portrait",vertical:0.13};if(b===false){c.model.storeData("spinButtonAlignment",true);c.fireEvent("request:spinButton.moveButton",a)}c.fireEvent("request:balanceDisplay.addClass","ticker")},viewDisabled:function(){var c=this,b=c.model.readData("spinButtonAlignment")||false,a={orientation:"portrait",vertical:-0.13};if(b===true){c.model.storeData("spinButtonAlignment",false);c.fireEvent("request:spinButton.moveButton",a)}c.fireEvent("request:balanceDisplay.removeClass","ticker")}};Interface.TickerController=Sys.extend(Core.Controller,Interface.TickerController,"Interface.TickerController");Sys.ns("Interface");Interface.RoundStartButton={constructor:function(){Interface.RoundStartButton.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["orientation","userInput","properties"]},getDefaultMVCClasses:function(){return{model:Interface.RoundStartButtonModel,view:Interface.RoundStartButtonBaseView,controller:Interface.RoundStartButtonController}}};Interface.RoundStartButton=Sys.extend(Core.Module,Interface.RoundStartButton,"Interface.RoundStartButton");Sys.ns("Game.Slots");Interface.RoundStartButtonController={ROUND_START_EVENT:undefined,constructor:function(){Interface.RoundStartButtonController.superclass.constructor.apply(this,arguments);this.view.setUpDOMStructure();this.properties={}},setupEvents:function(){var a=this,b={"notify:stateHandler.enteringIdleState":a.onEnteringIdleState,"notify:stateHandler.leavingIdleState":a.onLeavingIdleState,"notify:stateHandler.leavingBeforeLoaderCloseState":a.onLeavingIdleState,"notify:gameModeChanged":a.onGameModeChanged,"view:clicked":a.onClick,"view:hidden":a.fireEvent.bind(a,"notify:"+a.MODULE_NAME+".hidden"),"view:shown":a.fireEvent.bind(a,"notify:"+a.MODULE_NAME+".shown"),"view:pressed":a.fireEvent.bind(a,"notify:"+a.MODULE_NAME+".pressed"),"view:released":a.fireEvent.bind(a,"notify:"+a.MODULE_NAME+".released"),"view:disable":a.disable.bind(a),"view:hide":a.hide.bind(a),"view:show":a.show.bind(a),"view:enable":a.enable.bind(a),"request:enableBasicGamePanel":a.enable,"request:disableBasicGamePanel":a.disable};b["request:"+a.MODULE_NAME+".hide"]=a.hideRequested;b["request:"+a.MODULE_NAME+".show"]=a.show;b["request:"+a.MODULE_NAME+".enable"]=a.enable;b["request:"+a.MODULE_NAME+".disable"]=a.disableRequested;b["request:"+a.MODULE_NAME+".addDisplayType"]=a.addDisplayType;b["request:"+a.MODULE_NAME+".removeDisplayType"]=a.removeDisplayType;b["request:"+a.MODULE_NAME+".addProperty"]=a.addProperty;b["request:"+a.MODULE_NAME+".removeProperty"]=a.removeProperty;a.on(b)},onUserInputStart:function(a){this.view.userInputStart(a)},onUserInputMove:function(a){this.view.userInputMove(a)},onUserInputHover:function(a){this.view.userInputHover(a)},onUserInputEnd:function(a){this.view.userInputEnd(a)},onClick:function(){this.fireEvent(this.ROUND_START_EVENT)},removeProperty:function(c,b){var a=this;if(a.model.hasProperty(c)){a.model.removeProperty(c,b);if(!a.model.hasProperty(c)){a.updateAppearance()}if(!a.model.readData("inIdleState")&&!a.model.hasProperty("visibleDuringRound")){a.hide(a.MODULE_NAME)}}},addDisplayType:function(b){var a=!this.model.hasDisplayType(b);this.model.addDisplayType(b);if(a){this.updateAppearance()}},removeDisplayType:function(a){var b=this;if(b.model.hasDisplayType(a)){b.model.removeDisplayType(a);if(!b.model.hasDisplayType(a)){b.updateAppearance()}}},updateAppearance:function(){},hide:function(a){this.addProperty("hidden",a)},hideRequested:function(a){this.view.hideRequested(a)},show:function(a){this.removeProperty("hidden",a)},enable:function(a){this.removeProperty("disabled",a)},disable:function(a){this.addProperty("disabled",a)},disableRequested:function(a){this.view.disableRequested(a)},onEnteringIdleState:function(){var a=this;a.model.storeData("inIdleState",true);a.show(a.MODULE_NAME)},onLeavingIdleState:function(){var a=this;a.model.storeData("inIdleState",false);if(!a.model.hasProperty("visibleDuringRound")){a.hide(a.MODULE_NAME)}},onGameModeChanged:function(b){var a=this;a.model.storeData("currentGameMode",b);if(b==="BASIC"){a.enable("notInBasicGame");a.show("globalRequest");a.view.show()}else{a.disable("notInBasicGame");a.hide("globalRequest");a.view.disableRequested("notInBasicGame");a.view.hideRequested("globalRequest");a.updateVisibility()}}};Interface.RoundStartButtonController=Sys.extend(Core.Controller,Interface.RoundStartButtonController,"Interface.RoundStartButtonController");Sys.ns("Interface");Interface.RoundStartButtonModel={DISPLAY_TYPES:{},PROPERTIES:{hidden:[],visibleDuringRound:[],visibleOnInput:[]},constructor:function(){Interface.RoundStartButtonModel.superclass.constructor.apply(this,arguments)},setupData:function(){var b=Resources.readData("gameServerInitResponseObject"),a=b.gamestate?b.gamestate:undefined,c=a?a.current:undefined;this.data={properties:this.PROPERTIES,displayTypes:this.DISPLAY_TYPES,currentGameMode:c?c.toUpperCase():undefined}},hasDisplayType:function(a){return this.readData("displayTypes")[a]},addDisplayType:function(a){this.readData("displayTypes")[a]=true},removeDisplayType:function(a){this.readData("displayTypes")[a]=false}};Interface.RoundStartButtonModel=Sys.extend(Core.Model,Interface.RoundStartButtonModel,"Interface.RoundStartButtonModel");Sys.ns("Interface");Interface.RoundStartButtonBaseView={BUTTON_ID:"roundStartButton",BASE_CSS:"interface-roundStartButton_base",PRESSED_CSS:"interface-roundStartButton_pressed",URI_BASE_CSS:"interface-roundStartButton",PORTRAIT_POSITION:{TOP:0.5,LEFT:0.5},LANDSCAPE_POSITION:{TOP:0.5,LEFT:0.5},PORTRAIT_SIZE:{ASPECT_RATIO:1,HEIGHT:0.2},LANDSCAPE_SIZE:{ASPECT_RATIO:1,WIDTH:0.2},RENDER_TARGET:"gameWrapper",constructor:function(){Interface.RoundStartButtonBaseView.superclass.constructor.apply(this,arguments)},setUpDOMStructure:function(){var a=this;a.container=new Sys.Element({tag:"div",id:a.BUTTON_ID,cls:a.BASE_CSS+" "+a.URI_BASE_CSS+"_default_uri",renderTo:a.RENDER_TARGET});a.model.storeData("currentUri",a.URI_BASE_CSS+"_default_uri");a.show();if(Sys.isDefined(a.model.hasProperty)&&!a.model.hasProperty("hidden")){a.show()}else{a.hide()}},userInputStart:function(c){var b=this,a=b.isInputTarget(c);if(a){if(!b.hidden()){b.press()}}else{if(b.shouldBeHiddenByUserInput(c)){b.hide()}}b.model.storeData("wasInitialInputTarget",a)},shouldBeHiddenByUserInput:function(a){return !this.model.hasProperty("visibleOnInput")&&Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(),a)},userInputMove:function(c){var b=this,a=b.isInputTarget(c);if(b.model.readData("wasInitialInputTarget")&&!a){b.userInputEnd(c)}},userInputHover:function(a){},userInputEnd:function(c){var b=this;if(b.model.readData("wasInitialInputTarget")){var a=b.isInputTarget(c);b.release(a);if(a){b.fireEvent("view:clicked")}}else{if(!b.model.hasProperty("hidden")){b.show()}}b.model.storeData("wasInitialInputTarget",false)},isInputTarget:function(a){return Sys.UserInputUtils.isCoordinateTarget(this.container.el,a)},press:function(){this.container.addCls(this.PRESSED_CSS);this.fireEvent("view:pressed")},release:function(a){this.container.removeCls(this.PRESSED_CSS);this.fireEvent("view:released",a)},hide:function(){if(!this.hidden()){this.container.el.style.display="none";this.fireEvent("view:hidden")}},hidden:function(){return this.container.el.style.display==="none"},show:function(){if(this.hidden()){this.container.el.style.display="block";this.fireEvent("view:shown")}},enable:function(){this.container.el.style.opacity=1},disable:function(){this.container.el.style.opacity=0.5},setAppearance:function(c){var d=this.URI_BASE_CSS+"_"+c+"_uri",b=this.container,a=this.model.readData("currentUri");b.replaceCSSClass(a,d,true);this.model.storeData("currentUri",d)},disableRequested:function(a){this.fireEvent("view:disable",a)},hideRequested:function(a){if(Sys.isDefined(a)){this.fireEvent("view:hide",a)}else{this.hide()}},beforeLoaderClose:function(){}};Interface.RoundStartButtonBaseView=Sys.extend(Core.View,Interface.RoundStartButtonBaseView,"Interface.RoundStartButtonBaseView");Sys.ns("Interface.Slots");Interface.Slots.SpinButton={constructor:function(){Interface.Slots.SpinButton.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["orientation","userInput","properties","trigger"],desktop:[{userInput:{inputEvents:["start","end","cancel","move","hover"]}},"properties","animation","trigger"]}},getDefaultMVCClasses:function(){return{model:Interface.Slots.SpinButtonModel,view:Interface.Slots.SpinButtonBaseView,controller:Interface.Slots.SpinButtonController}}};Interface.Slots.SpinButton=Sys.extend(Interface.RoundStartButton,Interface.Slots.SpinButton,"Interface.Slots.SpinButton");Sys.ns("Interface.Slots");Interface.Slots.SpinButtonController={ROUND_START_EVENT:"request:spin.startNewRound",constructor:function(){Interface.Slots.SpinButtonController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Interface.Slots.SpinButtonController.superclass.setupEvents.apply(this,arguments);a.on({"view:setSafeArea":a.fireEvent.bind(a,"request:fullscreen.setSafeArea"),"request:spinButton.startRound":a.startRound,"request:spinButton.showCounter":a.showCounter,"request:spinButton.hideCounter":a.hideCounter,"request:spinButton.updateCounter":a.updateCounter,"request:spinButton.pressed":a.onPressedRequest,"request:spinButton.released":a.onReleasedRequest,"request:spinButton.moveButton":a.onMoveButtonRequest,"notify:settingsManager.settingChanged":a.settingsChanged,"notify:stateHandler.enteringFreeSpinIntroState":a.onEnteringFreespinIntro,"notify:stateHandler.leavingFreeSpinIntroState":a.onLeavingFreespinIntro,"notify:stateHandler.enteringFreeSpinOutroState":a.onEnteringFreespinOutro,"notify:stateHandler.leavingFreeSpinOutroState":a.onLeavingFreespinOutro,"notify:stateHandler.leavingBeforeLoaderCloseState":a.onBeforeLoaderClose,"view:playSound":a.playSoundForView,"view:notify":a.onViewNotify});if(Sys.isGcmEnabled){a.on({"notify:stateHandler.enteringspinTypeRespinRestoreState":a.disable,"notify:stateHandler.leavingspinTypeRespinRestoreState":a.enable})}},registerTriggers:function(){Services.trigger.registerTrigger("notify:spinButton.clicked",this,"Executed when the spin button is clicked");Services.trigger.registerTrigger("notify:spinButton.up",this,"When the spin button returns to the up state.");Services.trigger.registerTrigger("notify:spinButton.hover",this,"Executed when the spin button is hovered");Services.trigger.registerTrigger("notify:spinButton.down",this,"Executed when the spin button is down")},onMoveButtonRequest:function(a){this.view.moveButtonPosition(a);this.fireEvent("request:quickSettingsMenu.movePosition",a)},playSoundForView:function(a){this.fireEvent("request:audioPlayer.play",{name:a})},startRound:function(){this.fireEvent(this.ROUND_START_EVENT)},onPressedRequest:function(){if(this.model.readData("inIdleState")){this.view.onPressedRequest()}},onReleasedRequest:function(){if(this.model.readData("inIdleState")){this.view.onReleasedRequest()}},onLandscape:function(){var a=this;Mixins.orientation.controller.methods.onLandscape.apply(a,arguments);if(a.model.hasProperty("hidden")){if(a.view.canInteractWhileHidden()){a.startListeningToUserInput()}else{a.stopListeningToUserInput()}}},onPortrait:function(){var a=this;Mixins.orientation.controller.methods.onPortrait.apply(a,arguments);if(a.model.hasProperty("hidden")){if(a.view.canInteractWhileHidden()){a.startListeningToUserInput()}else{a.stopListeningToUserInput()}}},onEnteringIdleState:function(){var a=this;Interface.Slots.SpinButtonController.superclass.onEnteringIdleState.apply(a,arguments);if(a.model.hasProperty("disabledDuringRound")){a.enable(a.MODULE_NAME)}a.view.disableSpinningAnimations()},onLeavingIdleState:function(){var a=this;Interface.Slots.SpinButtonController.superclass.onLeavingIdleState.apply(a,arguments);if(a.model.hasProperty("disabledDuringRound")){a.disable(a.MODULE_NAME)}if(!a.model.hasProperty("disabled")){a.view.enableSpinningAnimations()}},onBeforeLoaderClose:function(){this.view.beforeLoaderClose();this.updateAppearance();this.view.setFullscreenSafeArea()},onClick:function(){var b=this,a=b.model;if(a.hasProperty("hidden")){if(b.view.canInteractWhileHidden()){b.fireEvent("notify:spinButton.clickedWhileHidden")}}else{b.fireEvent("request:audioPlayer.play",{name:"spinButtonClick"});b.fireEvent("notify:spinButton.clicked",{skip:a.readData("noStopOnSpin")});if(a.readData("inIdleState")){b.fireEvent(b.ROUND_START_EVENT)}}},onViewNotify:function(a){this.fireEvent(a)},showCounter:function(a){this.view.showCounter();if(Sys.isDefined(a)){this.view.updateCounter(a)}},hideCounter:function(){this.view.hideCounter()},updateCounter:function(a){this.view.updateCounter(a)},updateAppearance:function(){var c=this,b=c.model,a="default";if(b.hasDisplayType("autoPlay")){a="autoPlay"}else{if(b.hasDisplayType("autoPlayStop")){a="autoPlayStop"}else{if(b.hasDisplayType("quickSpin")){a="quickSpin"}}}c.view.setAppearance(a);c.updateVisibility()},updateVisibility:function(){var b=this,c=b.model.hasProperty("hidden"),a=b.model.hasProperty("disabled");if(c){b.view.hide()}else{b.view.show()}if(a){b.view.disable()}else{b.view.enable()}if(!a&&(!c||b.view.canInteractWhileHidden())){b.startListeningToUserInput()}else{b.stopListeningToUserInput()}},settingsChanged:function(a,c){var b=this;if(a==="leftHandMode"){b.model.storeData("leftHandMode",c);b.view.setPosition()}},onEnteringFreespinIntro:function(){this.hide(this.MODULE_NAME)},onLeavingFreespinIntro:function(){this.show(this.MODULE_NAME)},onEnteringFreespinOutro:function(){this.hide(this.MODULE_NAME)},onLeavingFreespinOutro:function(){this.show(this.MODULE_NAME)}};Interface.Slots.SpinButtonController=Sys.extend(Interface.RoundStartButtonController,Interface.Slots.SpinButtonController,"Interface.Slots.SpinButtonController");Sys.ns("Interface.Slots");Interface.Slots.SpinButtonModel={DISPLAY_TYPES:{autoPlay:false,autoPlayStop:false,quickSpin:false},constructor:function(){Interface.Slots.SpinButtonModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=Services.localStorageManager.hasData("leftHandMode")&&Services.localStorageManager.readData("leftHandMode")==="true";Interface.Slots.SpinButtonModel.superclass.setupData.apply(this,arguments);this.storeData("leftHandMode",a)}};Interface.Slots.SpinButtonModel=Sys.extend(Interface.RoundStartButtonModel,Interface.Slots.SpinButtonModel,"Interface.Slots.SpinButtonModel");Sys.ns("Interface.Slots");Interface.Slots.SpinButtonBaseView={BUTTON_ID:"spinButton",BASE_CSS:"interface-roundStartButton_base",URI_BASE_CSS:"interface-spinButton",COUNTER_BASE_CSS:"utils_center interface-spinButton_counter",BUTTON_POSITION:{PORTRAIT:{LEFT:{RIGHT:0.5},RIGHT:{LEFT:0.5}},LANDSCAPE:{LEFT:{RIGHT:0.5},RIGHT:{LEFT:0.5}}},constructor:function(){Interface.Slots.SpinButtonBaseView.superclass.constructor.apply(this,arguments)},setUpDOMStructure:function(){var a=this;a.updatePositionProperties();Interface.Slots.SpinButtonBaseView.superclass.setUpDOMStructure.apply(a,arguments);a.counter=new Sys.Element({tag:"div",cls:a.COUNTER_BASE_CSS,style:"display:none;"});a.container.add(a.counter)},setFullscreenSafeArea:function(){var a=this;a.fireEvent("view:setSafeArea","spinButton",{element:a.container.getEl()})},showCounter:function(){this.counter.el.style.display="block"},hideCounter:function(){this.counter.el.style.display="none"},updateCounter:function(a){this.counter.el.textContent=a},setStyle:function(c){var d=this,a=d.counter,b=c==="LANDSCAPE"?"PORTRAIT":"LANDSCAPE";Mixins.orientation.view.methods.setStyle.call(d,c);a.removeCls(d["COUNTER_"+b+"_CSS"]);a.addCls(d["COUNTER_"+c+"_CSS"])},canInteractWhileHidden:function(){return false},setPosition:function(a){this.updatePositionProperties();Mixins.orientation.view.methods.setPosition.call(this,a||this.currentOrientation)},updatePositionProperties:function(){var b=this,a=b.model.readData("leftHandMode")?"LEFT":"RIGHT";b.LANDSCAPE_POSITION=b.BUTTON_POSITION.LANDSCAPE[a];b.PORTRAIT_POSITION=b.BUTTON_POSITION.PORTRAIT[a]},enable:function(){if(!this.model.hasProperty("hidden")){this.show()}},disable:function(){this.hide()},enableSpinningAnimations:function(){},disableSpinningAnimations:function(){},onPressedRequest:function(){},onReleasedRequest:function(){},moveButtonPosition:function(){}};Interface.Slots.SpinButtonBaseView=Sys.extend(Interface.RoundStartButtonBaseView,Interface.Slots.SpinButtonBaseView,"Interface.Slots.SpinButtonBaseView");Sys.ns("Interface.Slots");Interface.Slots.SpinButtonMobileView={BUTTON_POSITION:{PORTRAIT:{LEFT:{BELOW_GAME:true,TOP:0.4,LEFT:0.5,MIN_TOP:825},RIGHT:{BELOW_GAME:true,TOP:0.4,LEFT:0.5,MIN_TOP:825}},LANDSCAPE:{LEFT:{TOP:0.5,RIGHT:0.82},RIGHT:{TOP:0.5,LEFT:0.9}}},PORTRAIT_POSITION:{BELOW_GAME:true,TOP:0.4,LEFT:0.5,MIN_TOP:825},LANDSCAPE_POSITION:{TOP:0.5,LEFT:0.9},PORTRAIT_SIZE:{VERTICAL_OFFSET:"center",HORIZONTAL_OFFSET:"center",ASPECT_RATIO:1,WIDTH:0.296},LANDSCAPE_SIZE:{VERTICAL_OFFSET:"center",HORIZONTAL_OFFSET:"center",ASPECT_RATIO:1,HEIGHT:0.296},constructor:function(){Interface.Slots.SpinButtonMobileView.superclass.constructor.apply(this,arguments);this.canInteract=false},shouldBeHiddenByUserInput:function(a){return Interface.Slots.SpinButtonMobileView.superclass.shouldBeHiddenByUserInput.apply(this,arguments)&&Environment.orientation()==="LANDSCAPE"},moveButtonPosition:function(b){var c=this,a;if(Sys.isDefined(b)){if(Sys.isDefined(b.orientation)){a=b.orientation.toLowerCase()==="portrait"?"PORTRAIT":"LANDSCAPE";if(Sys.isDefined(b.vertical)){c.BUTTON_POSITION[a]["LEFT"]["TOP"]=c.BUTTON_POSITION[a]["LEFT"]["TOP"]+b.vertical;c.BUTTON_POSITION[a]["RIGHT"]["TOP"]=c.BUTTON_POSITION[a]["RIGHT"]["TOP"]+b.vertical}if(Sys.isDefined(b.horizontal)){c.BUTTON_POSITION[a]["LEFT"]["RIGHT"]=c.BUTTON_POSITION[a]["LEFT"]["RIGHT"]+(-1*b.horizontal);c.BUTTON_POSITION[a]["RIGHT"]["LEFT"]=c.BUTTON_POSITION[a]["RIGHT"]["LEFT"]+b.horizontal}}c.setPosition()}},setStyle:function(){var a=this;Interface.Slots.SpinButtonMobileView.superclass.setStyle.apply(a,arguments);if(a.model.hasProperty("hidden")){a.hide()}else{a.show()}},show:function(a){this.container.el.style.opacity=1;Interface.Slots.SpinButtonMobileView.superclass.show.call(this,a)},hide:function(a){var b=this;if(Environment.orientation()==="PORTRAIT"){b.container.el.style.opacity="0.5";b.container.el.style.display="block";b.canInteract=true}else{b.canInteract=false;b.container.el.style.opacity=1;Interface.Slots.SpinButtonMobileView.superclass.hide.call(b,a)}},disable:function(){var a=this;if(a.model.hasProperty("hidden")&&a.model.readData("currentGameMode")==="BASIC"){a.hide()}else{if(a.model.readData("currentGameMode")!=="BASIC"){a.fireEvent("view:show","globalRequest");a.fireEvent("view:enable","notInBasicGame");a.fireEvent("view:enable","freespinSplash")}}},disableRequested:function(){this.disable()},hideRequested:function(b){var a=this;if(a.model.readData("currentGameMode")==="BASIC"){a.fireEvent("view:hide",b)}else{if(a.model.readData("currentGameMode")!=="BASIC"){a.fireEvent("view:show","globalRequest");a.fireEvent("view:enable","notInBasicGame");a.fireEvent("view:enable","freespinSplash")}}},hidden:function(){var a=Environment.orientation()==="PORTRAIT";return this.container.el.style.display==="none"||(a&&this.container.el.style.opacity==="0.5")},canInteractWhileHidden:function(){return this.canInteract}};Interface.Slots.SpinButtonMobileView=Sys.extend(Interface.Slots.SpinButtonBaseView,Interface.Slots.SpinButtonMobileView,"Interface.Slots.SpinButtonMobileView");Sys.ns("Interface.Slots");Interface.Slots.SpinButtonTabletView={BUTTON_POSITION:{PORTRAIT:{LEFT:{TOP:0.5,RIGHT:0.82},RIGHT:{TOP:0.5,LEFT:0.9}},LANDSCAPE:{LEFT:{TOP:0.5,RIGHT:0.82},RIGHT:{TOP:0.5,LEFT:0.9}}},PORTRAIT_POSITION:{TOP:0.5,LEFT:0.9},LANDSCAPE_POSITION:{TOP:0.5,LEFT:0.9},PORTRAIT_SIZE:{VERTICAL_OFFSET:"center",HORIZONTAL_OFFSET:"center",ASPECT_RATIO:1,HEIGHT:0.296},LANDSCAPE_SIZE:{VERTICAL_OFFSET:"center",HORIZONTAL_OFFSET:"center",ASPECT_RATIO:1,HEIGHT:0.222},constructor:function(){Interface.Slots.SpinButtonTabletView.superclass.constructor.apply(this,arguments)},disable:function(){var a=this;if(a.model.hasProperty("hidden")&&a.model.readData("currentGameMode")==="BASIC"){a.hide()}else{if(a.model.readData("currentGameMode")!=="BASIC"){a.fireEvent("view:show","globalRequest");a.fireEvent("view:enable","notInBasicGame");a.fireEvent("view:enable","freespinSplash")}}},disableRequested:function(){this.disable()},hideRequested:function(b){var a=this;if(a.model.readData("currentGameMode")==="BASIC"){a.fireEvent("view:hide",b)}else{if(a.model.readData("currentGameMode")!=="BASIC"){a.fireEvent("view:show","globalRequest");a.fireEvent("view:enable","notInBasicGame");a.fireEvent("view:enable","freespinSplash")}}}};Interface.Slots.SpinButtonTabletView=Sys.extend(Interface.Slots.SpinButtonBaseView,Interface.Slots.SpinButtonTabletView,"Interface.Slots.SpinButtonTabletView");Sys.ns("Interface.Slots");Interface.Slots.SpinButtonDesktopView={SOUND_UP:"buttonUp",SOUND_DOWN:"buttonDown",SOUND_HOVER:"buttonHover",IMAGE_UP:"spinButtonIdle",IMAGE_DOWN:"spinButtonDown",IMAGE_OVER:"spinButtonOver",IMAGE_DISABLED:"spinButtonDisabled",BUTTON_POSITION:{x:589,y:597,width:103,height:105,centerX:640,centerY:649,radius:51},constructor:function(){var a=this;Interface.Slots.SpinButtonDesktopView.superclass.constructor.apply(a,arguments);a.pressed=false;a.isHighlighted=false;a.permanentHighlight=false},initAnimations:function(){var c=this,b=new Animation.List({}),a=new Animation.Item({top:c.BUTTON_POSITION.y,left:c.BUTTON_POSITION.x,width:c.BUTTON_POSITION.width,height:c.BUTTON_POSITION.height,depth:c.getButtonDepth(),image:c.IMAGE_UP});b.add(a);Game.stage.view.addToRenderLoop(b);c.buttonList=b;c.buttonItem=a},getButtonDepth:function(){return 40},beforeLoaderClose:function(){this.fireEvent("view:addProperty","visibleDuringRound",this.MODULE_NAME)},setUpDOMStructure:function(){},press:function(){var a=this;a.fireEvent("view:playSound",a.SOUND_DOWN);a.fireEvent("view:notify","notify:spinButton.down");a.buttonItem.prop.image=a.IMAGE_DOWN},release:function(){this.buttonItem.prop.image=this.isHighlighted?this.IMAGE_OVER:this.IMAGE_UP},enable:function(){this.playButtonSpecialEffects();this.buttonItem.prop.image=this.isHighlighted?this.IMAGE_OVER:this.IMAGE_UP},disable:function(){this.removeHighlight();this.stopButtonSpecialEffects();this.buttonItem.prop.image=this.IMAGE_DISABLED},disableRequested:function(a){this.fireEvent("view:disable",a)},userInputStart:function(b){var a=this.isCollision(b)&&!this.pressed;if(a){this.press()}this.model.storeData("wasInitialInputTarget",a)},userInputMove:function(a){if(this.model.readData("wasInitialInputTarget")){this.toggleHighlight(a,true)}},userInputHover:function(a){if(!this.pressed){this.toggleHighlight(a)}},userInputEnd:function(c){var b=this,a;if(b.model.readData("wasInitialInputTarget")){a=b.isCollision(c);b.release(a);if(a){if(!b.model.readData("noStopOnSpin")){b.model.storeData("noStopOnSpin",true)}b.fireEvent("view:clicked")}}b.model.storeData("wasInitialInputTarget",false)},enableSpinningAnimations:function(){this.addHighlight(false,true);this.permanentHighlight=true},disableSpinningAnimations:function(){this.permanentHighlight=false;if(!this.isHoveredOver){this.removeHighlight()}},shouldBeHiddenByUserInput:function(){},hide:function(){var a=this;if(a.model.hasProperty("hidden")||!a.model.hasProperty("visibleDuringRound")){a.buttonList.stop();a.fireEvent("view:hidden")}},hidden:function(){},show:function(){this.buttonList.play();this.fireEvent("view:shown")},setAppearance:function(a){},canInteractWhileHidden:function(){return false},showCounter:function(){},updateCounter:function(){},hideCounter:function(){},onPressedRequest:function(){this.pressed=true;this.press()},onReleasedRequest:function(){this.pressed=false;this.release(true);this.fireEvent("view:clicked")},toggleHighlight:function(c,b){var a=this;if(a.isCollision(c)){if(!a.isHoveredOver){a.fireEvent("view:playSound",a.SOUND_HOVER);a.fireEvent("view:notify","notify:spinButton.hover")}a.isHoveredOver=true;a.addHighlight(b)}else{if(a.isHoveredOver){a.fireEvent("view:playSound",a.SOUND_UP);a.fireEvent("view:notify","notify:spinButton.up")}a.isHoveredOver=false;a.removeHighlight(b)}},isCollision:function(h){var e=this,c=Sys.UserInputUtils.getCoordinatesRelativeToElement(h,Game.stage.getGameContainer()),f=Environment.getWindowToVirtualScale(3),a=e.BUTTON_POSITION,d=Math.abs((c.x*f)-a.centerX),b=Math.abs((c.y*f)-a.centerY),g=Math.sqrt((d*d)+(b*b));return(g<=a.radius)},addHighlight:function(c,a){var b=this;if((!b.isHighlighted||a)&&!b.permanentHighlight){b.isHighlighted=true;b.buttonItem.prop.image=b.IMAGE_OVER;if(c){b.press()}}},removeHighlight:function(b){var a=this;if(a.isHighlighted&&!a.permanentHighlight){a.isHighlighted=false;a.buttonItem.prop.image=this.IMAGE_UP;if(b){a.playButtonSpecialEffects()}}},stopButtonSpecialEffects:function(){},playButtonSpecialEffects:function(){},setFullscreenSafeArea:function(){}};Interface.Slots.SpinButtonDesktopView=Sys.extend(Interface.RoundStartButtonBaseView,Interface.Slots.SpinButtonDesktopView,"Interface.Slots.SpinButtonDesktopView");Sys.ns("Interface.Slots");Interface.Slots.MaxBetButton={constructor:function(){Interface.Slots.MaxBetButton.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation","trigger"]},getDefaultMVCClasses:function(){return{model:Interface.Slots.MaxBetButtonModel,controller:Interface.Slots.MaxBetButtonController,view:Interface.Slots.MaxBetButtonBaseView}}};Interface.Slots.MaxBetButton=Sys.extend(Core.Module,Interface.Slots.MaxBetButton,"Interface.Slots.MaxBetButton");Sys.ns("Interface.Slots");Interface.Slots.MaxBetButtonModel={constructor:function(){Interface.Slots.MaxBetButtonModel.superclass.constructor.apply(this,arguments)},setupData:function(){var d=Resources.readData("gameServerInitResponseObject").betlevel.all,a=Resources.readData("config"),b=Object.keys(a.winSituationsDisplay.betlines.numbers.configurations),e=a.winSituationsDisplay.winSituationMinimumDisplayTime,c=0;Interface.Slots.MaxBetButtonModel.superclass.setupData.apply(this,arguments);Sys.each(d,function(f){c=Math.max(f,c)});this.storeData("maxBetLevel",c);this.storeData("betlines",b);this.storeData("winSituationMinimumDisplayTime",e)}};Interface.Slots.MaxBetButtonModel=Sys.extend(Core.Model,Interface.Slots.MaxBetButtonModel,"Interface.Slots.MaxBetButtonModel");Sys.ns("Interface.Slots");Interface.Slots.MaxBetButtonController={ROUND_START_EVENT:"request:spin.startNewRound",constructor:function(){Interface.Slots.MaxBetButtonController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.leavingBeforeLoaderCloseState":a.disable.bind(a,"notInIdleState"),"notify:stateHandler.leavingIdleState":a.onLeavingIdleState,"notify:stateHandler.enteringIdleState":a.enable.bind(a,"notInIdleState"),"notify:gameModeChanged":a.onGameModeChanged,"view:clicked":a.onClick,"request:enableBasicGamePanel":a.enable,"request:disableBasicGamePanel":a.disable,"request:maxBetButton.enable":a.enable,"request:maxBetButton.disable":a.disable})},setupTriggers:function(){Services.trigger.registerTrigger("notify:maxBetButton.startedRound",this,"When the max bet button is clicked and started a round.")},onClick:function(){var d=this,b=Services.settingsManager.getSetting("betLevel"),c=d.model.readData("maxBetLevel"),a;if(b<c){d.fireEvent("request:settingsManager.storeData","betLevel",c);a=d.model.readData("betlines");d.fireEvent("request:winSituations.showDisplayBetline",a,"maxBetButton");setTimeout(d.fireEvent.bind(d,"request:winSituations.hideDisplayBetline","maxBetButton"),d.model.readData("winSituationMinimumDisplayTime"))}else{d.startRound()}},onGameModeChanged:function(a){if(a==="BASIC"){this.view.show("gameModeNotBasic")}else{this.view.hide("gameModeNotBasic")}},onLeavingIdleState:function(){var a=this;a.disable("notInIdleState");a.fireEvent("request:winSituations.hideDisplayBetline","maxBetButton")},startRound:function(){var a=this;a.fireEvent("request:audioPlayer.play",{name:"spinButtonClick"});a.fireEvent(a.ROUND_START_EVENT);a.fireEvent("notify:maxBetButton.startedRound")},enable:function(a){this.view.enable(a)},disable:function(a){this.view.disable(a)}};Interface.Slots.MaxBetButtonController=Sys.extend(Core.Controller,Interface.Slots.MaxBetButtonController,"Interface.Slots.MaxBetButtonController");Sys.ns("Interface.Slots");Interface.Slots.MaxBetButtonBaseView={KEYPAD_BUTTON_CONFIG:{dimensions:{x:700,y:613,width:143,height:72},buttonImages:{up:"maxBetButtonUp",down:"maxBetButtonDown",hover:"maxBetButtonOver",disabled:"maxBetButtonDisabled"},buttonLabel:{width:133,height:67,text:Language.Keys.btn_maxbet,breakOn:"<br>",font:"24px NetentStandardUI",lineHeight:24,color:"#000000",alignment:"center"}},constructor:function(){Interface.Slots.MaxBetButtonBaseView.superclass.constructor.apply(this,arguments)},show:function(a){this.keypadButton.show(a)},hide:function(a){this.keypadButton.hide(a)},enable:function(a){this.keypadButton.enable(a)},disable:function(a){this.keypadButton.disable(a)},onButtonClick:function(){this.fireEvent("view:clicked")},initAnimations:function(){this.setUpKeypadButton()},setUpKeypadButton:function(){var b=this,a=Sys.applyProperties({clickCallback:b.onButtonClick.bind(b)},b.KEYPAD_BUTTON_CONFIG);a.buttonLabel.depth=Layering.Game.Slots.Keypad.maxBet.label;if(Sys.isDefined(a.buttonLayoutParameters)){a.buttonLayoutParameters.depth=Layering.Game.Slots.Keypad.maxBet.button}else{a.dimensions.depth=Layering.Game.Slots.Keypad.maxBet.button}b.keypadButton=new Interface.utils.CanvasButton(a)},shouldBeHiddenByUserInput:function(){return false}};Interface.Slots.MaxBetButtonBaseView=Sys.extend(Core.View,Interface.Slots.MaxBetButtonBaseView,"Interface.Slots.MaxBetButtonBaseView");Sys.ns("Core.Slots");Core.Slots.SpinBaseController={constructor:function(){Core.Slots.SpinBaseController.superclass.constructor.apply(this,arguments);this.stopper=0},setupEvents:function(){var b=this,c={"request:spin.child.storeServerResponse":b.handleServerResponse,"request:spin.child.wantStartSpin":b.startSpin,"request:spin.child.wantStopSpin":b.stopSpin,"request:spin.child.setSymbols":b.setSymbols,"request:spin.child.revertSpin":b.revertSpin},a="notify:stateHandler.entering"+b.MODULE_NAME+"RestoreState";c[a]=b.onRestore;b.on(c)},handleServerResponse:function(b){var a=this;a.model.storeServerResponse(b);if(b.clientaction==="init"){a.model.initData();if(a.model.readData("active")){a.fireEvent("request:spin.activateInitReelset","basic",a.model.readData("defaultScene"))}}},onRestore:function(){this.requestRestoreStateDialog();this.startSpin()},requestRestoreStateDialog:function(){var a=this;a.fireEvent("request:dialogWindow.showDialog",{title:Services.languageManager.getText(Language.Keys.restoredGameHeader),text:Services.languageManager.getText(Language.Keys.continuePlaying),buttons:[{scope:a,text:Services.languageManager.getText(Language.Keys.btn_continue),action:function(){a.fireEvent("notify:"+a.MODULE_NAME+"RestoreStateDialog.closed")}}]})},activateReelset:function(){var a=this,c=a.model.readData("requestedReelset"),b=a.model.readData("defaultScene");a.model.storeData("active",true);a.fireEvent("request:spin.activateReelset",c,b)},startSpin:function(){var b=this,a=b.model,d=a.readData("requestedReelset"),c=a.readData("defaultScene");if(!a.isState("spinning")){b.fireEvent("request:settingsWindow.close");if(a.readData("spinRequested")){a.storeData("active",true);a.setState("spinning");b.fireEvent("request:spin.startSpin",d,c)}else{a.storeData("active",false)}}},stopSpin:function(){var a=this,b=a.model.readData("serverResponse");if(a.model.readData("active")){a.model.setState("stopped");a.fireEvent("request:spin.stopSpin",b.reelInfo,b.nearWinList,b)}},revertSpin:function(){if(this.model.readData("active")){this.model.setState("stopped")}}};Core.Slots.SpinBaseController=Sys.extend(Core.Controller,Core.Slots.SpinBaseController,"Core.Slots.SpinBaseController");Sys.ns("Core.Slots");Core.Slots.SpinBaseModel={DEFAULT_SCENE:"base",constructor:function(){Core.Slots.SpinBaseModel.superclass.constructor.apply(this,arguments)},setupData:function(){Core.Slots.SpinBaseModel.superclass.setupData.apply(this,arguments);this.storeData("defaultScene",this.DEFAULT_SCENE)},storeServerResponse:function(b){var a=this;a.storeData("serverResponse",b)},initData:function(){var b=this,a=Resources.readData("config");b.storeData("layeringConfig",a.layering)}};Core.Slots.SpinBaseModel=Sys.extend(Core.Model,Core.Slots.SpinBaseModel,"Core.Slots.SpinBaseModel");Sys.ns("Core");Core.Slots.SpinTypeBasic={constructor:function(){Core.Slots.SpinTypeBasic.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={stopped:{queue:[function(c){if(a.readData("spinRequested")){c.stateHandler.pushState(c.states.idle)}}]}};return b},getDefaultMVCClasses:function(){return{model:Core.Slots.SpinTypeBasicModel,controller:Core.Slots.SpinBaseController}}};Core.Slots.SpinTypeBasic=Sys.extend(Core.Module,Core.Slots.SpinTypeBasic,"Core.Slots.SpinTypeBasic");Sys.ns("Core.Slots");Core.Slots.SpinTypeBasicModel={constructor:function(){Core.Slots.SpinTypeBasicModel.superclass.constructor.apply(this,arguments)},storeServerResponse:function(c){var b=this,a;b.storeData("serverResponse",c);if(c.nextaction==="spin"){b.storeData("spinRequested",true);if(c.next){a=c.next.rs}else{a="basic"}b.storeData("requestedReelset",a)}else{b.storeData("spinRequested",false)}},initData:function(){var d=this,b=Resources.readData("config"),c=Resources.readData("gameServerInitResponse"),e=false,a=false;Core.Slots.SpinTypeBasicModel.superclass.initData.apply(d,arguments);if(c.nextaction==="spin"){e=true;a=true}d.storeData("active",e);d.storeData("spinRequested",a)}};Core.Slots.SpinTypeBasicModel=Sys.extend(Core.Slots.SpinBaseModel,Core.Slots.SpinTypeBasicModel,"Core.Slots.SpinTypeBasicModel");Sys.ns("Core");Core.Slots.SpinTypeRespin={constructor:function(){Core.Slots.SpinTypeRespin.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={respinRestore:{state:{name:this.MODULE_NAME+"Restore",execute:function(c){},waitEvents:{}}},stopped:{queue:[function(c){if(a.readData("spinRequested")){c.stateHandler.pushState(c.states.stopped);c.stateHandler.pushState(c.states.stopping);c.stateHandler.pushState(c.states.beforeStopping);c.stateHandler.pushState(c.states.spinning)}}]},beforeLoaderClose:{queue:[function(c){if(a.readData("spinRequested")){c.stateHandler.pushState(c.states.stopped);c.stateHandler.pushState(c.states.stopping);c.stateHandler.pushState(c.states.beforeStopping);c.stateHandler.pushState(c.states.spinning);if(a.readData("basicRestoreState")){c.stateHandler.pushState(c.states.respinRestore)}}}]}};b.respinRestore.state.waitEvents["notify:"+this.MODULE_NAME+"RestoreStateDialog.closed"]=false;return b},getDefaultMVCClasses:function(){return{model:Core.Slots.SpinTypeRespinModel,controller:Core.Slots.SpinBaseController}}};Core.Slots.SpinTypeRespin=Sys.extend(Core.Module,Core.Slots.SpinTypeRespin,"Core.Slots.SpinTypeRespin");Sys.ns("Core.Slots");Core.Slots.SpinTypeRespinModel={constructor:function(){Core.Slots.SpinTypeRespinModel.superclass.constructor.apply(this,arguments)},storeServerResponse:function(c){var b=this,a;b.storeData("serverResponse",c);if(c.nextaction==="respin"||c.nextaction==="drop"){b.storeData("spinRequested",true);b.storeData("basicRestoreState",(c.currentGameState==="basic")&&(c.restore===true));if(c.next){a=c.next.rs}else{a="respin"}b.storeData("requestedReelset",a)}else{b.storeData("spinRequested",false)}},initData:function(){this.storeData("active",Resources.readData("gameServerInitResponseObject").nextaction==="respin");Core.Slots.SpinTypeRespinModel.superclass.initData.apply(this,arguments)}};Core.Slots.SpinTypeRespinModel=Sys.extend(Core.Slots.SpinBaseModel,Core.Slots.SpinTypeRespinModel,"Core.Slots.SpinTypeRespinModel");Sys.ns("Core.Slots");Core.Slots.SpinTypeFreespin={constructor:function(){Core.Slots.SpinTypeFreespin.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={stopped:{queue:[function(c){if(a.readData("spinRequested")){c.stateHandler.pushState(c.states.stopped);c.stateHandler.pushState(c.states.stopping);c.stateHandler.pushState(c.states.beforeStopping);c.stateHandler.pushState(c.states.spinning)}}]},beforeLoaderClose:{queue:[function(c){if(a.readData("spinRequested")){c.stateHandler.pushState(c.states.stopped);c.stateHandler.pushState(c.states.stopping);c.stateHandler.pushState(c.states.beforeStopping);c.stateHandler.pushState(c.states.spinning)}}]}};return b},getDefaultMVCClasses:function(){return{model:Core.Slots.SpinTypeFreespinModel,controller:Core.Slots.SpinBaseController}}};Core.Slots.SpinTypeFreespin=Sys.extend(Core.Module,Core.Slots.SpinTypeFreespin,"Core.Slots.SpinTypeFreespin");Sys.ns("Core.Slots");Core.Slots.SpinTypeFreespinModel={DEFAULT_NEXT_REELSET:"freespin",constructor:function(){Core.Slots.SpinTypeFreespinModel.superclass.constructor.apply(this,arguments)},storeServerResponse:function(e){var c=this,a,d=e.freespins,b;c.storeData("serverResponse",e);if(c.isNextFreespin(e)){c.storeData("spinRequested",true);if(e.clientaction==="init"){b=(d.left===d.initial&&d.left===d.total);c.storeData("showRestoreStateDialog",!b)}if(e.next){a=e.next.rs}else{a=c.DEFAULT_NEXT_REELSET}Services.storage.storeData("freespin.freespinsLeft",d.left);c.storeData("requestedReelset",a)}else{if(Sys.isObj(d)&&Sys.isNumber(d.left)){Services.storage.storeData("freespin.freespinsLeft",d.left)}else{Services.storage.storeData("freespin.freespinsLeft",null)}c.storeData("spinRequested",false)}},isNextFreespin:function(a){return a.nextaction==="freespin"},initData:function(){var d=this,b=Resources.readData("config"),c=Resources.readData("gameServerInitResponse"),e=false,a=false;Core.Slots.SpinTypeFreespinModel.superclass.initData.apply(d,arguments);if(d.isNextFreespin(c)){e=true;a=true}d.storeData("active",e);d.storeData("spinRequested",a);Services.storage.storeData("freespin.freespinsLeft",null)}};Core.Slots.SpinTypeFreespinModel=Sys.extend(Core.Slots.SpinBaseModel,Core.Slots.SpinTypeFreespinModel,"Core.Slots.SpinTypeFreespinModel");Sys.ns("Core.Slots");Core.Slots.StandardWin={constructor:function(){Core.Slots.StandardWin.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={standardWinPresentation:{state:{name:"StandardWinPresentation",execute:function(){},waitEvents:{"notify:standardWin.presentationComplete":false}}},noWinPresentation:{state:{name:"NoWinPresentation",execute:function(){},waitEvents:{"notify:standardWin.presentationComplete":false}}},stopped:{queue:[function(c){if(a.readData("isStandardWin")){c.stateHandler.pushState(c.states.standardWinPresentation)}else{if(a.readData("isNoWin")){c.stateHandler.pushState(c.states.noWinPresentation)}}}]}};return b},getMixinDependencies:function(){return["serverResponse","userInput","waitSequence","trigger"]},getDefaultMVCClasses:function(){return{model:Core.Slots.StandardWinModel,view:Core.View,controller:Core.Slots.StandardWinController}}};Core.Slots.StandardWin=Sys.extend(Core.Module,Core.Slots.StandardWin,"Core.Slots.StandardWin");Sys.ns("Core.Slots");Core.Slots.StandardWinController={constructor:function(){Core.Slots.StandardWinController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringStandardWinPresentationState":a.startPresentation,"notify:stateHandler.enteringNoWinPresentationState":a.startNoWinPresentation,"notify:winBanner.countUpComplete":a.onShowingTotal,"notify:coinsField.countUpComplete":a.onShowingTotal,"notify:spinButton.clicked":a.handleUserInput,"notify:spinButton.clickedWhileHidden":a.handleUserInput,"request:abortPresentation":a.handleUserInput,"notify:winSituationsDisplay.showingAllWins":a.waitForWinSituationsDisplay})},registerTriggers:function(){Services.trigger.registerTrigger("notify:standardWin.countupAborted",this,"When the countup is aborted.");Services.trigger.registerTrigger("notify:standardWin.presentationComplete",this,"When the standard win presentation has completed.");Services.trigger.registerTrigger("notify:standardWin.startPresentation",this,"When the win presentation starts.")},startPresentation:function(){var b=this,a=b.model.readData("winClip"),c=b.model.readData("countUpDuration"),d=b.model.readData("totalWinDisplayDuration");b.fireEvent("request:settingsWindow.close");b.startListeningToUserInput();b.model.setState("countingUp");b.initializeWaitSequence("request:winSituationsDisplay.showAllWins",{showDuration:c+d,"standardWin:countUpDuration":c,"standardWin:showTotalDuration":d});if(b.model.readData("countUpDisplay")==="winBanner"){b.fireEvent("request:winBanner.animate",c)}else{b.fireEvent("request:coinsField.countUp",c)}if(a){b.fireEvent("request:audioPlayer.play",{name:a,id:"winClip"})}b.fireEvent("notify:standardWin.startPresentation",a)},startNoWinPresentation:function(){var b=this,a=b.model.readData("noWinDisplayDuration");b.fireEvent("request:coinsField.showWin");b.fireEvent("request:cashField.showWin");b.model.storeData("inNoWinPresentation",true);b.noWinTimeout=setTimeout(b.abortNoWinPresentation.bind(b),a)},abortNoWinPresentation:function(){var a=this;if(a.model.readData("inNoWinPresentation")){clearTimeout(a.noWinTimeout);a.endPresentation();a.model.storeData("inNoWinPresentation",false)}},onUserInputStart:function(a){if(Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(),a)){this.handleUserInput()}},handleUserInput:function(){var a=this;if(a.model.readData("inNoWinPresentation")){a.abortNoWinPresentation()}else{if(a.model.isState("countingUp")){if(a.model.readData("countUpDisplay")==="winBanner"){a.fireEvent("request:winBanner.showTotal",{showUntilStopped:true})}else{a.fireEvent("request:coinsField.showWin")}a.fireEvent("request:audioPlayer.stop","winClip");a.onShowingTotal();a.fireEvent("notify:standardWin.countupAborted")}else{if(a.model.isState("showingTotal")){a.endPresentation(true)}}}},onShowingTotal:function(){var a=this;if(a.model.isState("countingUp")){a.model.setState("showingTotal");a.fireEvent("notify:standardWin.showingWinTotal");a.fireEvent("request:coinsField.showWin");a.fireEvent("request:cashField.showWin");if(a.eventsToWaitFor.indexOf("notify:winSituationsDisplay.finishedShowingAllWins")===-1){a.showWinTimeout=setTimeout(a.endPresentation.bind(a,false),a.model.readData("totalWinDisplayDuration"))}}},endPresentation:function(b){var a=this;if(!a.model.isState("showingTotal")&&!a.model.readData("inNoWinPresentation")){return}a.stopListeningToUserInput();a.model.setState("complete");clearTimeout(a.showWinTimeout);a.fireEvent("request:winSituationsDisplay.abort");a.fireEvent("request:audioPlayer.stop","winClip");if(a.model.readData("countUpDisplay")==="winBanner"){a.fireEvent("request:winBanner.hide")}if(a.model.shouldToggleWins()){a.fireEvent("request:winSituationsDisplay.toggleWins")}a.fireEvent("notify:standardWin.presentationComplete",b)},waitForWinSituationsDisplay:function(){this.onWaitRequested("notify:winSituationsDisplay.finishedShowingAllWins")},onWaitIsComplete:function(){this.endPresentation(false)}};Core.Slots.StandardWinController=Sys.extend(Core.Controller,Core.Slots.StandardWinController,"Core.Slots.StandardWinController");Sys.ns("Core.Slots");Core.Slots.StandardWinModel={STANDARD_WIN_TYPES:["smallWin","mediumWin","largeWin"],COUNT_UP_DURATIONS:{smallWin:1000,mediumWin:2000,largeWin:3000},NO_WIN_DISPLAY_DURATION:500,NO_WIN_DISPLAY_DESKTOP_DURATION:0,TOTAL_WIN_DISPLAY_DURATION:3000,constructor:function(){Core.Slots.StandardWinModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=this;a.storeData("inFreeSpins",false);a.storeData("noWinDisplayDuration",a.NO_WIN_DISPLAY_DURATION);a.storeData("totalWinDisplayDuration",a.TOTAL_WIN_DISPLAY_DURATION);a.setupDesktopSpecificData()},processServerResponse:function(b){var f=this,g=b.currentGameState==="freespin"?"coinsField":"winBanner",d=b.currentGameState==="freespin"||b.nextaction==="freespin";if(Sys.isDefined(b.wins)){var c=b.wins.winType,e=f.STANDARD_WIN_TYPES.contains(c),a=!Sys.isDefined(c);f.storeData("isStandardWin",e);f.storeData("isNoWin",a);f.storeData("countUpDuration",f.COUNT_UP_DURATIONS[c]);f.storeWinSound(c)}f.storeData("countUpDisplay",g);f.storeData("togglePreventedByFreeSpins",d)},storeWinSound:function(a){this.storeData("winClip",a)},shouldToggleWins:function(){var a=Services.settingsManager.getSetting("autoPlayNrSpins");return(!Sys.isDefined(a)||a===0)&&!this.readData("togglePreventedByFreeSpins")},setupDesktopSpecificData:function(){if(Platform.isDesktopDevice){this.storeData("noWinDisplayDuration",this.NO_WIN_DISPLAY_DESKTOP_DURATION)}}};Core.Slots.StandardWinModel=Sys.extend(Core.Model,Core.Slots.StandardWinModel,"Core.Slots.StandardWinModel");Sys.ns("Core");Core.AbstractCountUp={constructor:function(){Core.AbstractCountUp.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.CountUpModel,view:Core.AbstractCountUpView,controller:Core.AbstractCountUpController}}};Core.AbstractCountUp=Sys.extend(Core.CountUp,Core.AbstractCountUp,"Core.AbstractCountUp");Sys.ns("Core");Core.AbstractCountUpView={constructor:function(){Core.AbstractCountUpView.superclass.constructor.apply(this,arguments)},COUNT_UP_EASING_TYPE:"ease-out",SHOW_TOTAL_DURATION:1000,countUpCallback:function(a){},setCountUpCallback:function(a){this.countUpCallback=a},createCountUpItem:function(){var a=this;return new Animation.CanvasAnimationItem({top:0,left:0,width:0,height:0,depth:a.COUNT_UP_DEPTH,executeBefore:function(){var f=this,d=f.value,c,e,b;if(a.model.readData("lastValue")!==d){a.countUpCallback(d);a.model.storeData("lastValue",d);if(Sys.isDefined(f.fireOnValue)){c=f.fireOnValue.length;for(b=-1;++b<c;){e=f.fireOnValue[b];if(!e.fired&&d>=e.value){e.scope.fireEvent(e.event,e.argument);e.fired=true}}}}},operations:{}})}};Core.AbstractCountUpView=Sys.extend(Core.CountUpView,Core.AbstractCountUpView,"Core.AbstractCountUpView");Sys.ns("Core");Core.AbstractCountUpController={constructor:function(){Core.AbstractCountUpController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this,b={};Core.AbstractCountUpController.superclass.setupEvents.apply(a,arguments);b["request:"+a.MODULE_NAME+".setCallback"]=a.view.setCountUpCallback.bind(a.view);a.on(b)}};Core.AbstractCountUpController=Sys.extend(Core.CountUpController,Core.AbstractCountUpController,"Core.AbstractCountUpController");Sys.ns("Game");Game.AmbienceManager={constructor:function(){Game.AmbienceManager.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Game.AmbienceManagerModel,controller:Game.AmbienceManagerController}}};Game.AmbienceManager=Sys.extend(Core.Module,Game.AmbienceManager,"Game.AmbienceManager");Sys.ns("Game");Game.AmbienceManagerModel={constructor:function(){Game.AmbienceManagerModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=this;a.storeData("activeAmbience",[{name:"ambienceGeneral",id:"ambienceGeneral",loop:true}]);Services.storage.storeData("AmbienceManager.playing",false)},getActiveAmbience:function(){return this.readData("activeAmbience")},setActiveAmbience:function(a){this.storeData("activeAmbience",a)}};Game.AmbienceManagerModel=Sys.extend(Core.Model,Game.AmbienceManagerModel,"Game.AmbienceManagerModel");Sys.ns("Game");Game.AmbienceManagerController={constructor:function(){Game.AmbienceManagerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:audioPlayer.soundLoaded":a.changeAmbienceEnableState.bind(a,true),"request:ambienceManager.ambienceEnableState":a.changeAmbienceEnableState,"request:ambienceManager.ambienceChangeActive":a.setActiveAmbience,"request:ambienceManager.ambiencePauseSwitch":a.changePauseSwitch,"request:ambienceManager.ambienceStopActive":a.stopAmbience,"notify:stateHandler.leavingBeforeLoaderCloseState":a.onBeforeLoaderClose})},onBeforeLoaderClose:function(){if(!this.model.isState("ambienceOn")){this.changeAmbienceEnableState(false)}this.changePauseSwitch(false)},changeAmbienceEnableState:function(a){var b=this;if(a){if(!b.model.isState("ambienceOn")){b.model.setState("ambienceOn");b.playActiveAmbience()}}else{b.model.setState("ambienceOff");b.stopAmbience()}},changePauseSwitch:function(a){var b=this;if(a){b.model.storeData("paused",true);if(b.model.isState("ambienceOn")){b.stopAmbience()}}else{if(b.model.readData("paused")){b.model.storeData("paused",false);if(b.model.isState("ambienceOn")){b.playActiveAmbience()}}}},playAmbience:function(a){var b=this;if(b.model.isState("ambienceOn")){if(!b.model.readData("paused")){Sys.each(a,function(c){b.dispatchPlaySoundRequest(c)})}}else{b.model.setActiveAmbience(a)}},playActiveAmbience:function(){this.playAmbience(this.model.getActiveAmbience())},stopAmbience:function(){var b=this,a=b.model.getActiveAmbience();if(b.model.isState("ambienceOn")){Sys.each(a,function(c){b.dispatchStopSoundRequest(c)})}},setActiveAmbience:function(c){var b=this,a;if(!Sys.isArray(c)){a=[{name:c.name,id:c.id,loop:c.loop,buffer:c.buffer,syncWithId:c.syncWithId,fadeIn:c.fadeIn,fadeOut:c.fadeOut}]}else{a=c}b.playAmbience(a);b.stopAmbience();b.model.setActiveAmbience(a)},dispatchPlaySoundRequest:function(a){if(this.model.isState("ambienceOn")){this.fireEvent("request:audioPlayer.play",a)}},dispatchStopSoundRequest:function(a){if(this.model.isState("ambienceOn")){this.fireEvent("request:audioPlayer.stop",a.id)}}};Game.AmbienceManagerController=Sys.extend(Core.Controller,Game.AmbienceManagerController,"Game.AmbienceManagerController");Sys.ns("Game.Slots");Game.Slots.BigWin={constructor:function(){Game.Slots.BigWin.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model;return{bigWin:{state:{name:"BigWin",execute:function(b){},waitEvents:{"notify:bigWin.presentationFinished":false}}},stopped:{queue:[function(b){if(a.isState("animationRequested")){b.stateHandler.pushState(b.states.bigWin)}}]}}},getMixinDependencies:function(){return["serverResponse","animation","userInput","waitSequence","trigger"]},getDefaultMVCClasses:function(){return{model:Game.Slots.BigWinModel,controller:Game.Slots.BigWinController,view:Game.Slots.BigWinView}}};Game.Slots.BigWin=Sys.extend(Core.Module,Game.Slots.BigWin,"Game.Slots.BigWin");Sys.ns("Game.Slots");Game.Slots.BigWinController={constructor:function(){Game.Slots.BigWinController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"view:startCountUp":a.onConutUpStart,"view:showTotalInCountUp":a.onShowTotalRequest,"view:hideCountUp":a.fireEvent.bind(a,"request:bigWinCountUp.stop"),"view:showWinText":a.showWinText,"view:playAudio":a.fireEvent.bind(a,"request:audioPlayer.play"),"view:stopAudio":a.fireEvent.bind(a,"request:audioPlayer.stop"),"notify:stateHandler.enteringBigWinState":a.show,"notify:bigWinCountUp.countUpComplete":a.finish,"notify:bigWinCountUp.hidden":a.close,"notify:stateHandler.leavingBigWinState":a.toggleWins,"notify:winSituationsDisplay.showingAllWins":a.waitForWinSituationsDisplay,"notify:spinButton.clicked":a.handleUserInput,"notify:spinButton.clickedWhileHidden":a.handleUserInput,"request:abortPresentation":a.handleUserInput})},registerTriggers:function(){Services.trigger.registerTrigger("notify:bigWin.showTotalInCountUp",this,"Show total count up")},onUserInputStart:function(a){if(Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(),a)){this.handleUserInput()}},handleUserInput:function(){var a=this;if(a.model.isState("showing")){a.finish()}else{if(a.model.isState("finished")){a.close()}else{if(a.model.isState("showingAllWins")){a.fireEvent("request:winSituationsDisplay.abort")}}}},show:function(){var a=this;a.fireEvent("request:settingsWindow.close");a.startListeningToUserInput();a.model.setState("showing");a.view.show()},onConutUpStart:function(a){this.fireEvent("request:bigWinCountUp.start",a)},onShowTotalRequest:function(){var a=this;a.fireEvent("notify:bigWin.showTotalInCountUp");a.fireEvent("request:bigWinCountUp.showTotal",{showDuration:a.model.readData("showTotalDuration")});a.fireEvent("request:coinsField.showWin");a.fireEvent("request:cashField.showWin")},showWinText:function(a){this.view.showWinText(a);this.fireEvent("notify:bigWin.showingWinType",a)},finish:function(){var a=this;a.model.setState("finished");a.view.finish()},close:function(){var a=this;a.model.setState("closed");a.view.close();if(a.model.readData("showAllWins")){a.model.setState("showingAllWins");a.initializeWaitSequence("request:winSituationsDisplay.showAllWins",{showDuration:a.model.readData("showAllWinsDuration")})}else{a.onWaitIsComplete()}},waitForWinSituationsDisplay:function(){this.onWaitRequested("notify:winSituationsDisplay.finishedShowingAllWins")},onWaitIsComplete:function(){var a=this;a.stopListeningToUserInput();a.model.storeData("showAllWins",false);a.fireEvent("notify:bigWin.presentationFinished")},toggleWins:function(){if(this.model.shouldToggleWins()){this.fireEvent("request:dimmedSymbols.dimNoWinSymbols");this.fireEvent("request:noWinSymbols.animate");this.fireEvent("request:winSituationsDisplay.toggleWins")}}};Game.Slots.BigWinController=Sys.extend(Core.Controller,Game.Slots.BigWinController,"Game.Slots.BigWinController");Sys.ns("Game.Slots");Game.Slots.BigWinView={TEXT_OPERATIONS:[{fillStyle:"#FFFFFF"},{lineWidth:5,strokeStyle:"#00000",drawType:"stroke"}],FONT:"bold 80px Verdana",TEXT_OFFSET:0,TEXT_TOP:100,TEXT_LEFT:undefined,WIN_TEXTS:{bigWin:Language.Keys.bigWin,megaWin:Language.Keys.megaWin,superMegaWin:Language.Keys.superMegaWin},constructor:function(){Game.Slots.BigWinView.superclass.constructor.apply(this,arguments)},configureTextAnimation:function(a){a.prop.operations.fade=[{time:0,value:0},{time:300,value:1},{time:1300,value:0.5,goTo:1}]},configureSwitchAnimation:function(a){a.prop.operations.scale=[{time:0,value:{scaleX:1,scaleY:1}},{time:200,value:{scaleX:1.5,scaleY:1.5}}];a.prop.operations.fade=[{time:0,value:1},{time:200,value:0}]},configureTextEndingAnimation:function(a){a.prop.operations.fade=[{time:0,value:1},{time:this.model.readData("showTotalDuration"),value:0}]},initAnimations:function(){var a=this,c=new Animation.CanvasAnimationList({}),e={},b,d;a.scaleFactor=a.getScaleFactor();Sys.each(a.model.getSupportedSubTypes(),function(f){d=Services.languageManager.getText(a.WIN_TEXTS[f]);b=a.createWinAnimation(d);e[f]=b;c.add(b);b=a.createSwitchAnimation(d);e[f+"Switch"]=b;c.add(b);b=a.createEndAnimation(d);e[f+"End"]=b;c.add(b)});Game.stage.view.addToRenderLoop(c);c.stop();a.animations=e;a.list=c},getScaleFactor:function(){return Resources.readData("config").mobileResourceToVirtualScale||1},show:function(){var a=this,b=a.model.readData("coinWin"),c=a.model.getWinCountUpDuration();a.doAnimation(0,b,c);a.playAudio("bigWinStart");a.fireEvent("view:playAudio",{name:"bigWinLoop",id:"bigWinLoop",loop:true})},finish:function(){var b=this,a=b.animations[b.model.readData("winType")+"End"],c=b.remainingWinTypes.length-1;b.list.stop();b.fireEvent("view:stopAudio","bigWinLoop");b.list.play(a);if(c>=0){b.fireEvent("view:stopAudio","bigWin");b.playAudio(b.remainingWinTypes[c])}b.playAudio("bigWinEnd");b.playAudio("bigWinLoopEnd");b.fireEvent("view:showTotalInCountUp")},close:function(){this.list.stop();this.fireEvent("view:stopAudio","bigWin");this.fireEvent("view:hideCountUp")},doAnimation:function(e,d,c){var b=this,a={from:e,to:d,duration:c,fireEventsOnValue:[]};b.remainingWinTypes=[];Sys.iterate(b.model.readData("winTypeCoinLimits"),function(f,g){a.fireEventsOnValue.push({value:g,event:"view:showWinText",argument:f,scope:b});if(g<=d){b.remainingWinTypes.push(f)}});b.currentlyShowingWin=undefined;b.fireEvent("view:startCountUp",a)},showWinText:function(c){var e=this,d=e.currentlyShowingWin,a=e.animations[d+"Switch"],b=Sys.isArray(e.animations[c])?e.animations[c]:[e.animations[c]];e.list.stop();if(Sys.isDefined(d)&&Sys.isDefined(a)){a=Sys.isArray(a)?a:[a];b=b.concat(a)}e.currentlyShowingWin=c;e.list.play(b);e.playAudio(c);e.remainingWinTypes.splice(e.remainingWinTypes.indexOf(c),1)},createText:(function(){var a={};return function(c){var b=this;return a[c]||(a[c]=Animation.utils.text.createText(c,b.FONT,b.TEXT_OFFSET,b.TEXT_OPERATIONS))}}()),createSwitchAnimation:function(c){var b=this,a=b.createTextAnimation(c);b.configureSwitchAnimation(a);return a},createEndAnimation:function(c){var b=this,a=b.createTextAnimation(c);b.configureTextEndingAnimation(a);return a},createWinAnimation:function(c){var b=this,a=b.createTextAnimation(c);b.configureTextAnimation(a);return a},createTextAnimation:function(e){var c=this,f=Environment.getStageResolution(),d=c.createText(e),b=d.width,a=d.height;return new Animation.CanvasAnimationItem({width:b,height:a,top:c.TEXT_TOP*c.scaleFactor,left:Sys.isDefined(c.TEXT_LEFT)?c.TEXT_LEFT*c.scaleFactor:(f.width-b)/2,opacity:1,depth:Layering.Game.Slots.BigWin.text,image:d,operations:{},text:e})},playAudio:function(b,a){this.fireEvent("view:playAudio",{name:b,id:"bigWin",loop:a})}};Game.Slots.BigWinView=Sys.extend(Core.View,Game.Slots.BigWinView,"Game.Slots.BigWinView");Sys.ns("Game.Slots");Game.Slots.BigWinModel={SUPPORTED_SUB_TYPES:["bigWin"],SUB_TYPE_LIMITS:{bigWin:{from:0}},COUNT_UP_DURATIONS:{bigWin:9000},SHOW_TOTAL_DURATION:3000,SHOW_ALL_WINS_DURATION:1000,constructor:function(){Game.Slots.BigWinModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=this;a.storeData("autoplayActive",false);a.storeData("showTotalDuration",a.SHOW_TOTAL_DURATION);a.storeData("showAllWinsDuration",a.SHOW_ALL_WINS_DURATION);a.storeData("latestWinnings",{previousWinnings:0,currentWinnings:0})},processServerResponse:function(d){var c=this,a,b=d.currentGameState==="freespin"||d.nextaction==="freespin";c.storeData("serverResponse",d);if(Sys.isDefined(d.wins)&&d.wins.winType==="bigWin"){a=d.wins.coins;c.storeData("coinWin",a);c.determineWinType(a);c.setState("animationRequested");c.storeData("togglePreventedByFreeSpins",b);c.storeData("showAllWins",c.shouldShowAllWins(d))}else{c.storeData("coinWin",0);c.storeData("winType",undefined);c.setState("idle")}},determineWinType:function(d){var c=this,f=Services.moneyManager.getBetCoins(),b=undefined,e,a,g={};Sys.iterate(c.SUB_TYPE_LIMITS,function(i,h){e=f*h.from;a=f*h.to;g[i]=e;if(d>=e&&(isNaN(a)||d<f*a)){b=i}});this.storeData("winType",b);this.storeData("winTypeCoinLimits",g)},shouldShowAllWins:function(a){return true},getWinCountUpDuration:function(){var b=this,a=b.readData("winType");return b.COUNT_UP_DURATIONS[a]},getSupportedSubTypes:function(){return this.SUPPORTED_SUB_TYPES},shouldToggleWins:function(){var a=Services.settingsManager.getSetting("autoPlayNrSpins"),b=Sys.isDefined(a)&&a>0;return !b&&!this.readData("togglePreventedByFreeSpins")}};Game.Slots.BigWinModel=Sys.extend(Core.Model,Game.Slots.BigWinModel,"Game.Slots.BigWinModel");Sys.ns("Game.Slots");Game.Slots.WinSituationsDisplay={constructor:function(){Game.Slots.WinSituationsDisplay.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["waitSequence","serverResponse"]},getDefaultMVCClasses:function(){return{model:Game.Slots.WinSituationsDisplayModel,controller:Game.Slots.WinSituationsDisplayController}}};Game.Slots.WinSituationsDisplay=Sys.extend(Core.Module,Game.Slots.WinSituationsDisplay,"Game.Slots.WinSituationsDisplay");Sys.ns("Game.Slots");Game.Slots.WinSituationsDisplayModel={constructor:function(){Game.Slots.WinSituationsDisplayModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=Resources.readData("config");this.storeData("winSituationMinimumDisplayTime",a.winSituationsDisplay.winSituationMinimumDisplayTime)},processServerResponse:function(c){var b=this,a=[];if(c.wins&&Sys.isArray(c.wins.winSituations)){Sys.each(c.wins.winSituations,function(e,d){if(b.shouldToggleWinSituation(e)){a.push(d)}})}b.storeData("winSituationsToToggle",a)},shouldToggleWinSituation:function(a){return a.wins.type==="coins"}};Game.Slots.WinSituationsDisplayModel=Sys.extend(Core.Model,Game.Slots.WinSituationsDisplayModel,"Game.Slots.WinSituationsDisplayModel");Sys.ns("Game.Slots");Game.Slots.WinSituationsDisplayController={constructor:function(){Game.Slots.WinSituationsDisplayController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringSpinningState":a.abort,"request:winSituationsDisplay.abort":a.abort,"request:abortPresentation":a.abort,"request:winSituationsDisplay.showAllWins":a.showAllWins,"request:winSituationsDisplay.toggleWins":a.startToggling,"notify:settingsManager.settingChanged":a.processSettingsChanges,"request:winSituationsDisplay.waitFor":a.handleWaitRequest})},showAllWins:function(b){var a=this;a.model.setState("showingAllWins");a.initializeWaitSequence("notify:winSituationsDisplay.showingAllWins",b)},startToggling:function(b){var a=this;a.winSituationCounter=-1;a.pulseDurationPassed=true;a.clearWaitSequence();a.model.storeData("extraTogglingParameters",b);a.showNextBetline()},showNextBetline:function(){var b=this,a=b.model.readData("winSituationsToToggle");if(b.eventsToWaitFor.length===0&&a.length>0&&b.pulseDurationPassed){b.abort();b.model.setState("toggling");++b.winSituationCounter;b.initializeWaitSequence("notify:winSituationsDisplay.togglingWinSituation",a[b.winSituationCounter%a.length],b.model.readData("extraTogglingParameters"));b.pulseDurationPassed=false;b.toggleTimeout=setTimeout(function(){b.pulseDurationPassed=true;b.showNextBetline()},b.model.readData("winSituationMinimumDisplayTime"))}},handleWaitRequest:function(a){this.onWaitRequested(a)},onWaitIsComplete:function(){var b=this,a=b.model.isState("toggling");if(a){b.showNextBetline()}else{b.abort()}},processSettingsChanges:function(a){if((a==="betLevel"||a==="denomination")&&this.model.isState("toggling")){this.abort()}},abort:function(){var b=this,a=b.model.isState("showingAllWins");clearTimeout(b.toggleTimeout);if(!b.model.isState("abort")){b.model.setState("abort");b.fireEvent("notify:winSituationsDisplay.abort");if(a){b.fireEvent("notify:winSituationsDisplay.finishedShowingAllWins")}}}};Game.Slots.WinSituationsDisplayController=Sys.extend(Core.Controller,Game.Slots.WinSituationsDisplayController,"Game.Slots.WinSituationsDisplayController");Sys.ns("Game.Slots");Game.Slots.WinSituations={constructor:function(){Game.Slots.WinSituations.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation","serverResponse"]},getDefaultMVCClasses:function(){return{model:Game.Slots.WinSituationsModel,view:Game.Slots.WinSituationsView,controller:Game.Slots.WinSituationsController}}};Game.Slots.WinSituations=Sys.extend(Core.Module,Game.Slots.WinSituations,"Game.Slots.WinSituations");Sys.ns("Game.Slots");Game.Slots.WinSituationsController={constructor:function(){Game.Slots.WinSituationsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:winSituationsDisplay.showingAllWins":a.animateAllWinningBetlines,"notify:winSituationsDisplay.togglingWinSituation":a.animateWinSituation,"notify:winSituationsDisplay.abort":a.abort,"request:winSituations.showDisplayBetline":a.showDisplayBetline,"request:winSituations.hideDisplayBetline":a.hideDisplayBetline,"view:animationComplete":a.fireEvent.bind(a,"notify:winSituations.animationComplete")})},animateAllWinningBetlines:function(a){this.fireEvent("request:winSituationsDisplay.waitFor","notify:winSituations.animationComplete");this.view.showAllWinningBetlines(a)},animateWinSituation:function(a,b){this.fireEvent("request:winSituationsDisplay.waitFor","notify:winSituations.animationComplete");this.view.showSingleWinSituation(a,b)},abort:function(){this.view.stop()},showDisplayBetline:function(b,a){this.view.showDisplayBetline(b,a)},hideDisplayBetline:function(a){this.view.hideDisplayBetline(a)}};Game.Slots.WinSituationsController=Sys.extend(Core.Controller,Game.Slots.WinSituationsController,"Game.Slots.WinSituationsController");Sys.ns("Game.Slots");Game.Slots.WinSituationsModel={constructor:function(){Game.Slots.WinSituationsModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=Resources.readData("config").winSituationsDisplay||{},b=a.betlines||{};this.storeData("lineConfig",b.lines);this.storeData("frameConfig",b.frames)},processServerResponse:function(b){var a=this;if(b.wins&&Sys.isArray(b.wins.winSituations)){a.storeData("winSituations",b.wins.winSituations.slice(0))}},shouldFrameWinningSymbols:function(){return Sys.isDefined(this.readData("frameConfig"))}};Game.Slots.WinSituationsModel=Sys.extend(Core.Model,Game.Slots.WinSituationsModel,"Game.Slots.WinSituationsModel");Sys.ns("Game.Slots");Game.Slots.WinSituationsView={constructor:function(){Game.Slots.WinSituationsView.superclass.constructor.apply(this,arguments)},setAllBetlinesDisplayItemProps:function(a){},setSingleWinSituationDisplayItemProps:function(a){},initAnimations:function(){var a=this,b=Environment.getStageResolution();a.origin={x:Environment.scaleX(0),y:Environment.scaleY(0)};a.offlineCanvas=document.createElement("canvas");a.offlineCanvas.width=b.width;a.offlineCanvas.height=b.height;a.offlineContext=a.offlineCanvas.getContext("2d");a.animationList=new Animation.CanvasAnimationList();a.hoverBetlineCanvas=document.createElement("canvas");a.hoverBetlineCanvas.width=b.width;a.hoverBetlineCanvas.height=b.height;a.hoverBetlineContext=a.hoverBetlineCanvas.getContext("2d");a.hoverBetlineAnimationList=new Animation.CanvasAnimationList();a.createAnimationItems();a.createHoverBetlineAnimationItems();Game.stage.view.addToRenderLoop(a.animationList);Game.stage.view.addToRenderLoop(a.hoverBetlineAnimationList);a.hoverBetlineAnimationList.stop();a.animationList.stop()},createAnimationItems:function(){var a=this;a.item=new Animation.CanvasAnimationItem({top:0,left:0,width:a.offlineCanvas.width,height:a.offlineCanvas.height,depth:Layering.Game.Slots.WinSituationsDisplay.betlines,image:a.offlineCanvas,operations:{fade:[{time:0,value:1,fireEvent:{event:"view:animationComplete",scope:a}},{time:1,value:1,goTo:0}]}});a.animationList.add(a.item)},createHoverBetlineAnimationItems:function(){var a=this,b=Layering.Game.Slots.WinSituationsDisplay.hoverBetlines||Layering.Game.Slots.WinSituationsDisplay.betlines;a.item=new Animation.CanvasAnimationItem({top:0,left:0,width:a.hoverBetlineCanvas.width,height:a.hoverBetlineCanvas.height,depth:b,image:a.hoverBetlineCanvas});a.hoverBetlineAnimationList.add(a.item)},showAllWinningBetlines:function(c){var b=this,a=b.model.readData("winSituations");Sys.each(a,function(d){if(Sys.isDefined(d.betline)){b.drawBetline(d.betline)}});b.setAllBetlinesDisplayItemProps(c);b.animationList.restore();b.animationList.play()},drawBetline:function(d,b){var c=this,f=c.model.readData("lineConfig"),g=f[d].lineCoordinates,e=f[d].color||f.defaultColor,a;b=b?b:c.offlineContext;b.beginPath();b.moveTo(g[0],g[1]);if(f.lineType==="curve"){for(a=2;a<g.length;a+=6){b.bezierCurveTo(g[a],g[a+1],g[a+2],g[a+3],g[a+4],g[a+5])}}else{for(a=2;a<g.length;a+=2){b.lineTo(g[a],g[a+1])}}for(a=0;a<f.drawingOperations.length;a++){b.strokeStyle=e;b=Sys.apply(b,f.drawingOperations[a]);b.stroke()}},showSingleWinSituation:function(c,d){var b=this,a=b.model.readData("winSituations")[c];if(Sys.isDefined(a.betline)){b.drawBetline(a.betline)}if(b.model.shouldFrameWinningSymbols()){b.frameWinningSymbols(a)}b.setSingleWinSituationDisplayItemProps(d);b.animationList.restore();b.animationList.play()},frameWinningSymbols:function(k){var h=this,b=h.model.readData("lineConfig"),g=h.model.readData("frameConfig"),e=(k.betline&&b[k.betline].color)||b.defaultColor,c=h.offlineContext,j,l,i,a,m,f=g.image,d;if(f){f=Resources.readData("animationImages")[f]}Sys.each(k.positions,function(n){j=Game.stage.model.getSymbolConfiguration(n.reelIndex,n.symbolIndex);l=j.left+g.xOffset;i=j.top+g.yOffset;a=j.width-g.xOffset*2;m=j.height-g.yOffset*2;c.clearRect(l,i,a,m);if(f){c.drawImage(f,l,i)}else{for(d=0;d<b.drawingOperations.length;d++){c.strokeStyle=e;c=Sys.apply(c,b.drawingOperations[d]);c.strokeRect(l,i,a,m)}}})},stop:function(){var a=this;a.animationList.stop();a.offlineContext.clearRect(0,0,a.offlineCanvas.width,a.offlineCanvas.height)},showDisplayBetline:function(a,b){var d=this,c=d.model.readData("displayBetlineWho");if(!Sys.isArray(a)){a=[a]}if(!Sys.isDefined(b)){b="hover"}if(b!==c){d.hideDisplayBetline(c)}d.model.storeData("displayBetlineWho",b);a.forEach(function(e){d.drawBetline(e,d.hoverBetlineContext)});d.hoverBetlineAnimationList.play()},hideDisplayBetline:function(a){var b=this;if(!Sys.isDefined(a)){a="hover"}if(a===b.model.readData("displayBetlineWho")){b.hoverBetlineAnimationList.stop();b.hoverBetlineContext.clearRect(0,0,b.hoverBetlineCanvas.width,b.hoverBetlineCanvas.height)}}};Game.Slots.WinSituationsView=Sys.extend(Core.View,Game.Slots.WinSituationsView,"Game.Slots.WinSituationsView");Sys.ns("Game.Slots");Game.Slots.BetlineIndicators={constructor:function(){Game.Slots.BetlineIndicators.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["serverResponse","animation"],desktop:["serverResponse","animation",{userInput:{inputEvents:["hover"],listenToUserInput:true}}]}},getDefaultMVCClasses:function(){return{model:Game.Slots.BetlineIndicatorsModel,view:Game.Slots.BetlineIndicatorsView,controller:Game.Slots.BetlineIndicatorsController}}};Game.Slots.BetlineIndicators=Sys.extend(Core.Module,Game.Slots.BetlineIndicators,"Core.BetlineIndicators");Sys.ns("Game.Slots");Game.Slots.BetlineIndicatorsModel={constructor:function(){Game.Slots.BetlineIndicatorsModel.superclass.constructor.apply(this,arguments)},setupData:function(){Game.Slots.BetlineIndicatorsModel.superclass.setupData.apply(this,arguments);this.storeData("numberConfig",Resources.readData("config").winSituationsDisplay.betlines.numbers)},processServerResponse:function(b){var a=[];if(b.wins&&Sys.isArray(b.wins.winSituations)){Sys.each(b.wins.winSituations,function(c){a.push(c.betline)})}this.storeData("betlineNumbers",a)}};Game.Slots.BetlineIndicatorsModel=Sys.extend(Core.Model,Game.Slots.BetlineIndicatorsModel,"Game.Slots.BetlineIndicatorsModel");Sys.ns("Game.Slots");Game.Slots.BetlineIndicatorsView={constructor:function(){Game.Slots.BetlineIndicatorsView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var a=this;a.highlightAnimationList=new Animation.CanvasAnimationList();a.highlightDisplayAnimationList=new Animation.CanvasAnimationList();a.createHighlightItems(a.highlightAnimationList);a.createHighlightItems(a.highlightDisplayAnimationList);Game.stage.view.addToRenderLoop(a.highlightAnimationList);Game.stage.view.addToRenderLoop(a.highlightDisplayAnimationList);a.highlightAnimationList.stop();a.highlightDisplayAnimationList.stop()},createHighlightItems:function(e){var d=this,f=d.calculateNumberOfNeededItems(),b=d.model.readData("numberConfig").style,g=Animation.utils.text.createNumberDrawingProperties(b),a,c;e=e?e:d.highlightAnimationList;for(c=-1;++c<f;){a=new Animation.CanvasAnimationItem({width:0,height:0,depth:Layering.Game.Slots.WinSituationsDisplay.betlineNumberHighlight,customProps:{number:"not set yet"},executeBefore:function(h){var i=this;Animation.utils.text.drawTextFromImage(i.customProps.number,b.NUMBER_OFFSET,i.pivot.x,i.pivot.y,true,g.image,g.charMap,g.width,g.height,h)},operations:{fade:[{time:0,value:1,fireEvent:{event:"view:animationComplete",scope:d}},{time:1,value:1,goTo:0}]}});e.add(a)}},calculateNumberOfNeededItems:function(){var a=this.model.readData("numberConfig").configurations,b=1;Sys.iterate(a,function(c,d){if(Sys.isArray(d)){b=Math.max(b,d.length)}});return b},animate:function(g,e,f){var d=this,c=this.model.readData("numberConfig").configurations[g],b,a=[];e=e?e:d.highlightAnimationList;if(!Sys.isArray(c)){c=[c]}Sys.each(c,function(h,i){b=e.items[i];d.configureItemForHighlight(b,g,h,f);a.push(b)});e.play(a)},configureItemForHighlight:function(a,d,c,b){a.prop.customProps.number=d;a.prop.top=c.top;a.prop.left=c.left},stop:function(b){var a=this;b=b?b:a.highlightAnimationList;b.stop()},onUserInputHover:function(g){var f=this,a=Sys.UserInputUtils.getCoordinatesRelativeToElement(g,Game.stage.getGameContainer()),b,d=f.model.readData("numberConfig").panelArea,c,e;if(!Sys.isDefined(f.highlightAnimationList)){return}c={x:d.left.left,y:d.left.top,width:d.left.width,height:d.left.height};e={x:d.right.left,y:d.right.top,width:d.right.width,height:d.right.height};if(Sys.UserInputUtils.isCoordinateTarget(document.getElementById("canvasAnimationManager"),g)&&(Sys.UserInputUtils.isUserInputInSegment(a,c)||Sys.UserInputUtils.isUserInputInSegment(a,e))){b=f.isUserInputInBetlineSegment(a);if(b===-1){f.fireEvent("view:hideBetline")}else{f.fireEvent("view:showBetline",b)}}else{f.fireEvent("view:hideBetline")}},isUserInputInBetlineSegment:function(c){var d=this,f=d.model.readData("numberConfig").configurations,b=d.model.readData("numberConfig").hoverArea,e,a=-1;Sys.iterate(f,function(g){e={x:f[g].left+b.offsetX,y:f[g].top+b.offsetY,width:b.width,height:b.height};if(Sys.UserInputUtils.isUserInputInSegment(c,e)){a=g}});return a}};Game.Slots.BetlineIndicatorsView=Sys.extend(Core.View,Game.Slots.BetlineIndicatorsView,"Game.Slots.BetlineIndicatorsView");Sys.ns("Game.Slots");Game.Slots.BetlineIndicatorsController={constructor:function(){Game.Slots.BetlineIndicatorsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:winSituationsDisplay.togglingWinSituation":a.animateBetlineNumber,"view:showBetline":a.showBetline,"view:hideBetline":a.hideBetline,"notify:winSituationsDisplay.abort":a.view.stop.bind(a.view),"notify:gameModeChanged":a.onGameModeChanged,"view:animationComplete":a.fireEvent.bind(a,"notify:betlineIndicators.animationComplete")})},animateBetlineNumber:function(a,c){var b=this.model.readData("betlineNumbers")[a];if(Sys.isDefined(b)){this.fireEvent("request:winSituationsDisplay.waitFor","notify:betlineIndicators.animationComplete");this.view.animate(b,c)}},showBetline:function(b){var a=this;a.view.animate(b,a.view.highlightDisplayAnimationList);a.fireEvent("request:winSituations.showDisplayBetline",b)},hideBetline:function(){var a=this;a.view.stop(a.view.highlightDisplayAnimationList);a.fireEvent("request:winSituations.hideDisplayBetline")},onUserInputHover:function(a){this.view.onUserInputHover(a)},onGameModeChanged:function(b){var a=this;if(!Sys.isDefined(a.startListeningToUserInput)||!Sys.isDefined(a.stopListeningToUserInput)){return}if(b!=="BASIC"){a.stopListeningToUserInput()}else{a.startListeningToUserInput()}}};Game.Slots.BetlineIndicatorsController=Sys.extend(Core.Controller,Game.Slots.BetlineIndicatorsController,"Game.Slots.BetlineIndicatorsController");Sys.ns("Game.Slots");Game.Slots.CoinWin={constructor:function(){Game.Slots.CoinWin.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation"]},getDefaultMVCClasses:function(){return{model:Game.Slots.CoinWinModel,view:Game.Slots.CoinWinView,controller:Game.Slots.CoinWinController}}};Game.Slots.CoinWin=Sys.extend(Core.Module,Game.Slots.CoinWin,"Game.Slots.CoinWin");Sys.ns("Game.Slots");Game.Slots.CoinWinModel={SYMBOL_ORDER_FREFERENCE:[2,1,3,0,4],constructor:function(){Game.Slots.CoinWinModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(c){var b=this,a=[];if(c.wins&&Sys.isArray(c.wins.winSituations)){Sys.each(c.wins.winSituations,function(d){a.push(b.parseWinSituation(d))})}b.storeData("winSituations",a)},parseWinSituation:function(e){if(e.wins.type==="coins"){var d=e.positions,a=[],c,f,b;for(c=0;c<d.length;c++){a.push(d[c].reelIndex)}for(c=0;c<this.SYMBOL_ORDER_FREFERENCE.length;c++){f=this.SYMBOL_ORDER_FREFERENCE[c];b=a.indexOf(f);if(b>=0){return{x:f,y:d[b].symbolIndex,coins:e.wins.coins}}}}return undefined}};Game.Slots.CoinWinModel=Sys.extend(Core.Model,Game.Slots.CoinWinModel,"Game.Slots.CoinWinModel");Sys.ns("Game.Slots");Game.Slots.CoinWinView={NUMBER_IMAGE:undefined,NUMBER_WIDTH:100,NUMBER_HEIGHT:100,NUMBER_FONT:"bold 100px Verdana",NUMBER_OFFSET:0,NUMBER_TEXT_OPERATIONS:[{fillStyle:"#FFFFFF"},{lineWidth:5,strokeStyle:"#00000",drawType:"stroke"}],BACKGROUND_IMAGE:undefined,BACKGROUND_DRAWING_FUNCTION:function(a){var b=this;a.fillStyle="#ff00e0";a.fillRect(b.pivot.x,b.pivot.y,b.width,b.height)},BACKGROUND_WIDTH:undefined,BACKGROUND_HEIGHT:undefined,constructor:function(){Game.Slots.CoinWinView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var a=this;a.animationList=new Animation.CanvasAnimationList();a.textItem=a.createTextItem();a.backgroundItem=a.createBackgroundItem();a.animationList.add(a.backgroundItem);a.animationList.add(a.textItem);Game.stage.view.addToRenderLoop(a.animationList);a.animationList.stop()},createTextItem:function(){var a=this,b=Animation.utils.text.createNumberDrawingProperties(a);return new Animation.CanvasAnimationItem({top:0,left:0,width:0,height:0,depth:Layering.Game.Slots.CoinWin.text,customProps:{text:"not set yet"},executeBefore:function(c){var d=this;Animation.utils.text.drawTextFromImage(d.customProps.text,a.NUMBER_OFFSET,d.pivot.x,d.pivot.y,true,b.image,b.charMap,b.width,b.height,c)},operations:{fade:[{time:0,value:1,fireEvent:{event:"view:animationComplete",scope:a}},{time:1,value:1,goTo:0}]}})},createBackgroundItem:function(){var a=this,b=Game.stage.model.getSymbolConfiguration(0,0);return new Animation.CanvasAnimationItem({width:a.BACKGROUND_WIDTH||b.width,height:a.BACKGROUND_HEIGHT||b.height,depth:Layering.Game.Slots.CoinWin.background,executeBefore:a.BACKGROUND_DRAWING_FUNCTION,image:a.BACKGROUND_IMAGE})},animate:function(a){this.animationList.restore();this.updateAnimationItems(a);this.animationList.play()},updateAnimationItems:function(a){var b=this,c;c=Game.stage.model.getSymbolConfiguration(a.x,a.y);b.backgroundItem.prop.top=c.top;b.backgroundItem.prop.left=c.left;b.textItem.prop.top=(c.top+c.height/2);b.textItem.prop.left=(c.left+c.width/2);b.textItem.prop.customProps.text=a.coins},abort:function(){this.animationList.stop();this.fireEvent("view:animationAborted")}};Game.Slots.CoinWinView=Sys.extend(Core.View,Game.Slots.CoinWinView,"Game.Slots.CoinWinView");Sys.ns("Game.Slots");Game.Slots.CoinWinController={constructor:function(){Game.Slots.CoinWinController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:responseParser.responseParsed":a.model.processServerResponse.bind(a.model),"notify:winSituationsDisplay.togglingWinSituation":a.animate,"notify:winSituationsDisplay.abort":a.abort,"view:animationComplete":a.animationComplete,"view:animationAborted":a.animationComplete})},animate:function(b){var d=this,a=d.model.readData("winSituations"),c=b%a.length;if(a.length>0&&Sys.isDefined(a[c])){d.model.setState("animating");d.view.animate(a[c]);d.fireEvent("request:winSituationsDisplay.waitFor","notify:coinWin.animationComplete")}},animationComplete:function(){this.fireEvent("notify:coinWin.animationComplete")},abort:function(){if(this.model.isState("animating")){this.view.abort();this.model.setState("idle")}}};Game.Slots.CoinWinController=Sys.extend(Core.Controller,Game.Slots.CoinWinController,"Game.Slots.CoinWinController");Sys.ns("Game.Slots");Game.Slots.DimmedSymbols={constructor:function(){Game.Slots.DimmedSymbols.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation"]},getDefaultMVCClasses:function(){return{model:Game.Slots.DimmedSymbolsModel,view:Game.Slots.DimmedSymbolsView,controller:Game.Slots.DimmedSymbolsController}}};Game.Slots.DimmedSymbols=Sys.extend(Core.Module,Game.Slots.DimmedSymbols,"Game.Slots.DimmedSymbols");Sys.ns("Game.Slots");Game.Slots.DimmedSymbolsModel={constructor:function(){Game.Slots.DimmedSymbolsModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(g){var d=g.reelInfo,h=0,a,c,b,i,f=[],e;if(Sys.isDefined(d)&&Sys.isDefined(g.wins)&&Sys.isArray(g.wins.winSituations)){a=d.length;for(c=0;c<a;c++){h=Math.max(h,d[c].symbols.length)}i=Sys.utils.init2dMatrix(a,h,false);Sys.each(g.wins.winSituations,function(j){Sys.each(j.positions,function(k){i[k.reelIndex][k.symbolIndex]=true})});for(c=0;c<a;c++){for(b=0;b<d[c].length;b++){if(!i[c][b]){if(d[c].overlaySymbols[b]){e=d[c].overlaySymbols[b]}else{e=d[c].symbols[b]}f.push({x:c,y:b,symbol:e})}}}}this.storeData("symbolsToDim",f)}};Game.Slots.DimmedSymbolsModel=Sys.extend(Core.Model,Game.Slots.DimmedSymbolsModel,"Game.Slots.DimmedSymbolsModel");Sys.ns("Game.Slots");Game.Slots.DimmedSymbolsView={OPACITY:0.3,constructor:function(){Game.Slots.DimmedSymbolsView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var e=this,a=Resources.readData("animationImages"),b,c,d={};Sys.iterate(a,function(f,g){if(f.match(/^SYM\d+$/)){b=document.createElement("canvas");b.width=g.width;b.height=g.height;c=b.getContext("2d");c.globalAlpha=e.OPACITY;c.drawImage(g,0,0);d[f]=b}});this.model.storeData("dimmedSymbolImages",d)},dimNoWinSymbols:function(){var d=this,b=d.model.readData("symbolsToDim"),g=d.model.readData("dimmedSymbolImages"),f,e,a={},c={};Sys.each(b,function(h){f=h.x;e=h.y;if(!Sys.isDefined(a[f])){a[f]={};c[f]={}}a[f][e]=g[h.symbol];c[f][e]=h.symbol});d.model.storeData("unDimSymbolConfig",c);d.fireEvent("view:setReelSymbols",a)},unDimNoWinSymbols:function(){this.fireEvent("view:setReelSymbols",this.model.readData("unDimSymbolConfig"))}};Game.Slots.DimmedSymbolsView=Sys.extend(Core.View,Game.Slots.DimmedSymbolsView,"Game.Slots.DimmedSymbolsView");Sys.ns("Game.Slots");Game.Slots.DimmedSymbolsController={constructor:function(){Game.Slots.DimmedSymbolsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:responseParser.responseParsed":a.model.processServerResponse.bind(a.model),"notify:winSituationsDisplay.showingAllWins":a.dimNoWinSymbols,"request:dimmedSymbols.dimNoWinSymbols":a.dimNoWinSymbols,"notify:stateHandler.enteringSpinningState":a.unDimNoWinSymbols,"notify:stateHandler.enteringFreeSpinOutroState":a.unDimNoWinSymbols,"notify:stateHandler.enteringFreeSpinIntroState":a.unDimNoWinSymbols,"view:setReelSymbols":a.fireEvent.bind(a,"request:spin.setSymbols")})},dimNoWinSymbols:function(){var b=this,a=b.model;if(!a.isState("animateSymbols")&&a.readData("symbolsToDim").length>0){a.setState("animateSymbols");b.view.dimNoWinSymbols()}},unDimNoWinSymbols:function(){if(this.model.isState("animateSymbols")){this.model.setState("idle");this.view.unDimNoWinSymbols()}}};Game.Slots.DimmedSymbolsController=Sys.extend(Core.Controller,Game.Slots.DimmedSymbolsController,"Game.Slots.DimmedSymbolsController");Sys.ns("Game.Slots");Game.Slots.ReelStopAnimations={constructor:function(){Game.Slots.ReelStopAnimations.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation","serverResponse","trigger"]},getStateChanges:function(){var c=this,b=c.model,a=c.MODULE_NAME,d={state:{name:a[0].toUpperCase()+a.substr(1),execute:function(){},waitEvents:{}}},e={stopped:{queue:[function(f){if(b.readData("shouldAnimate")&&!b.readData("quickStopTriggered")&&!b.readData("animationsComplete")){f.stateHandler.pushState(f.states[a])}}]}};d.state.waitEvents["notify:"+a+".animationsComplete"]=false;e[a]=d;return e},getDefaultMVCClasses:function(){return undefined}};Game.Slots.ReelStopAnimations=Sys.extend(Core.Module,Game.Slots.ReelStopAnimations,"Game.Slots.ReelStopAnimations");Sys.ns("Game.Slots");Game.Slots.ReelStopAnimationsModel={SYMBOLS_TO_ANIMATE:[],constructor:function(){Game.Slots.ReelStopAnimationsModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(d){var a=this.SYMBOLS_TO_ANIMATE,c=[],b;Sys.each(d.reelInfo,function(e,f){c.push([]);Sys.each(e.symbols,function(h,g){b=e.overlaySymbols[g];if(a.contains(b)){c[f].push({symbol:b,symbolIndex:g})}else{if(a.contains(h)){c[f].push({symbol:h,symbolIndex:g})}}})});c=this.applyConditions(c);this.calculateLastReelToAnimate(c);this.storeData("symbolsToAnimateInOutcome",c)},applyConditions:function(a){return a},calculateLastReelToAnimate:function(c){var b=this,d={},a=false;Sys.each(c,function(f,e){Sys.each(f,function(g){if(b.SYMBOLS_TO_ANIMATE.contains(g.symbol)){a=true;d[g.symbol]=e}})});b.storeData("shouldAnimate",a);b.storeData("lastReelToAnimate",d)}};Game.Slots.ReelStopAnimationsModel=Sys.extend(Core.Model,Game.Slots.ReelStopAnimationsModel,"Game.Slots.ReelStopAnimationsModel");Sys.ns("Game.Slots");Game.Slots.ReelStopAnimationsController={constructor:function(){Game.Slots.ReelStopAnimationsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringSpinningState":a.onSpinStart,"notify:quickStopper.quickStop":a.onQuickStopTriggered,"request:reelStopAnimations.abort":a.abortTriggered,"notify:spin.reelStoppedSpinning":a.onReelStopped,"view:animationsComplete":a.onAnimationsComplete,"view:playSound":a.fireEvent.bind(a,"request:audioPlayer.play"),"view:stopSound":a.fireEvent.bind(a,"request:audioPlayer.stop")})},registerTriggers:function(){Services.trigger.registerTrigger("notify:reelStopAnimations.symbolsToAnimate",this,"When there are scatter symbols to animate.")},onSpinStart:function(){this.model.storeData("quickStopTriggered",false);this.model.storeData("animationsComplete",false);this.model.storeData("abortTriggered",false)},onQuickStopTriggered:function(){this.model.storeData("quickStopTriggered",true);this.abort()},abortTriggered:function(){this.model.storeData("abortTriggered",true);this.abort()},onReelStopped:function(c){var b=this.model,a=b.readData("symbolsToAnimateInOutcome")[c];if(!b.readData("quickStopTriggered")&&!b.readData("abortTriggered")&&a.length>0){this.view.animate(a,c);this.fireEvent("notify:reelStopAnimations.symbolsToAnimate",c,a)}},onAnimationsComplete:function(){this.model.storeData("animationsComplete",true);this.fireEvent("notify:"+this.MODULE_NAME+".animationsComplete")},abort:function(){this.view.abort();this.fireEvent("notify:"+this.MODULE_NAME+".animationsComplete")}};Game.Slots.ReelStopAnimationsController=Sys.extend(Core.Controller,Game.Slots.ReelStopAnimationsController,"Game.Slots.ReelStopAnimationsController");Sys.ns("Game.Slots");Game.Slots.FreeSpinSymbolAttentionAnimation={constructor:function(){Game.Slots.FreeSpinSymbolAttentionAnimation.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Game.Slots.FreeSpinSymbolAttentionAnimationModel,view:Game.Slots.FreeSpinSymbolAttentionAnimationView,controller:Game.Slots.ReelStopAnimationsController}}};Game.Slots.FreeSpinSymbolAttentionAnimation=Sys.extend(Game.Slots.ReelStopAnimations,Game.Slots.FreeSpinSymbolAttentionAnimation,"Game.Slots.FreeSpinSymbolAttentionAnimation");Sys.ns("Game.Slots");Game.Slots.FreeSpinSymbolAttentionAnimationModel={SYMBOLS_TO_ANIMATE:["SYM0"],MINIMUM_COUNT_REQUIREMENT:[0,0,0,1,2],constructor:function(){Game.Slots.FreeSpinSymbolAttentionAnimationModel.superclass.constructor.apply(this,arguments)},applyConditions:function(c){var b=this,a=0;Sys.each(c,function(d,e){if(e===c.length-1){d.length=0}else{if(d.length>0){if(a<b.MINIMUM_COUNT_REQUIREMENT[e]){d.length=0}a++}}});return c}};Game.Slots.FreeSpinSymbolAttentionAnimationModel=Sys.extend(Game.Slots.ReelStopAnimationsModel,Game.Slots.FreeSpinSymbolAttentionAnimationModel,"Game.Slots.FreeSpinSymbolAttentionAnimationModel");Sys.ns("Game.Slots");Game.Slots.FreeSpinSymbolAttentionAnimationView={constructor:function(){Game.Slots.FreeSpinSymbolAttentionAnimationView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var a=this;a.animationList=new Animation.CanvasAnimationList();a.createAnimationItems();Game.stage.view.addToRenderLoop(a.animationList);a.animationList.stop()},createAnimationItems:function(){var b=this,d=Game.stage.model.getCurrentReelGroupConfiguration().symbolCols,c,a;b.animationItems=[];while(b.animationItems.length<d-1){c=Game.stage.model.getSymbolConfiguration(b.animationItems.length,0);a=new Animation.CanvasAnimationItem({width:c.width,height:c.height,left:c.left,depth:Layering.Game.Slots.FreeSpinSymbolAttentionAnimation.animationItems,executeBefore:function(e){var f=this;e.fillStyle="#ff0000";e.fillRect(f.pivot.x,f.pivot.y,f.width,f.height)}});b.animationList.add(a);b.animationItems.push(a)}},animate:function(b,f){var d=this,a=b[0].symbolIndex,e=Game.stage.model.getSymbolConfiguration(f,a),c=d.animationItems[f];c.prop.operations={fade:[{time:0,value:0},{time:250,value:1},{time:500,value:0}]};if(f===d.model.readData("lastReelToAnimate")[d.model.SYMBOLS_TO_ANIMATE[0]]){c.prop.operations.fade[2].fireEvent={event:"view:animationsComplete",scope:d}}c.prop.top=e.top;d.animationList.play(c)},abort:function(){this.animationList.stop()}};Game.Slots.FreeSpinSymbolAttentionAnimationView=Sys.extend(Core.View,Game.Slots.FreeSpinSymbolAttentionAnimationView,"Game.Slots.FreeSpinSymbolAttentionAnimationView");Sys.ns("Game.Slots");Game.Slots.WinningSymbols={constructor:function(){Game.Slots.WinningSymbols.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation"]},getDefaultMVCClasses:function(){return{model:Game.Slots.WinningSymbolsModel,view:Game.Slots.WinningSymbolsView,controller:Game.Slots.WinningSymbolsController}}};Game.Slots.WinningSymbols=Sys.extend(Core.Module,Game.Slots.WinningSymbols,"Game.Slots.WinningSymbols");Sys.ns("Game.Slots");Game.Slots.WinningSymbolsModel={SYMBOLS_TO_ANIMATE_ON_TOGGLE:["SYM0","SYM1"],constructor:function(){Game.Slots.WinningSymbolsModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(h){var i=this,e=h.reelInfo,d,c,a=[],g,b,j=[],f;if(h.wins&&Sys.isArray(h.wins.winSituations)){Sys.each(h.wins.winSituations,function(k){g=[];Sys.each(k.positions,function(l){d=l.reelIndex;c=l.symbolIndex;if(e[d].overlaySymbols[c]){f=e[d].overlaySymbols[c]}else{f=e[d].symbols[c]}b={x:d,y:c,symbol:f};j.push(b);if(i.SYMBOLS_TO_ANIMATE_ON_TOGGLE.contains(f)){g.push(b)}});a.push(g)})}i.storeData("winningSymbols",j);i.storeData("winSituationSymbols",a)}};Game.Slots.WinningSymbolsModel=Sys.extend(Core.Model,Game.Slots.WinningSymbolsModel,"Game.Slots.WinningSymbolsModel");Sys.ns("Game.Slots");Game.Slots.WinningSymbolsView={constructor:function(){Game.Slots.WinningSymbolsView.superclass.constructor.apply(this,arguments)},ALL_WINNING_SYMBOLS_ANIMATION_TIME:1000,WIN_SITUATION_ANIMATION_TIMES:{SYM0:1000,SYM1:1000},configureItemForAllWinningSymbolsDisplay:function(d,a,f){var b=this,c=Game.stage.model.getSymbolConfiguration(a.x,a.y),e=this.ALL_WINNING_SYMBOLS_ANIMATION_TIME;d.prop=Sys.apply(d.prop,{depth:Layering.Game.Slots.WinningSymbols.animationItems,executeBefore:function(h,i,g,k){var j=k.prop;h.fillStyle="#ffffff";h.fillRect(j.pivot.x,j.pivot.y,j.width,j.height)},operations:{fade:[{time:0,value:0},{time:e/2,value:1},{time:e,value:0,fireEvent:{event:"view:animationComplete",scope:b}}]}});d.prop.top=c.top;d.prop.left=c.left;d.prop.width=c.width;d.prop.height=c.height;d.restore()},configureItemForWinSituationToggling:function(d,a,f){var b=this,c=Game.stage.model.getSymbolConfiguration(a.x,a.y),e=this.WIN_SITUATION_ANIMATION_TIMES[a.symbol];d.prop=Sys.apply(d.prop,{depth:Layering.Game.Slots.WinningSymbols.animationItems,executeBefore:function(g){var h=this;g.fillStyle="#fdfd00";g.fillRect(h.pivot.x,h.pivot.y,h.width,h.height)},operations:{fade:[{time:0,value:0},{time:e/2,value:1},{time:e,value:0,fireEvent:{event:"view:animationComplete",scope:b}}]}});d.prop.top=c.top;d.prop.left=c.left;d.prop.width=c.width;d.prop.height=c.height;d.restore()},initAnimations:function(){var c=this,d=Game.stage.model.getCurrentReelGroupConfiguration(),a=d.symbolCols,b=d.symbolRows;c.animationItems=Sys.utils.init2dMatrix(a,b);c.animationList=new Animation.CanvasAnimationList();Game.stage.view.addToRenderLoop(c.animationList);c.animationList.stop()},animateAllWinningSymbols:function(a){this.animateSymbols(this.model.readData("winningSymbols"),this.configureItemForAllWinningSymbolsDisplay,a)},animateWinSituationSymbols:function(a,b){this.animateSymbols(a,this.configureItemForWinSituationToggling,b)},animateSymbols:function(b,c,g){var e=this,a,f,d;e.animationList.restore();e.animationList.stop();Sys.each(b,function(h){a=h.x;f=h.y;if(Sys.isDefined(e.animationItems[a][f])){d=e.animationItems[a][f]}else{d=new Animation.CanvasAnimationItem({});e.animationList.add(d);e.animationItems[a][f]=d}c.call(e,d,h,g);d.play()})},stop:function(){this.animationList.stop();this.fireEvent("view:animationComplete")}};Game.Slots.WinningSymbolsView=Sys.extend(Core.View,Game.Slots.WinningSymbolsView,"Game.Slots.WinningSymbolsView");Sys.ns("Game.Slots");Game.Slots.WinningSymbolsController={constructor:function(){Game.Slots.WinningSymbolsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:responseParser.responseParsed":a.model.processServerResponse.bind(a.model),"notify:winSituationsDisplay.showingAllWins":a.animateAllWinningSymbols,"notify:winSituationsDisplay.togglingWinSituation":a.animateWinSituationSymbols,"notify:winSituationsDisplay.abort":a.abort,"view:animationComplete":a.onAnimationComplete,"view:hideSymbol":a.hideSymbol,"view:showSymbol":a.showSymbol,"view:playSound":a.playSound,"view:stopSound":a.stopSound})},playSound:function(a){this.fireEvent("request:audioPlayer.play",a)},stopSound:function(a){this.fireEvent("request:audioPlayer.stop",a)},animateWinSituationSymbols:function(b,d){var c=this,a=c.model.readData("winSituationSymbols")[b];if(Sys.isArray(a)&&a.length>0){c.model.setState("animating");c.fireEvent("request:winSituationsDisplay.waitFor","notify:winningSymbols.animationComplete");c.view.animateWinSituationSymbols(a,d)}},animateAllWinningSymbols:function(b){var a=this;if(a.model.readData("winningSymbols").length>0){a.model.setState("animating");a.fireEvent("request:winSituationsDisplay.waitFor","notify:winningSymbols.animationComplete");a.view.animateAllWinningSymbols(b)}},abort:function(){if(this.model.isState("animating")){this.view.stop()}},onAnimationComplete:function(){this.model.setState("idle");this.fireEvent("notify:winningSymbols.animationComplete")},hideSymbol:function(a){this.fireEvent("request:spin.hideSymbols",a)},showSymbol:function(a){this.fireEvent("request:spin.showSymbols",a)}};Game.Slots.WinningSymbolsController=Sys.extend(Core.Controller,Game.Slots.WinningSymbolsController,"Game.Slots.WinningSymbolsController");Sys.ns("Interface.utils");Interface.utils.CSSAnimation={constructor:function(a){Interface.utils.CSSAnimation.superclass.constructor.apply(this,arguments);this.init(a)},run:function(a,c){var b=this;if(Sys.isDefined(c)){b.setupEvent(a,"AnimationEnd",c)}a.style[b.animationType]=b.name+" "+b.duration+"ms "+b.delay+"ms";if(Sys.isDefined(b.timingFunction)){a.style[b.animationType+"TimingFunction"]=b.timingFunction}if(Sys.isDefined(b.iterationCount)){a.style[b.animationType+"IterationCount"]=b.iterationCount}if(Sys.isDefined(b.fillMode.mode)){a.style[b.fillMode.type]=b.fillMode.mode}},removeAnimation:function(a){a.style[this.animationType]="none"},init:function(a){var b=this;b.name=a.name;b.duration=a.duration;b.delay=Sys.isDefined(a.delay)?a.delay:0;b.timingFunction=a.timingFunction;b.iterationCount=a.iterationCount;b.fillMode={type:Sys.utils.pollyFill("animationFillMode"),mode:a.fillMode};b.setupAnimation(a);b.animationType=Sys.utils.pollyFill("animation");b.prefixes=["webkit","moz","MS","o",""]},setupAnimation:function(a){var c=this,b=this.getRuleString(a);c.style=document.head.appendChild(document.createElement("style"));c.insertRule(b)},insertRule:function(a){if(CSSRule.WEBKIT_KEYFRAMES_RULE){this.style.sheet.insertRule("@-webkit-keyframes"+a,0)}else{if(CSSRule.KEYFRAMES_RULE){this.style.sheet.insertRule("@keyframes"+a,0)}}},removeRule:function(a){this.style.sheet.deleteRule(a)},getRuleString:function(a){var g=Object.keys(a.frames),b=g.length,d=0,f=" "+a.name+" {";while(d<b){var k=g[d];f+=" "+k;var l=Object.keys(a.frames[k]),e=l.length,c=0;f+=" {";while(c<e){var h=l[c];f+=h+" : "+a.frames[k][h]+";";++c}f+=" }";++d}f+=" }";return f},setupEvent:function(c,d,g){var e=this,f=e.prefixes;for(var b=-1,a=f.length;++b<a;){if(!f[b]){d=d.toLowerCase()}c.addEventListener(f[b]+d,g,false)}},removeEvent:function(c,d,g){var e=this,f=e.prefixes;for(var b=-1,a=f.length;++b<a;){if(!f[b]){d=d.toLowerCase()}c.removeEventListener(f[b]+d,g,false)}}};Interface.utils.CSSAnimation=Sys.extend(Sys.Observable,Interface.utils.CSSAnimation,"Interface.utils.CSSAnimation");Sys.ns("Interface.utils");Interface.utils.CardNavigation={CSS:{ARROWS:"interface-cardNavigation_arrows clearfix trim",ARROWS_PREVIOUS:"interface-cardNavigation_arrows_previous",ARROWS_CLOSE:"interface-cardNavigation_arrows_close",ARROWS_NEXT:"interface-cardNavigation_arrows_next",INDICATORS:"interface-cardNavigation_indicators clearfix utils_horizontal_center trim",INDICATORS_CHILD:"interface-cardNavigation_indicator",INDICATORS_SELECTED:"interface-cardNavigation_selectedIndicator",DISABLED:"interface-cardNavigation_disabled"},constructor:function(a){this.currentCard=0;Interface.utils.CardNavigation.superclass.constructor.apply(this,arguments)},getArrows:function(){return this.arrowContainer},getIndicators:function(){return this.indicatorContainer},getContainer:function(a){if(a==="arrows"){return this.getArrows()}else{if(a==="indicators"){return this.getIndicators()}}},getCurrentCardIndex:function(){return this.currentCard},next:function(){var c=this,a=c.currentCard+1,b=false;if(a>=c.numCards){a=0;b=true}c.selectCard(a,false,b)},previous:function(){var c=this,a=c.currentCard-1,b=false;if(a<0){a=c.numCards-1;b=true}c.selectCard(a,false,b)},selectCard:function(b,e,a){var d=this,c=d.indicatorChildren;if(b>=0&&b<d.numCards){c[d.currentCard].removeCls(d.CSS.INDICATORS_SELECTED);c[b].addCls(d.CSS.INDICATORS_SELECTED);if(e!==true){d.selectionCallback(b,d.currentCard,a)}d.currentCard=b}},enable:function(){var a=this;a.enabled=true;a.arrowContainer.removeCls(a.CSS.DISABLED);a.indicatorContainer.removeCls(a.CSS.DISABLED);a.performActionOnSubComponent("enable")},disable:function(){var a=this;a.enabled=false;a.arrowContainer.removeCls(a.CSS.DISABLED);a.indicatorContainer.removeCls(a.CSS.DISABLED);a.performActionOnSubComponent("disable")},close:function(){if(this.hasCloseButton){this.closeCallback()}},performActionOnSubComponent:function(d){var c=this.subComponents,a=c.length,b;for(b=-1;++b<a;){c[b][d]()}},setupContainer:function(b){var c=this,a=Sys.isDefined(b.selectedCard)?b.selectedCard:0;c.numCards=b.numCards;c.selectionCallback=b.selectionCallback;c.closeCallback=b.closeCallback;c.hasCloseButton=Sys.isDefined(b.closeCallback);c.subComponents=[];c.setupArrows(b.arrowLabels);c.setupIndicators();c.selectCard(a,true)},setupArrows:function(c){var b=this,a=Sys.isObj(c);b.arrowContainer=new Sys.Element({id:b.id+"_arrows",tag:"ul",cls:b.CSS.ARROWS});b.previousArrow=new Interface.utils.DOMButton({id:"paytablePrevious",tag:"li",baseCSS:b.CSS.ARROWS_PREVIOUS,textContent:(a&&Sys.isDefined(c.previous))?c.previous:"",clickCallback:b.previous.bind(b)});b.arrowContainer.add(b.previousArrow.getContainer());b.subComponents.push(b.previousArrow);if(b.hasCloseButton){b.closeArrow=new Interface.utils.DOMButton({id:"paytableClose",tag:"li",baseCSS:b.CSS.ARROWS_CLOSE,textContent:(a&&Sys.isDefined(c.close))?c.close:"",clickCallback:b.close.bind(b)});b.arrowContainer.add(b.closeArrow.getContainer());b.subComponents.push(b.closeArrow)}b.nextArrow=new Interface.utils.DOMButton({id:"paytableNext",tag:"li",baseCSS:b.CSS.ARROWS_NEXT,textContent:(a&&Sys.isDefined(c.next))?c.next:"",clickCallback:b.next.bind(b)});b.arrowContainer.add(b.nextArrow.getContainer());b.subComponents.push(b.nextArrow)},setupIndicators:function(){var c=this,d=new Sys.Element({id:c.id+"indicators",tag:"ul",cls:c.CSS.INDICATORS}),b=[],e,a;for(a=-1;++a<c.numCards;){e=new Interface.utils.DOMButton({id:"paytableIndicator_"+a,tag:"li",baseCSS:c.CSS.INDICATORS_CHILD,clickCallback:c.selectCard.bind(c,a)});b.push(d.add(e.getContainer()));c.subComponents.push(e)}c.indicatorContainer=d;c.indicatorChildren=b}};Interface.utils.CardNavigation=Sys.extend(Interface.utils.UserInputBase,Interface.utils.CardNavigation,"Interface.utils.CardNavigation");Sys.ns("Interface.utils");Interface.utils.ToggleSwitch={CSS:{base:"interface-toggleSwitch_base",disabled:"interface-toggleSwitch_disabled",label:"interface-toggleSwitch_label",button_wrapper:"interface-toggleSwitch_buttonWrapper",button_background:"interface-toggleSwitch_buttonBackground interface-toggleSwitch_buttonBackgroundSize",button_handle:"interface-toggleSwitch_buttonHandle interface-toggleSwitch_buttonHandleSize",loadAnimation:"interface-toggleSwitch_loadAnimation interface-smallSpinner_uri hidden"},constructor:function(a){Interface.utils.ToggleSwitch.superclass.constructor.apply(this,arguments)},init:function(b){var c=this,a=b.CSS||{};b.cls=Sys.isString(b.cls)?b.cls:"";if(Sys.isDefined(a)){c.CSS=Sys.applyIf(a,c.CSS)}c.title=b.title;c.callback=b.callback;c.turnedOn=false;Interface.utils.ToggleSwitch.superclass.init.apply(c,arguments)},setupContainer:function(a){var b=this;b.container=new Sys.Element({id:b.id,tag:"div",cls:a.cls+" "+b.CSS.base+" off"});if(b.title){b.label=b.container.add(new Sys.Element({id:b.id+"_title",tag:"div",cls:b.CSS.label,textContent:b.title}))}b.buttonWrapper=b.container.add(new Sys.Element({id:b.id+"_button_wrapper",tag:"div",cls:b.CSS.button_wrapper}));b.background=b.buttonWrapper.add(new Sys.Element({id:b.id+"_button_background",tag:"div",cls:b.CSS.button_background}));b.handle=b.background.add(new Sys.Element({id:b.id+"_button_handle",tag:"div",cls:b.CSS.button_handle}));b.loadAnimation=b.container.add(new Sys.Element({id:b.id+"_loadAnimation",tag:"div",cls:b.CSS.loadAnimation}))},setCSS:function(e){var d=this,b=d.container,c=d.button,a=d.CSS;if(e.base){b.replaceCSSClass(a.base,e.base)}if(!d.enabled&&e.disabled){b.replaceCSSClass(a.disabled,e.disabled)}if(e.label){d.label.replaceCSSClass(a.label,e.label)}if(e.button_wrapper){c.replaceCSSClass(a.button_wrapper,e.button_wrapper)}if(e.button_background){c.replaceCSSClass(a.button_background,e.button_background)}if(e.button_handle){c.replaceCSSClass(a.button_handle,e.button_handle)}d.CSS=Sys.applyIf(e,a)},toggle:function(e,d){var b=this,a=b.turnedOn,c=Sys.isDefined(e)?e:!a;if(b.isLocked()){return}if(c!==a){if(c){b.container.replaceCSSClass("off","on")}else{b.container.replaceCSSClass("on","off")}b.turnedOn=c;if(!d){b.callback(c)}}},isOn:function(){return this.turnedOn},onUserInputStart:function(a){this.wasInitialInputTarget=Sys.UserInputUtils.isCoordinateTarget(this.buttonWrapper.el,a)&&this.enabled},onUserInputEnd:function(c){var b=this,a=Sys.UserInputUtils.isCoordinateTarget(b.buttonWrapper.el,c);if(a&&b.wasInitialInputTarget){b.toggle()}b.wasInitialInputTarget=false},startListeningToUserInput:function(){var a=this;a.on({"notify:userInputManager.userInputStarted":a.onUserInputStart,"notify:userInputManager.userInputEnded":a.onUserInputEnd})},stopListeningToUserInput:function(){this.removeListener("notify:userInputManager.userInputStarted");this.removeListener("notify:userInputManager.userInputEnded")},displayLoadAnimation:function(){this.loadAnimation.removeCls("hidden");this.buttonWrapper.addCls("hidden")},hideLoadAnimation:function(){this.loadAnimation.addCls("hidden");this.buttonWrapper.removeCls("hidden")},setValue:function(b,a){this.toggle(b,a)}};Interface.utils.ToggleSwitch=Sys.extend(Interface.utils.UserInputBase,Interface.utils.ToggleSwitch,"Interface.utils.ToggleSwitch");Sys.ns("Interface.utils");Interface.utils.Slider={CSS:{base:"interface-slider_base",disabled:"interface-slider_disabled",label:"interface-slider_label",sliderWrapper:"interface-slider_sliderWrapper",background:"interface-slider_background",handle:"utils_center interface-slider_handle",fill:"interface-slider_fill",display:"utils_center interface-slider_display",verticalLine:"utils_center interface-slider_verticalLine"},constructor:function(){Interface.utils.Slider.superclass.constructor.apply(this,arguments)},init:function(b){var d=this,a,c;if(Sys.isArray(b.values)){a=b.values}else{a=[];for(c=b.minValue;c<=b.maxValue;c=Animation.utils.toNthDecimalPlace(c+b.valueStep,5)){a.push(c)}}if(!Sys.isDefined(b.useStepIndicator)){b.useStepIndicator=true}d.callback=b.callback;d.values=a;d.callbackOnlyOnEndEvent=(b.callbackOnlyOnEndEvent===true);d.endCallback=Sys.isFunc(b.endCallback)?b.endCallback:function(){};Interface.utils.Slider.superclass.init.apply(d,arguments);d.setStartValue(b);d.selectRenderFunction();d.transform=Sys.utils.pollyFill("transform")},setStartValue:function(c){var b=c.startValue,a=this.values,d=(Sys.isDefined(b)&&a.indexOf(b)!==-1)?b:a[0];this.setValue(d,true)},setupContainer:function(a){var b=this,c;b.container=new Sys.Element({id:b.id,tag:"div",cls:b.CSS.base,"data-input":true});b.sliderWrapper=b.container.add(new Sys.Element({id:b.id+"Slider",tag:"div",cls:b.CSS.sliderWrapper}));b.background=b.sliderWrapper.add(new Sys.Element({id:b.id+"SliderBackground",tag:"div",cls:b.CSS.background}));b.fill=b.background.add(new Sys.Element({id:b.id+"Fill",tag:"div",cls:b.CSS.fill}));if(a.showLabels){c=b.values[0].toString();b.minimumLabel=b.container.addAsFirst(new Sys.Element({id:b.id+"Minimum",tag:"div",cls:b.CSS.label+" "+b.CSS.label+"_left",textContent:c}));c=b.values[b.values.length-1].toString();b.maximumLabel=b.container.add(new Sys.Element({id:b.id+"Maximum",tag:"div",cls:b.CSS.label+" "+b.CSS.label+"_right",textContent:c}))}b.handle=b.sliderWrapper.add(new Sys.Element({id:b.id+"Handle",tag:"div",cls:b.CSS.handle}));if(a.showDisplay!==false){b.display=b.sliderWrapper.add(new Sys.Element({id:b.id+"Display",tag:"div",cls:b.CSS.display}));b.showDisplay=true}},onUserInputStart:function(a){var c=this,b=Sys.UserInputUtils.isCoordinateTarget(c.container.el,a)&&c.enabled;c.startValue=c.value;if(b){c.moveSliderToCoordinate(a,c.callbackOnlyOnEndEvent)}this.wasInitialInputTarget=b},onUserInputMove:function(a){if(this.wasInitialInputTarget){var b=this;if(!b.bigDisplayShowing){if(b.showDisplay){b.display.addCls("interface-slider_bigDisplay")}b.bigDisplayShowing=true}this.animationFunction.call(window,function(){b.moveSliderToCoordinate(a,b.callbackOnlyOnEndEvent)})}},onUserInputEnd:function(){var b=this,a;if(b.wasInitialInputTarget){b.animationFunction(function(){a=b.calculatePercentageFromValue(b.value);b.moveSlider(a,false,true);if(b.showDisplay){b.display.removeCls("interface-slider_bigDisplay")}if(b.bigDisplayShowing){b.bigDisplayShowing=false}});b.endCallback(b.value)}b.wasInitialInputTarget=false},moveSliderToCoordinate:function(b,c){var a=this.calculatePercentageFromCoordinate(b);this.moveSlider(a,c)},calculatePercentageFromCoordinate:function(c){var a=Sys.UserInputUtils.getCoordinatesRelativeToElement(c,this.sliderWrapper.el).x,d=this.sliderWrapper.el.offsetWidth,b;if(a<0){b=0}else{if(a>d){b=1}else{b=a/d}}return b},moveSlider:function(c,g,f){var d=this,a=Animation.utils.toNthDecimalPlace((c*100),2)+"%",e=d.getValueFromPercentage(c),b=d.value;d.fill.el.style.width=a;d.handle.el.style.marginLeft=a;if(d.showDisplay){d.display.el.style.marginLeft=a}if(e!==b||f){d.setValue(e,g)}},getValueFromPercentage:function(a){var b=this.values,c=Math.round(a*(b.length-1));return b[c]},setValue:function(b,c){var a=this;a.value=b;if(a.showDisplay){a.display.el.textContent=b}if(!a.wasInitialInputTarget){a.moveSlider(a.calculatePercentageFromValue(b),c)}if(!c){a.callback(b)}},calculatePercentageFromValue:function(d){var b=this.values,c=b.indexOf(d),a=1/(b.length-1);return c*a},getValue:function(){return this.value},selectRenderFunction:function(){var a=this;a.animationFunction=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){clearTimeout(a.renderTimeout);a.renderTimeout=setTimeout(b,Math.round(1000/60))}).bind(window)}};Interface.utils.Slider=Sys.extend(Interface.utils.UserInputBase,Interface.utils.Slider,"Interface.utils.Slider");Sys.ns("Interface.utils");Interface.utils.VerticalSlider={CSS:{base:"interface-verticalSlider_base",disabled:"interface-slider_disabled",label:"interface-slider_label",sliderWrapper:"interface-verticalSlider_sliderWrapper",background:"interface-verticalSlider_background interface-soundSettings_sliderBar_background_uri",handle:"interface-verticalSlider_handle interface-soundSettings_sliderHandle_uri",fill:"interface-verticalSlider_fill interface interface-soundSettings_sliderBar_fill_uri",display:"utils_center interface-verticalSlider_display",verticalLine:"utils_center interface-slider_verticalLine"},ASCENDING_GROWTH:false,constructor:function(){Interface.utils.VerticalSlider.superclass.constructor.apply(this,arguments)},init:function(a){var c=this,b=(a.ascendingGrowth===true);c.ASCENDING_GROWTH=b;Interface.utils.VerticalSlider.superclass.init.apply(this,arguments);if(b){c.fill.el.style.top="auto";c.fill.el.style.bottom=0}},calculatePercentageFromCoordinate:function(c){var d=Sys.UserInputUtils.getCoordinatesRelativeToElement(c,this.sliderWrapper.el).y,a=this.sliderWrapper.el.offsetHeight,b;if(d<0){b=0}else{if(d>a){b=1}else{b=d/a}}if(this.ASCENDING_GROWTH){b=1-b}return b},moveSlider:function(c,g,f){var d=this,a=Animation.utils.toNthDecimalPlace((c*100),2)+"%",e=d.getValueFromPercentage(c),b=d.value;d.fill.el.style.height=a;a=Animation.utils.toNthDecimalPlace(((d.ASCENDING_GROWTH?1-c:c)*100),2)+"%";d.handle.el.style.top=a;if(e!==b||f){d.setValue(e,g)}}};Interface.utils.VerticalSlider=Sys.extend(Interface.utils.Slider,Interface.utils.VerticalSlider,"Interface.utils.VerticalSlider");Sys.ns("Interface.utils");Interface.utils.CanvasValueSelector={FONT_LABEL:"10px Verdana",FILLSTYLE_LABEL:"rgba( 238, 239, 206, 1 )",POSITION_OFFSET_LABEL:{x:0,y:-18},FONT_VALUE:"bold 12px Verdana",FILLSTYLE_VALUE:"rgba( 238, 239, 206, 1 )",POSITION_OFFSET_VALUE:{x:0,y:9},IMAGE_RIGHT_UP:"selectorPlusUp",IMAGE_RIGHT_OVER:"selectorPlusUp",IMAGE_RIGHT_CLICK:"selectorPlusUp",IMAGE_RIGHT_DISABLED:"selectorPlusDisabled",IMAGE_RIGHT_DOWN:"selectorPlusDown",IMAGE_RIGHT_HOVER:"selectorPlusOver",IMAGE_LEFT_UP:"selectorMinusUp",IMAGE_LEFT_OVER:"selectorMinusUp",IMAGE_LEFT_CLICK:"selectorMinusUp",IMAGE_LEFT_DISABLED:"selectorMinusDisabled",IMAGE_LEFT_DOWN:"selectorMinusDown",IMAGE_LEFT_HOVER:"selectorMinusOver",HANDLE_DIMENSIONS:{LEFT:{width:44,height:52},RIGHT:{width:44,height:52}},HANDLE_POSITION_OFFSET:{LEFT:{x:0,y:0},RIGHT:{x:88,y:0}},HANDLE_COLLISION_BOX:{LEFT:{xOffset:0,yOffset:0,width:44,height:52},RIGHT:{xOffset:0,yOffset:0,width:44,height:52}},BAR_BACKGROUND:"selectorBarBackground",BAR_BACKGROUND_DISABLED:"selectorBarBackgroundDisabled",BAR_FILL:"selectorBarFill",BAR_FILL_DISABLED:"selectorBarFillDisabled",BAR_DIMENSIONS:{background:{width:57,height:7},fill:{width:53,height:3}},BAR_POSITION_OFFSET:{background:{x:37,y:36},fill:{x:39,y:38}},SLIDER_BAR_INPUT_OFFSET:{start:{width:0,height:100},move:{width:80,height:100}},constructor:function(){Interface.utils.CanvasValueSelector.superclass.constructor.apply(this,arguments)},init:function(a){var b=this;Interface.utils.CanvasValueSelector.superclass.init.call(b,a);b.currentIndex=0;b.callback=a.callback;b.label=a.label;b.valueArray=a.values;b.valueNameArray=Sys.isDefined(a.valueNames)?a.valueNames:b.valueArray;b.basePosition={x:a.x,y:a.y};b.POSITION_OFFSET_LABEL=a.positionOffsetLabel||b.POSITION_OFFSET_LABEL;b.POSITION_OFFSET_VALUE=a.positionOffsetValue||b.POSITION_OFFSET_VALUE;if(a.rightButtonImage){b.IMAGE_RIGHT_UP=a.rightButtonImage.up||b.IMAGE_RIGHT_UP;b.IMAGE_RIGHT_DOWN=a.rightButtonImage.down||b.IMAGE_RIGHT_DOWN;b.IMAGE_RIGHT_HOVER=a.rightButtonImage.hover||b.IMAGE_RIGHT_HOVER;b.IMAGE_RIGHT_DISABLED=a.rightButtonImage.disabled||b.IMAGE_RIGHT_DISABLED}if(a.leftButtonImage){b.IMAGE_LEFT_UP=a.leftButtonImage.up||b.IMAGE_LEFT_UP;b.IMAGE_LEFT_DOWN=a.leftButtonImage.down||b.IMAGE_LEFT_DOWN;b.IMAGE_LEFT_HOVER=a.leftButtonImage.hover||b.IMAGE_LEFT_HOVER;b.IMAGE_LEFT_DISABLED=a.leftButtonImage.disabled||b.IMAGE_LEFT_DISABLED}b.HANDLE_POSITION_OFFSET=a.handlePositionOffset||b.HANDLE_POSITION_OFFSET;b.HANDLE_DIMENSIONS=a.handleDimensions||b.HANDLE_DIMENSIONS;b.HANDLE_COLLISION_BOX=a.handleCollisionBox||b.HANDLE_COLLISION_BOX;b.BAR_BACKGROUND=a.barBackground||b.BAR_BACKGROUND;b.BAR_BACKGROUND_DISABLED=a.barBackgroundDisabled||b.BAR_BACKGROUND_DISABLED;b.BAR_FILL=a.barFill||b.BAR_FILL;b.BAR_FILL_DISABLED=a.barFillDisabled||b.BAR_FILL_DISABLED;b.BAR_DIMENSIONS=a.barDimensions||b.BAR_DIMENSIONS;b.BAR_POSITION_OFFSET=a.barPositionOffset||b.BAR_POSITION_OFFSET;b.setupLayering(a);b.setupFontStyle(a);b.initAnimations();if(a.disabled===true){b.disable("CanvasValueSelector")}else{b.enable("CanvasValueSelector")}},setupLayering:function(a){var b=a.depth;this.layeringConfig={background:b,barBackground:b+1,value:b+2,barFrame:b+3,barFill:b+4,buttons:b+4,label:b+4}},setupFontStyle:function(a){var b=this;b.FILLSTYLE_LABEL=a.fillstyleLabel||b.FILLSTYLE_LABEL;b.FILLSTYLE_VALUE=a.fillstyleValue||b.FILLSTYLE_VALUE;b.FONT_LABEL=a.fontLabel||b.FONT_LABEL;b.FONT_VALUE=a.fontValue||b.FONT_VALUE},initAnimations:function(){var a=this;a.initAnimationLists();a.initCanvasButtons(a.HANDLE_POSITION_OFFSET,a.HANDLE_DIMENSIONS,a.HANDLE_COLLISION_BOX);a.initBar();a.initValueItem();a.initLabelItem()},initAnimationLists:function(){var e=["VALUE","BAR","LABEL"],b={};for(var c=-1,a=e.length;++c<a;){var d=new Animation.List({});b[e[c]]=d;Game.stage.view.addToRenderLoop(d)}this.animationLists=b},initCanvasButtons:function(a,c,b){var d=this;d.buttons={LEFT:d.createCanvasButton(a.LEFT,c.LEFT,b.LEFT,"LEFT"),RIGHT:d.createCanvasButton(a.RIGHT,c.RIGHT,b.RIGHT,"RIGHT")}},initBar:function(){var a=this;a.bar=new Interface.utils.CanvasStepSlider({images:{background:{enabled:a.BAR_BACKGROUND,disabled:a.BAR_BACKGROUND_DISABLED},fill:{enabled:a.BAR_FILL,disabled:a.BAR_FILL_DISABLED}},dimensions:{background:{x:a.basePosition.x+a.BAR_POSITION_OFFSET.background.x,y:a.basePosition.y+a.BAR_POSITION_OFFSET.background.y,width:a.BAR_DIMENSIONS.background.width,height:a.BAR_DIMENSIONS.background.height},fill:{x:a.basePosition.x+a.BAR_POSITION_OFFSET.fill.x,y:a.basePosition.y+a.BAR_POSITION_OFFSET.fill.y,width:a.BAR_DIMENSIONS.fill.width,height:a.BAR_DIMENSIONS.fill.height}},depth:{background:a.layeringConfig.barBackground,fill:a.layeringConfig.barFill},sliderInputOffsets:a.SLIDER_BAR_INPUT_OFFSET,values:a.valueArray,callback:a.onBarChanged.bind(a)});a.animationLists.BAR.add(a.bar.getContainer());a.updateBar()},initValueItem:function(){var a=this,b=Animation.utils.text.createText(0,a.FONT_VALUE,0,[{fillStyle:a.FILLSTYLE_VALUE,drawType:"fill"}]);a.valueItem=new Animation.Item({top:0,left:0,width:0,height:0,depth:a.layeringConfig.value,image:b,customProps:{ctx:b.getContext("2d")}});a.animationLists.VALUE.add(a.valueItem);a.updateValueItem(a.valueArray[a.currentIndex])},initLabelItem:function(){var a=this,f=Animation.utils.text.createText(a.label,a.FONT_LABEL,0,[{fillStyle:a.FILLSTYLE_LABEL,drawType:"fill"}]),e=a.HANDLE_DIMENSIONS.RIGHT.width+a.HANDLE_POSITION_OFFSET.RIGHT.x,d=a.POSITION_OFFSET_LABEL,c=((a.basePosition.x+(e/2))-(f.width/2))+d.x,b=a.basePosition.y+d.y;a.labelItem=new Animation.Item({top:b,left:c,width:f.width,height:f.height,depth:a.layeringConfig.label,image:f});a.animationLists.LABEL.add(a.labelItem)},createCanvasButton:function(a,d,b,c){var e=this;return new Interface.utils.CanvasButton({buttonLayoutParameters:{x:e.basePosition.x+a.x,y:e.basePosition.y+a.y,width:d.width,height:d.height,depth:e.layeringConfig.buttons},dimensions:{x:e.basePosition.x+a.x+b.xOffset,y:e.basePosition.y+a.y+b.yOffset,width:b.width,height:b.height},buttonImages:{up:e["IMAGE_"+c+"_UP"],down:e["IMAGE_"+c+"_DOWN"],hover:e["IMAGE_"+c+"_HOVER"],disabled:e["IMAGE_"+c+"_DISABLED"]},clickCallback:e.click.bind(e,c)})},click:function(a){var b=this,c=b.getValue(a);if(this.enabled){b.updateValueItem(c);b.callback(c)}},getValue:function(a){var b=this;b.currentIndex=(a==="LEFT")?b.currentIndex-=1:b.currentIndex+=1;if(b.currentIndex<0){b.currentIndex=0}else{if(b.currentIndex>b.valueArray.length-1){b.currentIndex=b.valueArray.length-1}}return b.valueArray[b.currentIndex]},updateValueItem:function(e){var b=this,h=b.valueItem.prop,a=h.customProps.ctx,d=b.valueNameArray[b.valueArray.indexOf(e)],c=Animation.utils.text.measureText(d,b.FONT_VALUE,0,a),g=b.HANDLE_DIMENSIONS.RIGHT.width+b.HANDLE_POSITION_OFFSET.RIGHT.x,f=b.POSITION_OFFSET_VALUE;h.image.width=c.width;h.image.height=c.height;h.width=c.width;h.height=c.height;h.top=b.basePosition.y+f.y;h.left=((b.basePosition.x+(g/2))-(h.image.width/2))+f.x;a.clearRect(0,0,h.width,h.height);Animation.utils.text.performOperations(d,b.FONT_VALUE,0,c.height/2,[{fillStyle:b.FILLSTYLE_VALUE,drawType:"fill"}],a)},updateBar:function(){var a=this;a.bar.setValue(a.valueArray[a.currentIndex],true)},onBarChanged:function(a){this.update(a);this.callback(a)},enable:function(b){var a=this;a.enabled=true;if(Sys.isDefined(this.animationLists)&&Sys.isDefined(a.buttons)){a.enableLeftButton(b);a.enableRightButton(b);a.bar.enable(b)}},disable:function(b){var a=this;if(Sys.isDefined(a.animationLists)&&Sys.isDefined(a.buttons)){a.bar.disable(b);a.disableLeftButton(b);a.disableRightButton(b);a.enabled=false}},enableLeftButton:function(b){var a=this;if(Sys.isDefined(a.buttons)){a.buttons.LEFT.enable(b)}},disableLeftButton:function(b){var a=this;if(Sys.isDefined(a.buttons)){a.buttons.LEFT.disable(b)}},enableRightButton:function(b){var a=this;if(Sys.isDefined(a.buttons)){a.buttons.RIGHT.enable(b)}},disableRightButton:function(b){var a=this;if(Sys.isDefined(a.buttons)){a.buttons.RIGHT.disable(b)}},hide:function(b){var a=this;Sys.iterate(a.animationLists,function(c,d){d.stop()});a.buttons.LEFT.hide(b);a.buttons.RIGHT.hide(b)},show:function(b){var a=this;Sys.iterate(a.animationLists,function(c,d){d.play()});a.buttons.LEFT.show(b);a.buttons.RIGHT.show(b)},update:function(e){var c=this,b=this.valueArray,a=b.indexOf(e),d="CanvasValueSelector";if(a===0){c.disableLeftButton(d);c.enableRightButton(d)}else{if(a===b.length-1){c.disableRightButton(d);c.enableLeftButton(d)}else{c.enableLeftButton(d);c.enableRightButton(d)}}if(Sys.isDefined(b[a])){c.currentIndex=a;c.updateValueItem(b[a]);c.updateBar()}}};Interface.utils.CanvasValueSelector=Sys.extend(Interface.utils.UserInputBase,Interface.utils.CanvasValueSelector,"Interface.utils.CanvasValueSelector");Sys.ns("Interface");Interface.AbstractButton={STATES:["UP","DOWN","HOVER","CLICK"],SOUND_UP:"buttonUp",SOUND_DOWN:"buttonDown",SOUND_CLICK:"buttonClick",SOUND_HOVER:"buttonHover",ID:"button",DEFAULT_USER_INPUT_EVENTS:{started:"notify:userInputManager.userInputStarted",ended:"notify:userInputManager.userInputEnded",move:"notify:userInputManager.userInputMove",hover:"notify:userInputManager.userInputHover"},constructor:function(a){Interface.AbstractButton.superclass.constructor.apply(this,arguments);this.init(a)},enable:function(a){this.removeProperty("disabled",a);this.tryStartListeningToUserInput()},disable:function(a){this.addProperty("disabled",a);this.stopListeningToUserInput()},isEnabled:function(){return !this.hasProperty("disabled")},show:function(a){this.removeProperty("hidden",a);this.tryStartListeningToUserInput()},hide:function(a){this.addProperty("hidden",a);this.stopListeningToUserInput()},isHidden:function(){return !this.hasProperty("hidden")},init:function(a){var b=this;b.dimensions=a.dimensions;b.properties={};if(Sys.isDefined(a.id)){b.ID=a.id}if(Sys.isDefined(a.upCallback)){b.upCallback=a.upCallback}else{b.upCallback=function(){}}if(Sys.isDefined(a.downCallback)){b.downCallback=a.downCallback}else{b.downCallback=function(){}}if(Sys.isDefined(a.overCallback)){b.overCallback=a.overCallback}else{b.overCallback=function(){}}if(Sys.isDefined(a.clickCallback)){b.clickCallback=a.clickCallback}else{b.clickCallback=function(){}}if(Sys.isDefined(a.hoverCallback)){b.hoverCallback=a.hoverCallback}else{b.hoverCallback=function(){}}b.userInputEvents=b.DEFAULT_USER_INPUT_EVENTS;if(Sys.isDefined(a.exclusiveUserInput)){b.userInputEvents={started:"notify:userInputManager."+a.exclusiveUserInput+"ExclusiveStart",ended:"notify:userInputManager."+a.exclusiveUserInput+"ExclusiveEnd",move:"notify:userInputManager."+a.exclusiveUserInput+"ExclusiveMove",hover:"notify:userInputManager."+a.exclusiveUserInput+"ExclusiveKeyUp"}}if(Sys.isDefined(a.userInputEvents)){Sys.iterate(a.userInputEvents,function(c,d){b.userInputEvents[c]=d})}b.startListeningToUserInput();b.state="up";if(Sys.isDefined(a.sounds)){b.setupSounds(a.sounds)}if(Sys.isDefined(Services.trigger)){b.registerTriggers()}},setupSounds:function(b){var e=this,c=e.STATES;for(var d=-1,a=c.length;++d<a;){var f=c[d].toLowerCase();if(Sys.isDefined(b[f])){e["SOUND_"+e[c[d]]]=b.state}}},registerTriggers:function(){var a=this.ID;Services.trigger.registerTrigger("notify:"+a+".up",this,"When the button returns to the up state.");Services.trigger.registerTrigger("notify:"+a+".hover",this,"When the button is hovered.");Services.trigger.registerTrigger("notify:"+a+".over",this,"When the button hovered but wasn't the initial input target.");Services.trigger.registerTrigger("notify:"+a+".down",this,"When the button is pressed down.");Services.trigger.registerTrigger("notify:"+a+".click",this,"When the button is clicked.")},up:function(){var a=this;if(a.state!=="up"){a.state="up";a.upCallback.call(a);a.fireEvent("request:audioPlayer.play",{name:a.SOUND_UP});a.fireEvent("notify:"+a.ID+".up")}},click:function(){var a=this;a.clickCallback.call(a);a.fireEvent("request:audioPlayer.play",{name:a.SOUND_CLICK});a.fireEvent("notify:"+a.ID+".click")},over:function(){var a=this;if(a.state!=="over"){a.overCallback.call(a);a.state="over";a.fireEvent("notify:"+a.ID+".over")}},down:function(){var a=this;if(a.state!=="down"){a.downCallback.call(a);a.state="down";a.fireEvent("request:audioPlayer.play",{name:a.SOUND_DOWN});a.fireEvent("notify:"+a.ID+".down")}},hover:function(a){var b=this;if(b.state!=="hover"){b.hoverCallback.call(b);b.state="hover";if(!a){b.fireEvent("request:audioPlayer.play",{name:b.SOUND_HOVER})}b.fireEvent("notify:"+b.ID+".hover",a)}},userInputStart:function(c){var b=this,a=b.isInputTarget(c);if(a){b.down()}b.active=a;b.wasInitialInputTarget=a},userInputHover:function(c){var b=this,a=b.isInputTarget(c);if(a){b.hover()}else{if(b.state!=="up"){b.up()}}},userInputEnd:function(b){var a=this;if(a.isInputTarget(b)&&a.wasInitialInputTarget){a.wasInitialInputTarget=false;a.hover(true);a.click()}else{if(a.active){a.up()}}},userInputMove:function(c){var b=this,a=b.isInputTarget(c);if(a){if(b.wasInitialInputTarget){b.down()}else{b.over()}b.active=true}else{if(b.wasInitialInputTarget||b.active){b.up()}}},tryStartListeningToUserInput:function(){if(!this.hasProperty("disabled")&&!this.hasProperty("hidden")){this.startListeningToUserInput()}},startListeningToUserInput:function(){var a=this;if(Sys.isDefined(a.userInputEvents.started)){a.addListener(a.userInputEvents.started,a.userInputStart)}if(Sys.isDefined(a.userInputEvents.started)){a.addListener(a.userInputEvents.ended,a.userInputEnd)}if(Sys.isDefined(a.userInputEvents.move)){a.addListener(a.userInputEvents.move,a.userInputMove)}if(Sys.isDefined(a.userInputEvents.hover)){a.addListener(a.userInputEvents.hover,a.userInputHover)}},stopListeningToUserInput:function(){var a=this;if(Sys.isDefined(a.userInputEvents.started)){a.removeListener(a.userInputEvents.started)}if(Sys.isDefined(a.userInputEvents.ended)){a.removeListener(a.userInputEvents.ended)}if(Sys.isDefined(a.userInputEvents.move)){a.removeListener(a.userInputEvents.move)}if(Sys.isDefined(a.userInputEvents.hover)){a.removeListener(a.userInputEvents.hover)}},isInputTarget:function(c){var a=this,b=Sys.UserInputUtils.getCoordinatesRelativeToElement(c,Game.stage.getGameContainer());return a.isDOMElement(a.dimensions)?Sys.UserInputUtils.isCoordinateTarget(a.dimensions,c):Sys.UserInputUtils.isUserInputInSegment(b,a.dimensions)},isDOMElement:function(a){return a.nodeType===1},hasProperty:function(b){var a=this.properties[b];return Sys.isDefined(a)&&a.length>0},addProperty:function(d,c){var b=this.properties,a=false;if(!Sys.isDefined(b[d])){b[d]=[c];a=true}else{if(!b[d].contains(c)){a=b[d].length===0;b[d].push(c)}}if(a){this.update()}},removeProperty:function(c,b){var a=this.properties[c];if(Sys.isDefined(a)&&a.contains(b)){a.splice(a.indexOf(b),1);if(a.length===0){this.update()}}},update:function(){}};Interface.AbstractButton=Sys.extend(Sys.Observable,Interface.AbstractButton,"Interface.AbstractButton");Sys.ns("Interface.utils");Interface.utils.AbstractUserInputBase={constructor:function(a){Interface.utils.UserInputBase.superclass.constructor.apply(this,arguments);this.init(a)},enable:function(){this.enabled=true;this.startListeningToUserInput()},disable:function(){this.enabled=false;this.stopListeningToUserInput()},isEnabled:function(){return this.enabled},init:function(a){var b=this;b.id=a.id;if(a.enabled){b.enable()}else{b.disable()}},onUserInputStart:function(){},onUserInputEnd:function(){},startListeningToUserInput:function(){this.on({"notify:userInputManager.userInputStarted":this.onUserInputStart,"notify:userInputManager.userInputEnded":this.onUserInputEnd})},stopListeningToUserInput:function(){this.removeListener("notify:userInputManager.userInputStarted");this.removeListener("notify:userInputManager.userInputEnded")}};Interface.utils.AbstractUserInputBase=Sys.extend(Sys.Observable,Interface.utils.AbstractUserInputBase,"Interface.utils.AbstractUserInputBase");Sys.ns("Interface.utils");Interface.utils.AbstractSlider={constructor:function(a){var b=this;Interface.utils.AbstractControlList.superclass.constructor.apply(b,arguments);b.callback=a.callback;b.wasInitialInputTarget=false;b.properties={};b.setUpContent(a)},setUpContent:function(){},enable:function(a){this.removeProperty("disabled",a);this.tryStartListeningToUserInput()},disable:function(a){this.addProperty("disabled",a);this.stopListeningToUserInput()},tryStartListeningToUserInput:function(){if(!this.hasProperty("disabled")&&!this.hasProperty("hidden")){this.startListeningToUserInput()}},startListeningToUserInput:function(){var a=this;a.on({"notify:userInputManager.userInputStarted":a.userInputStart,"notify:userInputManager.userInputEnded":a.userInputEnd,"notify:userInputManager.userInputMove":a.userInputMove})},stopListeningToUserInput:function(){var a=this;a.removeListener("notify:userInputManager.userInputStarted");a.removeListener("notify:userInputManager.userInputEnded");a.removeListener("notify:userInputManager.userInputMove")},hasProperty:function(b){var a=this.properties[b];return Sys.isDefined(a)&&a.length>0},addProperty:function(d,c){var b=this.properties,a=false;if(!Sys.isDefined(b[d])){b[d]=[c];a=true}else{if(!b[d].contains(c)){a=b[d].length===0;b[d].push(c)}}if(a){this.update()}},removeProperty:function(c,b){var a=this.properties[c];if(Sys.isDefined(a)&&a.contains(b)){a.splice(a.indexOf(b),1);if(a.length===0){this.update()}}},userInputMove:function(b){var a=this;if(a.wasInitialInputTarget){a.movedTo(b)}},userInputEnd:function(b){var a=this;if(a.wasInitialInputTarget&&a.isInputTarget(b)){a.clickedAt(b)}},userInputStart:function(b){var a=this;a.wasInitialInputTarget=a.isInputTarget(b)},update:function(){},setValue:function(){},clickedAt:function(){},movedTo:function(){},isInputTarget:function(){}};Interface.utils.AbstractSlider=Sys.extend(Sys.Observable,Interface.utils.AbstractSlider,"Interface.utils.AbstractSlider");Sys.ns("Interface.utils");Interface.utils.AbstractOptionScroller={constructor:function(){Interface.utils.AbstractOptionScroller.superclass.constructor.apply(this,arguments)},onUserInputStart:function(a){this.initialInputTarget=this.getInputTarget(a)},onUserInputEnd:function(d){var b=this,a=b.getInputTarget(d),c=b.initialInputTarget;if(Sys.isDefined(c)&&a===c){b.scroll(a)}else{if(Sys.isObj(a)&&Sys.isObj(c)&&a.value===c.value){b.callback(a)}else{b.initialInputTarget=undefined}}},init:function(a){Interface.utils.AbstractOptionScroller.superclass.init.apply(this,arguments);this.callback=a.callback},getInputTarget:function(a){},scroll:function(a){}};Interface.utils.AbstractOptionScroller=Sys.extend(Interface.utils.AbstractUserInputBase,Interface.utils.AbstractOptionScroller,"Interface.utils.AbstractOptionScroller");Sys.ns("Interface.utils");Interface.utils.AbstractInputField={constructor:function(){Interface.utils.AbstractInputField.superclass.constructor.apply(this,arguments)},init:function(a){Interface.utils.AbstractInputField.superclass.init.apply(this,arguments);this.callback=a.callback},onKeyUp:function(a){var b=this,c;if(b.enabled&&b.active){c=b.getValue(a);b.setValue(c);b.callback(c)}},getValue:function(a){},setValue:function(a){}};Interface.utils.AbstractInputField=Sys.extend(Interface.utils.AbstractUserInputBase,Interface.utils.AbstractInputField,"Interface.utils.AbstractInputField");Sys.ns("Interface.utils");Interface.utils.AbstractControlList={constructor:function(a){var b=this;Interface.utils.AbstractControlList.superclass.constructor.apply(b,arguments);b.callback=a.callback;b.model=new Core.Model({name:a.id+"ControlListModel"});b.controls={};b.setUpContent(a)},setUpContent:function(a){},getContainer:function(){},getControl:function(a){return this.controls[a]}};Interface.utils.AbstractControlList=Sys.extend(Sys.Observable,Interface.utils.AbstractControlList,"Interface.utils.AbstractControlList");Sys.ns("Interface.utils");Interface.utils.AbstractCheckBoxWithInput={constructor:function(a){var b=this;Interface.utils.AbstractCheckBoxWithInput.superclass.constructor.apply(b,arguments);b.callback=a.callback;b.model=new Core.Model({name:a.id+"CheckBoxWithInputModel"});b.setUpContent(a)},setUpContent:function(){},getContainer:function(){}};Interface.utils.AbstractCheckBoxWithInput=Sys.extend(Sys.Observable,Interface.utils.AbstractCheckBoxWithInput,"Interface.utils.AbstractCheckBoxWithInput");Sys.ns("Interface.utils");Interface.utils.CanvasButton={constructor:function(a){Interface.utils.CanvasButton.superclass.constructor.apply(this,arguments);this.setUpAnimations(a)},down:function(){Interface.utils.CanvasButton.superclass.down.apply(this,arguments);this.setActiveAnimation(this.downAnimation)},up:function(){Interface.utils.CanvasButton.superclass.up.apply(this,arguments);this.setActiveAnimation(this.upAnimation)},hover:function(){Interface.utils.CanvasButton.superclass.hover.apply(this,arguments);this.setActiveAnimation(this.hoverAnimation)},setActiveAnimation:function(a){this.activeAnimation=a;this.update()},update:function(){var a=this;a.animationList.stop();if(!a.hasProperty("hidden")){if(a.hasProperty("disabled")){a.textLabelAnimation.prop.ownOpacity=0.32;a.animationList.play(a.disabledAnimation)}else{a.textLabelAnimation.prop.ownOpacity=1;a.animationList.play(a.activeAnimation)}a.animationList.play(a.textLabelAnimation)}},isInputTarget:function(c){var a=this,b=Sys.UserInputUtils.getCoordinatesRelativeToElement(c,Game.stage.getGameContainer());return Sys.UserInputUtils.isUserInputInSegment(b,a.dimensions)&&Sys.UserInputUtils.isCoordinateTarget(a.canvasElement,c)},init:function(a){Interface.utils.CanvasButton.superclass.init.apply(this,arguments);this.canvasElement=(a.canvasElement)?a.canvasElement:document.getElementById("canvasAnimationManager")},setUpAnimations:function(b){var d=this,e=new Animation.List({}),g=b.buttonImages,f,c,a=b.buttonLabel;["up","down","hover","disabled"].forEach(function(h){f=d.verifyImage(g[h]);c=new Animation.Item(d.createBaseConfig(f,b.buttonLayoutParameters));d[h+"Animation"]=c;e.add(c)});if(Sys.isDefined(a)){d.textLabelAnimation=d.createTextLabel(a)}else{d.textLabelAnimation=new Animation.Item({})}e.add(d.textLabelAnimation);e.stop();Game.stage.view.addToRenderLoop(e);d.animationList=e;d.setActiveAnimation(d.upAnimation)},verifyImage:function(a){if(a.indexOf("#")===0||a.indexOf("rgba")===0){return this.createButtonImage(a)}return a},createTextLabel:function(i){var g=this,f=i.text,c=i.offsetY||0,e=i.offsetX||0,j=0,k=i.width,d=i.height,b=Animation.utils.getInMemoryCanvas(k,d),a=Services.languageManager.hasText(f)?Services.languageManager.getText(f):f;if(i.alignment==="center"){b.ctx.textAlign=i.alignment;j=k/2}Animation.utils.text.wrapCanvasText(a,i.font,j,0,k,i.lineHeight,[{fillStyle:i.color,drawType:"fill"}],b.ctx,true,i.breakOn);return new Animation.Item({width:k,height:d,left:g.dimensions.x+Math.round(Math.abs((k-g.dimensions.width)/2))+e,top:g.dimensions.y+Math.round(Math.abs((d-g.dimensions.height)/2))+c,depth:i.depth,image:b.canvas})},createBaseConfig:function(c,b){var a=Sys.isDefined(b)?b:this.dimensions;return{width:a.width,height:a.height,left:a.x,top:a.y,depth:a.depth,image:c}},createButtonImage:function(a){var d=this,b=document.createElement("canvas"),c;b.width=d.dimensions.width;b.height=d.dimensions.height;c=b.getContext("2d");c.fillStyle=a;c.fillRect(0,0,d.dimensions.width,d.dimensions.height);return b}};Interface.utils.CanvasButton=Sys.extend(Interface.AbstractButton,Interface.utils.CanvasButton,"Interface.utils.CanvasButton");Sys.ns("Interface.utils");Interface.utils.CanvasStepSlider={DEFAULT_CANVAS_ELEMENT_ID:"canvasAnimationManager",constructor:function(a){var b=this;b.canvasElement=Sys.isDefined(a.canvasElement)?a.canvasElement:document.getElementById(b.DEFAULT_CANVAS_ELEMENT_ID);b.dimensions=a.dimensions;b.depth=a.depth;b.images=a.images;b.valueArray=a.values;b.sliderInputOffsets=a.sliderInputOffsets||{start:{width:0,height:0},move:{width:0,height:0},end:{width:0,height:0}};if(Sys.isDefined(a.collisionDimensions)){b.collisionDimensions=a.collisionDimensions}else{b.collisionDimensions=a.dimensions.background}b.stepWidth=b.dimensions.fill.width/b.valueArray.length;b.currentIndex=0;Interface.utils.CanvasStepSlider.superclass.constructor.apply(b,arguments)},setUpAnimations:function(){var a=this;a.animationList=new Animation.List({});a.backgroundAnimation=a.createItem(a.images.background.enabled,a.dimensions.background,a.depth.background);a.fillAnimation=a.createItem(a.images.fill.enabled,a.dimensions.fill,a.depth.fill);a.animationList.add(a.backgroundAnimation);a.animationList.add(a.fillAnimation);a.animationList.play();a.update()},getContainer:function(){return this.animationList},createItem:function(b,a,c){return new Animation.CanvasAnimationItem({width:a.width,height:a.height,top:a.y,left:a.x,depth:c,image:b})},setUpContent:function(a){this.setUpAnimations(a)},localCoordinates:function(a){return Sys.UserInputUtils.getCoordinatesRelativeToElement(a,Game.stage.getGameContainer())},relativeCoordinates:function(c){var a=this,b=a.localCoordinates(c);return{x:b.x-a.collisionDimensions.x,y:b.y-a.collisionDimensions.y}},isInputTarget:function(f,e){var b=this,d=b.localCoordinates(f),a=e||{width:0,height:0},c={x:b.collisionDimensions.x-a.width/2,y:b.collisionDimensions.y-a.height/2,width:b.collisionDimensions.width+a.width,height:b.collisionDimensions.height+a.height};return Sys.UserInputUtils.isUserInputInSegment(d,c)&&Sys.UserInputUtils.isCoordinateTarget(b.canvasElement,f)},userInputStart:function(b){var a=this;a.wasInitialInputTarget=a.isInputTarget(b,a.sliderInputOffsets.start);a.on({"notify:userInputManager.userInputMove":a.userInputMove})},userInputMove:function(b){var a=this;if(a.wasInitialInputTarget){if(a.isInputTarget(b,a.sliderInputOffsets.move)){a.movedTo(b)}else{a.removeListener("notify:userInputManager.userInputMove")}}},userInputEnd:function(b){var a=this;if(a.wasInitialInputTarget&&a.isInputTarget(b,a.sliderInputOffsets.end)){a.clickedAt(b)}},update:function(){var a=this;a.fillAnimation.prop.width=a.stepWidth+(a.stepWidth*a.currentIndex);if(!a.hasProperty("hidden")){if(a.hasProperty("disabled")){a.backgroundAnimation.prop.image=a.images.background.disabled;a.fillAnimation.prop.image=a.images.fill.disabled}else{a.backgroundAnimation.prop.image=a.images.background.enabled;a.fillAnimation.prop.image=a.images.fill.enabled}}},setValue:function(d,a){var c=this,b=c.valueArray.indexOf(d);if(b>=0&&Sys.isDefined(c.valueArray[b])){c.currentIndex=b;c.update();if(!a){c.sendValueUpdate()}}},getValue:function(){var a=this;return a.valueArray[a.currentIndex]},sendValueUpdate:function(){var a=this,b=a.getValue();a.callback(b)},updateFromCoordinates:function(d){var c=this,a=Math.floor(d.x/c.stepWidth),b=c.valueArray.length-1;if(a<0){a=0}else{if(a>b){a=b}}if(a!==c.currentIndex){c.currentIndex=a;c.update();c.sendValueUpdate()}},clickedAt:function(c){var a=this,b=a.relativeCoordinates(c);a.updateFromCoordinates(b)},movedTo:function(c){var a=this,b=a.relativeCoordinates(c);a.updateFromCoordinates(b)}};Interface.utils.CanvasStepSlider=Sys.extend(Interface.utils.AbstractSlider,Interface.utils.CanvasStepSlider,"Interface.utils.CanvasStepSlider");Sys.ns("Interface.utils");Interface.utils.DOMControlList={constructor:function(a){Interface.utils.DOMControlList.superclass.constructor.apply(this,arguments);this.callback=a.callback},setUpContent:function(c){var f=this,d,b=c.controls,a,g,e;f.container=new Sys.Element({id:c.id,tag:"ul",cls:"",renderTo:"gameWrapper"});for(d=0;d<b.length;d++){a=b[d];e=f.container.add(new Sys.Element({id:c.id+"_"+a.id,tag:"li"}));if(!Sys.isDefined(f.controls[a.id])){f.controls[a.id]=[]}if(a.type==="checkbox"){if(Sys.isDefined(a.withInput)){g=f.setupCheckBoxWithInput(a.id,a.label,a.withInput);f.controls[a.id].push(g);e.add(g.getContainer())}else{g=f.setupCheckBox(a.id,a.label);f.controls[a.id].push(g);e.add(g.getContainer())}f.model.storeData(a.id,false)}}},setupCheckBoxWithInput:function(d,a,c){var b=this;return new Interface.utils.DOMCheckBoxWithInput({id:d,label:b.getTranslatedText(a),inputConfig:c,callback:b.onControlChanged.bind(b)})},onControlChanged:function(b,a){this.model.storeData(b,a);this.callback(b,a)},setupCheckBox:function(c,a){var b=this;return new Interface.utils.DOMCheckBox({id:c,title:b.getTranslatedText(a),enabled:true,callback:b.onControlChanged.bind(b,c)})},getContainer:function(){return this.container},update:function(c,b){var a=this.controls[c];this.model.storeData(c,b);if(Sys.isDefined(a)){Sys.each(a,function(d){d.setValue(b)})}},hide:function(b){var a=this.controls[b];if(Sys.isDefined(a)){Sys.each(a,function(c){c.getContainer().el.parentElement.style.display="none"})}},show:function(b){var a=this.controls[b];if(Sys.isDefined(a)){Sys.each(a,function(c){c.getContainer().el.parentElement.style.display=""})}},disable:function(b){var a=this.controls[b];if(Sys.isDefined(a)){Sys.each(a,function(c){c.disable()})}},enable:function(b){var a=this.controls[b];if(Sys.isDefined(a)){Sys.each(a,function(c){c.enable()})}},getTranslatedText:function(a){return Services.languageManager.hasText(a)?Services.languageManager.getText(a):a}};Interface.utils.DOMControlList=Sys.extend(Interface.utils.AbstractControlList,Interface.utils.DOMControlList,"Interface.utils.DOMControlList");Sys.ns("Interface.utils");Interface.utils.DOMCheckBoxWithInput={DEFAULT_INPUT_TYPE:"money",DEFAULT_INPUT_FILTER:/[^\d]/g,DEFAULT_CLEAR_ON_FOCUS:false,DEFAULT_CHECKBOX_VALUE:false,DEFAULT_INPUT_VALUE:"",NOT_CHECKED_VALUE:false,NOT_DEFINED_INPUT_VALUE:"",constructor:function(a){var b=this;b.checkBox=undefined;b.input=undefined;Interface.utils.DOMCheckBoxWithInput.superclass.constructor.apply(b,arguments)},setUpContent:function(a){var b=this;b.id=a.id;b.checkBoxId=b.id+"CheckBox";b.inputId=b.id+"Input";b.container=new Sys.Element({id:b.id,tag:"div",cls:""});b.checkBox=b.setUpCheckBox(a.label);b.input=b.setUpInput(a.inputConfig);b.container.add(b.checkBox.getContainer());b.container.add(b.input.getContainer())},getContainer:function(){return this.container},setValue:function(d){var c=this,b,a;if(d===false){b=false;a=""}else{b=true;a=d}c.setCheckBoxValue(b);c.setInputValue(a)},getValue:function(){var c=this,b=c.model.readData(c.checkBoxId),a=c.model.readData(c.inputId),d;if(b&&a!==c.NOT_DEFINED_INPUT_VALUE){d=a}else{d=c.NOT_CHECKED_VALUE}return d},enable:function(){this.checkBox.enable();this.input.enable()},disable:function(){this.checkBox.disable();this.input.disable()},setUpCheckBox:function(a){var b=this,c=b.checkBoxId;b.model.storeData(c,b.DEFAULT_CHECKBOX_VALUE);return new Interface.utils.DOMCheckBox({id:c,enabled:true,title:a,callback:b.onCheckBoxToggled.bind(b)})},setUpInput:function(a){var c=this,d=c.inputId,b=Sys.isDefined(a.type)?a.type:c.DEFAULT_INPUT_TYPE;c.model.storeData(d,c.DEFAULT_INPUT_VALUE);return new Interface.utils.DOMInputField({id:d,enabled:true,label:Sys.isDefined(a.label)?a.label:"",callback:c.onInputFieldEdited.bind(c,b),clearOnFocus:Sys.isDefined(a.clearOnFocus)?a.clearOnFocus:c.DEFAULT_CLEAR_ON_FOCUS,inputFilter:Sys.isDefined(a.inputFilter)?a.inputFilter:c.DEFAULT_INPUT_FILTER,blurCallback:function(){setTimeout(function(){var e=c.model.readData(d);if(e===c.NOT_DEFINED_INPUT_VALUE){c.setCheckBoxValue(false)}},0)}})},onCheckBoxToggled:function(b){var a=this,c=a.checkBoxId;a.model.storeData(c,b);if(b){a.input.setActive(true)}a.sendValueUpdate()},onInputFieldEdited:function(b,d){var c=this,e=c.inputId,a;if(d===""){a=c.NOT_DEFINED_INPUT_VALUE}else{if(b==="money"){a=Math.floor(Number(d)*100);a=isNaN(a)?c.NOT_DEFINED_INPUT_VALUE:a}else{a=d}}if(a!==c.NOT_DEFINED_INPUT_VALUE){c.setCheckBoxValue(true)}c.model.storeData(e,a);c.sendValueUpdate()},sendValueUpdate:function(){var a=this,b=a.getValue();a.callback(a.id,b)},setCheckBoxValue:function(b){var a=this;a.checkBox.setValue(b);a.model.storeData(a.checkBoxId,b)},setInputValue:function(b){var a=this;a.input.setValue(b);a.model.storeData(a.inputId,b)}};Interface.utils.DOMCheckBoxWithInput=Sys.extend(Interface.utils.AbstractCheckBoxWithInput,Interface.utils.DOMCheckBoxWithInput,"Interface.utils.DOMControlList");Sys.ns("Interface.utils");Interface.utils.DOMCheckBox={CSS:{base:"interface-checkBox_base",disabled:"disabled",label:"interface-checkBox_label",button_wrapper:"interface-checkBox_box",button_background:"interface-checkBox_background",button_handle:"interface-checkBox_handle",loadAnimation:""},constructor:function(){Interface.utils.DOMCheckBox.superclass.constructor.apply(this,arguments)}};Interface.utils.DOMCheckBox=Sys.extend(Interface.utils.ToggleSwitch,Interface.utils.DOMCheckBox,"Interface.utils.DOMCheckBox");Sys.ns("Interface.utils");Interface.utils.DOMInputField={CSS:{base:"interface-inputField_base",label:"interface-inputField_label",input:"interface-inputField_input"},constructor:function(){Interface.utils.DOMInputField.superclass.constructor.apply(this,arguments)},onUserInputStart:function(a){this.wasInitialInputTarget=Sys.UserInputUtils.isCoordinateTarget(this.container.el,a)},onUserInputEnd:function(b){var a=this.wasInitialInputTarget&&Sys.UserInputUtils.isCoordinateTarget(this.container.el,b);this.setActive(a)},enable:function(){Interface.utils.DOMInputField.superclass.enable.apply(this,arguments);this.container.removeCls("disabled");this.input.el.disabled=false},disable:function(){Interface.utils.DOMInputField.superclass.enable.apply(this,arguments);this.container.addCls("disabled");this.input.el.disabled=true},getContainer:function(){return this.container},init:function(a){this.setUpDOMStructure(a);Interface.utils.DOMInputField.superclass.init.apply(this,arguments);this.clearOnFocus=a.clearOnFocus},setUpDOMStructure:function(b){var c=this,a;if(Sys.isDefined(b.CSS)){a=Sys.applyPropertiesIf(Sys.applyProperties({},b.CSS),c.CSS)}else{a=c.CSS}c.container=new Sys.Element({id:b.id,tag:"div",cls:a.base});if(Sys.isDefined(b.label)){c.label=c.container.add(new Sys.Element({id:b.id+"_label",tag:"span",cls:a.label,textContent:b.label}))}c.input=c.container.add(new Sys.Element({id:b.id+"_input",tag:"input",cls:a.input}));c.id=Sys.isDefined(b.id)?b.id:"DOMInputField";c.input.el.onkeyup=c.onKeyUp.bind(c,b.inputFilter);c.input.el.onfocus=c.onFocusChanged.bind(c,true);c.input.el.onblur=c.onFocusChanged.bind(c,false);if(Sys.isDefined(b.blurCallback)){c.blurCallback=b.blurCallback}else{c.blurCallback=function(){}}},setActive:function(b){var a=this;a.active=b;if(b&&a.enabled){a.container.addCls("active");a.input.el.focus();if(a.clearOnFocus){a.input.el.value="";a.onKeyUp()}}else{a.container.removeCls("active");a.input.el.blur()}},getValue:function(a){if(a){return this.input.el.value.replace(a,"")}else{return this.input.el.value}},setValue:function(b){var a=this;if(a.input.el.value!==b){a.input.el.value=b}},onFocusChanged:function(b){var a=this;if(b){a.fireEvent("request:keyboardManager.addProperty","disabled",a.id)}else{a.fireEvent("request:keyboardManager.removeProperty","disabled",a.id);a.blurCallback()}}};Interface.utils.DOMInputField=Sys.extend(Interface.utils.AbstractInputField,Interface.utils.DOMInputField,"Interface.utils.DOMInputField");Sys.ns("Interface.utils");Interface.utils.DOMOptionScroller={CSS:{base:"interface-DOMOptionScroller_base",buttonBase:"interface-DOMOptionScroller_buttonBase",buttonUp:"interface-DOMOptionScroller_buttonUp interface-DOMOptionScroller_buttonUp_uri",buttonDown:"interface-DOMOptionScroller_buttonDown interface-DOMOptionScroller_buttonDown_uri",valuesHolder:"interface-DOMOptionScroller_valuesHolder",value:"interface-DOMOptionScroller_value interface-DOMOptionScroller_value_uri",wrapper:"interface-DOMOptionScroller_valueWrapper"},PIXEL_FACTOR:0.01,constructor:function(){Interface.utils.DOMOptionScroller.superclass.constructor.apply(this,arguments)},onUserInputStart:function(){},onUserInputEnd:function(){},enable:function(){Interface.utils.DOMOptionScroller.superclass.enable.apply(this,arguments);this.container.removeCls("disabled")},disable:function(){Interface.utils.DOMOptionScroller.superclass.enable.apply(this,arguments);this.container.addCls("disabled")},getContainer:function(){return this.container},init:function(a){this.setUpDOMStructure(a);Interface.utils.DOMOptionScroller.superclass.init.apply(this,arguments)},setUpDOMStructure:function(b){var c=this,a=Sys.applyIf(Sys.apply({},b.CSS),c.CSS);c.id=b.id||"DOMOptionScroller";c.valueChilds=[];c.valueButtons=[];c.wrapperChilds=[];c.avg=0;c.container=new Sys.Element({id:c.id,tag:"div",cls:a.base});c.downButton=new Interface.utils.DOMButton({id:c.id+"_downButton",baseCSS:a.buttonBase+" "+a.buttonDown,clickCallback:function(){c.scroll("down")}});c.downButton.disable("lowerBoundReached");c.container.add(c.downButton.getContainer());c.values=c.container.add(new Sys.Element({id:c.id+"_values",tag:"div",cls:a.valuesHolder}));c.valuesScroller=c.values.add(new Sys.Element({id:c.id+"_valuesScroller",tag:"div",style:"position:absolute; height:100%;white-space: nowrap;"}));c.valuesScroller.el.style[Sys.utils.pollyFill("transition")]="transform 100ms";Sys.each(b.values,function(h,d){var f,g=false;if(Sys.isDefined(b.replaceTextByIndex)){Sys.each(b.replaceTextByIndex,function(i){if(d===i.index){f=i.text;if(i.skip){g=true}}})}if(!g){var e=new Interface.utils.DOMButton({id:h,baseCSS:a.value,textContent:(Sys.isDefined(f)?f:h),clickCallback:function(){c.callback(h)}});c.valuesScroller.add(e.getContainer());c.valueChilds.push(e.getContainer());c.valueButtons.push(e)}});c.upButton=new Interface.utils.DOMButton({id:c.id+"_upButton",baseCSS:a.buttonBase+" "+a.buttonUp,clickCallback:function(){c.scroll("up")}});c.container.add(c.upButton.getContainer());c.calculateOffsetValues();c.valueWidth=b.valueWidth;c.scrollOffsetModifier=b.scrollOffsetModifier;c.scrollOffset=c.scrollOffsetModifier*b.valueWidth;c.currentScrollOffset=0;c.maxScrollOffset=0;c.minScrollOffset=-(((b.values.length-1)*c.valueWidth)-c.scrollOffset);if(c.minScrollOffset>=c.currentScrollOffset){c.upButton.disable("upperBoundReached")}},calculateOffsetValues:function(){var b=this,a=0;Sys.each(b.valueChilds,function(c){if(c.el.clientWidth>0){a+=c.el.clientWidth}});if(a>0){b.scrollOffset=(a/b.valueChilds.length)*b.scrollOffsetModifier}b.totalValueWidth=a},scroll:function(b){var a=this,c=b==="up"?-1:1;if(!Sys.isDefined(a.totalValueWidth)||a.tot===0){a.calculateOffsetValues()}a.currentScrollOffset=Math.max(Math.min(a.currentScrollOffset+c*a.scrollOffset,a.maxScrollOffset),a.minScrollOffset);a.valuesScroller.el.style[Sys.utils.pollyFill("transform")]="translate3d("+a.currentScrollOffset*a.PIXEL_FACTOR+"rem,0,0)";if(a.currentScrollOffset===a.minScrollOffset){a.upButton.disable("upperBoundReached")}else{a.upButton.enable("upperBoundReached")}if(a.currentScrollOffset===0){a.downButton.disable("lowerBoundReached")}else{a.downButton.enable("lowerBoundReached")}}};Interface.utils.DOMOptionScroller=Sys.extend(Interface.utils.AbstractOptionScroller,Interface.utils.DOMOptionScroller,"Interface.utils.DOMOptionScroller");Sys.ns("Interface.utils");Interface.utils.DOMButton={BASE_CSS:"DOMButton",textContent:"",container:undefined,renderTo:undefined,constructor:function(){Interface.utils.DOMButton.superclass.constructor.apply(this,arguments)},init:function(a){var b=this;b.id=a.id;b.BASE_CSS=a.baseCSS||b.BASE_CSS;b.textContent=a.textContent||b.textContent;b.tagType=a.tag||"div";b.renderTo=a.renderTo;b.setupContainer();Interface.utils.DOMButton.superclass.init.apply(b,arguments)},up:function(){Interface.utils.DOMButton.superclass.up.apply(this,arguments);this.update()},down:function(){Interface.utils.DOMButton.superclass.down.apply(this,arguments);this.update()},hover:function(){Interface.utils.DOMButton.superclass.hover.apply(this,arguments);this.update()},getContainer:function(){return this.container},setupContainer:function(){var a=this;a.container=new Sys.Element({id:a.id,tag:a.tagType,cls:a.BASE_CSS,textContent:a.textContent,renderTo:a.renderTo})},isInputTarget:function(a){return Sys.UserInputUtils.isCoordinateTarget(this.container.el,a)},update:function(){var b=this,a=b.container;a.removeCSSClass("hidden");a.removeCSSClass("disabled");a.removeCSSClass("active");a.removeCSSClass("hover");a.removeCSSClass("down");if(b.hasProperty("hidden")){a.addCSSClass("hidden")}if(b.hasProperty("disabled")){a.addCSSClass("disabled")}else{if(b.hasProperty("active")){a.addCSSClass("active")}else{if(b.state==="hover"){a.addCSSClass("hover")}else{if(b.state==="down"){a.addCSSClass("down")}}}}}};Interface.utils.DOMButton=Sys.extend(Interface.AbstractButton,Interface.utils.DOMButton,"Interface.utils.DOMButton");Sys.ns("Interface.utils");Interface.utils.DOMScrollableContent={constructor:function(a){Interface.utils.DOMScrollableContent.superclass.constructor.apply(this,arguments)},setupContainer:function(b){var c=this,a=b.snap;c.content=b.content;c.model=new Core.Model({});c.container=new Sys.Element({id:c.id+"_container",tag:"div",cls:c.CSS.base});c.container.add(c.content);c._scroller=new Scroller(c.onScroll.bind(c),{scrollingX:false,snapping:Sys.isObj(a),speedMultiplier:1.5/Number(Environment.getScale()),scrollingComplete:c.onScrollComplete.bind(c,b.scrollCompleteCallback)});if(Sys.isObj(a)){c._scroller.setSnapSize(a.width,a.height)}},onScroll:function(c,b){var a=this;a.content.el.style[Sys.utils.pollyFill("transform")]="translate3d(0,"+(-b)+"px,0)";if(Sys.isDefined(a.scrollBar)){a.moveScrollIndicator(b)}},onScrollComplete:function(c){var b=this,a=b._scroller,d=a.getValues().top;if(!b.model.isState("scrollingByProxy")){a.scrollTo(0,d,false)}if(Sys.isDefined(c)){c(d)}},show:function(){var a=this;a.container.el.style.display="block";a.updateScrollerDimensions();if(a.isScrollBarVisible){a.showScrollBar()}},hide:function(){this.container.el.style.display="none";this.hideScrollBar()},enable:function(){Interface.utils.DOMScrollableContent.superclass.enable.apply(this,arguments);this.updateScrollerDimensions()},onUserInputStart:function(d){var c=this,a=c.model,b=c.contentIsScrollable();if(b){if(Sys.isDefined(c.scrollBar)&&Sys.UserInputUtils.isCoordinateTarget(c.scrollBar.el,d)){a.setState("scrollingByProxy");c.onBarIndicatorMove(d)}else{if(Sys.UserInputUtils.isCoordinateTarget(c.content.el,d)){a.setState("scrolling");c._scroller.doTouchStart([{pageX:d.x,pageY:d.y}],Date.now())}}if((a.isState("scrolling")||a.isState("scrollingByProxy"))&&!a.readData("hasSetDimensions")){c.updateScrollerDimensions();a.storeData("hasSetDimensions",true)}}},contentIsScrollable:function(){var b=this,c=b.container.el.clientHeight,a=b.content.el.scrollHeight;return c<a+20},updateScrollerDimensions:function(){var d=this,e,c,f,b,a;e=d.container.el.clientHeight;c=d.content.el.scrollHeight;d._scroller.setDimensions(d.container.el.clientWidth,e+20,d.content.el.scrollWidth,c+60);b=d.container.el.getBoundingClientRect();d._scroller.setPosition(b.left+d.container.clientLeft,b.top+d.container.clientTop);if(e>0&&c>0){a=(e<c+20)}if(a){if(!Sys.isDefined(d.scrollBar)){d.addScrollBar()}d.isScrollBarVisible=true;d.showScrollBar();f=d.scrollBar.el.clientHeight;d.scrollIndicatorHeight=d.scrollIndicator.el.clientHeight;d.maxScroll=d._scroller.getScrollMax().top;d.scrollBarHeight=f-d.scrollIndicatorHeight}else{if(Sys.isDefined(d.scrollBar)){d.isScrollBarVisible=false;d.hideScrollBar()}}},onUserInputMove:function(c){var b=this,a=b.contentIsScrollable();if(a){if(b.model.isState("scrolling")){b._scroller.doTouchMove([{pageX:c.x,pageY:c.y}],Date.now())}else{if(b.model.isState("scrollingByProxy")){b.onBarIndicatorMove(c)}}}},onUserInputEnd:function(){var b=this,a=b.model,c=a.isState("scrolling")||a.isState("scrollingByProxy");a.setState("idle");if(c){b._scroller.doTouchEnd(Date.now())}},onUserInputScroll:function(g,c){var e=this,a=e.model,d=Sys.UserInputUtils.isCoordinateTarget(e.content.el,g),f=Sys.isDefined(e.scrollBar)&&Sys.UserInputUtils.isCoordinateTarget(e.scrollBar.el,g),b=(d||f)&&e.contentIsScrollable();if(b){a.setState("scrollingByProxy");e._scroller.scrollBy(0,c.deltaY||c.detail*30,false);if(!a.readData("hasSetDimensions")){e.updateScrollerDimensions();a.storeData("hasSetDimensions",true)}}},moveScrollIndicator:function(d){var c=this,b=c.maxScroll,a=Math.round(c.scrollIndicatorHeight/2);if(d<0){d=0}else{if(d>b){d=b}}c.scrollIndicator.el.style.top=Math.round(c.scrollBarHeight*(d/b)+a)+"px"},onBarIndicatorMove:function(f){var b=this,e=Sys.UserInputUtils.getCoordinatesRelativeToElement(f,b.scrollBar.el),c=e.y,d=b.scrollBarHeight,a;if(c<0){c=0}else{if(c>d){c=d}}a=Math.round(b.maxScroll*(c/d));b._scroller.scrollTo(0,a,true)},addScrollBar:function(){var a=this;if(!Sys.isDefined(a.container)){return}a.maxScroll=0;a.scrollBar=a.container.add(new Sys.Element({tag:"div",id:a.id+"_scrollbar","class":"interface-scrollableContent_scrollBar"}));a.scrollBarBackground=a.scrollBar.add(new Sys.Element({tag:"div","class":"interface-scrollableContent_scrollBarBackground utils_horizontal_center"}));a.scrollIndicator=a.scrollBar.add(new Sys.Element({tag:"div","class":"interface-scrollableContent_scrollBarHandle utils_center"}))},showScrollBar:function(){if(Sys.isDefined(this.scrollBar)){this.scrollBar.el.style.display="block"}},hideScrollBar:function(){if(Sys.isDefined(this.scrollBar)){this.scrollBar.el.style.display="none"}},startListeningToUserInput:function(){Interface.utils.DOMScrollableContent.superclass.startListeningToUserInput.apply(this,arguments);this.addListener("notify:userInputManager.userInputScroll",this.onUserInputScroll)},stopListeningToUserInput:function(){Interface.utils.DOMScrollableContent.superclass.stopListeningToUserInput.apply(this,arguments);this.removeListener("notify:userInputManager.userInputScroll")},scrollTo:function(b){var a=this._scroller;a.scrollTo(0,b,false);a.options.scrollingComplete(a.getValues().top)}};Interface.utils.DOMScrollableContent=Sys.extend(Interface.utils.UserInputBase,Interface.utils.DOMScrollableContent,"Interface.utils.DOMScrollableContent");Sys.ns("Interface.utils");Interface.utils.GroupTitle={CSS:{base:"interface-groupTitle_base",disabled:"interface-groupTitle_disabled",label:"interface-groupTitle_label"},constructor:function(a){Interface.utils.GroupTitle.superclass.constructor.apply(this,arguments)},init:function(b){var c=this,a=b.CSS;if(Sys.isDefined(a)){c.CSS=Sys.applyIf(a,c.CSS)}c.title=b.title;Interface.utils.GroupTitle.superclass.init.apply(c,arguments)},setupContainer:function(a){var b=this;b.container=new Sys.Element({id:b.id,tag:"div",cls:a.cls+" "+b.CSS.base});if(b.title){b.label=b.container.add(new Sys.Element({id:b.id+"_title",tag:"div",cls:b.CSS.label,textContent:b.title}))}},setCSS:function(e){var d=this,b=d.container,c=d.button,a=d.CSS;if(e.base){b.replaceCSSClass(a.base,e.base)}if(!d.enabled&&e.disabled){b.replaceCSSClass(a.disabled,e.disabled)}if(e.label){d.label.replaceCSSClass(a.label,e.label)}d.CSS=Sys.applyIf(e,a)}};Interface.utils.GroupTitle=Sys.extend(Interface.utils.UserInputBase,Interface.utils.GroupTitle,"Interface.utils.GroupTitle");Sys.ns("Interface");Interface.SettingsSection={constructor:function(){Interface.SettingsSection.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["userInput","orientation"]},getDefaultMVCClasses:function(){return{model:Core.Model,view:Interface.SettingsSectionView,controller:Interface.SettingsSectionController}}};Interface.SettingsSection=Sys.extend(Core.Module,Interface.SettingsSection,"Interface.SettingsSection");Sys.ns("Interface");Interface.SettingsSectionController={constructor:function(){Interface.SettingsSectionController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this,b={"view:addToContainer":a.addViewToContainer,"view:removeFromContainer":a.removeViewFromContainer,"view:addToNavigator":a.addOptionToNavigator,"view:userAction":a.onUserAction,"view:disableSetting":a.disableSetting,"view:showRequest":a.onShowRequest,"view:hideRequest":a.onHideRequest,"notify:stateHandler.enteringIdleState":a.onEnteringIdleState,"notify:stateHandler.leavingIdleState":a.onLeavingIdleState,"request:enableBasicGamePanel":a.onEnableBasicGamePanel,"request:disableBasicGamePanel":a.onDisableBasicGamePanel,"notify:featureSplash.showing":a.onFeatureSplashShowing,"notify:featureSplash.closed":a.onFeatureSplashClosed};b["request:"+a.MODULE_NAME+".show"]=a.onShowRequest;b["request:"+a.MODULE_NAME+".hide"]=a.onHideRequest;b["request:"+a.MODULE_NAME+".enable"]=a.enable;b["request:"+a.MODULE_NAME+".disable"]=a.disable;a.on(b);a.setUpContent()},setUpContent:function(){this.view.setUpContent()},onShowRequest:function(b){var c=this,a=c.model.readData("currentContainer");if(!c.model.readData("showing")){if(Sys.isDefined(a)){c.fireEvent("request:"+a+".openChild",c.MODULE_NAME,b)}else{c.show(b)}}Services.storage.storeData(c.MODULE_NAME+".showing",true)},onHideRequest:function(){var b=this,a=b.model.readData("currentContainer");if(b.model.readData("showing")){if(Sys.isDefined(a)){b.fireEvent("request:"+a+".closeChild",b.MODULE_NAME)}else{b.hide()}}Services.storage.storeData(b.MODULE_NAME+".showing",false)},addViewToContainer:function(a,c){var d=this,b=this.model.readData("currentContainer");if(b){d.removeViewFromContainer(b)}d.model.storeData("currentContainer",a);d.addListener("notify:"+a+".openedChild",d.containerOpenedChild);d.addListener("notify:"+a+".closedChild",d.containerClosedChild);d.fireEvent("request:"+a+".addChild",d.MODULE_NAME,c)},containerOpenedChild:function(b,a){if(b===this.MODULE_NAME){this.show(a)}},containerClosedChild:function(a){if(a===this.MODULE_NAME){this.hide()}},show:function(a){var b=this;if(!b.model.readData("showing")){b.model.storeData("showing",true);Services.storage.storeData(b.MODULE_NAME+".showing",true);b.fireEvent("notify:"+b.MODULE_NAME+".shown");b.view.show(a);b.startListeningToUserInput()}},hide:function(){var a=this;if(a.model.readData("showing")){a.model.storeData("showing",false);Services.storage.storeData(a.MODULE_NAME+".showing",false);a.fireEvent("notify:"+a.MODULE_NAME+".hidden");a.stopListeningToUserInput();a.view.hide()}},removeViewFromContainer:function(a,b){var c=this;c.removeListener("notify:"+a+".openedChild");c.removeListener("notify:"+a+".closedChild");c.fireEvent("request:"+a+".removeChild",c.MODULE_NAME,b)},addOptionToNavigator:function(a,b){this.fireEvent("request:"+a+".addChild",this.MODULE_NAME,b)},onUserAction:function(){},onUserInputStart:function(){this.view.onUserInputStart.apply(this.view,arguments)},onUserInputMove:function(){this.view.onUserInputMove.apply(this.view,arguments)},onUserInputEnd:function(){this.view.onUserInputEnd.apply(this.view,arguments)},onUserInputScroll:function(){this.view.onUserInputScroll.apply(this.view,arguments)},enable:function(a){this.model.storeData("disabled",false);this.view.enable(a)},disable:function(a){this.model.storeData("disabled",true);this.view.disable(a)},onPortrait:function(){this.model.storeData("hasSetDimensions",false);Mixins.orientation.controller.methods.onPortrait.apply(this,arguments)},onLandscape:function(){this.model.storeData("hasSetDimensions",false);Mixins.orientation.controller.methods.onLandscape.apply(this,arguments)},onLeavingIdleState:function(){var a=this;if(Sys.isDefined(a.view.onLeavingIdleState)){a.view.onLeavingIdleState()}},onEnteringIdleState:function(){var a=this;if(Sys.isDefined(a.view.onEnteringIdleState)){a.view.onEnteringIdleState()}},onEnableBasicGamePanel:function(b){var a=this;if(Sys.isDefined(a.view.onEnableBasicGamePanel)){a.view.onEnableBasicGamePanel(b)}},onDisableBasicGamePanel:function(b){var a=this;if(Sys.isDefined(a.view.onDisableBasicGamePanel)){a.view.onDisableBasicGamePanel(b)}},onFeatureSplashShowing:function(){var a=this;if(Sys.isDefined(a.view.onFeatureSplashShowing)){a.view.onFeatureSplashShowing()}},onFeatureSplashClosed:function(){var a=this;if(Sys.isDefined(a.view.onFeatureSplashClosed)){a.view.onFeatureSplashClosed()}},disableSetting:function(a){this.fireEvent("request:settingsManager.disableSetting",a)}};Interface.SettingsSectionController=Sys.extend(Core.Controller,Interface.SettingsSectionController,"Interface.SettingsSectionController");Sys.ns("Interface");Interface.SettingsSectionModel={constructor:function(){Interface.SettingsSectionModel.superclass.constructor.apply(this,arguments)},initData:function(b){var c=this,d=b.defaultValue,a=Sys.isDefined(b.silent)?b.silent:true;if(b.settingsManager){if(b.localStorage&&!b.ignoreLocalStorageValue&&Services.localStorageManager.hasData(b.key)){d=Sys.utils.parseValue(Services.localStorageManager.readData(b.key))}Services.settingsManager.storeSetting(b.key,d,b.localStorage,a)}c.storeData(b.key,d)},setupData:function(){Services.storage.storeData(this.MODULE_NAME+".showing",false)}};Interface.SettingsSectionModel=Sys.extend(Core.Model,Interface.SettingsSectionModel,"Interface.SettingsSectionModel");Sys.ns("Interface");Interface.SettingsSectionView={SCROLL_BAR_CSS:"interface-settingsSection_scrollBar",SCROLL_INDICATOR_CSS:"interface-settingsSection_scrollIndicator utils_center",DISABLE_BUTTON_DURING_SPIN:true,ENABLED_ONLY_IN_BASIC_GAME:false,DISABLE_BUTTON_DURING_FEATURE_SPLASH:true,constructor:function(){Interface.SettingsSectionView.superclass.constructor.apply(this,arguments)},setUpContent:function(){this.container=new Sys.Element({tag:"div"})},addContainerToSettings:function(){},addScrolling:function(){var a=this;if(Sys.isDefined(a.container)&&Sys.isDefined(a.container.parent)){a._wrapper=a.container.parent}else{return}a._scroller=new Scroller(a.onScroll.bind(a),{scrollingX:false,speedMultiplier:1.5/Number(Environment.getScale())})},onScroll:function(d,c,b){var a=this;a.container.el.style[Sys.utils.pollyFill("transform")]="translate3d(0,"+(-c)+"px,0)";if(Sys.isDefined(a.scrollBar)){a.moveScrollIndicator(c)}},show:function(a){var b=this;b.container.el.style.display="block";b.updateScrollerDimensions();if(b.isScrollBarVisible){b.showScrollBar()}if(!b.model.readData("disabled")){b.callFunctionOnSubComponents("startListeningToUserInput")}},hide:function(){this.container.el.style.display="none";this.hideScrollBar();this.callFunctionOnSubComponents("stopListeningToUserInput")},enable:function(){},disable:function(){},adaptToOrientation:function(){var a=this;Mixins.orientation.view.methods.adaptToOrientation.apply(this,arguments);clearTimeout(a.orientationAdaptationTimeout);a.orientationAdaptationTimeout=setTimeout(function(){a.updateScrollerDimensions()},50)},onUserInputStart:function(d){var c=this,a=c.model,b=c.contentIsScrollable()&&!c.userInputOnSubControl(d);if(b){if(Sys.isDefined(c.scrollBar)&&Sys.UserInputUtils.isCoordinateTarget(c.scrollBar.el,d)){a.setState("scrollingByProxy");c.onBarIndicatorMove(d)}else{if(Sys.UserInputUtils.isCoordinateTarget(c.container.el,d)){a.setState("scrolling");c._scroller.doTouchStart([{pageX:d.x,pageY:d.y}],Date.now())}}if((a.isState("scrolling")||a.isState("scrollingByProxy"))&&!a.readData("hasSetDimensions")){c.updateScrollerDimensions();a.storeData("hasSetDimensions",true)}}},userInputOnSubControl:function(d){var b=this,a=b.container.el.querySelectorAll("[data-input]"),c=false;Sys.each(a,function(e){if(Sys.UserInputUtils.isCoordinateTarget(e,d)){c=true}});return c},contentIsScrollable:function(){var b=this,c=b._wrapper.el.clientHeight,a=b.container.el.scrollHeight;return c+40<a},updateScrollerDimensions:function(){var d=this,e,c,f,b,a;if(!Sys.isDefined(d._wrapper)){return}e=d._wrapper.el.clientHeight;c=d.container.el.scrollHeight;d._scroller.setDimensions(d._wrapper.el.clientWidth,e+20,d.container.el.scrollWidth,c+40);b=d._wrapper.el.getBoundingClientRect();d._scroller.setPosition(b.left+d._wrapper.clientLeft,b.top+d._wrapper.clientTop);if(e>0&&c>0){a=(e+40<c)}if(a){if(!Sys.isDefined(d.scrollBar)){d.addScrollBar()}d.isScrollBarVisible=true;d.showScrollBar();f=d.scrollBar.el.clientHeight;d.scrollIndicatorHeight=d.scrollIndicator.el.clientHeight;d.maxScroll=d._scroller.getScrollMax().top;d.scrollBarHeight=f-d.scrollIndicatorHeight}else{if(Sys.isDefined(d.scrollBar)){d.isScrollBarVisible=false;d.hideScrollBar()}}},onUserInputMove:function(b){var a=this;if(a.model.isState("scrolling")){a._scroller.doTouchMove([{pageX:b.x,pageY:b.y}],Date.now())}else{if(a.model.isState("scrollingByProxy")){a.onBarIndicatorMove(b)}}},onUserInputEnd:function(){if(this.model.isState("scrolling")){this._scroller.doTouchEnd(Date.now())}this.model.setState("idle")},onUserInputScroll:function(g,c){var e=this,a=e.model,d=Sys.UserInputUtils.isCoordinateTarget(e.container.el,g),f=Sys.isDefined(e.scrollBar)&&Sys.UserInputUtils.isCoordinateTarget(e.scrollBar.el,g),b=(d||f)&&e.contentIsScrollable();if(b){a.setState("scrollingByProxy");e._scroller.scrollBy(0,c.deltaY||c.detail*30,false);if(!a.readData("hasSetDimensions")){e.updateScrollerDimensions();a.storeData("hasSetDimensions",true)}}},callFunctionOnSubComponents:function(c,a){var b=this;if(!b.model.readData("disabled")){Sys.each(b.subComponents,function(d){d[c].apply(d,a)})}},moveScrollIndicator:function(d){var c=this,b=c.maxScroll,a=Math.round(c.scrollIndicatorHeight/2);if(d<0){d=0}else{if(d>b){d=b}}c.scrollIndicator.el.style.top=Math.round(c.scrollBarHeight*(d/b)+a)+"px"},onBarIndicatorMove:function(e){var b=this,f=Sys.UserInputUtils.getCoordinatesRelativeToElement(e,b.scrollBar.el),c=f.y,d=b.scrollBarHeight,a;if(c<0){c=0}else{if(c>d){c=d}}a=Math.round(b.maxScroll*(c/d));b._scroller.scrollTo(0,a,true)},addScrollBar:function(){var a=this;if(!Sys.isDefined(a._wrapper)){return}a.maxScroll=0;a.scrollBar=a._wrapper.add(new Sys.Element({tag:"div",id:a.MODULE_NAME+"_scrollbar","class":a.SCROLL_BAR_CSS}));a.scrollBarBackground=a.scrollBar.add(new Sys.Element({tag:"div","class":"interface-settingsSection_scrollBarBackground utils_horizontal_center"}));a.scrollIndicator=a.scrollBar.add(new Sys.Element({tag:"div","class":a.SCROLL_INDICATOR_CSS}))},showScrollBar:function(){if(Sys.isDefined(this.scrollBar)){this.scrollBar.el.style.display="block"}},hideScrollBar:function(){if(Sys.isDefined(this.scrollBar)){this.scrollBar.el.style.display="none"}},onEnteringIdleState:function(){var a=this;if(Sys.isDefined(a.menuButton)&&a.DISABLE_BUTTON_DURING_SPIN){a.menuButton.removeCls("disabled");a.abstractButton.enable("notInIdleState")}},onLeavingIdleState:function(){var a=this;if(Sys.isDefined(a.menuButton)&&a.DISABLE_BUTTON_DURING_SPIN){a.menuButton.addCls("disabled");a.abstractButton.disable("notInIdleState")}},onEnableBasicGamePanel:function(b){var a=this;if(Sys.isDefined(a.menuButton)&&a.ENABLED_ONLY_IN_BASIC_GAME){a.abstractButton.enable(b);if(!a.abstractButton.hasProperty("disabled")&&!a.abstractButton.hasProperty("hidden")){a.menuButton.removeCls("disabled")}}},onDisableBasicGamePanel:function(b){var a=this;if(Sys.isDefined(a.menuButton)&&a.ENABLED_ONLY_IN_BASIC_GAME){a.menuButton.addCls("disabled");a.abstractButton.disable(b)}},onFeatureSplashShowing:function(){var a=this;if(Sys.isDefined(a.menuButton)&&a.DISABLE_BUTTON_DURING_FEATURE_SPLASH){a.menuButton.addCls("disabled");a.abstractButton.disable("featureSplashShowing")}},onFeatureSplashClosed:function(){var a=this;if(Sys.isDefined(a.menuButton)&&a.DISABLE_BUTTON_DURING_FEATURE_SPLASH){a.menuButton.removeCls("disabled");a.abstractButton.enable("featureSplashShowing")}}};Interface.SettingsSectionView=Sys.extend(Core.View,Interface.SettingsSectionView,"Interface.SettingsSectionView");Sys.ns("Interface");Interface.StandAloneSettingsSectionView={BASE_CSS:"interface-standAloneSettingsSection",BACKGROUND_CSS:{top:"interface-standAloneSettingsSection_backgroundTop interface-standAloneSettingsSectionTop_uri",title:"interface-standAloneSettingsSection_title",bottom:"interface-standAloneSettingsSection_backgroundBottom interface-standAloneSettingsSectionBottom_uri",arrow:"interface-standAloneSettingsSection_backgroundArrow interface-standAloneSettingsSectionArrow_uri",middle:"interface-standAloneSettingsSectionMiddle interface-standAloneSettingsSectionMiddle_uri"},ARROW_LEFT_VALUE:"0.00rem",DIVIDER_CSS:"interface-standAloneSettingsSection_divider interface-standAloneSettingsSectionDivider_uri",CLOSE_BUTTON_CSS:"interface-standAloneSettingsSection_closeButton",MENU_BUTTON_CSS:"interface-desktopSettingsMenu_button",CHECKBOX_CSS:{base:"interface-standAloneSettingsSectionContainer_checkBox",disabled:"interface-standAloneSettingsSectionContainer_checkBox_disabled",label:"interface-standAloneSettingsSectionContainer_checkBox_label",button_wrapper:"interface-standAloneSettingsSectionContainer_checkBox_wrapper",button_background:"interface-standAloneSettingsSectionContainer_checkBox_default",button_handle:"interface-standAloneSettingsSectionContainer_checkBox_checked"},RENDER_TARGET:"gameWrapper",TITLE:"Placeholder Header",ORDER:-1,constructor:function(){Interface.SettingsSectionView.superclass.constructor.apply(this,arguments)},getDivider:function(){return new Sys.Element({tag:"div",cls:this.DIVIDER_CSS})},setUpContent:function(){var a=this;a.wrapper=new Sys.Element({id:a.MODULE_NAME,tag:"div",cls:a.BASE_CSS,renderTo:a.RENDER_TARGET,style:"display:none;"});a.container=new Sys.Element({id:a.MODULE_NAME,tag:"div",cls:a.BASE_CSS,renderTo:a.RENDER_TARGET,style:"display:none;"});a.setupBackground();a.setupCloseButton();a.setUpMenuButton()},setupBackground:function(){var c=this,d=c.wrapper.add(new Sys.Element({id:"backgroundTop",tag:"div",cls:c.BACKGROUND_CSS.top})),a=c.wrapper.add(new Sys.Element({id:"backgroundMiddle",tag:"div",cls:c.BACKGROUND_CSS.middle})),b=c.wrapper.add(new Sys.Element({id:"backgroundBottom",tag:"div",cls:c.BACKGROUND_CSS.bottom}));d.add(new Sys.Element({id:"title",tag:"span",cls:c.BACKGROUND_CSS.title,textContent:c.getTitle()}));c.top=d;b.add(new Sys.Element({id:"backgroundArrow",tag:"div",cls:c.BACKGROUND_CSS.arrow,style:"left:"+c.ARROW_LEFT_VALUE+";"}));c.container=a},getTitle:function(){return Services.languageManager.getText(this.TITLE)},setupCloseButton:function(){var a=this;a.closeButton=new Interface.utils.DOMButton({id:"closeButton",baseCSS:a.CLOSE_BUTTON_CSS,clickCallback:a.fireEvent.bind(a,"view:hideRequest"),hoverCallback:function(){a.top.addCls("hover")},upCallback:function(){a.top.removeCls("hover")}});a.container.add(a.closeButton.getContainer())},setUpMenuButton:function(){var a=this;a.menuButton=new Interface.utils.DOMButton({id:a.MODULE_NAME+"SettingsButton",baseCSS:a.MENU_BUTTON_CSS,clickCallback:a.onButtonClick.bind(a)});a.fireEvent("view:addToNavigator","desktopSettingsMenu",{order:a.ORDER,element:a.menuButton.getContainer()})},onButtonClick:function(){var a=this.model.readData("showing")?"hide":"show";this.fireEvent("view:"+a+"Request")},show:function(){this.wrapper.el.style.display="block";this.menuButton.addProperty("active","sectionShowing")},hide:function(){this.wrapper.el.style.display="none";this.menuButton.removeProperty("active","sectionShowing")},enable:function(a){this.menuButton.enable(a)},disable:function(a){this.menuButton.disable(a)},onUserInputStart:function(){},onUserInputEnd:function(){},onEnteringIdleState:function(){var a=this;if(Sys.isDefined(a.menuButton)&&a.DISABLE_BUTTON_DURING_SPIN){a.menuButton.enable("notInIdleState")}},onLeavingIdleState:function(){var a=this;if(Sys.isDefined(a.menuButton)&&a.DISABLE_BUTTON_DURING_SPIN){a.menuButton.disable("notInIdleState")}},onEnableBasicGamePanel:function(b){var a=this;if(Sys.isDefined(a.menuButton)&&a.ENABLED_ONLY_IN_BASIC_GAME){a.menuButton.enable(b)}},onDisableBasicGamePanel:function(b){var a=this;if(Sys.isDefined(a.menuButton)&&a.ENABLED_ONLY_IN_BASIC_GAME){a.menuButton.disable(b)}},onFeatureSplashShowing:function(){var a=this;if(Sys.isDefined(a.menuButton)&&a.DISABLE_BUTTON_DURING_FEATURE_SPLASH){a.menuButton.disable("featureSplashShowing")}},onFeatureSplashClosed:function(){var a=this;if(Sys.isDefined(a.menuButton)&&a.DISABLE_BUTTON_DURING_FEATURE_SPLASH){a.menuButton.enable("featureSplashShowing")}}};Interface.StandAloneSettingsSectionView=Sys.extend(Interface.SettingsSectionView,Interface.StandAloneSettingsSectionView,"Interface.StandAloneSettingsSectionView");Sys.ns("Interface");Interface.CashField={constructor:function(){Interface.CashField.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["serverResponse","orientation"],desktop:["serverResponse","animation"]}},getDefaultMVCClasses:function(){return{model:Interface.CashFieldModel,controller:Interface.CashFieldController,view:Interface.CashFieldBaseView}}};Interface.CashField=Sys.extend(Core.Module,Interface.CashField,"Interface.CashField");Sys.ns("Interface");Interface.CashFieldModel={constructor:function(){Interface.CashFieldModel.superclass.constructor.apply(this,arguments)},setupData:function(){var b=this,a=Resources.readData("gameServerInitResponse");if(a.playforfun){b.storeData("funPlay",true)}else{b.storeData("funPlay",false)}},processServerResponse:function(a){var b=this;b.checkAndSetState(a);b.storeWins(a)},checkAndSetState:function(a){var b=this;if(Sys.isDefined(a.freeRoundsLeft)){if(!b.isState("freerounds")){b.setState("freerounds")}}else{if((a.nextaction==="freespin"&&a.clientaction!=="init")){if(!b.isState("freespin")){b.setState("freespin")}}else{if(a.clientaction==="init"&&Sys.isDefined(a.freespins)){if(!b.isState("freespinRestore")){b.setState("freespinRestore")}}else{if(a.nextaction==="respin"&&a.clientaction!=="init"){if(!b.isState("respin")){b.setState("respin")}}else{if(a.clientaction==="respin"&&a.nextaction==="spin"){if(!b.isState("respinLast")){b.setState("respinLast")}}else{if(a.clientaction==="init"&&a.nextaction==="respin"&&!Sys.isDefined(a.freespins)){if(!b.isState("respinRestore")){b.setState("respinRestore")}}else{if(a.clientaction==="freespin"||(a.clientaction==="freespin")&&a.nextaction==="spin"){if(!b.isState("freespinLast")){b.setState("freespinLast")}}else{if(!b.isState("basic")){b.setState("basic")}}}}}}}}},resetWins:function(){this.storeData("basicWinValues",{cents:0,centsTotal:0});this.storeData("freespinWinValues",{totalWinCents:0})},storeWins:function(a){var b=this;if(Sys.isDefined(a.wins)){b.storeData("basicWinValues",{cents:a.wins.cents||0,centsTotal:a.wins.centsTotal||0});Services.storage.storeData("cashField.winInCents",a.wins.centsTotal)}if(Sys.isDefined(a.wins)){b.storeData("freespinWinValues",{totalWinCents:a.wins.centsTotal||0})}if(Sys.isDefined(a.freeRoundsLeft)){b.storeData("freeroundValues",{left:a.freeRoundsLeft,totalWin:a.freeRoundsWinTot})}},setBetValues:function(a){this.storeData("betValues",a)},setBalanceValues:function(a){this.storeData("balanceValues",a)}};Interface.CashFieldModel=Sys.extend(Core.Model,Interface.CashFieldModel,"Interface.CashFieldModel");Sys.ns("Interface");Interface.CashFieldController={TOGGLE_SEQUENCE:[{action:"creditBetWin",displayDuration:10000},{action:"funPlay",displayDuration:3000}],constructor:function(){Interface.CashFieldController.superclass.constructor.apply(this,arguments);this.dispatchAppendToRequest()},init:function(){Interface.CashFieldController.superclass.init.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringIdleState":a.updateAllAndStartToggling.bind(a,"idle"),"notify:stateHandler.enteringSpinningState":a.onSpinningState,"notify:stateHandler.enteringBeforeLoaderCloseState":a.updateAllAndStartToggling.bind(a,"beforeLoaderClose"),"notify:settingsWindow.open":a.onSettingsWindowOpened,"notify:settingsWindow.closed":a.startToggling,"notify:serverManager.serverErrorReceived":a.onServerErrorReceived,"notify:moneyManager.betChanged":a.onBetChanged,"notify:moneyManager.balanceChanged":a.onBalanceChanged,"notify:standardWin.presentationComplete":a.updateCreditAndWin.bind(a,"idle"),"request:cashField.showWin":a.updateCreditAndWin.bind(a,"winPresentation")})},dispatchAppendToRequest:function(){this.fireEvent("request:balanceDisplay.appendChild",this.view.getCashDisplayConfig())},onBetChanged:function(a){var b=this;b.model.setBetValues(a);b.view.updateValue("bet",b.model.readData("betValues").playerBetFormatted)},onBalanceChanged:function(a){this.model.setBalanceValues(a);this.view.updateValue("credit",a.playerBalanceFormatted);this.notifyBalanceChanged(a.playerBalanceCents)},onSpinningState:function(){var a=this,b=a.model.getState();a[b+"UpdateCreditValue"]();a.resetWinValue()},onServerErrorReceived:function(){var b=this,a=b.model.getState();b.model.resetWins();b[a+"UpdateWinValues"](a)},updateCreditAndWin:function(a){var b=this,d=b.model.getState(),c=Services.moneyManager.getBalanceCents();b[d+"UpdateCreditValue"](c);b[d+"UpdateWinValues"](a);b.notifyBalanceChanged(c)},notifyBalanceChanged:function(a){this.fireEvent("notify:cashField.update",a)},updateAllAndStartToggling:function(a){this.updateCreditAndWin(a);this.startToggling()},onFreespinOutro:function(){var a=this,b=a.model.getState();a[b+"UpdateCreditValue"](Services.moneyManager.getBalanceCents());a[b+"UpdateWinValues"]("freespinOutro")},basicUpdateWinValues:function(){this.updateBasicWinValue();this.view.showSubComponent("creditBetWin")},freespinUpdateWinValues:function(){this.updateFreespinWinValue()},freespinRestoreUpdateWinValues:function(){this.updateFreespinWinValue()},freespinLastUpdateWinValues:function(){this.updateFreespinWinValue()},respinUpdateWinValues:function(){this.updateRespinWinValue()},respinUpdateCreditValue:function(){return},respinLastUpdateWinValues:function(){this.updateRespinWinValue()},respinLastUpdateCreditValue:function(a){this.basicUpdateCreditValue(a)},freeroundsUpdateCreditValue:function(){this.view.showSubComponent("freeRounds")},freeroundsUpdateWinValues:function(b){var c=this,d=c.model.readData("freeroundValues").left,a=c.model.readData("freeroundValues").totalWin;c.view.updateValue("freeRoundTotalWin",a);if(b!=="winPresentation"){c.view.updateValue("freeRoundLeft",d.toString())}this.view.showSubComponent("freeRounds")},freespinUpdateCreditValue:function(){return},freespinRestoreUpdateCreditValue:function(b){var a=this;if(!Sys.isDefined(b)){b=a.model.readData("balanceValues").playerBalanceFormatted}a.view.updateValue("credit",b);a.view.showSubComponent("creditBetWin")},respinRestoreUpdateCreditValue:function(b){var a=this;if(!Sys.isDefined(b)){b=a.model.readData("balanceValues").playerBalanceFormatted}a.view.updateValue("credit",b);a.view.showSubComponent("creditBetWin")},respinRestoreUpdateWinValues:function(){this.updateRespinWinValue()},freespinLastUpdateCreditValue:function(a){this.basicUpdateCreditValue(a)},basicUpdateCreditValue:function(b){var a=this;if(!Sys.isDefined(b)){b=a.model.readData("balanceValues").playerBalanceFormatted}a.view.updateValue("credit",b);a.view.showSubComponent("creditBetWin")},updateBasicWinValue:function(){var a=this.model.readData("basicWinValues");if(a.cents){this.view.updateWinValue(a.cents)}},updateFreespinWinValue:function(){var a=this.model.readData("freespinWinValues");if(a.totalWinCents){this.view.updateWinValue(a.totalWinCents)}},updateRespinWinValue:function(){var a=this.model.readData("basicWinValues");if(a.centsTotal){this.view.updateWinValue(a.centsTotal)}},resetWinValue:function(){if(this.model.isState("basic")||this.model.isState("respinLast")||this.model.isState("freespinLast")){this.view.updateWinValue(0)}},onSettingsWindowOpened:function(){var a=this;clearTimeout(a.toggleTimeout);if(a.model.isState("freerounds")){a.view.showSubComponent("freeRounds")}else{a.view.showSubComponent("creditBetWin",true)}},startToggling:function(){var a=this;if(a.model.readData("funPlay")===true){clearTimeout(a.toggleTimeout);a.model.storeData("nextToggleIndex",0);a.showNextInToggleSequence()}},showNextInToggleSequence:function(){var c=this,b=c.TOGGLE_SEQUENCE,d=c.model.readData("nextToggleIndex"),a=b[d];c.model.storeData("nextToggleIndex",(d+1)%b.length);c.view.showSubComponent(a.action,true);c.toggleTimeout=setTimeout(c.showNextInToggleSequence.bind(c),a.displayDuration)}};Interface.CashFieldController=Sys.extend(Core.Controller,Interface.CashFieldController,"Interface.CashFieldController");Sys.ns("Interface");Interface.CashFieldBaseView={CSS_CLASSES:{BASE:"interface-cashField_base",PORTRAIT:"interface-cashField_portrait",LANDSCAPE:"interface-cashField_landscape",SUB_COMPONENT:"interface-cashField_subComponent"},RESOLUTION:Environment.getResolution(),SCREEN_SIZE:Environment.getScreenSize(),FIRST_CHILD:false,constructor:function(){Interface.CashFieldBaseView.superclass.constructor.apply(this,arguments)},init:function(){var a=this;Interface.CashFieldBaseView.superclass.init.apply(a,arguments);a.displays=a.getDisplayConfig();a.getLocalText=function(b){return Services.languageManager.getText(b)};a.getFormattedCentsValue=function(b,c){return Services.moneyManager.formatMoneyCurrencySign(b,c)};a.constructDOMElements()},showSubComponent:function(b,d){var c=this,a=c.model.readData("currentlyShowingElement");if((!c.model.readData("funPlay")&&a!==c[b])||(a!==c[b]&&c.model.readData("funPlay")&&d)){if(Sys.isDefined(a)){c.hideElement(a)}c.showElement(c[b]);c.model.storeData("currentlyShowingElement",c[b])}},hideElement:function(a){a.el.style.visibility="hidden"},showElement:function(a){a.el.style.visibility="visible"},getDisplayConfig:function(){var a=this;return{credit:{wrapper:a.creditWrapper,displayID:"credit",textID:Language.Keys.cashColonVar,display:{},stringValue:"",valueElement:{}},bet:{wrapper:a.betWrapper,displayID:"bet",textID:Language.Keys.betColonVar,display:{},stringValue:"",valueElement:{}},win:{wrapper:a.winWrapper,displayID:"win",textID:Language.Keys.winColonVar,display:{},stringValue:"",valueElement:{}},funPlay:{wrapper:a.funPlayWrapper,displayID:"funPlay",textID:Language.Keys.playingForFun,display:{}},freeRoundLeft:{wrapper:a.freeRoundLeftWrapper,displayID:"freeRoundLeft",textID:Language.Keys.freeRoundsLeftColon,display:{},stringValue:"",valueElement:{}},freeRoundTotalWin:{wrapper:a.freeRoundTotalWinWrapper,displayID:"freeRoundTotalWin",textID:Language.Keys.totalWinColonVar,display:{},stringValue:"",valueElement:{}}}},getCashDisplayConfig:function(){return this.cashDisplay},constructDOMElements:function(){var b=this,a=b.displays;b.cashDisplay=new Sys.Element({tag:"div",cls:b.CSS_CLASSES.BASE});b.creditBetWin=new Sys.Element({tag:"div",cls:b.CSS_CLASSES.SUB_COMPONENT,style:"visibility:hidden;"});b.freeRounds=new Sys.Element({tag:"div",cls:b.CSS_CLASSES.SUB_COMPONENT,style:"visibility:hidden;"});b.funPlay=new Sys.Element({tag:"div",cls:b.CSS_CLASSES.SUB_COMPONENT,style:"visibility:hidden;"});b.constructElement(a.credit);b.constructElement(a.bet);b.constructElement(a.win);b.constructElement(a.funPlay);b.constructElement(a.freeRoundLeft);b.constructElement(a.freeRoundTotalWin);b.creditBetWin.add(a.credit.wrapper);b.creditBetWin.add(a.bet.wrapper);b.creditBetWin.add(a.win.wrapper);b.updateWinValue(0);b.cashDisplay.add(b.creditBetWin);b.freeRounds.add(a.freeRoundLeft.wrapper);b.freeRounds.add(a.freeRoundTotalWin.wrapper);b.cashDisplay.add(b.freeRounds);b.funPlay.add(a.funPlay.wrapper);b.cashDisplay.add(b.funPlay)},constructTextElement:function(b,f,g){var d=this,e=[],c;if(b.contains("{0}")){var a=d.getTextStringOrder(b);Sys.each(a,function(h){if(Sys.isString(h)){e.push(c=new Sys.Element({tag:"span",cls:"text"}));c.el.textContent=h}else{if(Sys.isNumber(h)){e.push(c=new Sys.Element({tag:"span",cls:"text value"}));c.el.textContent=f||"";g.valueElement=c}}})}else{e.push(c=new Sys.Element({tag:"span",cls:"text"}));c.el.textContent=b}return e},constructTextValueWrapper:function(){var b="margin-right:2%;",a="margin-left:2%;";return new Sys.Element({tag:"div",cls:"wrapper",style:b+a})},constructElement:function(f){var e=this,d,c=(!e.debug)?e.getLocalText(f.textID):e.worstCaseSpec[f.displayID].text,a=(!e.debug)?f.value:e.worstCaseSpec[f.displayID].value,b=e.constructTextValueWrapper();f.wrapper=new Sys.Element({tag:"span"});f.wrapper.addCls("inline");f.wrapper.addCls("field");f.wrapper.addCls(f.displayID);d=e.constructTextElement(c,a,f);Sys.each(d,function(g){b.add(g)});f.wrapper.add(b)},updateValue:function(b,a){a=(Sys.isNumber(a))?this.getFormattedCentsValue(a):a;if(this.displays[b].valueElement.el){this.displays[b].valueElement.el.textContent=a}},updateWinValue:function(a){var b=this;if(a>=0){a=b.getFormattedCentsValue(a)}else{}if(b.displays.win.valueElement.el){b.displays.win.valueElement.el.textContent=a}},onPortrait:function(){var b=this,a=b.CSS_CLASSES,c=b.cashDisplay;c.addCls(a.PORTRAIT);c.removeCls(a.LANDSCAPE)},onLandscape:function(){var b=this,a=b.CSS_CLASSES,c=b.cashDisplay;c.addCls(a.LANDSCAPE);c.removeCls(a.PORTRAIT)},getTextStringOrder:function(d){var b=[];var c=/(\{\d+\})/g;var a=d.split(c);Sys.each(a,function(f){if(f.match(/\{\d+\}/)){var e=f.substring(1,f.length-1);b.push(Sys.utils.toInt(e))}else{if(f.length>0){b.push(f)}}});return b}};Interface.CashFieldBaseView=Sys.extend(Core.View,Interface.CashFieldBaseView,"Interface.CashFieldBaseView");Sys.ns("Interface");Interface.CashFieldMobileView={CSS_CLASSES:{BASE:"interface-cashField_base interface-cashField_mobile",PORTRAIT:"interface-cashField_portrait_mobile",LANDSCAPE:"interface-cashField_landscape",SUB_COMPONENT:"interface-cashField_subComponent"},constructor:function(){Interface.CashFieldMobileView.superclass.constructor.apply(this,arguments)}};Interface.CashFieldMobileView=Sys.extend(Interface.CashFieldBaseView,Interface.CashFieldMobileView,"Interface.CashFieldMobileView");Sys.ns("Interface");Interface.CashFieldTabletView={CSS_CLASSES:{BASE:"interface-cashField_base interface-cashField_tablet",PORTRAIT:"interface-cashField_portrait interface-cashField_portrait interface-cashField_tablet",LANDSCAPE:"interface-cashField_landscape interface-cashField_landscape interface-cashField_tablet",SUB_COMPONENT:"interface-cashField_subComponent"},constructor:function(){Interface.CashFieldTabletView.superclass.constructor.apply(this,arguments)}};Interface.CashFieldTabletView=Sys.extend(Interface.CashFieldBaseView,Interface.CashFieldTabletView,"Interface.CashFieldTabletView");Sys.ns("Interface");Interface.CashFieldDesktopView={CSS_CLASSES:{BASE:"interface-cashField_base interface-cashField_desktop interface-cashField_desktop_uri",PORTRAIT:"",LANDSCAPE:"",SUB_COMPONENT:"interface-cashField_subComponent"},constructor:function(){Interface.CashFieldDesktopView.superclass.constructor.apply(this,arguments)}};Interface.CashFieldDesktopView=Sys.extend(Interface.CashFieldBaseView,Interface.CashFieldDesktopView,"Interface.CashFieldDesktopView");Sys.ns("Interface.Slots");Interface.Slots.CoinsField={constructor:function(){Interface.Slots.CoinsField.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["serverResponse","orientation"],desktop:["serverResponse","animation"]}},getDefaultMVCClasses:function(){return{model:Interface.Slots.CoinsFieldModel,controller:Interface.Slots.CoinsFieldController,view:Interface.Slots.CoinsFieldBaseView}}};Interface.Slots.CoinsField=Sys.extend(Core.Module,Interface.Slots.CoinsField,"Interface.Slots.CoinsField");Sys.ns("Interface.Slots");Interface.Slots.CoinsFieldModel={WIN_UP_TO:"[MAX COIN WIN]",constructor:function(){Interface.Slots.CoinsFieldModel.superclass.constructor.apply(this,arguments)},setupData:function(){this.storeData("gameMode","BASIC")},processServerResponse:function(b){var a=this;if(Sys.isDefined(b.wins)){if(Sys.isDefined(b.wins.coinsTotal)){a.storeData("totalWin",b.wins.coinsTotal)}else{a.storeData("totalWin","")}if(Sys.isDefined(b.wins.coins)){a.storeData("win",b.wins.coins)}else{a.storeData("win",0)}if(Sys.isDefined(b.wins.freespins)){a.storeData("additionalFreeSpins",b.wins.freespins)}else{a.storeData("additionalFreeSpins",0)}}if(Sys.isDefined(b.freespins)&&Sys.isDefined(b.freespins.left)){a.storeData("freeSpinsLeft",b.freespins.left)}else{a.storeData("freeSpinsLeft",0)}},setWinToTotalWin:function(){this.storeData("win",this.readData("totalWin"))},getBetText:function(){return Services.moneyManager.getBetCoins()},getBalanceText:function(){return Services.moneyManager.getBalanceCoins()},getWinText:function(){var a=this.readData("win");return a===0?"":a},getProgressiveWinText:function(){return this.readData("win")},getTotalWinText:function(){return this.readData("totalWin")},getTotalWinCountUpValues:function(){var b=this.readData("win"),a=this.readData("totalWin");return{from:a-b,to:a}},getFreeSpinsLeftText:function(){return this.readData("freeSpinsLeft")},getAdditionalFreeSpinsWonText:function(){return this.readData("additionalFreeSpins")},getWinUpToText:function(){return this.WIN_UP_TO}};Interface.Slots.CoinsFieldModel=Sys.extend(Core.Model,Interface.Slots.CoinsFieldModel,"Interface.Slots.CoinsFieldModel");Sys.ns("Interface.Slots");Interface.Slots.CoinsFieldController={TOGGLE_SEQUENCE:[{action:"showWin",displayDuration:3000},{action:"showBalanceAndBet",displayDuration:3000},{action:"showWinUpTo",displayDuration:3000},{action:"showBalanceAndBet",displayDuration:3000}],constructor:function(){Interface.Slots.CoinsFieldController.superclass.constructor.apply(this,arguments);this.view.setupView()},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringBeforeLoaderCloseState":a.onBeforeLoaderClose,"notify:stateHandler.enteringIdleState":a.onEnteringIdleState,"notify:stateHandler.enteringFreeSpinIntroState":a.onEnteringFreeSpinIntroState,"notify:stateHandler.enteringSpinningState":a.onEnteringSpinningState,"notify:moneyManager.betChanged":a.onInfoChanged,"notify:settingsWindow.open":a.onSettingsWindowOpened,"notify:settingsWindow.closed":a.onSettingsWindowClosed,"request:coinsField.showWin":a.onShowWinRequest,"request:coinsField.showNormalWin":a.onShowNormalWinRequest,"request:coinsField.showProgressiveWin":a.onShowProgressiveWinRequest,"request:coinsField.showFreeSpinsLeft":a.showFreeSpinsLeft,"request:coinsField.showAdditionalFreeSpinsWon":a.showAdditionalFreeSpinsWon,"request:coinsField.countUp":a.view.countUpProgressiveWin.bind(a.view),"notify:gameModeChanged":a.onGameModeChanged,"view:appendToGameFooter":a.fireEvent.bind(a,"request:balanceDisplay.appendChild"),"view:setCountUpCallback":a.fireEvent.bind(a,"request:coinsFieldCountUp.setCallback"),"view:startCountUp":a.fireEvent.bind(a,"request:coinsFieldCountUp.start"),"view:stopCountUp":a.fireEvent.bind(a,"request:coinsFieldCountUp.stop"),"view:countUpComplete":a.fireEvent.bind(a,"notify:coinsField.countUpComplete")})},onBeforeLoaderClose:function(){this.showBalanceAndBet()},onEnteringIdleState:function(){var a=this;if(a.model.readData("showProgressiveWinDisplay")){a.model.storeData("showProgressiveWinDisplay",false);a.model.setWinToTotalWin()}if(a.model.readData("hasPlayedInitialRound")){a.startToggling()}else{a.showBalanceAndBet()}},onEnteringSpinningState:function(){var a=this;clearTimeout(a.toggleTimeout);a.model.storeData("hasPlayedInitialRound",true);a.model.storeData("win","");if(a.model.readData("showProgressiveWinDisplay")){a.showProgressiveWin()}else{a.showBalanceAndBet()}},onEnteringFreeSpinIntroState:function(){this.view.onEnteringFreeSpinIntroState()},onInfoChanged:function(){this.view.showBalanceAndBet()},onSettingsWindowOpened:function(){clearTimeout(this.toggleTimeout);this.showBalanceAndBet()},onShowWinRequest:function(){if(this.model.readData("showProgressiveWinDisplay")){this.showProgressiveWin()}else{this.showWin()}},onShowNormalWinRequest:function(){var a=this.model;if(a.readData("showProgressiveWinDisplay")){a.storeData("showProgressiveWinDisplay",false);a.setWinToTotalWin()}this.showWin()},onShowProgressiveWinRequest:function(a){this.model.storeData("showProgressiveWinDisplay",true);this.showProgressiveWin(a)},showBalanceAndBet:function(){this.view.showBalanceAndBet()},showWin:function(){this.view.showWin()},showProgressiveWin:function(a){if(a){this.model.storeData("win","")}this.view.showProgressiveWin()},showFreeSpinsLeft:function(){this.view.showFreeSpinsLeft()},showAdditionalFreeSpinsWon:function(){this.view.showAdditionalFreeSpinsWon()},startToggling:function(){this.model.storeData("nextToggleIndex",0);this.showNextInToggleSequence()},showNextInToggleSequence:function(){var c=this,b=c.TOGGLE_SEQUENCE,d=c.model.readData("nextToggleIndex"),a=b[d];c.model.storeData("nextToggleIndex",(d+1)%b.length);c.view[a.action]();c.toggleTimeout=setTimeout(c.showNextInToggleSequence.bind(c),a.displayDuration)},onGameModeChanged:function(a){this.model.storeData("gameMode",a);this.view.onGameModeChanged(a)}};Interface.Slots.CoinsFieldController=Sys.extend(Core.Controller,Interface.Slots.CoinsFieldController,"Interface.Slots.CoinsFieldController");Sys.ns("Interface.Slots");Interface.Slots.CoinsFieldBaseView={BASE_CSS:"interface-coinsField_base",BACKGROUND_URI:"interface-coinsField_uri",PORTRAIT_CSS:"interface-coinsField_portrait",LANDSCAPE_CSS:"interface-coinsField_landscape",SUB_COMPONENT_CSS:"interface-coinsField_subComponent",constructor:function(){Interface.Slots.CoinsFieldBaseView.superclass.constructor.apply(this,arguments)},setupView:function(){var d=this,g=0,f="<span class='number'></span>",e="<div class='number' style='display: inline-block; text-align: left; min-width: 3em;'></div>",b="<span class='number'>"+d.model.getWinUpToText()+"</span>",c="margin-right:2%;",a="margin-left:2%;";d.container=new Sys.Element({id:"coinsField",tag:"div",cls:d.BASE_CSS+" "+d.BACKGROUND_URI});d.betAndBalance=d.container.add(new Sys.Element({id:"coinsField_betAndBalance",tag:"div",cls:d.SUB_COMPONENT_CSS,style:"visibility:hidden; z-index:"+(g++)+";"}));d.balanceDisplay=d.betAndBalance.add(new Sys.Element({id:"coinsField_betAndBalance_balanceDisplay",tag:"span",innerHTML:Services.languageManager.getText(Language.Keys.coinsColonVar).replace("{0}",f),style:c}));d.betDisplay=d.betAndBalance.add(new Sys.Element({id:"coinsField_betAndBalance_betDisplay",tag:"span",innerHTML:Services.languageManager.getText(Language.Keys.betColonVar).replace("{0}",f),style:a}));d.balanceCoinsElement=d.balanceDisplay.el.getElementsByTagName("span")[0]||document.createElement("span");d.betCoinsElement=d.betDisplay.el.getElementsByTagName("span")[0]||document.createElement("span");d.win=d.container.add(new Sys.Element({id:"coinsField_win",tag:"div",cls:d.SUB_COMPONENT_CSS,innerHTML:Services.languageManager.getText(Language.Keys.winColonVar).replace("{0}",f),style:"visibility:hidden; z-index:"+(g++)+";"}));d.winCoinsElement=d.win.el.getElementsByTagName("span")[0]||document.createElement("span");d.youWon=d.container.add(new Sys.Element({id:"coinsField_youWon",tag:"div",cls:d.SUB_COMPONENT_CSS,innerHTML:Services.languageManager.getText(Language.Keys.youWonCoins).replace("{0}",f),style:"visibility:hidden; z-index:"+(g++)+";"}));d.youWonCoinsElement=d.youWon.el.getElementsByTagName("span")[0]||document.createElement("span");d.progressiveWin=d.container.add(new Sys.Element({id:"coinsField_progressiveWin",tag:"div",cls:d.SUB_COMPONENT_CSS,style:"visibility:hidden; z-index:"+(g++)+";"}));d.progressiveWinDisplay=d.progressiveWin.add(new Sys.Element({id:"coinsField_progressiveWin_winDisplay",tag:"span",innerHTML:Services.languageManager.getText(Language.Keys.winColonVar).replace("{0}",e),style:c}));d.totalWinDisplay=d.progressiveWin.add(new Sys.Element({id:"coinsField_progressiveWin_totalWinDisplay",tag:"span",innerHTML:Services.languageManager.getText(Language.Keys.totalWinColonVar).replace("{0}",e),style:a}));d.progressiveWinCoinsElement=d.progressiveWinDisplay.el.getElementsByTagName("div")[0]||document.createElement("div");d.totalWinCoinsElement=d.totalWinDisplay.el.getElementsByTagName("div")[0]||document.createElement("div");d.freeSpinsLeft=d.container.add(new Sys.Element({id:"coinsField_freeSpinsLeft",tag:"div",cls:d.SUB_COMPONENT_CSS,innerHTML:Services.languageManager.getText(Language.Keys.freeSpinsLeftColonVar).replace("{0}",f),style:"visibility:hidden; z-index:"+(g++)+";"}));d.freeSpinsLeftNumberElement=d.freeSpinsLeft.el.getElementsByTagName("span")[0]||document.createElement("span");d.additionalFreeSpinsWon=d.container.add(new Sys.Element({id:"coinsField_additionalFreeSpinsWon",tag:"div",cls:d.SUB_COMPONENT_CSS,innerHTML:Services.languageManager.getText(Language.Keys.additonalFreeSpinsWon).replace("{0}",f),style:"visibility:hidden; z-index:"+(g++)+";"}));d.additionalFreeSpinsNumberElement=d.additionalFreeSpinsWon.el.getElementsByTagName("span")[0]||document.createElement("span");d.winUpTo=d.container.add(new Sys.Element({id:"coinsField_winUpTo",tag:"div",cls:d.SUB_COMPONENT_CSS,innerHTML:Services.languageManager.getText(Language.Keys.winUpTo).replace("{0}",b),style:"visibility:hidden; z-index:"+g+";"}));d.fireEvent("view:appendToGameFooter",d.container)},showBalanceAndBet:function(){var a=this;a.betCoinsElement.textContent=a.model.getBetText();a.balanceCoinsElement.textContent=a.model.getBalanceText();a.show(a.betAndBalance)},showWin:function(){var a=this,b=a.model.getWinText();if(b>0){a.youWonCoinsElement.textContent=b;a.show(a.youWon)}else{a.winCoinsElement.textContent=b;a.show(a.win)}},showProgressiveWin:function(){var a=this;a.fireEvent("view:stopCountUp");a.progressiveWinCoinsElement.textContent=a.model.getProgressiveWinText();a.totalWinCoinsElement.textContent=a.model.getTotalWinText();a.show(a.progressiveWin)},countUpCallback:function(a){this.totalWinCoinsElement.textContent=a},countUpProgressiveWin:function(c){var b=this,a=b.model.getTotalWinCountUpValues();if(!b.model.readData("hasRegisteredCallback")){b.fireEvent("view:setCountUpCallback",b.countUpCallback.bind(b));b.model.storeData("hasRegisteredCallback",true)}a.duration=c;a.fireEventsOnValue=[{value:a.to,event:"view:countUpComplete",scope:b}];b.progressiveWinCoinsElement.textContent=b.model.getProgressiveWinText();b.fireEvent("view:startCountUp",a)},showFreeSpinsLeft:function(){var a=this;a.freeSpinsLeftNumberElement.textContent=a.model.getFreeSpinsLeftText();a.show(a.freeSpinsLeft)},showAdditionalFreeSpinsWon:function(){var a=this;a.additionalFreeSpinsNumberElement.textContent=a.model.getAdditionalFreeSpinsWonText();a.show(a.additionalFreeSpinsWon)},showWinUpTo:function(){this.show(this.winUpTo)},show:function(b){var c=this,a=c.model.readData("currentlyShowingElement");if(a!==b){if(Sys.isDefined(a)){c.hideElement(a)}c.showElement(b);c.model.storeData("currentlyShowingElement",b)}},hideElement:function(a){a.el.style.visibility="hidden"},showElement:function(a){a.el.style.visibility="visible"},onEnteringFreeSpinIntroState:function(){},onGameModeChanged:function(){}};Interface.Slots.CoinsFieldBaseView=Sys.extend(Core.View,Interface.Slots.CoinsFieldBaseView,"Interface.Slots.CoinsFieldBaseView");Sys.ns("interface.Slots");Interface.Slots.CoinsFieldMobileView={BASE_CSS:"interface-coinsField_base interface-coinsField_mobile",PORTRAIT_CSS:"interface-coinsField_portrait_mobile",LANDSCAPE_CSS:"interface-coinsField_landscape_mobile",constructor:function(){Interface.Slots.CoinsFieldMobileView.superclass.constructor.apply(this,arguments)}};Interface.Slots.CoinsFieldMobileView=Sys.extend(Interface.Slots.CoinsFieldBaseView,Interface.Slots.CoinsFieldMobileView,"Interface.Slots.CoinsFieldMobileView");Sys.ns("Interface.Slots");Interface.Slots.CoinsFieldDesktopView={GAME_MODES:["BASIC","FREESPIN"],BASIC_BET_LABEL:{font:"10px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:160,y:615,width:267,height:133},alignment:{horizontal:"left",vertical:false}},BASIC_BET_VALUE:{font:"10px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:160,y:643,width:267,height:133},alignment:{horizontal:"left",vertical:false}},BASIC_BALANCE_LABEL:{font:"10px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:1071,y:615,width:267,height:133},alignment:{horizontal:"left",vertical:false}},BASIC_BALANCE_VALUE:{font:"10px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:1071,y:643,width:267,height:133},alignment:{horizontal:"left",vertical:false}},BASIC_BACKGROUND:{image:"keypadBackground",position:{x:7,y:606,width:1265,height:84}},FREESPIN_BET_LABEL:{font:"10px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:25,y:656,width:100,height:20},alignment:{horizontal:"right",vertical:false}},FREESPIN_BET_VALUE:{font:"10px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:133,y:656,width:267,height:20},alignment:{horizontal:"left",vertical:false}},FREESPIN_BALANCE_LABEL:{font:"10px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:1000,y:656,width:100,height:20},alignment:{horizontal:"right",vertical:false}},FREESPIN_BALANCE_VALUE:{font:"10px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:1107,y:656,width:267,height:20},alignment:{horizontal:"left",vertical:false}},FREESPIN_WIN_LABEL:{font:"15px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:530,y:580,width:120,height:40},alignment:{horizontal:"right",vertical:true}},FREESPIN_WIN_VALUE:{font:"22px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:663,y:580,width:150,height:40},alignment:{horizontal:"left",vertical:true}},FREESPIN_TOTAL_WIN_LABEL:{font:"15px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:530,y:623,width:120,height:40},alignment:{horizontal:"right",vertical:true}},FREESPIN_TOTAL_WIN_VALUE:{font:"22px Verdana",fillstyle:"rgba( 255, 255, 255, 1 )",position:{x:663,y:623,width:150,height:40},alignment:{horizontal:"left",vertical:true}},FREESPIN_BACKGROUND:{image:"keypadFreeSpinBackground",position:{x:429,y:567,width:421,height:114}},constructor:function(){Interface.Slots.CoinsFieldDesktopView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var a=this;a.initBackground();a.initTexts();a.onGameModeChanged("BASIC")},initBackground:function(){var h=this,c=h.getKeypadLayering(),g=new Animation.List({}),a={},b=h.GAME_MODES;for(var d=-1,f=b.length;++d<f;){var e=b[d],j=h[e+"_BACKGROUND"].position;a[b[d]]=new Animation.Item({top:j.y,left:j.x,width:j.width,height:j.height,depth:c["background_"+e.toLowerCase()],image:h[e+"_BACKGROUND"].image});g.add(a[b[d]])}Game.stage.view.addToRenderLoop(g);h.backgroundItems=a},getKeypadLayering:function(){return Layering.Game.Slots.Keypad},getMainTypes:function(){var a=this;return{BET:{LABEL:{defaultMode:"FREESPIN",content:function(){return Services.languageManager.getText(Language.Keys.machinetext_bet)}},VALUE:{defaultMode:"FREESPIN",content:function(){return a.model.getBetText()}}},BALANCE:{LABEL:{defaultMode:"FREESPIN",content:function(){return Services.languageManager.getText(Language.Keys.machinetext_coins)}},VALUE:{defaultMode:"FREESPIN",content:function(){return a.model.getBalanceText()}}},WIN:{LABEL:{modes:["FREESPIN"],defaultMode:"FREESPIN",content:function(){return Services.languageManager.getText(Language.Keys.winColon_uc)}},VALUE:{modes:["FREESPIN"],defaultMode:"FREESPIN",content:function(){return a.model.getWinText()}}},TOTAL_WIN:{LABEL:{modes:["FREESPIN"],defaultMode:"FREESPIN",content:function(){return Services.languageManager.getText(Language.Keys.totalWinColon_uc)}},VALUE:{modes:["FREESPIN"],defaultMode:"FREESPIN",content:function(){return a.model.getTotalWinText()}}}}},initTexts:function(){var f=this,g=new Animation.List({}),d=f.GAME_MODES,a=d.length,e={},c,b;for(b=-1;++b<a;){c=d[b];e[c]=f.getTextsForGameMode(c,g)}f.textItems=e;f.updateTexts();Game.stage.view.addToRenderLoop(g)},getTextsForGameMode:function(k,f){var h=this,b=h.getKeypadLayering(),g=h.getMainTypes(),j=Object.keys(g),d=j.length,a={},e,c;for(c=-1;++c<d;){e=j[c];a[e]=h.createTextItems(e,g[e],b[e.toLowerCase()],f,k)}return a},createTextItems:function(j,f,s,o,k){var q=this,c={},l,b,a,g,h,t=Object.keys(f),n=t.length,e,r,p,d,m;for(m=-1;++m<n;){e=t[m];l=f[e];b=Sys.isDefined(l.defaultMode)?l.defaultMode:false;a=k+"_"+j+"_"+e;g=b+"_"+j+"_"+e;r=Sys.isDefined(q[a])?q[a].position:q[g].position;h=q.getAlignment(a,g);if(Sys.isObj(l)&&Sys.isArray(l.modes)){if(l.modes.contains(k)){l=l.content}else{continue}}p=this.initTextItem(r.width,r.height,r.x,r.y,s,b,h);d=(typeof l==="function")?l:l.content;c[e]={item:p,valueFunction:d};o.add(p);p.stop()}return c},updateTexts:function(){var d=this,c=d.GAME_MODES,e=d.model.readData("gameMode"),a=c.length,b;if(Sys.isDefined(d.textItems)){for(b=-1;++b<a;){d.updateMainTypesTexts(d.textItems[c[b]],e,(c[b]===e))}}},updateMainTypesTexts:function(a,d,b){var g=Object.keys(a),f=g.length,e,c;for(c=-1;++c<f;){e=g[c];this.updateSubTypeTexts(a[e],d,b,e)}},updateSubTypeTexts:function(h,j,f,e){var n=this,k=Object.keys(h),r=k.length,p,m,q,b,g;for(g=-1;++g<r;){p=k[g];m=h[p];q=m.item;b=q.prop;var a=j+"_"+e+"_"+p,d=b.customProps.defaultMainType+"_"+e+"_"+p,c=(Sys.isDefined(n[a])?n[a].font:n[d].font),o=(Sys.isDefined(n[a])?n[a].fillstyle:n[d].fillstyle),l=n.getAlignment(a,d);if(f){n.updateTextItem(q,m.valueFunction.call(n),c,o,l);if(!q.prop.running){q.play()}}else{q.stop()}}},initTextItem:function(a,i,g,f,c,h,d){var e=this,b=e.getInMemoryCanvas(a,i);if(Sys.isDefined(d)){b.ctx.textAlign=d.horizontal}return new Animation.Item({top:f,left:g,width:a,height:i,depth:c,image:b.canvas,customProps:{inMemCanvas:b,defaultMainType:h,alignment:d}})},updateTextItem:function(l,b,c,k,e,i){var a=l.prop,h=Sys.isDefined(e)?e:{horizontal:"left",vertical:false},g=h.horizontal==="right"?a.width:0,d=a.customProps.inMemCanvas,f=Animation.utils.text.measureText(b.toString(),c,0,d.ctx).height/2,j=Sys.isDefined(i)?i:20;d.ctx.clearRect(0,0,d.canvas.width,d.canvas.height);Animation.utils.text.wrapCanvasText(b.toString(),c,g,f,a.width,j,[{fillStyle:k,drawType:"fill"}],d.ctx,h.vertical)},getInMemoryCanvas:function(d,a){var c=document.createElement("canvas"),b=c.getContext("2d");c.width=d;c.height=a;return{canvas:c,ctx:b}},showBalanceAndBet:function(){this.updateTexts()},showWin:function(){this.updateTexts()},onGameModeChanged:function(g){var f=this,b=f.backgroundItems,d=f.GAME_MODES;for(var c=-1,a=d.length;++c<a;){var e=b[d[c]];if(d[c]===g){e.play()}else{e.stop()}}this.updateTexts()},showProgressiveWin:function(){this.updateTexts()},getAlignment:function(b,a){var c=this;return Sys.isDefined(c[b])?c[b].alignment:c[a].alignment},countUpCallback:function(){},countUpProgressiveWin:function(){this.fireEvent("view:countUpComplete")},showFreeSpinsLeft:function(){},showAdditionalFreeSpinsWon:function(){},showWinUpTo:function(){},show:function(){},hideElement:function(){},showElement:function(){},setupView:function(){}};Interface.Slots.CoinsFieldDesktopView=Sys.extend(Interface.Slots.CoinsFieldBaseView,Interface.Slots.CoinsFieldDesktopView,"Interface.Slots.CoinsFieldDesktopView");Sys.ns("Interface");Interface.SettingsWindow={constructor:function(){Interface.SettingsWindow.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Interface.SettingsWindowController,model:Interface.SettingsWindowModel,view:Interface.SettingsWindowBaseView}},getMixinDependencies:function(){return["orientation"]}};Interface.SettingsWindow=Sys.extend(Core.Module,Interface.SettingsWindow,"Interface.SettingsWindow");Sys.ns("Interface");Interface.SettingsWindowController={constructor:function(){Interface.SettingsWindowController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"view:opened":a.opened,"view:close":a.onCloseRequest,"view:closed":a.closed,"request:settingsWindow.open":a.onOpenRequest,"request:settingsWindow.close":a.onCloseRequest,"request:settingsWindow.openChild":a.onOpenChildRequest,"request:settingsWindow.closeChild":a.onCloseChildRequest,"request:settingsWindow.addChild":a.addChild,"request:settingsWindow.removeChild":a.removeChild,"request:settingsWindow.activateChild":a.activateChild,"request:settingsWindow.deactivateChild":a.deactivateChild})},onOpenRequest:function(){var a=this;if(!a.model.readData("open")){a.open(this.model.readData("currentlyShowingChild"))}},onOpenChildRequest:function(d,a){var b=this,c=b.model.isActiveChild(d);if(c){if(!b.model.readData("open")){b.open(d,a)}else{b.openChild(d,a)}}},onCloseRequest:function(){var a=this;if(a.model.readData("open")){a.close()}},onCloseChildRequest:function(b){var a=this;if(b===a.model.readData("currentlyShowingChild")){a.close()}},open:function(c,a){var b=this;b.model.storeData("open",true);b.view.open();if(Sys.isDefined(c)){b.openChild(c,a)}},openChild:function(a,c){var d=this,b=d.model.readData("currentlyShowingChild");if(b!==a){d.model.storeData("currentlyShowingChild",a);d.closeChild(b)}d.fireEvent("notify:settingsWindow.openedChild",a,c);d.view.showChild(a)},close:function(){var a=this;a.model.storeData("open",false);a.closeChild(a.model.readData("currentlyShowingChild"));a.view.close()},closeChild:function(a){this.fireEvent("notify:settingsWindow.closedChild",a)},opened:function(){this.fireEvent("notify:settingsWindow.open")},closed:function(){this.fireEvent("notify:settingsWindow.closed")},addChild:function(b,a){this.model.addChild(b,a);this.view.addChild(a)},removeChild:function(a){this.view.removeChild(a);this.model.removeChild(a)},activateChild:function(a){this.model.activateChild(a)},deactivateChild:function(a){this.model.deactivateChild(a)}};Interface.SettingsWindowController=Sys.extend(Core.Controller,Interface.SettingsWindowController,"Interface.SettingsWindowController");Sys.ns("Interface");Interface.SettingsWindowModel={constructor:function(){Interface.SettingsWindowModel.superclass.constructor.apply(this,arguments)},addChild:function(c,a){var b=this.readData("children");if(!Sys.isDefined(b[c])){b[c]={active:true,config:a}}},removeChild:function(a){delete this.readData("children")[a]},isActiveChild:function(a){var b=this.readData("children")[a];return Sys.isDefined(b)&&b.active},getChildConfig:function(a){return this.readData("children")[a].config},activateChild:function(a){var b=this.readData("children")[a];if(!Sys.isDefined(b)){b.active=true}},deactivateChild:function(a){var b=this.readData("children")[a];if(!Sys.isDefined(b)){b.active=false}},setupData:function(){this.storeData("children",{});this.storeData("open",false)}};Interface.SettingsWindowModel=Sys.extend(Core.Model,Interface.SettingsWindowModel,"Interface.SettingsWindowModel");Sys.ns("Interface");Interface.SettingsWindowBaseView={BASE_CSS:"interface-settingsWindow_base",PORTRAIT_CSS:"interface-settingsWindow_portrait",LANDSCAPE_CSS:"interface-settingsWindow_landscape",HEADER_CSS:"interface-settingsWindow_header interface-settingsSection_subSection_uri",CONTENT_CSS:"interface-settingsWindow_content",RENDER_TARGET:"gameWrapper",constructor:function(){Interface.SettingsWindowBaseView.superclass.constructor.apply(this,arguments)},open:function(){this.container.el.style.display="block";this.fireEvent("view:opened")},close:function(){this.container.el.style.display="none";this.fireEvent("view:closed")},adaptToOrientation:function(a){this.setStyle(a)},addChild:function(a){this.content.add(a.content)},removeChild:function(a){this.content.remove(this.model.getChildConfig(a).content)},showChild:function(a){if(Environment.orientation()==="portrait"){this.open()}this.setTitle(this.model.getChildConfig(a).title)},init:function(){var a=this;Interface.SettingsWindowBaseView.superclass.init.apply(a,arguments);a.closeAnimation={};a.openAnimation={};a.setupDOMStructure()},setupDOMStructure:function(){var a=this;a.container=new Sys.Element({id:"settingsWindow",tag:"div",cls:a.BASE_CSS,renderTo:a.RENDER_TARGET});a.header=a.container.add(new Sys.Element({id:"settingsWindowHeader",tag:"div",cls:a.HEADER_CSS}));a.content=a.container.add(new Sys.Element({id:"settingsWindowContent",tag:"div",cls:a.CONTENT_CSS}))},setupEvents:function(){var a=this;a.on({"model:childAdded":a.addChild,"model:childRemoved":a.removeChild,"model:showChild":a.showChild})},removeAnimations:function(){var a=this;if(Sys.isDefined(a.openAnimation.LANDSCAPE)){a.openAnimation.LANDSCAPE.removeAnimation(a.container.el)}if(Sys.isDefined(a.openAnimation.PORTRAIT)){a.openAnimation.PORTRAIT.removeAnimation(a.container.el)}},setTitle:function(a){this.header.el.textContent=a}};Interface.SettingsWindowBaseView=Sys.extend(Core.View,Interface.SettingsWindowBaseView,"Interface.SettingsWindowBaseView");Sys.ns("Interface");Interface.SettingsWindowMobileView={PORTRAIT_CSS:"interface-settingsWindow_portrait_mobile",LANDSCAPE_CSS:"interface-settingsWindow_landscape_mobile",constructor:function(){Interface.SettingsWindowMobileView.superclass.constructor.apply(this,arguments)},adaptToOrientation:function(a){Interface.SettingsWindowMobileView.superclass.adaptToOrientation.call(this,a);this.setHeight(a)},setHeight:function(a){if(a==="PORTRAIT"){this.container.el.style.height=(Environment.getGameHeight()+Environment.getSpaceBelowGame())+"px"}else{this.container.el.style.height=""}}};Interface.SettingsWindowMobileView=Sys.extend(Interface.SettingsWindowBaseView,Interface.SettingsWindowMobileView,"Interface.SettingsWindowMobileView");Sys.ns("Interface");Interface.SettingsWindowDesktopView={BASE_CSS:"interface-settingsWindow_base",LANDSCAPE_CSS:"interface-settingsWindow_landscape_desktop",CLOSE_BUTTON_CSS:"interface-settingsWindow_desktop_closeButton interface-settingsWindow_closeButton_uri",constructor:function(){Interface.SettingsWindowDesktopView.superclass.constructor.apply(this,arguments)},setupDOMStructure:function(){var a=this;Interface.SettingsWindowDesktopView.superclass.setupDOMStructure.apply(a,arguments);a.closeButton=new Interface.utils.DOMButton({id:"settingsWindowCloseButton",baseCSS:a.CLOSE_BUTTON_CSS,clickCallback:a.fireEvent.bind(a,"view:close"),enabled:false});a.container.add(a.closeButton.getContainer())},open:function(){Interface.SettingsWindowDesktopView.superclass.open.apply(this,arguments);this.closeButton.enable("sectionClosed")},close:function(){Interface.SettingsWindowDesktopView.superclass.close.apply(this,arguments);this.closeButton.disable("sectionClosed")}};Interface.SettingsWindowDesktopView=Sys.extend(Interface.SettingsWindowBaseView,Interface.SettingsWindowDesktopView,"Interface.SettingsWindowDesktopView");Sys.ns("Interface");Interface.SettingsMenu={constructor:function(){Interface.SettingsMenu.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Interface.SettingsMenuController,model:Interface.SettingsMenuModel,view:Interface.SettingsMenuBaseView}},getMixinDependencies:function(){return["userInput","orientation"]}};Interface.SettingsMenu=Sys.extend(Core.Module,Interface.SettingsMenu,"Interface.SettingsMenu");Sys.ns("Interface");Interface.SettingsMenuController={constructor:function(){Interface.SettingsMenuController.superclass.constructor.apply(this,arguments);this.deactivatedAtSpinStart=true},setupEvents:function(){var a=this;a.on({"request:settingsMenu.open":a.onOpenRequest,"request:settingsMenu.close":a.onCloseRequest,"request:settingsMenu.addChild":a.addChild,"request:settingsMenu.removeChild":a.removeChild,"request:settingsMenu.activateChild":a.activateChild,"request:settingsMenu.deactivateChild":a.deactivateChild,"notify:stateHandler.enteringIdleState":a.activateChildrenAfterSpin,"notify:stateHandler.leavingIdleState":a.deactivateChildrenDuringSpin,"notify:moduleLoader.finishedLoadingModules":a.onModulesFinishedLoading,"notify:stateHandler.leavingBeforeLoaderCloseState":a.onBeforeLoaderFinished,"view:contentChanged":a.onContentChangedInView,"view:contentClosed":a.onContentClosedInView})},onBeforeLoaderFinished:function(){var a=this;a.model.storeData("loaderFinished",true);if(!a.model.readData("determinedChildSize")){a.view.onBeforeLoaderFinished()}},onModulesFinishedLoading:function(){if(this.model.readData("alwaysOpen")===true){this.open()}},onOpenRequest:function(a){var e=this,b=e.model.readData("open"),d=e.view.canOpenWithoutSelection(),c=e.model.readData("lastSelectedChild"),f=Sys.isDefined(c);if(!f){c=e.model.readData("defaultChild");f=Sys.isDefined(c)}if(!b&&(d||(a&&f))){e.open();if(a&&f){e.select(c)}}},onCloseRequest:function(){var a=this,b=a.model.readData("currentlySelectedChild");if(a.model.readData("open")){a.close();a.deselectCurrentChild()}},open:function(){var a=this;a.startListeningToUserInput();a.model.storeData("open",true);a.view.open();a.fireEvent("notify:settingsMenu.open")},close:function(){var a=this;a.stopListeningToUserInput();a.view.close();a.model.storeData("open",false);a.fireEvent("notify:settingsMenu.closed")},select:function(a){this.view.selectChildByName(a)},deselectCurrentChild:function(){this.view.deselectCurrentChild()},addChild:function(c,a){var b=this;b.addListener("notify:"+c+".shown",b.onChildOpened.bind(b,c));b.addListener("notify:"+c+".hidden",b.onChildClosed.bind(b,c));b.model.addChild(c,a);b.view.addChild(c)},onChildOpened:function(a){if(!this.model.readData("open")){this.open()}this.select(a)},onChildClosed:function(a){if(this.model.readData("currentlySelectedChild")===a){this.deselectCurrentChild()}},removeChild:function(b){var a=this;a.removeListener("notify:"+b+".shown");a.removeListener("notify:"+b+".hidden");a.view.removeChild(b);a.model.removeChild(b)},activateChild:function(a){this.model.activateChild(a)},deactivateChild:function(a){this.model.deactivateChild(a)},activateChildrenAfterSpin:function(){this.model.storeData("inIdleState",true);if(this.deactivatedAtSpinStart){this.deactivatedAtSpinStart=false;this.toggleChildrenDuringSpin(true)}},deactivateChildrenDuringSpin:function(){this.model.storeData("inIdleState",false);this.deactivatedAtSpinStart=true;this.toggleChildrenDuringSpin(false)},toggleChildrenDuringSpin:function(e){var a=this.model.getChildrenDisabledDuringSpins(),d=a.length,c=(e)?"activateChild":"deactivateChild",b;for(b=-1;++b<d;){a[b].active=(e&&a[b].active)?true:false;this.view[c](a[b])}},onPortrait:function(){this.view.onPortrait()},onLandscape:function(){this.view.onLandscape()},onUserInputStart:function(a){if(this.model.readData("open")){this.view.onUserInputStart(a)}},onUserInputMove:function(a){if(this.model.readData("open")){this.view.onUserInputMove(a)}},onUserInputEnd:function(a){if(this.model.readData("open")){this.view.onUserInputEnd(a)}},onContentChangedInView:function(a){this.model.storeData("currentlySelectedChild",a);if(Sys.isString(a)){this.fireEvent("request:"+a+".show")}},onContentClosedInView:function(c){var b=this,a=b.model;a.storeData("lastSelectedChild",c);if(a.readData("currentlySelectedChild")===c){a.storeData("currentlySelectedChild",undefined);if(!b.view.canOpenWithoutSelection()){b.close()}}if(Sys.isString(c)){b.fireEvent("request:"+c+".hide")}}};Interface.SettingsMenuController=Sys.extend(Core.Controller,Interface.SettingsMenuController,"Interface.SettingsMenuController");Sys.ns("Interface");Interface.SettingsMenuModel={constructor:function(){Interface.SettingsMenuModel.superclass.constructor.apply(this,arguments)},addChild:function(f,c){var e=this,d=e.readData("children"),b=e.readData("disableDuringSpin"),a=Sys.isDefined(c)?c:{};if(!Sys.isDefined(d[f])){d[f]={name:f,active:false,order:a.order,accessibleDuringSpins:a.accessibleDuringSpins,toggleOnSelection:(a.toggleOnSelection===true)};if(Sys.isDefined(a.isDefault)&&a.isDefault){e.storeData("defaultChild",f)}if(!Sys.isDefined(a.accessibleDuringSpins)||!a.accessibleDuringSpins){b.push(d[f])}}},removeChild:function(e){var d=this.readData("children"),c=d[e],a=this.readData("disableDuringSpin"),b=a.indexOf(c);if(!Sys.isDefined(c)){if(b>=0){a.splice(b,1)}delete (d[e])}},activateChild:function(d){var b=this,a=b.readData("children")[d],c=b.getChildrenDisabledDuringSpins();if(Sys.isDefined(a)){if(c.contains(a)){a.accessibleDuringSpins=true;c=c.splice(c.indexOf(a),1);b.storeData("disableDuringSpin",c)}a.active=true;b.fireEvent("model:childActivated",a)}},deactivateChild:function(d){var b=this,a=b.readData("children")[d],c=b.getChildrenDisabledDuringSpins();if(Sys.isDefined(a)){if(!c.contains(a)){a.accessibleDuringSpins=false;c.push(a);b.storeData("disableDuringSpin",c)}a.active=false;b.fireEvent("model:childDeactivated",a)}},getChildrenDisabledDuringSpins:function(){return this.readData("disableDuringSpin")},setupData:function(){var a=this;a.storeData("children",{});a.storeData("disableDuringSpin",[]);a.storeData("status","closed");if(Environment.getCurrentPlatform()==="desktop"){a.storeData("alwaysOpen",true)}}};Interface.SettingsMenuModel=Sys.extend(Core.Model,Interface.SettingsMenuModel,"Interface.SettingsMenuModel");Sys.ns("Interface");Interface.SettingsMenuBaseView={BASE_CSS:"interface-settingsMenu_base",PORTRAIT_CSS:"interface-settingsMenu_portrait",LANDSCAPE_CSS:"interface-settingsMenu_landscape",CHILDREN_CSS:"interface-settingsMenu_children",CHILD_CSS:"interface-settingsMenu_child_base",RENDER_TARGET:"gameWrapper",START_INDEX:2,CAN_OPEN_WITHOUT_SELECTION:false,constructor:function(){Interface.SettingsMenuBaseView.superclass.constructor.apply(this,arguments)},open:function(){var c=this,b=c.childElements.getChildren().length,a=Environment.orientation();c.container.el.style.display="block";if(b>0&&c.totalChildWidth===0){c.adaptToOrientation(a)}},canOpenWithoutSelection:function(){return this.CAN_OPEN_WITHOUT_SELECTION},close:function(){this.container.el.style.display="none"},onUserInputStart:function(c){var b=this,a=Sys.UserInputUtils.isCoordinateTarget(b.container.el,c);if(a){b.distanceSinceUserInputStart=0;b.prevX=c.x;b.scroller.doTouchStart([{pageX:c.x,pageY:c.y}],Date.now())}b.wasInitialInputTarget=a;if(a&&!b.shouldScroll){b.onUserInputEnd(c)}},onUserInputMove:function(b){var a=this;if(a.wasInitialInputTarget){a.distanceSinceUserInputStart+=Math.abs(a.prevX-b.x);a.prevX=b.x;a.scroller.doTouchMove([{pageX:b.x,pageY:b.y}],Date.now())}},onUserInputEnd:function(d){var c=this,e,b,a;if(c.wasInitialInputTarget){c.scroller.doTouchEnd(Date.now());if(c.distanceSinceUserInputStart<10){a=Sys.UserInputUtils.getCoordinatesRelativeToElement(d,c.childElements.el).x;b=c.getIndexFromPosition(a);e=c.getChildFromElement(c.childElements.getChildren()[b]);if(Sys.isDefined(e)&&e.name===c.model.readData("currentlySelectedChild")){if(e.toggleOnSelection){c.deselectCurrentChild()}c.snapToIndex(b)}else{c.selectChild(e,b)}}}c.wasInitialInputTarget=false},selectChildByName:function(a){var b=this,c=b.model.readData("children")[a];if(a!==b.model.readData("currentlySelectedChild")&&Sys.isDefined(c)){b.selectChild(c,b.getChildIndex(c))}},deselectCurrentChild:function(){var b=this,a=b.model.readData("children"),c=a[b.model.readData("currentlySelectedChild")];if(Sys.isDefined(c)){b.deselectChild(c)}},adaptToOrientation:function(c){this.setStyle(c);var f=this,d=f.model.readData("children"),g=d[f.model.readData("currentlySelectedChild")],b=f.getChildIndex(g),e=f.scrollerWrapper.el.clientWidth,a;f.determineChildSize();if(Object.keys(d).length>0&&f.totalChildWidth===0){return}f.menuWidth=e;f.scroller.setPosition(Math.round(Math.abs(e-f.totalChildWidth)),0);f.scroller.setDimensions(e,10,f.totalChildWidth+e-f.childWidth,10);if(f.totalChildWidth>e){a=b>=0?b*f.childWidth:f.START_INDEX*f.childWidth;f.toggleFade(true);f.padding=Math.round((e-f.childWidth)/2);f.shouldScroll=true;f.useScrollOffset=true;f.childElements.el.style.left=0;f.scroller.scrollTo(a,0,false)}else{f.toggleFade(false);f.padding=0;f.useScrollOffset=false;f.scroller.scrollTo(0,0,false);f.childElements.el.style.left=Math.round((e-f.totalChildWidth)/2)+"px";f.shouldScroll=false}},selectChild:function(d,a){var c=this,b=c.model.readData("children")[c.model.readData("currentlySelectedChild")];d.element.addCls("selected");c.snapToIndex(a);c.fireEvent("view:contentChanged",d.name);if(Sys.isDefined(b)){c.deselectChild(b)}},deselectChild:function(a){a.element.removeCls("selected");this.fireEvent("view:contentClosed",a.name)},snapToIndex:function(a){this.scroller.scrollTo(Math.round(a*this.childWidth),0,true)},getIndexFromPosition:function(a){var c=Math.floor(a/this.childWidth),b=this.childElements.getChildren().length;if(c<0){c=0}else{if(c>=b){c=b-1}}return c},init:function(){var a=this;Interface.SettingsMenuBaseView.superclass.init.apply(a,arguments);a.childWidth=0;a.totalChildWidth=0;a.menuWidth=0;a.distanceSinceUserInputStart=0;a.closeAnimation={};a.openAnimation={};a.padding=0;a.prevX=0;a.x=0;a.useScrollOffset=false;a.shouldScroll=true;a.setupDOMStructure()},setupEvents:function(){var a=this;a.on({"model:childActivated":a.activateChild,"model:childDeactivated":a.deactivateChild})},toggleFade:function(a){var b=(a)?"block":"none";this.leftFade.el.style.display=b;this.rightFade.el.style.display=b},determineChildSize:function(){var c=this,e=c.childElements.getChildren(),d=e.length,a,b;if(d===0){return}b=Math.ceil(Math.round(e[0].getBoundingClientRect().width)*(1/Environment.scale));a=b*d;if(c.totalChildWidth!==a){c.childElements.el.style.width=a+"px"}c.totalChildWidth=a;c.childWidth=b},addChild:function(b){var d=this,e=d.model.readData("children")[b],c=this.createChild(e.name),a=d.getNextClosestSibling(e);e.left=d.childWidth*e.order;e.element=c;if(Sys.isDefined(a)){d.childElements.addBefore(c,a.element)}else{d.childElements.add(c)}d.determineChildSize()},removeChild:function(a){var b=this,c=b.model.readData("children")[a];if(Sys.isDefined(c)){b.childElements.remove(c.element);b.determineChildSize()}},activateChild:function(a){a.element.removeCls("deactivated")},deactivateChild:function(a){a.element.addCls("deactivated")},setupDOMStructure:function(){var a=this;a.container=new Sys.Element({tag:"div",cls:a.BASE_CSS,renderTo:a.RENDER_TARGET});a.touchArea=a.container.add(new Sys.Element({tag:"div",cls:"interface-settingsMenu_touchArea"}));a.leftFade=a.container.add(new Sys.Element({tag:"div",cls:"interface-settingsMenu_leftFade interface-settingsMenu_fade_uri"}));a.rightFade=a.container.add(new Sys.Element({tag:"div",cls:"interface-settingsMenu_rightFade interface-settingsMenu_fade_uri"}));a.scrollerWrapper=a.container.add(new Sys.Element({tag:"div",cls:"interface-settingsMenu_scrollerWrapper"}));a.childElements=a.scrollerWrapper.add(new Sys.Element({tag:"ul",cls:a.CHILDREN_CSS}));a.scroller=new Scroller(a.scrollCallback.bind(a),{scrollingY:false,speedMultiplier:1.5/Number(Environment.getScale())})},scrollCallback:function(d,c){var a=this,b=(a.useScrollOffset)?((a.menuWidth-a.childWidth)/2):0;if(a.shouldScroll){a.childElements.el.style[Sys.utils.pollyFill("transform")]="translate("+Math.round(-d+b)+"px, "+(-c)+"px)";a.x=-d}},createChild:function(c){var b=this,a=new Sys.Element({tag:"li",cls:b.CHILD_CSS});a.add(new Sys.Element({tag:"div",cls:"interface-settingsMenu_child_image interface-settingsMenu_child_"+c+"_uri"}));return a},onPortrait:function(){this.adaptToOrientation("PORTRAIT")},onLandscape:function(){this.adaptToOrientation("LANDSCAPE")},getChildIndex:function(a){if(Sys.isDefined(a)){return this.childElements.getChildren().indexOf(a.element.el)}return -1},getChildFromElement:function(b){var a=this.model.readData("children"),c;Sys.iterate(a,function(d,e){if(e.element.el===b){c=e;return false}});return c},getNextClosestSibling:function(c){var b=this.model.readData("children"),a=undefined;Sys.iterate(b,function(d,e){if(e!==c&&(e.order>c.order&&(!Sys.isDefined(a)||e.order<a.order))){a=e}});return a},onBeforeLoaderFinished:function(){}};Interface.SettingsMenuBaseView=Sys.extend(Core.View,Interface.SettingsMenuBaseView,"Interface.SettingsMenuBaseView");Sys.ns("Interface");Interface.SettingsMenuMobileView={PORTRAIT_CSS:"interface-settingsMenu_portrait_mobile",LANDSCAPE_CSS:"interface-settingsMenu_landscape_mobile",constructor:function(){Interface.SettingsMenuMobileView.superclass.constructor.apply(this,arguments)}};Interface.SettingsMenuMobileView=Sys.extend(Interface.SettingsMenuBaseView,Interface.SettingsMenuMobileView,"Interface.SettingsMenuMobileView");Sys.ns("Interface");Interface.DesktopSettingsMenu={constructor:function(){Interface.DesktopSettingsMenu.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Interface.DesktopSettingsMenuController,view:Interface.DesktopSettingsMenuView}}};Interface.DesktopSettingsMenu=Sys.extend(Core.Module,Interface.DesktopSettingsMenu,"Interface.DesktopSettingsMenu");Sys.ns("Interface");Interface.DesktopSettingsMenuController={constructor:function(){Interface.DesktopSettingsMenuController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:desktopSettingsMenu.addChild":a.view.addChild.bind(a.view),"request:desktopSettingsMenu.removeChild":a.view.removeChild.bind(a.view)})}};Interface.DesktopSettingsMenuController=Sys.extend(Core.Controller,Interface.DesktopSettingsMenuController,"Interface.DesktopSettingsMenuController");Sys.ns("Interface");Interface.DesktopSettingsMenuView={BASE_CSS:"interface-desktopSettingsMenu_base",CHILDREN_CSS:"interface-settingsMenu_children",CHILD_CSS:"interface-settingsMenu_child_desktop",RENDER_TARGET:"gameWrapper",constructor:function(){Interface.DesktopSettingsMenuView.superclass.constructor.apply(this,arguments)},init:function(){var a=this;Interface.DesktopSettingsMenuView.superclass.init.apply(a,arguments);a.childWidth=0;a.setupDOMStructure();a.children={}},setupDOMStructure:function(){var a=this;a.container=new Sys.Element({tag:"div",cls:a.BASE_CSS,renderTo:a.RENDER_TARGET});a.childElements=a.container.add(new Sys.Element({tag:"ul",cls:a.CHILDREN_CSS}))},addChild:function(c,b){var d=this,e=d.createListItem(b.element),a;b.element=e;a=d.getNextClosestSibling(b);d.children[c]=b;if(Sys.isDefined(a)){d.childElements.addBefore(e,a.element)}else{d.childElements.add(e)}},createListItem:function(a){var c=this,b=new Sys.Element({tag:"li",cls:c.CHILD_CSS});b.add(a);return b},getNextClosestSibling:function(b){var c=this.children,a=undefined;Sys.iterate(c,function(d,e){if(e!==b&&(e.order>b.order&&(!Sys.isDefined(a)||e.order<a.order))){a=e}});return a},removeChild:function(a){var b=this,c=b.children[a];if(Sys.isDefined(c)){b.childElements.remove(c.element)}}};Interface.DesktopSettingsMenuView=Sys.extend(Core.View,Interface.DesktopSettingsMenuView,"Interface.DesktopSettingsMenuView");Sys.ns("Interface");Interface.SettingsButton={constructor:function(){Interface.SettingsButton.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Interface.SettingsButtonController,model:Interface.SettingsButtonModel,view:Interface.SettingsButtonBaseView}},getMixinDependencies:function(){return[{userInput:{listenToUserInput:true}},"orientation"]}};Interface.SettingsButton=Sys.extend(Core.Module,Interface.SettingsButton,"Interface.SettingsButton");Sys.ns("Interface");Interface.SettingsButtonController={TOGGLE_DELAY:500,constructor:function(){Interface.SettingsButtonController.superclass.constructor.apply(this,arguments)},init:function(){Interface.SettingsButtonController.superclass.init.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:settingsButton.enable":a.enable,"request:settingsButton.disable":a.disable,"notify:stateHandler.enteringIdleState":a.enable,"notify:stateHandler.leavingIdleState":a.disable,"notify:settingsMenu.open":a.onSettingsMenuOpened,"notify:settingsMenu.closed":a.onSettingsMenuClosed})},enable:function(){this.view.enable();this.model.storeData("disabled",false)},disable:function(){var a=this;a.view.disable();a.model.storeData("disabled",true);if(a.model.readData("status")==="open"){a.close()}},open:function(){this.fireEvent("request:settingsMenu.open",true);this.model.storeData("status","open");this.view.adaptToOrientation(Environment.orientation().toUpperCase())},close:function(){this.fireEvent("request:settingsMenu.close");this.model.storeData("status","closed");this.view.adaptToOrientation(Environment.orientation().toUpperCase())},onSettingsMenuOpened:function(){this.model.storeData("status","open");this.view.adaptToOrientation(Environment.orientation().toUpperCase())},onSettingsMenuClosed:function(){this.model.storeData("status","closed");this.view.adaptToOrientation(Environment.orientation().toUpperCase())},onUserInputStart:function(a){this.view.onUserInputStart(a)},onUserInputEnd:function(c){var b=this,a=Date.now();if(b.model.readData("disabled")){return}if((!Sys.isDefined(b.lastToggleOccured)||(a-b.lastToggleOccured>b.TOGGLE_DELAY))&&b.view.checkHit(c)){if(b.model.readData("status")==="open"){b.close()}else{b.open()}b.lastToggleOccured=Date.now()}}};Interface.SettingsButtonController=Sys.extend(Core.Controller,Interface.SettingsButtonController,"Interface.SettingsButtonController");Sys.ns("Interface");Interface.SettingsButtonModel={constructor:function(){Interface.SettingsButtonModel.superclass.constructor.apply(this,arguments)},setupData:function(){this.storeData("status","closed");this.storeData("disabled",true)}};Interface.SettingsButtonModel=Sys.extend(Core.Model,Interface.SettingsButtonModel,"Interface.SettingsButtonModel");Sys.ns("Interface");Interface.SettingsButtonBaseView={BASE_BUTTON_CSS:"interface-settingsButton_baseButton",OPEN_URI:"interface-settingsButton_open_uri",CLOSED_URI:"interface-settingsButton_closed_uri",DISABLE_CSS:"interface-buttonDisable",PORTRAIT_CSS:"interface-settingsButton_portrait",LANDSCAPE_CSS:"interface-settingsButton_landscape",RENDER_TARGET:"gameWrapper",constructor:function(){Interface.SettingsButtonBaseView.superclass.constructor.apply(this,arguments)},adaptToOrientation:function(a){this.setStyle(a)},enable:function(){this.container.removeCls(this.DISABLE_CSS)},disable:function(){this.container.addCls(this.DISABLE_CSS)},onUserInputStart:function(a){this.wasInitialInputTarget=Sys.UserInputUtils.isCoordinateTarget(this.container.el,a)},checkHit:function(b){var a=false;if(this.wasInitialInputTarget){a=Sys.UserInputUtils.isCoordinateTarget(this.container.el,b)}this.wasInitialInputTarget=false;return a},init:function(){var a=this;Interface.SettingsWindowBaseView.superclass.init.apply(a,arguments);a.previousCSS="";a.wasInitialInputTarget=false;a.setupDOMStructure()},setStyle:function(b){var c=this,a=c.model.readData("status").toUpperCase();Mixins.orientation.view.methods.setStyle.apply(c,arguments);if(a==="OPEN"){c.container.replaceCSSClass(c.CLOSED_URI,c.OPEN_URI)}else{if(a==="CLOSED"){c.container.replaceCSSClass(c.OPEN_URI,c.CLOSED_URI)}}},setupDOMStructure:function(){var a=this;a.container=new Sys.Element({tag:"div",cls:a.BASE_BUTTON_CSS+" "+a.CLOSED_URI+" "+a.DISABLE_CSS,renderTo:a.RENDER_TARGET})}};Interface.SettingsButtonBaseView=Sys.extend(Core.View,Interface.SettingsButtonBaseView,"Interface.SettingsButtonBaseView");Sys.ns("Interface");Interface.SettingsButtonMobileView={PORTRAIT_CSS:"interface-settingsButton_portrait_mobile",LANDSCAPE_CSS:"interface-settingsButton_landscape_mobile",BACKGROUND_CSS:"interface-settingsButton_background",constructor:function(){Interface.SettingsButtonMobileView.superclass.constructor.apply(this,arguments)},setStyle:function(a){Interface.SettingsButtonMobileView.superclass.setStyle.apply(this,arguments);if(a==="PORTRAIT"){this.background.el.style.display="block"}else{this.background.el.style.display="none"}},setupDOMStructure:function(){var a=this;Interface.SettingsButtonMobileView.superclass.setupDOMStructure.apply(a,arguments);a.background=new Sys.Element({tag:"div","class":a.BACKGROUND_CSS,renderTo:a.RENDER_TARGET})}};Interface.SettingsButtonMobileView=Sys.extend(Interface.SettingsButtonBaseView,Interface.SettingsButtonMobileView,"Interface.SettingsButtonMobileView");Sys.ns("Interface");Interface.BetSettings={constructor:function(){Interface.BetSettings.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["userInput"],desktop:["userInput","animation"]}},getDefaultMVCClasses:function(){return{controller:Interface.BetSettingsController,model:Interface.BetSettingsModel,view:Interface.BetSettingsBaseView}}};Interface.BetSettings=Sys.extend(Interface.SettingsSection,Interface.BetSettings,"Interface.BetSettings");Sys.ns("Interface");Interface.BetSettingsController={constructor:function(){Interface.BetSettingsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this,b;Interface.BetSettingsController.superclass.setupEvents.apply(a,arguments);a.on({"notify:moneyManager.betChanged":a.view.update.bind(a.view),"notify:settingsManager.settingChanged":a.onSettingChanged,"notify:stateHandler.enteringIdleState":a.enable.bind(a,"notInIdleState"),"notify:stateHandler.leavingIdleState":a.disable.bind(a,"notInIdleState"),"notify:gameModeChanged":a.onGameModeChanged,"notify:stateHandler.enteringspinTypeRespinRestoreState":a.disable.bind(a,"notInIdleState"),"request:betSettings.hideCashDisplay":a.view.hideCashDisplay.bind(a.view),"request:betSettings.showCashDisplay":a.view.showCashDisplay.bind(a.view),"request:enableBasicGamePanel":a.enable,"request:disableBasicGamePanel":a.disable,"request:betSettings.enable":a.enable,"request:betSettings.disable":a.disable});b=!a.model.readData("inFreerounds");a.fireEvent("request:settingsManager.storeData","betLevel",a.model.readData("betLevel"),b);a.fireEvent("request:settingsManager.storeData","denomination",a.model.readData("denomination"),b)},onGameModeChanged:function(b){var a=this;if(b==="BASIC"){a.view.showSelectors();a.view.hideFreespinLabels()}else{a.view.hideSelectors();a.view.showFreespinLabels()}},onSettingChanged:function(a,b){if(a==="betLevel"||a==="denomination"){this.model.storeData(a,b)}},onUserAction:function(c,b){var a;if(c==="betLevelChanged"){a="betLevel"}else{if(c==="coinValueChanged"){a="denomination";b=this.model.getDenomination(b)}}if(Sys.isDefined(a)){this.fireEvent("request:settingsManager.storeData",a,b,!this.model.readData("inFreerounds"))}}};Interface.BetSettingsController=Sys.extend(Interface.SettingsSectionController,Interface.BetSettingsController,"Interface.BetSettingsController");Sys.ns("Interface");Interface.BetSettingsModel={constructor:function(){Interface.BetSettingsModel.superclass.constructor.apply(this,arguments)},setupData:function(){var j=this,g=Resources.readData("gameServerInitResponseObject"),f=g.betlevel.standard,b=g.denomination.standard,d=g.betlevel.all,h=g.denomination.all,k=[],a,e,c;Interface.BetSettingsModel.superclass.setupData.apply(j,arguments);if(!Sys.isArray(d)){d=[d]}if(!Sys.isArray(h)){h=[h]}for(e=0;e<h.length;e++){k.push(j.getCoinValue(h[e]))}if(Services.localStorageManager.hasData("betLevel")){a=Number(Services.localStorageManager.readData("betLevel"))}if(Sys.isDefined(g.bet)&&Sys.isDefined(g.bet.betlevel)){f=g.bet.betlevel}else{if(Sys.isNumber(a)&&d.contains(a)){f=a}else{f=g.betlevel.standard}}if(Services.localStorageManager.hasData("denomination")){a=Number(Services.localStorageManager.readData("denomination"))}if(Sys.isDefined(g.bet)&&Sys.isDefined(g.bet.denomination)){b=g.bet.denomination}else{if(Sys.isNumber(a)&&h.contains(a)){b=a}else{b=g.denomination.standard}}if(Sys.isDefined(g.freeRoundsLeft)&&Number(g.freeRoundsLeft)>0){j.storeData("inFreerounds",true)}c=[{key:"betLevels",defaultValue:d,settingsManager:false,localStorage:false},{key:"updatableBetLevels",defaultValue:(d.length>1),settingsManager:false,localStorage:false},{key:"coinValues",defaultValue:k,settingsManager:false,localStorage:false},{key:"updatableCoinValues",defaultValue:(k.length>1),settingsManager:false,localStorage:false},{key:"betLevel",defaultValue:f,settingsManager:true,ignoreLocalStorageValue:true,localStorage:!j.readData("inFreerounds"),silent:false},{key:"denomination",defaultValue:b,settingsManager:true,ignoreLocalStorageValue:true,localStorage:!j.readData("inFreerounds"),silent:false}];c.forEach(j.initData,j)},storeData:function(a,b){Interface.BetSettingsModel.superclass.storeData.call(this,a,b);if(a==="denomination"){Interface.BetSettingsModel.superclass.storeData.call(this,"coinValue",this.getCoinValue(b))}},getDenomination:function(a){return a*100},getCoinValue:function(a){return a/100}};Interface.BetSettingsModel=Sys.extend(Interface.SettingsSectionModel,Interface.BetSettingsModel,"Interface.BetSettingsModel");Sys.ns("Interface");Interface.BetSettingsBaseView={BASE_CSS:"tab interface-betSettings_base",SECTION_CSS:"interface-settingsSection_subSection",PORTRAIT_CSS:"interface-betSettings_portrait",LANDSCAPE_CSS:"interface-betSettings_landscape",constructor:function(){Interface.BetSettingsBaseView.superclass.constructor.apply(this,arguments)},setUpContent:function(){var c=this,b=c.model,a;c.subComponents=[];c.container=new Sys.Element({id:"BetSettings",tag:"div",cls:c.BASE_CSS});c.betDisplays=c.container.add(new Sys.Element({tag:"ul","class":"interface-betSettings_betDisplays"}));c.betInCashDisplay=c.betDisplays.add(new Sys.Element({tag:"li","class":"interface-betSettings_betDisplays_size interface-betSettings_displayText",textContent:Services.languageManager.getText(Language.Keys.betInCash)}));c.betInCashValue=c.betInCashDisplay.add(new Sys.Element({tag:"div",textContent:"0","class":"interface-betSettings_displayValue"}));c.betInCoinsDisplay=c.betDisplays.add(new Sys.Element({tag:"li","class":"interface-betSettings_betDisplays_size interface-betSettings_displayText",textContent:Services.languageManager.getText(Language.Keys.betInCoins)}));c.betInCoinsValue=c.betInCoinsDisplay.add(new Sys.Element({tag:"div",textContent:"0","class":"interface-betSettings_displayValue"}));c.settings=c.container.add(new Sys.Element({tag:"ul","class":"interface-settingsSection_dynamicSliderPosition_container"}));c.betLevelText=c.settings.add(new Sys.Element({tag:"li","class":"interface-settingsSection_dynamicSliderPosition_label",textContent:Services.languageManager.getText(Language.Keys.betLevel)}));a=b.readData("betLevels");if(!b.readData("updatableBetLevels")){a=[a[0],""];c.betLevelText.el.style.opacity=0.5}c.betLevelSlider=new Interface.utils.Slider({id:"betSettingsBetLevelSlider",values:a,callback:c.onSliderValueChange.bind(c,"betLevelChanged"),showLabels:true});c.settings.add(new Sys.Element({tag:"li","class":"interface-settingsSection_dynamicSliderPosition_slider"})).add(c.betLevelSlider.getContainer());if(b.readData("updatableBetLevels")){c.subComponents.push(c.betLevelSlider)}c.coinValueText=c.settings.add(new Sys.Element({tag:"li","class":"interface-settingsSection_dynamicSliderPosition_label",textContent:Services.languageManager.getText(Language.Keys.coinValue)}));a=b.readData("coinValues");if(!b.readData("updatableCoinValues")){a=[a[0],""];c.coinValueText.el.style.opacity=0.5}c.coinValueSlider=new Interface.utils.Slider({id:"betSettingsCoinValueSlider",values:a,callback:c.onSliderValueChange.bind(c,"coinValueChanged"),showLabels:true});c.settings.add(new Sys.Element({tag:"li","class":"interface-settingsSection_dynamicSliderPosition_slider"})).add(c.coinValueSlider.getContainer());if(b.readData("updatableCoinValues")){c.subComponents.push(c.coinValueSlider)}c.portraitInformation=c.container.add(new Sys.Element({tag:"ul","class":"interface-betSettings_portraitInfo"}));c.cashBalanceText=c.portraitInformation.add(new Sys.Element({tag:"li","class":"interface-betSettings_portraitInfo_label",textContent:Services.languageManager.getText(Language.Keys.cashColon)}));c.cashBalanceValue=c.portraitInformation.add(new Sys.Element({tag:"li","class":"interface-betSettings_portraitInfo_numbers"}));c.fireEvent("view:addToContainer","settingsWindow",{title:Services.languageManager.getText(Language.Keys.betSettings_uc),content:c.container});c.fireEvent("view:addToNavigator","settingsMenu",{order:3,isDefault:true});c.addScrolling();if(!c.model.readData("disabled")){c.enable()}c.update()},onSliderValueChange:function(b,a){this.fireEvent("view:userAction",b,a)},enable:function(){var a=this;a.callFunctionOnSubComponents("enable");a.cashBalanceValue.el.textContent=Services.moneyManager.formatMoneyCurrencySign(Services.moneyManager.getBalanceCents())},disable:function(){this.callFunctionOnSubComponents("disable")},show:function(){Interface.BetSettingsBaseView.superclass.show.apply(this,arguments);this.cashBalanceValue.el.textContent=Services.moneyManager.formatMoneyCurrencySign(Services.moneyManager.getBalanceCents())},hideCashDisplay:function(){this.portraitInformation.el.style.display="none"},showCashDisplay:function(){this.portraitInformation.el.style.display="block"},update:function(){var c=this,a=c.model,b=Services.moneyManager;if(a.readData("updatableBetLevels")){c.betLevelSlider.setValue(c.model.readData("betLevel"),true)}if(a.readData("updatableCoinValues")){c.coinValueSlider.setValue(c.model.readData("coinValue"),true)}c.betInCashValue.el.textContent=b.formatMoneyCurrencySign(b.getBetCents());c.betInCoinsValue.el.textContent=b.getBetCoins();c.cashBalanceValue.el.textContent=b.formatMoneyCurrencySign(b.getBalanceCents())},hideSelectors:function(){},showSelectors:function(){},showFreespinLabels:function(){},hideFreespinLabels:function(){}};Interface.BetSettingsBaseView=Sys.extend(Interface.SettingsSectionView,Interface.BetSettingsBaseView,"Interface.BetSettingsBaseView");Sys.ns("Interface");Interface.BetSettingsDesktopView={GAME_MODES:["BASIC","FREESPIN"],BASIC_BETLEVEL_LABEL:{font:"17px Verdana",fillstyle:"rgb(218,218,171)"},BASIC_BETLEVEL_VALUE:{font:"17px Verdana",fillstyle:"rgb(238,239,206)"},BASIC_COINVALUE_LABEL:{font:"17px Verdana",fillstyle:"rgb(218,218,171)"},BASIC_COINVALUE_VALUE:{font:"17px Verdana",fillstyle:"rgb(238,239,206)"},FREESPIN_BETLEVEL_LABEL:{font:"17px Verdana",fillstyle:"rgb(218,218,171)",position:{x:210,y:641,width:100,height:20},alignment:{horizontal:"right",vertical:false}},FREESPIN_BETLEVEL_VALUE:{font:"17px Verdana",fillstyle:"rgb(238,239,206)",position:{x:315,y:641,width:267,height:20},alignment:{horizontal:"left",vertical:false}},FREESPIN_COINVALUE_LABEL:{font:"17px Verdana",fillstyle:"rgb(218,218,171)",position:{x:877,y:641,width:100,height:20},alignment:{horizontal:"right",vertical:false}},FREESPIN_COINVALUE_VALUE:{font:"17px Verdana",fillstyle:"rgb(238,239,206)",position:{x:982,y:641,width:267,height:20},alignment:{horizontal:"left",vertical:false}},BETLEVEL_VALUE_SELECTOR_BASE_POSITION:{x:264,y:629},COINVALUE_VALUE_SELECTOR_BASE_POSITION:{x:889,y:629},VALUE_SELECTOR_POSITION_OFFSET_LABEL:{x:0,y:-18},VALUE_SELECTOR_POSITION_OFFSET_VALUE:{x:0,y:9},VALUE_SELECTOR_RIGHT_BUTTON_IMAGE:undefined,VALUE_SELECTOR_LEFT_BUTTON_IMAGE:undefined,VALUE_SELECTOR_HANDLE_POSITION_OFFSET:undefined,VALUE_SELECTOR_HANDLE_DIMENSIONS:undefined,VALUE_SELECTOR_HANDLE_COLLISION_BOX:{LEFT:{xOffset:7,yOffset:7,width:28,height:37},RIGHT:{xOffset:9,yOffset:7,width:28,height:37}},VALUE_SELECTOR_BAR_BACKGROUND:undefined,VALUE_SELECTOR_BAR_BACKGROUND_DISABLED:undefined,VALUE_SELECTOR_BAR_FILL:undefined,VALUE_SELECTOR_BAR_FILL_DISABLED:undefined,VALUE_SELECTOR_BAR_DIMENSIONS:undefined,VALUE_SELECTOR_BAR_POSITIONS_OFFSET:undefined,constructor:function(){Interface.BetSettingsDesktopView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var a=this;a.betLevelLabel=Services.languageManager.getText(Language.Keys.level);a.coinValueLabel=Services.languageManager.getText(Language.Keys.machinetext_coinvalue);a.keyPadLayering=Layering.Game.Slots.Keypad;a.itemList=new Animation.List({});a.enabled=true;a.initSelectors();a.initFreespinItems();a.update()},updateValueItem:function(a,e,c){var f=a.prop,b=f.customProps.inMemCanvas.ctx;b.clearRect(0,0,f.width,f.height);var d=Animation.utils.text.measureText(e,c.font,0,b);Animation.utils.text.performOperations(e,c.font,0,d.height/2,[{fillStyle:c.fillstyle,drawType:"fill"}],b)},initSelectors:function(){var c=this,b=c.keyPadLayering,a;a=c.model.readData("coinValues").map(function(d){return Sys.utils.numberToFixedDigits(d,3)});c.selectors={betLevelSelector:new Interface.utils.CanvasValueSelector({id:"betLevelSelector",x:c.BETLEVEL_VALUE_SELECTOR_BASE_POSITION.x,y:c.BETLEVEL_VALUE_SELECTOR_BASE_POSITION.y,depth:b.betLevelSelector,values:c.model.readData("betLevels"),callback:c.onValueChange.bind(c,"betLevelChanged"),disabled:!c.model.readData("updatableBetLevels"),label:Services.languageManager.getText(Language.Keys.level),fontLabel:c.BASIC_BETLEVEL_LABEL.font,fontValue:c.BASIC_BETLEVEL_VALUE.font,fillstyleLabel:c.BASIC_BETLEVEL_LABEL.fillstyle,fillstyleValue:c.BASIC_BETLEVEL_VALUE.fillstyle,positionOffsetLabel:c.VALUE_SELECTOR_POSITION_OFFSET_LABEL,positionOffsetValue:c.VALUE_SELECTOR_POSITION_OFFSET_VALUE,rightButtonImage:c.VALUE_SELECTOR_RIGHT_BUTTON_IMAGE,leftButtonImage:c.VALUE_SELECTOR_LEFT_BUTTON_IMAGE,handlePositionOffset:c.VALUE_SELECTOR_HANDLE_POSITION_OFFSET,handleDimensions:c.VALUE_SELECTOR_HANDLE_DIMENSIONS,handleCollisionBox:c.VALUE_SELECTOR_HANDLE_COLLISION_BOX,barBackground:c.VALUE_SELECTOR_BAR_BACKGROUND,barBackgroundDisabled:c.VALUE_SELECTOR_BAR_BACKGROUND_DISABLED,barFill:c.VALUE_SELECTOR_BAR_FILL,barFillDisabled:c.VALUE_SELECTOR_BAR_FILL_DISABLED,barDimensions:c.VALUE_SELECTOR_BAR_DIMENSIONS,barPositionOffset:c.VALUE_SELECTOR_BAR_POSITIONS_OFFSET}),coinValueSelector:new Interface.utils.CanvasValueSelector({id:"coinValueSelector",x:c.COINVALUE_VALUE_SELECTOR_BASE_POSITION.x,y:c.COINVALUE_VALUE_SELECTOR_BASE_POSITION.y,depth:b.betLevelSelector,values:c.model.readData("coinValues"),valueNames:a,callback:c.onValueChange.bind(c,"coinValueChanged"),disabled:!c.model.readData("updatableCoinValues"),label:Services.languageManager.getText(Language.Keys.machinetext_coinvalue),fontLabel:c.BASIC_COINVALUE_LABEL.font,fontValue:c.BASIC_COINVALUE_VALUE.font,fillstyleLabel:c.BASIC_COINVALUE_LABEL.fillstyle,fillstyleValue:c.BASIC_COINVALUE_VALUE.fillstyle,positionOffsetLabel:c.VALUE_SELECTOR_POSITION_OFFSET_LABEL,positionOffsetValue:c.VALUE_SELECTOR_POSITION_OFFSET_VALUE,rightButtonImage:c.VALUE_SELECTOR_RIGHT_BUTTON_IMAGE,leftButtonImage:c.VALUE_SELECTOR_LEFT_BUTTON_IMAGE,handlePositionOffset:c.VALUE_SELECTOR_HANDLE_POSITION_OFFSET,handleDimensions:c.VALUE_SELECTOR_HANDLE_DIMENSIONS,handleCollisionBox:c.VALUE_SELECTOR_HANDLE_COLLISION_BOX,barBackground:c.VALUE_SELECTOR_BAR_BACKGROUND,barBackgroundDisabled:c.VALUE_SELECTOR_BAR_BACKGROUND_DISABLED,barFill:c.VALUE_SELECTOR_BAR_FILL,barFillDisabled:c.VALUE_SELECTOR_BAR_FILL_DISABLED,barDimensions:c.VALUE_SELECTOR_BAR_DIMENSIONS,barPositionOffset:c.VALUE_SELECTOR_BAR_POSITIONS_OFFSET})}},initFreespinItems:function(){var a=this;a.betLevelLabelItem=a.initTextItem(a.betLevelLabel,a.FREESPIN_BETLEVEL_LABEL,a.keyPadLayering.betLevelSelector);a.betLevelValueItem=a.initTextItem(a.model.readData("betLevel"),a.FREESPIN_BETLEVEL_VALUE,a.keyPadLayering.betLevelSelector);a.coinValueLabelItem=a.initTextItem(a.coinValueLabel,a.FREESPIN_COINVALUE_LABEL,a.keyPadLayering.betLevelSelector);a.coinValueValueItem=a.initTextItem(a.model.readData("coinValue"),a.FREESPIN_COINVALUE_VALUE,a.keyPadLayering.betLevelSelector);a.itemList.addItems([a.betLevelLabelItem,a.betLevelValueItem,a.coinValueLabelItem,a.coinValueValueItem]);Game.stage.view.addToRenderLoop(a.itemList);a.itemList.stop()},initTextItem:function(h,c,g){var d=this,b=c.position,f=d.getInMemoryCanvas(b.width,b.height),a=c.alignment.horizontal==="right"?c.position.width:0;if(Sys.isDefined(c.alignment)){f.ctx.textAlign=c.alignment.horizontal}var e=Animation.utils.text.measureText(h,c.font,0,f.ctx);Animation.utils.text.performOperations(h,c.font,a,e.height/2,[{fillStyle:c.fillstyle,drawType:"fill"}],f.ctx);return new Animation.Item({top:b.y,left:b.x,width:b.width,height:b.height,depth:g,image:f.canvas,customProps:{inMemCanvas:f}})},getInMemoryCanvas:function(d,a){var c=document.createElement("canvas"),b=c.getContext("2d");c.width=d;c.height=a;return{canvas:c,ctx:b}},onValueChange:function(b,a){this.fireEvent("view:userAction",b,a)},setUpContent:function(){},onSliderValueChange:function(b,a){},enable:function(b){var a=this;a.enabled=true;Sys.iterate(a.selectors,function(c){if((c==="betLevelSelector"&&a.model.readData("updatableBetLevels"))||(c==="coinValueSelector"&&a.model.readData("updatableCoinValues"))){a.selectors[c].enable(b)}});a.update()},disable:function(a){this.enabled=false;Sys.iterate(this.selectors,function(b){this[b].disable(a)})},hideSelectors:function(){this.disable("BetSettings");Sys.iterate(this.selectors,function(b,a){a.hide("BetSettings")})},showSelectors:function(){this.enable("BetSettings");Sys.iterate(this.selectors,function(b,a){a.show("BetSettings")})},showFreespinLabels:function(){this.itemList.play()},hideFreespinLabels:function(){this.itemList.stop()},update:function(){var b=this,a=b.model;if(Sys.isDefined(b.selectors)&&this.enabled){if(a.readData("updatableBetLevels")){b.selectors.betLevelSelector.update(b.model.readData("betLevel"));b.updateValueItem(b.betLevelValueItem,b.model.readData("betLevel"),b.FREESPIN_BETLEVEL_VALUE)}if(a.readData("updatableCoinValues")){b.selectors.coinValueSelector.update(b.model.readData("coinValue"));b.updateValueItem(b.coinValueValueItem,b.model.readData("coinValue"),b.FREESPIN_COINVALUE_VALUE)}}if(Sys.isDefined(b.coinValueValueItem&&b.betLevelValueItem)){if(a.readData("updatableBetLevels")){b.updateValueItem(b.betLevelValueItem,b.model.readData("betLevel"),b.FREESPIN_BETLEVEL_VALUE)}if(a.readData("updatableCoinValues")){b.updateValueItem(b.coinValueValueItem,b.model.readData("coinValue"),b.FREESPIN_COINVALUE_VALUE)}}},hideCashDisplay:function(){}};Interface.BetSettingsDesktopView=Sys.extend(Interface.BetSettingsBaseView,Interface.BetSettingsDesktopView,"Interface.BetSettingsDesktopView");Sys.ns("Interface");Interface.GameHistory={constructor:function(){Interface.GameHistory.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Interface.GameHistoryController,model:Interface.GameHistoryModel,view:Interface.GameHistoryBaseView}}};Interface.GameHistory=Sys.extend(Interface.SettingsSection,Interface.GameHistory,"Interface.GameHistory");Sys.ns("Interface");Interface.GameHistoryController={constructor:function(){Interface.GameHistoryController.superclass.constructor.apply(this,arguments)},onUserAction:function(a){if(a==="goToHistory"){Environment.goTo(Resources.readData("historyUrl"))}}};Interface.GameHistoryController=Sys.extend(Interface.SettingsSectionController,Interface.GameHistoryController,"Interface.GameHistoryController");Sys.ns("Interface");Interface.GameHistoryModel={constructor:function(){Interface.GameHistoryModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=Resources.readData("gameServerInitResponse");Interface.GameHistoryModel.superclass.setupData.apply(this,arguments);if(a.playforfun){this.storeData("disabled",true)}else{if(Sys.isDefined(a.historybutton)&&!a.historybutton){this.storeData("removed",true)}}}};Interface.GameHistoryModel=Sys.extend(Core.Model,Interface.GameHistoryModel,"Interface.GameHistoryModel");Sys.ns("Interface");Interface.GameHistoryBaseView={BASE_CSS:"tab interface-gameHistory_base",PORTRAIT_CSS:"interface-gameHistory_portrait",LANDSCAPE_CSS:"interface-gameHistory_landscape",BUTTON_BASE_CSS:"button interface-gameHistory_button",BUTTON_DISABLED_CSS:"interface-gameHistory_buttonDisabled",BUTTON_PRESSED_CSS:"interface-gameHistory_buttonPressed",constructor:function(){Interface.GameHistoryBaseView.superclass.constructor.apply(this,arguments)},setUpContent:function(){var a=this;a.container=new Sys.Element({id:"gameHistory",tag:"div",cls:a.BASE_CSS});a.text=a.container.add(new Sys.Element({id:"gameHistoryDisabledText",tag:"div",style:"margin-top: 10%;"}));a.text.el.textContent=Services.languageManager.getText(Language.Keys.newHistoryWindow);a.button=new Interface.utils.Button({id:"gameHistoryButton",CSS:{base:a.BUTTON_BASE_CSS,disabled:a.BUTTON_DISABLED_CSS}});a.container.add(a.button.getContainer());a.button.setText(Services.languageManager.getText(Language.Keys.gameHistory));if(a.model.readData("disabled")){a.disable()}a.fireEvent("view:addToContainer","settingsWindow",{title:Services.languageManager.getText(Language.Keys.gameHistory_uc),content:a.container});if(!a.model.readData("removed")){a.fireEvent("view:addToNavigator","settingsMenu",{order:5})}a.addScrolling();if(!a.model.readData("disabled")){a.enable()}a.hide()},enable:function(){this.text.el.textContent=Services.languageManager.getText(Language.Keys.newHistoryWindow);this.button.enable()},disable:function(){this.text.el.textContent=Services.languageManager.getText(Language.Keys.historyNotAvailable);this.button.disable()},onUserInputStart:function(b){var a=this;if(!a.model.readData("disabled")&&Sys.UserInputUtils.isCoordinateTarget(a.button.getContainer().getEl(),b)){a.model.storeData("buttonPressed",true);a.container.addCls(a.PRESSED_CSS)}},onUserInputEnd:function(c){var b=this,a=this.model.readData("buttonPressed");b.model.storeData("buttonPressed",false);b.container.removeCls(this.PRESSED_CSS);if(a&&Sys.UserInputUtils.isCoordinateTarget(b.button.getContainer().getEl(),c)){b.fireEvent("view:userAction","goToHistory")}}};Interface.GameHistoryBaseView=Sys.extend(Interface.SettingsSectionView,Interface.GameHistoryBaseView,"Interface.GameHistoryBaseView");Sys.ns("Interface");Interface.GameRules={constructor:function(){Interface.GameRules.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return[{userInput:{inputEvents:["start","end","cancel","move","scroll"]}},"orientation"]},getDefaultMVCClasses:function(){return{controller:Interface.GameRulesController,model:Interface.GameRulesModel,view:Interface.GameRulesBaseView}}};Interface.GameRules=Sys.extend(Interface.SettingsSection,Interface.GameRules,"Interface.GameRules");Sys.ns("Interface");Interface.GameRulesController={constructor:function(){Interface.GameRulesController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Interface.GameRulesController.superclass.setupEvents.apply(a,arguments);a.on({"notify:stateHandler.enteringspinTypeRespinRestoreState":a.view.disableButton.bind(a.view)})},show:function(){var a=this;if(!a.model.readData("hasLoadedGameRules")&&!a.model.isState("fetchingGameRules")){a.model.setState("fetchingGameRules");a.fetchGameRules()}Interface.GameRulesController.superclass.show.apply(a,arguments)},fetchGameRules:function(){var b=this,a=new Sys.Deferred();a.when(Sys.utils.httpGet({url:b.model.readData("templateURL")}),Sys.utils.httpGet({url:b.model.readData("textURL")}),Sys.utils.httpGet({url:b.model.readData("manifestURL")})).fail(b.onRulesLoadingFailed,b).done(b.onRulesPartsFetched,b)},onRulesPartsFetched:function(c,b,a){this.model.processGameRules(c,b,a);this.view.updateContent()},onRulesLoadingFailed:function(){}};Interface.GameRulesController=Sys.extend(Interface.SettingsSectionController,Interface.GameRulesController,"Interface.GameRulesController");Sys.ns("Interface");Interface.GameRulesModel={constructor:function(){Interface.GameRulesModel.superclass.constructor.apply(this,arguments)},setupData:function(){var d=this,c=Resources.readData("config").gameRules,e=Resources.readData("language"),b=Resources.readData("queryData").gameId,a="../";b=b.replace(/_sw$/,"");if(Sys.isDefined(c)){if(Platform.isDesktopDevice){b=(b.indexOf("netent_")>-1)?"netent_"+c.desktop:c.desktop}else{b=(b.indexOf("netent_")>-1)?"netent_"+c.touch:c.touch}}Interface.GameRulesModel.superclass.setupData.apply(this,arguments);d.storeData("templateURL",a+"gamerules/template/"+b+".template");d.storeData("textURL",a+"gamerules/rules/"+e.lang+"/rulestext.xml");d.storeData("manifestURL",a+"gamerules/META-INF/MANIFEST.MF");d.storeData("hasLoadedGameRules",false)},processGameRules:function(f,d,b){var c=this,e=c.parseTextsToObject(d.responseText),a=c.insertTextsInTemplate(f.responseText,e);a=c.removeLinkTags(a);a=c.addTimestamp(a,b);a=c.removeNoncharacters(a);c.storeData("content",a);c.storeData("hasLoadedGameRules",true);c.setState("idle")},parseTextsToObject:function(d){var a={},b=/<ds.+name="([\w\d-]+)"[^>]*>(.+)<\/ds>/g,c=document.createElement("div");d.replace(b,function(g,e,f){c.innerHTML=f;a[e]=c.textContent});return a},insertTextsInTemplate:function(b,a){var c=b.replace(/<#([\w\d-]+)#\/>/g,function(d,e){if(a[e]){return a[e]}else{if(Services.languageManager.hasText(e)){return Services.languageManager.getText(e)}else{return"[rules string '"+e+"' not found]"}}});return c},removeLinkTags:function(a){return a.replace(/<link.+>/g,"")},addTimestamp:function(a,b){var c=this.parseDateFromManifest(b);return a+"<div id='manifest_timestamp' style='margin-top:10px;'>"+c+"</div>"},removeNoncharacters:function(a){return decodeURIComponent(encodeURIComponent(a).replace(/%EF%BF%BF/g,""))},parseDateFromManifest:function(b){var a=this.checkIfRegExpMatch(b.response),c;b.responseText.replace(a,function(f,d,e){c=d+" "+e+" (UTC)"});return c},checkIfRegExpMatch:function(c){var b,a;b=/Git-CommitTime:\s([\d\-]+)T([\d:]+)/;a=/Subversion-(?:Commited)?Date: ([\d\-]+)T([\d:]+)/;return b.test(c)?b:a}};Interface.GameRulesModel=Sys.extend(Core.Model,Interface.GameRulesModel,"Interface.GameRulesModel");Sys.ns("Interface");Interface.GameRulesBaseView={BASE_CSS:"tab interface-gameRules_base",PORTRAIT_CSS:"interface-gameRules_portrait",LANDSCAPE_CSS:"interface-gameRules_landscape",RULES_WRAPPER_CSS:"interface-gameRules_rulesWrapper",LOADER_CSS:"interface-gameRules_rulesLoader",LOADER_URI:"interface-smallSpinner_uri",constructor:function(){Interface.GameRulesBaseView.superclass.constructor.apply(this,arguments)},setUpContent:function(){var a=this;a.container=new Sys.Element({id:"gameRules",tag:"div",cls:a.BASE_CSS});a.rulesWrapper=a.container.add(new Sys.Element({id:"gameRules_rules",tag:"div",cls:a.RULES_WRAPPER_CSS}));a.rulesLoader=new Sys.Element({tag:"div",cls:a.LOADER_CSS+" "+a.LOADER_URI});a.fireEvent("view:addToContainer","settingsWindow",{title:Services.languageManager.getText(Language.Keys.gameRules_uc),content:a.container});a.fireEvent("view:addToNavigator","settingsMenu",{order:4});a.addScrolling();if(!a.model.readData("disabled")){a.enable()}a.hide()},updateContent:function(){var a=this;a.rulesWrapper.remove(a.rulesLoader);a.rulesWrapper.el.innerHTML=a.model.readData("content");a.updateScrollerDimensions()},show:function(){Interface.GameRulesBaseView.superclass.show.apply(this,arguments);if(this.model.isState("fetchingGameRules")){this.rulesWrapper.add(this.rulesLoader)}},enable:function(){},disable:function(){},disableButton:function(){if(Sys.isDefined(this.abstractButton)){this.abstractButton.disable("notInIdleState")}}};Interface.GameRulesBaseView=Sys.extend(Interface.SettingsSectionView,Interface.GameRulesBaseView,"Interface.GameRulesBaseView");Sys.ns("Interface");Interface.GameRulesDesktopView={BUTTON_CSS:"interface-desktopSettingsMenu_button interface-gameRules_icon_uri",WRAPPER_CSS:"tab interface-settingsWindow_content",ENABLED_ONLY_IN_BASIC_GAME:true,constructor:function(){Interface.GameRulesDesktopView.superclass.constructor.apply(this,arguments)},setUpContent:function(){var a=this;a.containerWrapper=new Sys.Element({id:"containerWrapper",tag:"div",cls:a.WRAPPER_CSS});a.container=a.containerWrapper.add(new Sys.Element({id:"gameRules",tag:"div",cls:a.BASE_CSS}));a.rulesWrapper=a.container.add(new Sys.Element({id:"gameRules_rules",tag:"div",cls:a.RULES_WRAPPER_CSS}));a.rulesLoader=new Sys.Element({tag:"div",cls:a.LOADER_CSS+" "+a.LOADER_URI});a.createButton();a.fireEvent("view:addToContainer","settingsWindow",{title:Services.languageManager.getText(Language.Keys.gameRules_uc),content:a.containerWrapper});a.fireEvent("view:addToNavigator","desktopSettingsMenu",{order:4,element:a.menuButton});a.addScrolling();if(!a.model.readData("disabled")){a.enable()}a.hide()},createButton:function(){var a=this;a.menuButton=new Sys.Element({id:"gameRulesButton",tag:"div",cls:a.BUTTON_CSS});a.abstractButton=new Interface.AbstractButton({dimensions:a.menuButton.el,clickCallback:function(){if(!a.model.readData("showing")){a.fireEvent("view:showRequest")}else{a.fireEvent("view:hideRequest")}},hoverCallback:function(){a.menuButton.addCls("hover")},upCallback:function(){a.menuButton.removeCls("hover")}})},hide:function(){this.containerWrapper.el.style.display="none";Interface.GameRulesDesktopView.superclass.hide.apply(this,arguments)},show:function(){this.containerWrapper.el.style.display="block";Interface.GameRulesDesktopView.superclass.show.apply(this,arguments)},disableButton:function(){this.abstractButton.disable("notInIdleState")}};Interface.GameRulesDesktopView=Sys.extend(Interface.GameRulesBaseView,Interface.GameRulesDesktopView,"Interface.GameRulesDesktopView");Sys.ns("Interface");Interface.Paytable={constructor:function(){Interface.Paytable.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["userInput","orientation"],desktop:["animation","userInput"]}},getDefaultMVCClasses:function(){return{controller:Interface.PaytableController,model:Interface.PaytableModel,view:Interface.PaytableBaseView}}};Interface.Paytable=Sys.extend(Interface.SettingsSection,Interface.Paytable,"Interface.Paytable");Sys.ns("Interface");Interface.PaytableController={constructor:function(){Interface.PaytableController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:paytable.forward":a.onForwardRequest,"request:paytable.backward":a.onBackwardRequest,"notify:responseParser.paytableResponseParsed":a.onPaytableResponse,"view:pageSwitch":a.fireEvent.bind(a,"notify:paytable.pageSwitched"),"notify:gameModeChanged":a.onGameModeChanged});Interface.PaytableController.superclass.setupEvents.apply(a,arguments)},setUpContent:function(){this.fireEvent("request:serverManager.sendAction","paytable","notify:responseParser.paytableResponseParsed")},onPaytableResponse:function(a){this.model.processPaytableResponse(a);this.view.setUpContent()},onShowRequest:function(a){var b=this;if(!b.model.readData("showing")){Interface.PaytableController.superclass.onShowRequest.apply(b,arguments)}else{b.view.show(a)}},onForwardRequest:function(){if(this.model.readData("showing")){this.view.showNextPage()}},onBackwardRequest:function(){if(this.model.readData("showing")){this.view.showPreviousPage()}},onGameModeChanged:function(a){if(Sys.isDefined(this.view.showButton)&&Sys.isDefined(this.view.hideButton)){if(a==="BASIC"){this.view.showButton()}else{this.view.hideButton()}}}};Interface.PaytableController=Sys.extend(Interface.SettingsSectionController,Interface.PaytableController,"Interface.PaytableController");Sys.ns("Interface");Interface.PaytableModel={constructor:function(){Interface.PaytableModel.superclass.constructor.apply(this,arguments)},setNumberOfPages:function(a){Services.storage.storeData("paytable.numberOfPages",a)},setCurrentPage:function(a){Services.storage.storeData("paytable.currentPage",a)},processPaytableResponse:function(a){var b=this,c=a.pt,d={};Sys.iterate(c,function(f,e){b.parseGameMode(f,e,d)});b.storeData("paytableInfo",d)},parseGameMode:function(c,a,e){var d=this,b={scatterWins:{},betlineWins:{}};Sys.iterate(a.comp,function(f,g){d.parsePaytableComponent(f,g,b)});e[a.id]=b},parsePaytableComponent:function(b,d,a){var g=d.symbol,c=d.type+"Wins",f=d.n,e;if(d.type!=="scatter"&&d.type!=="betline"){return}if(!Sys.isDefined(a[c][g])){a[c][g]={freeSpins:[],betMultiplier:[]}}e=a[c][g];e.freeSpins[f]=d.freespins;e.betMultiplier[f]=d.multi},getCondensedInfo:function(b,a,c,f){a=a||"betMultiplier";c=c||"betlineWins";f=f||"basic";var h=this.readData("paytableInfo")[f][c][b][a],d=1,i=0,g=h[0],e=[];for(;d<h.length;d++){if(h[d]!==g){e.push({from:i,to:d-1,value:g});i=d;g=h[d]}}e.push({from:i,to:d-1,value:g});return e},setupData:function(){var a=Game.stage.model.getCurrentReelGroupConfiguration();this.storeData("symbolWidth",a.symbolWidth);this.storeData("symbolHeight",a.symbolHeight);Services.storage.storeData("paytable.showing",false)}};Interface.PaytableModel=Sys.extend(Core.Model,Interface.PaytableModel,"Interface.PaytableModel");Sys.ns("Interface");Interface.PaytableBaseView={BASE_CSS:"tab interface-paytable_base",PORTRAIT_CSS:"interface-paytable_portrait",LANDSCAPE_CSS:"interface-paytable_landscape",SECTION_CSS:"interface-paytable_section interface-settingsSection_subSection",SECTION_SEPARATOR_URI:"interface-settingsSection_subSection_uri",HEADING_CSS:"interface-paytable_heading",SECTIONS:["SymbolValues","Betlines","Disclaimer"],HIGH_WIN:{COLOR:"",SYMBOLS:[]},MEDIUM_WIN:{COLOR:"",SYMBOLS:[]},LOW_WIN:{COLOR:"",SYMBOLS:[]},DISCLAIMER_STRINGS:[Language.Keys.paytable_highest,Language.Keys.paytable_betLineWinsLeftToRightOnly,Language.Keys.paytable_voidAllPays,Language.Keys.paytable_extraInfo],constructor:function(){Interface.PaytableBaseView.superclass.constructor.apply(this,arguments);this.setupContainer();this.sectionElements={}},setupContainer:function(){this.container=new Sys.Element({id:"paytable",tag:"div",cls:this.BASE_CSS})},setUpContent:function(){var a=this;a.model.setNumberOfPages(1);a.model.setCurrentPage(1);a.createSections();a.fireEvent("view:addToContainer","settingsWindow",{title:Services.languageManager.getText(Language.Keys.paytable_uc),content:a.container});a.fireEvent("view:addToNavigator","settingsMenu",{order:3});a.addScrolling();if(!a.model.readData("disabled")){a.enable()}a.hide()},showNextPage:function(){},showPreviousPage:function(){},createSections:function(){var c=this,d=c.SECTIONS,a=d.length,b;for(b=-1;++b<a;){if(Sys.isFunc(c["create"+d[b]])){c["create"+d[b]]()}}},createSymbolValues:function(){var a=this,b=new Sys.Element({tag:"div","class":a.SECTION_CSS+" "+a.SECTION_SEPARATOR_URI});b.add(new Sys.Element({tag:"div",textContent:Services.languageManager.getText(Language.Keys.paytable_symbolPayout),"class":a.HEADING_CSS+" utils_center_text"}));if(a.HIGH_WIN.SYMBOLS.length>0){b.add(a.createSymbolSubSection(a.HIGH_WIN.SYMBOLS,a.HIGH_WIN.COLOR))}if(a.MEDIUM_WIN.SYMBOLS.length>0){b.add(a.createSymbolSubSection(a.MEDIUM_WIN.SYMBOLS,a.MEDIUM_WIN.COLOR))}if(a.LOW_WIN.SYMBOLS.length>0){b.add(a.createSymbolSubSection(a.LOW_WIN.SYMBOLS,a.LOW_WIN.COLOR))}a.sectionElements.SymbolValues=b;a.container.add(b)},createSymbolSubSection:function(d,c){var f=this,b=new Sys.Element({tag:"table","class":"interface-paytable_symbols"}),a=d.length,g,e;for(e=-1;++e<a;){if(e%2===0){g=b.add(new Sys.Element({tag:"tr"}))}f.appendSymbolContainer(g,d[e],c)}return b},appendSymbolContainer:function(a,d,e,b,f,l){var j=Resources.readData("animationImages"),o=this.model.readData("symbolHeight"),c=a.add(new Sys.Element({tag:"td",style:"min-height: "+o+"px; text-align: center;"})),h=this.model.getCondensedInfo(d,b,f,l).sort(function(p,i){return i.from-p.from}),k=h.length,n,m,g;if(Sys.isDefined(j[d])){c.el.appendChild(j[d])}n=a.add(new Sys.Element({tag:"td",style:"min-height: "+o+"px;"})).add(new Sys.Element({tag:"ul","class":"interface-paytable_symbolValues"}));for(g=-1;++g<k;){m=h[g];if(Sys.isDefined(m.value)){n.add(new Sys.Element({tag:"li",textContent:m.from,style:"width: 33%; color: "+e+";"}));n.add(new Sys.Element({tag:"li",textContent:m.value,style:"width: 66%;"}))}}},createBetlines:function(){var b=this,a=Resources.readData("animationImages"),c=new Sys.Element({tag:"div","class":b.SECTION_CSS+" utils_center_text "+b.SECTION_SEPARATOR_URI});c.add(new Sys.Element({tag:"div",textContent:Services.languageManager.getText(Language.Keys.paytable_winningBetLinesHeading),"class":b.HEADING_CSS}));if(Sys.isObj(a)&&Sys.isDefined(a.betlines)){c.el.appendChild(a.betlines)}b.sectionElements.Betlines=c;b.container.add(c)},createDisclaimer:function(){var c=this,d=new Sys.Element({tag:"div","class":c.SECTION_CSS+" utils_center_text "+c.SECTION_SEPARATOR_URI}),a=c.DISCLAIMER_STRINGS,e=a.length,b;for(b=-1;++b<e;){d.add(new Sys.Element({tag:"div",textContent:Services.languageManager.getText(a[b])}))}c.sectionElements.Disclaimer=d;c.container.add(d)}};Interface.PaytableBaseView=Sys.extend(Interface.SettingsSectionView,Interface.PaytableBaseView,"Interface.PaytableBaseView");Sys.ns("Interface");Interface.PaytableDesktopView={BASE_CSS:"tab interface-paytableDesktop_base",KEYPAD_BUTTON_CONFIG:{dimensions:{x:50,y:623,width:52,height:52},buttonImages:{up:"paytableButtonUp",down:"paytableButtonDown",hover:"paytableButtonOver",disabled:"paytableButtonDisabled"}},constructor:function(){Interface.PaytableDesktopView.superclass.constructor.apply(this,arguments)},show:function(b){var c=this,a=c.navigation.getCurrentCardIndex();Interface.PaytableDesktopView.superclass.show.apply(c,arguments);if(Sys.isNumber(b)&&b>0&&b<=c.SECTIONS.length){a=b-1}c.navigation.selectCard(a);c.navigation.enable(c.MODULE_NAME)},hide:function(){Interface.PaytableDesktopView.superclass.hide.apply(this,arguments);var c=this,e=c.SECTIONS,d=c.sectionElements,a=e.length,b;for(b=-1;++b<a;){d[e[b]].el.style.display="none"}c.navigation.disable(c.MODULE_NAME)},showNextPage:function(){this.navigation.next()},showPreviousPage:function(){this.navigation.previous()},enable:function(a){if(this.animationsReady){this.button.enable(a)}},disable:function(a){if(this.animationsReady){this.button.disable(a)}},setUpContent:function(){var a=this;a.model.setNumberOfPages(a.SECTIONS.length);a.model.setCurrentPage(1);a.createSections();a.createNavigation();a.fireEvent("view:addToContainer","settingsWindow",{title:Services.languageManager.getText(Language.Keys.paytable_uc),content:a.container});a.addScrolling();if(!a.model.readData("disabled")){a.enable()}a.hide()},createNavigation:function(){var a=this;a.navigation=new Interface.utils.CardNavigation({id:"paytableNavigation",numCards:this.SECTIONS.length,selectionCallback:a.onCardSelection.bind(a),closeCallback:a.onCloseCallback.bind(a),arrowLabels:{next:"Next",previous:"Previous"}});a.subComponents=[a.navigation];a.container.add(a.navigation.getArrows());a.container.add(a.navigation.getIndicators())},onCardSelection:function(b,e,a){var c=this,d;c.hideSection(e);c.showSection(b);c.model.setCurrentPage(b+1);if(b!==e){d=(b>e)?"forward":"backward";if(a){d=(b<e)?"forward":"backward"}c.fireEvent("view:pageSwitch",d)}},onCloseCallback:function(){this.fireEvent("view:hideRequest")},showSection:function(a){this.sectionElements[this.SECTIONS[a]].el.style.display="block"},hideSection:function(a){this.sectionElements[this.SECTIONS[a]].el.style.display="none"},showButton:function(){if(this.animationsReady){this.button.show("buttonHideRequest");this.hidden=false}},hideButton:function(){if(this.animationsReady){this.button.hide("buttonHideRequest");this.hidden=true}},enableButton:function(){if(!this.hidden){this.button.enable("buttonDisableRequest")}},disableButton:function(){if(!this.hidden){this.button.disable("buttonDisableRequest")}},initAnimations:function(){var b=this,a=Sys.applyProperties({clickCallback:b.onButtonClick.bind(b)},b.KEYPAD_BUTTON_CONFIG);if(Sys.isDefined(a.buttonLabel)){a.buttonLabel.depth=Layering.Game.Slots.Keypad.paytable.label}if(Sys.isDefined(a.buttonLayoutParameters)){a.buttonLayoutParameters.depth=Layering.Game.Slots.Keypad.paytable.button}else{a.dimensions.depth=Layering.Game.Slots.Keypad.paytable.button}b.button=new Interface.utils.CanvasButton(a);b.button.id="paytable";b.animationsReady=true},onButtonClick:function(){if(!this.model.readData("showing")){this.fireEvent("view:showRequest")}else{this.fireEvent("view:hideRequest")}},shouldBeHiddenByUserInput:function(){return false},onDisableBasicGamePanel:function(){this.disable("disableBasicGamePanel")},onEnableBasicGamePanel:function(){this.enable("disableBasicGamePanel")},onScroll:function(){}};Interface.PaytableDesktopView=Sys.extend(Interface.PaytableBaseView,Interface.PaytableDesktopView,"Interface.PaytableDesktopView");Sys.ns("Core");Core.PortraitMessage={constructor:function(){Core.PortraitMessage.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.Model,view:Core.PortraitMessageView,controller:Core.PortraitMessageController}}};Core.PortraitMessage=Sys.extend(Core.Module,Core.PortraitMessage,"Core.PortraitMessage");Sys.ns("Core");Core.PortraitMessageController={constructor:function(){Core.PortraitMessageController.superclass.constructor.apply(this,arguments)},init:function(){if(Sys.useLegacyScaling){Core.PortraitMessageController.superclass.init.apply(this,arguments);this.fireEvent("notify:potraitMessage.active");if(Services.orientation.isPortrait()){this.show()}}},setupEvents:function(){var a=this;a.on({"notify:loader.closed":a.onLoaderClose,"request:portraitMessage.hide":a.hide,"request:portraitMessage.show":a.show,"notify:viewport.PORTRAIT":a.view.onPortrait.bind(a.view)})},onLoaderClose:function(){var a=this;a.model.storeData("loaderClosed",true);if(a.model.readData("showRequested")){a.model.setState("show")}},hide:function(){this.model.setState("hide");this.model.storeData("showRequested",false)},show:function(){this.model.setState("show")}};Core.PortraitMessageController=Sys.extend(Core.Controller,Core.PortraitMessageController,"Core.PortraitMessageController");Sys.ns("Core");Core.PortraitMessageView={constructor:function(){Core.PortraitMessageView.superclass.constructor.apply(this,arguments)},init:function(){Core.PortraitMessageView.superclass.init.apply(this,arguments);if(Sys.useLegacyScaling){this.buildContent()}},setupEvents:function(){var a=this;a.on({"model:show":a.show,"model:hide":a.hide})},show:function(){this.graphicsContainer.el.style.display="block"},hide:function(){this.graphicsContainer.el.style.display="none"},buildContent:function(){var c=this,b,a,d;b=new Sys.Element({id:"portraitMessage",tag:"div"});b.add(new Sys.Element({id:"phoneOutline",tag:"div",cls:"iphone_outline_uri portraitMessage_phoneOutline"}));b.add(new Sys.Element({id:"portraitLogo",tag:"div",cls:"portraitLogo_uri portraitMessage_logo"}));a=b.add(new Sys.Element({tag:"div",id:"rotatingPhone",cls:"iphone_outline_uri portraitMessage_rotatingPhone"}));d=b.add(new Sys.Element({id:"portraitMessageText",tag:"div",cls:"portraitMessage_text",textContent:Services.languageManager.getText(Language.Keys.landscapeMode)}));document.body.insertBefore(b.el,document.getElementById("viewport"));c.rotatingPhone=a;c.graphicsContainer=b;c.text=d},onPortrait:function(){var a=this.graphicsContainer.el.offsetHeight;this.text.el.style.fontSize=(a*0.02)+"px"}};Core.PortraitMessageView=Sys.extend(Core.View,Core.PortraitMessageView,"Core.PortraitMessageView");Sys.ns("Interface");Interface.SpinSettingsBase={constructor:function(){Interface.SpinSettingsBase.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Interface.SpinSettingsBaseController,model:Interface.SpinSettingsBaseModel,view:Core.View}}};Interface.SpinSettingsBase=Sys.extend(Interface.SettingsSection,Interface.SpinSettingsBase,"Interface.SpinSettingsBase");Sys.ns("Interface");Interface.SpinSettingsBaseController={constructor:function(){Interface.SpinSettingsBaseController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Interface.SpinSettingsBaseController.superclass.setupEvents.apply(a,arguments);a.on({"request:spinSettings.showStopIfFreeSpinsWon":a.showStopIfFreeSpinsWon,"request:spinSettings.showStopIfAutoplayingBonusGameWon":a.showStopIfAutoplayingBonusGameWon,"notify:settingsManager.settingChanged":a.onSettingChanged,"notify:settingsManager.settingEnabled":a.onSettingEnabled,"notify:settingsManager.settingDisabled":a.onSettingDisabled,"notify:settingsManager.settingLocked":a.onSettingLocked,"notify:settingsManager.unlockSetting":a.onSettingUnlocked,"notify:moneyManager.betChanged":a.onBetChanged,"notify:stateHandler.enteringSetupGameState":a.checkIfAutoplayDisabled})},checkIfAutoplayDisabled:function(){var b=this,a=b.model.getAutoplaySpinsArray();if(a.length===1&&(a[0]<5||a[0]>1000)){b.fireEvent("request:settingsManager.disableSetting","autoPlayNrSpins");b.fireEvent("request:settingsManager.storeData","autoPlayNrSpins",0);b.fireEvent("request:settingsManager.lockSetting","autoPlayNrSpins",b.MODULE_NAME)}},onSettingChanged:function(a,c){var b=this;if(a==="autoPlayNrSpins"){if(c===0){c=b.model.getAutoplaySpinsArray()[0]}b.model.storeData(a,c);b.view.update()}},onBetChanged:function(){var a=Services.settingsManager.getSetting("autoPlayNrSpins");if(a>0&&!this.canStartAutoplay()){this.showWarningDialog()}},canStartAutoplay:function(){var c=Services.moneyManager.getBetCents(),a=this.model.readData("isRestrictedMode"),b=Services.settingsManager.getSetting("stopAutoplayIfBalanceDecreasedBy");if(a){return c<=b}else{if(b>0){return c<=b}}return true},onSettingDisabled:function(a){this.view.removeSetting(a)},onSettingEnabled:function(){},onSettingLocked:function(a){this.view.lockSetting(a)},onSettingUnlocked:function(a){this.view.unlockSetting(a)},onUserAction:function(a,b){this.model.storeData(a,b);if(a==="autoPlayNrSpins"&&isNaN(Number(b))){b=0}this.fireEvent("request:settingsManager.storeData",a,b)},showWarningDialog:function(){var b=this,a=Services.languageManager;if(Environment.getCurrentPlatform()==="desktop"){b.fireEvent("request:dialogWindow.showDialog",{title:a.getText(Language.Keys.autoplay_setting_ifCashDecreasesBy),text:a.getText(Language.Keys.autoplay_setting_ifCashDecreasesByWarning),buttons:[{text:a.getText(Language.Keys.btn_ok)}]})}else{b.fireEvent("request:dialogWindow.showDialog",{title:a.getText(Language.Keys.autoplay_setting_ifCashDecreasesBy),text:a.getText(Language.Keys.autoplay_setting_ifCashDecreasesByWarningTouch),buttons:[{text:a.getText(Language.Keys.btn_close),action:function(){b.fireEvent("request:autoPlayer.stop")}},{text:a.getText(Language.Keys.btn_ok),action:function(){b.fireEvent("request:spinSettings.openAdvancedSettingKeyboard","stopAutoplayIfBalanceDecreasedBy")}}]})}},showStopIfFreeSpinsWon:function(){},showStopIfAutoplayingBonusGameWon:function(){}};Interface.SpinSettingsBaseController=Sys.extend(Interface.SettingsSectionController,Interface.SpinSettingsBaseController,"Interface.SpinSettingsBaseController");Sys.ns("Interface");Interface.SpinSettingsBaseModel={AUTOPLAY_SPINS:[0,10,25,50,100,250,500,750,1000],constructor:function(){Interface.SpinSettingsBaseModel.superclass.constructor.apply(this,arguments)},setupData:function(){var d=this,b=Resources.readData("gameServerInitResponseObject").autoplay,a,c;if(Sys.isDefined(b)&&((b===0||d.validateSingleAutoPlayValue(b)||d.validateAutoplayArray(b)))){if(!Sys.isArray(b)){b=[b]}else{b=b.slice()}if(!b.contains(0)){b=[0].concat(b)}b.sort(function(f,e){return f-e})}else{b=d.AUTOPLAY_SPINS}a=[{key:"autoPlayNrSpins",defaultValue:b[0],settingsManager:true,localStorage:false},{key:"autoplaySpinsArray",defaultValue:b,settingsManager:false,localStorage:false}];a.forEach(d.initData,d);Services.storage.storeData("spinSettings.autoplayRoundsAvailable",b.slice(1));Interface.SpinSettingsBaseModel.superclass.setupData.apply(this,arguments);c=Resources.readData("gameServerInitResponse").autoplayLossLimitEnabled||false;(Resources.readData("queryData").autoplayLossLimitEnabled===true)&&(c=true);this.storeData("isRestrictedMode",c)},validateAutoplayArray:function(a){var b=this,c=true,d=a.length;if(Sys.isArray(a)&&d>0&&d<9){Sys.each(a,function(f,e){a[e]=Sys.utils.toInt(f);if(!b.validateSingleAutoPlayValue(a[e])){c=false}})}else{c=false}return c},validateSingleAutoPlayValue:function(a){var b=true,c=Sys.utils.toInt(a);if(Sys.isArray(a)||isNaN(c)||c<5||c>1000){b=false}return b},getAutoplaySpinsArray:function(){return this.readData("autoplaySpinsArray")}};Interface.SpinSettingsBaseModel=Sys.extend(Interface.SettingsSectionModel,Interface.SpinSettingsBaseModel,"Interface.SpinSettingsBaseModel");Sys.ns("Interface");Interface.SpinSettings={constructor:function(){Interface.SpinSettings.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Interface.SpinSettingsController,model:Interface.SpinSettingsModel,view:Interface.SpinSettingsView}}};Interface.SpinSettings=Sys.extend(Interface.SpinSettingsBase,Interface.SpinSettings,"Interface.SpinSettings");Sys.ns("Interface");Interface.SpinSettingsModel={setupData:function(){var b=this,a=[{key:"stopAutoplayIfBalanceDecreasedBy",defaultValue:false,settingsManager:true,localStorage:true},{key:"leftHandMode",defaultValue:false,settingsManager:true,localStorage:true},{key:"quickSpin",defaultValue:false,settingsManager:true,localStorage:true},{key:"stopAutoplayIfFreeSpinWon",defaultValue:false,settingsManager:true,localStorage:false},{key:"stopAutoplayIfAutoplayingBonusGameWon",defaultValue:false,settingsManager:true,localStorage:false},{key:"stopAutoplayIfWinExceeds",defaultValue:false,settingsManager:true,localStorage:false}];Interface.SpinSettingsModel.superclass.setupData.apply(this,arguments);a.forEach(b.initData,b)}};Interface.SpinSettingsModel=Sys.extend(Interface.SpinSettingsBaseModel,Interface.SpinSettingsModel,"Interface.SpinSettingsModel");Sys.ns("Interface");Interface.SpinSettingsController={constructor:function(){Interface.SpinSettingsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Interface.SpinSettingsController.superclass.setupEvents.apply(a,arguments);a.on({"request:spinSettings.openAdvancedSettingKeyboard":a.openAdvancedSettingsKeyboard,"notify.dialogWindow.showingDialog":a.onShowingDialog,"view:autoPlaySliderEnd":a.userInteractionEnded})},userInteractionEnded:function(c){var b=this,a=b.model.readData("isRestrictedMode");if(a===true&&c>0){b.fireEvent("request:userInputManager.activateExclusivity","spinSettings.addingValue");b.addValueToLossLimit()}},onBetChanged:function(a){var b=this;Interface.SpinSettingsController.superclass.onBetChanged.apply(b,arguments);if(b.view.advancedSettings&&b.view.advancedSettings.stopAutoplayIfBalanceDecreasedBy){b.view.advancedSettings.stopAutoplayIfBalanceDecreasedBy.setMinValue(a.playerBetCents>0?a.playerBetCents:undefined)}},onUserAction:function(b,d){var c=this,a=c.model.readData("isRestrictedMode");Interface.SpinSettingsController.superclass.onUserAction.apply(this,arguments);if(b==="leftHandMode"||b==="quickSpin"){Services.localStorageManager.storeData(b,d.toString())}if(b==="autoPlayNrSpins"){this.enableAdvancedSettings(d)}if(a===true&&b==="stopAutoplayIfBalanceDecreasedBy"&&d===0){Services.settingsManager.storeSetting("autoPlayNrSpins",0)}},enableAdvancedSettings:function(d){var c=this,a=c.model.readData("isRestrictedMode"),b=Services.settingsManager.getSetting("stopAutoplayIfBalanceDecreasedBy")||0;d=Sys.isDefined(d)?d:0;if(d>0){c.view.showAdvancedSettings();c.view.enableAdvancedSettings()}else{c.view.hideAdvancedSettings();c.view.disableAdvancedSettings()}if(a===true&&b===0){c.view.disableAdvancedSettings()}},onSettingChanged:function(b,d){var c=this,a=c.model.readData("isRestrictedMode");Interface.SpinSettingsController.superclass.onSettingChanged.apply(c,arguments);if(b==="quickSpin"){c.model.storeData(b,d);c.view.update()}if(a===true&&b==="stopAutoplayIfBalanceDecreasedBy"&&d===0){Services.settingsManager.storeSetting("autoPlayNrSpins",0)}},showStopIfAutoplayingBonusGameWon:function(){this.view.showStopIfAutoplayingBonusGameWon()},openAdvancedSettingsKeyboard:function(b){var a=this;a.fireEvent("request:settingsWindow.openChild","spinSettings");a.view.openAdvancedSetting(b)},addValueToLossLimit:function(){var b=this,a=Services.settingsManager.getSetting("stopAutoplayIfBalanceDecreasedBy");if(!a||a===0){setTimeout(function(){b.fireEvent("request:userInputManager.deactivateExclusivity","spinSettings.addingValue");b.view.openAdvancedSetting("stopAutoplayIfBalanceDecreasedBy");b.view.enableAdvancedSettings()},1000)}else{b.fireEvent("request:userInputManager.deactivateExclusivity","spinSettings.addingValue");b.view.enableAdvancedSettings()}},onShowingDialog:function(){if(this.model.readData("showing")){this.fireEvent("request:keyboard.cancel")}}};Interface.SpinSettingsController=Sys.extend(Interface.SpinSettingsBaseController,Interface.SpinSettingsController,"Interface.SpinSettingsController");Sys.ns("Interface");Interface.SpinSettingsView={BASE_CSS:"tab interface-spinSettings_base",PORTRAIT_CSS:"interface-spinSettings_portrait",LANDSCAPE_CSS:"interface-spinSettings_landscape",SECTION_CSS:"interface-settingsSection_subSection",SECTION_SEPARATOR_URI:"interface-settingsSection_subSection_uri",AUTOPLAY_SETTINGS_CSS:"interface-spinSettings_autoPlayContainer",AUTO_PLAY_ADDVALUE:"ifCashDecreasesByAddValue",AUTOPLAYING_BONUS_GAME_LABEL:Language.Keys.autoplay_setting_ifFBonusIsStarted,ADVANCED_AUTOPLAY_SETTINGS:{stopAutoplayTitle:{labelOCTKey:Language.Keys.autoplay_setting_stopAutoPlay,type:"settingGroupTitle"},stopAutoplayIfBalanceDecreasedBy:{labelOCTKey:Language.Keys.autoplay_setting_ifCashDecreasesBy,buttonTextOCTKey:Language.Keys.btn_addValue,infoOCTKey:Language.Keys.autoplay_setting_ifCashDecreasesByInfoTouch,type:"interactiveContainer",defaultValue:0},stopAutoplayIfWinExceeds:{labelOCTKey:Language.Keys.autoplay_setting_ifWinExeeds,buttonTextOCTKey:Language.Keys.btn_addValue,type:"interactiveContainer",defaultValue:0},stopAutoplayIfBalanceIncreasedBy:{labelOCTKey:Language.Keys.autoplay_setting_ifCashIncreasesBy,buttonTextOCTKey:Language.Keys.btn_addValue,type:"interactiveContainer",defaultValue:0},stopAutoplayIfFreeSpinWon:{type:"ToggleSwitch",titleOCTKey:Language.Keys.stopIfFreeSpins,defaultValue:false}},constructor:function(){Interface.SpinSettingsView.superclass.constructor.apply(this,arguments);this.lockedControllers=[]},setUpContent:function(){var a=this,b;a.container=new Sys.Element({id:"spinSettings",tag:"div",cls:a.BASE_CSS});a.autoplayContainer=a.container.add(new Sys.Element({id:"spinSettings_autoplaySettings",tag:"div",cls:a.SECTION_CSS+" "+a.AUTOPLAY_SETTINGS_CSS}));a.numberOfAutoPlaysSetting=a.autoplayContainer.add(new Sys.Element({id:"nrOfAutoplaySpins",tag:"ul","class":"interface-settingsSection_dynamicSliderPosition_container"}));a.nrOfSpinsText=a.numberOfAutoPlaysSetting.add(new Sys.Element({id:"nrAutoPlaySpinsLabel",tag:"li","class":"interface-settingsSection_dynamicSliderPosition_label",textContent:Services.languageManager.getText(Language.Keys.autoplay)}));a.nrAutoPlaySpins=new Interface.utils.Slider({id:"nrAutoPlaySpinsSlider",values:a.model.getAutoplaySpinsArray(),callback:a.onSettingsControllerChanged.bind(a,"autoPlayNrSpins"),endCallback:a.fireEvent.bind(a,"view:autoPlaySliderEnd"),showLabels:true});a.advancedAutoplaySettings=a.autoplayContainer.add(new Sys.Element({id:"advancedAutoplaySettings",tag:"div",cls:"interface-autoPlay_advancedSettings_container",transitionend:this.updateScrollerDimensions.bind(this)}));a.initAdvancedAutoplaySettings();a.numberOfAutoPlaysSetting.add(new Sys.Element({id:"nrAutoPlaySpinsSliderWrapper",tag:"li","class":"interface-settingsSection_dynamicSliderPosition_slider"})).add(a.nrAutoPlaySpins.getContainer());a.stopIfAutoplayingBonusGameWon=new Interface.utils.ToggleSwitch({id:"stopIfAutoplayingBonusGameWon",title:Services.languageManager.getText(a.AUTOPLAYING_BONUS_GAME_LABEL),callback:a.onSettingsControllerChanged.bind(a,"stopAutoplayIfAutoplayingBonusGameWon")});b=a.stopIfAutoplayingBonusGameWon.getContainer();a.stopIfAutoplayingBonusGameWonOriginalDisplay=b.el.style.display;b.el.style.display="none";a.autoplayContainer.add(b);a.quickSpinContainer=a.container.add(new Sys.Element({id:"spinSettings_quickSpinSettings",tag:"div",cls:a.SECTION_CSS+" "+a.SECTION_SEPARATOR_URI}));a.quickSpin=new Interface.utils.ToggleSwitch({id:"quickSpinOnOff",title:Services.languageManager.getText(Language.Keys.setting_quickSpinGame),callback:a.onSettingsControllerChanged.bind(a,"quickSpin")});a.quickSpinContainer.add(a.quickSpin.getContainer());a.spinButtonPositionContainer=a.container.add(new Sys.Element({id:"spinSettings_spinButtonPositionSettings",tag:"div",cls:a.SECTION_CSS+" "+a.SECTION_SEPARATOR_URI}));a.spinButtonPosition=new Interface.utils.ToggleSwitch({id:"spinButtonPositionLeftRight",title:Services.languageManager.getText(Language.Keys.setting_leftHandMode),callback:a.onSettingsControllerChanged.bind(a,"leftHandMode")});a.spinButtonPositionContainer.add(a.spinButtonPosition.getContainer());a.addContainerToSettings();a.subComponents=[a.quickSpin,a.nrAutoPlaySpins,a.spinButtonPosition];a.update();a.addScrolling();if(!a.model.readData("disabled")){a.enable()}a.hide()},addContainerToSettings:function(){var a=this;a.fireEvent("view:addToContainer","settingsWindow",{title:Services.languageManager.getText(Language.Keys.spinSettings_uc),content:a.container});a.fireEvent("view:addToNavigator","settingsMenu",{order:2})},initAdvancedAutoplaySettings:function(){var b=this,d=b.advancedAutoplaySettings,a=Services.languageManager,c;b.advancedSettings={};Sys.iterate(b.ADVANCED_AUTOPLAY_SETTINGS,function(f,e){if(f==="stopAutoplayIfBalanceDecreasedBy"){c=Services.moneyManager.getBetCents()}else{c=undefined}if(e.type==="interactiveContainer"){b.advancedSettings[f]=new Interface.utils.InteractiveContainer({title:a.getText(e.labelOCTKey),info:a.hasText(e.infoOCTKey)?a.getText(e.infoOCTKey):"",buttonText:a.hasText(e.buttonTextOCTKey)?a.getText(e.buttonTextOCTKey):"",id:"advancedSetting-"+f,cls:b.SECTION_CSS+" "+b.SECTION_SEPARATOR_URI,callback:b.onSettingsControllerChanged.bind(b,f),minValue:c})}else{if(e.type==="ToggleSwitch"){b.advancedSettings[f]=new Interface.utils.ToggleSwitch({title:a.getText(e.titleOCTKey),id:"advanceSetting-"+f,cls:b.SECTION_CSS+" "+b.SECTION_SEPARATOR_URI,callback:b.onSettingsControllerChanged.bind(b,f)})}else{if(e.type==="settingGroupTitle"){b.advancedSettings[f]=new Interface.utils.GroupTitle({title:a.getText(e.labelOCTKey),id:"advanceSetting-"+f,cls:b.SECTION_CSS})}}}d.add(b.advancedSettings[f].getContainer())})},showAdvancedSettings:function(){this.advancedAutoplaySettings.el.style["max-height"]="16rem"},hideAdvancedSettings:function(){this.advancedAutoplaySettings.el.style["max-height"]="0"},enableAdvancedSettings:function(){Sys.iterate(this.advancedSettings,function(a,b){b.enable()})},disableAdvancedSettings:function(){var a=this;Sys.iterate(a.advancedSettings,function(b,c){c.disable()})},openAdvancedSetting:function(a){var b=this.advancedSettings[a];if(Sys.isDefined(b)){b.click()}else{}},onSettingsControllerChanged:function(b,a){this.fireEvent("view:userAction",b,a)},enable:function(){var a=this;a.model.storeData("disabled",false);a.callFunctionOnSubComponents("enable");Sys.each(a.lockedControllers,function(b){b.disable()});if(a.nrAutoPlaySpins.getValue()!==a.model.getAutoplaySpinsArray()[0]){a.stopIfAutoplayingBonusGameWon.enable();a.enableAdvancedSettings()}},disable:function(){var a=this;a.callFunctionOnSubComponents("disable");a.stopIfAutoplayingBonusGameWon.disable();a.disableAdvancedSettings();a.spinButtonPosition.enable();a.model.storeData("disabled",true)},update:function(){var c=this,b=c.model.readData.bind(c.model),a=!b("disabled"),d=b("autoPlayNrSpins");c.nrAutoPlaySpins.setValue(d);c.advancedSettings.stopAutoplayIfFreeSpinWon.toggle(b("stopAutoplayIfFreeSpinWon"));c.stopIfAutoplayingBonusGameWon.toggle(b("stopAutoplayIfAutoplayingBonusGameWon"));c.quickSpin.toggle(b("quickSpin"));c.spinButtonPosition.toggle(b("leftHandMode"));if(d===c.model.getAutoplaySpinsArray()[0]){c.stopIfAutoplayingBonusGameWon.toggle(false);c.stopIfAutoplayingBonusGameWon.disable();Sys.iterate(c.ADVANCED_AUTOPLAY_SETTINGS,function(f,e){c.advancedSettings[f].setValue(e.defaultValue)})}else{if(a&&!c.stopIfAutoplayingBonusGameWon.isEnabled()){c.stopIfAutoplayingBonusGameWon.enable()}}},showStopIfAutoplayingBonusGameWon:function(){this.stopIfAutoplayingBonusGameWon.getContainer().el.style.display=this.stopIfAutoplayingBonusGameWonOriginalDisplay},removeSetting:function(a){var b=this;if(a==="quickSpin"){b.container.remove(b.quickSpinContainer)}else{if(a==="autoPlayNrSpins"){b.container.remove(b.autoplayContainer)}}},lockSetting:function(a){var c=this,b;if(a==="autoPlayNrSpins"){b=c.nrAutoPlaySpins;c.nrOfSpinsText.el.style.opacity="0.5"}else{if(a==="quickSpin"){b=c.quickSpin}}if(b){b.disable();if(!c.lockedControllers.contains(b)){c.lockedControllers.push(b)}}},unlockSetting:function(a){var c=this,b;if(a==="autoPlayNrSpins"){b=c.nrAutoPlaySpins;c.nrOfSpinsText.el.style.opacity=""}else{if(a==="quickSpin"){b=c.quickSpin}}if(b){if(!c.model.readData("disabled")){b.enable()}if(c.lockedControllers.contains(b)){c.lockedControllers.splice(c.lockedControllers.indexOf(b),1)}}},resetAutoPlay:function(){},reduceCounter:function(){}};Interface.SpinSettingsView=Sys.extend(Interface.SettingsSectionView,Interface.SpinSettingsView,"Interface.SpinSettingsView");Sys.ns("Interface");Interface.AutoplaySettings={constructor:function(){Interface.AutoplaySettings.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["userInput","animation"]},getDefaultMVCClasses:function(){return{model:Interface.AutoplaySettingsModel,view:Interface.AutoplaySettingsView,controller:Interface.AutoplaySettingsController}}};Interface.AutoplaySettings=Sys.extend(Interface.SpinSettingsBase,Interface.AutoplaySettings,"Interface.AutoplaySettings");Sys.ns("Interface");Interface.AutoplaySettingsController={constructor:function(){Interface.AutoplaySettingsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Interface.AutoplaySettingsController.superclass.setupEvents.apply(a,arguments);a.on({"notify:stateHandler.enteringIdleState":a.onEnteringIdleState,"notify:autoPlayer.reduceCounter":a.view.reduceCounter.bind(a.view),"notify:autoPlayer.starting":a.view.onAutoplayStarting.bind(a.view),"request:autoplaySettings.close":a.onHideRequest,"request:closeOpenWindows":a.onHideRequest,"request:autoplaySettings.toggle":a.toggle,"request:enableBasicGamePanel":a.view.enableKeypadButton.bind(a.view,"keypadDisabled"),"request:disableBasicGamePanel":a.view.disableKeypadButton.bind(a.view,"keypadDisabled"),"notify:gameModeChanged":a.onGameModeChanged,"view:startAutoPlay":a.onStartAutoPlay,"view:stopAutoPlay":a.onStopAutoPlay,"view:autoPlayActive":a.onAutoPlayActive})},onStartAutoPlay:function(){var a=this;if(a.canStartAutoplay()){a.fireEvent("request:autoPlayer.start")}else{a.resetAutoPlay();a.showWarningDialog()}},onEnteringIdleState:function(){var a=this;Interface.AutoplaySettingsController.superclass.onEnteringIdleState.apply(a,arguments);if(a.model.readData("autoPlayNrSpins")===0){a.view.resetAutoPlay();a.model.storeData("autoPlayActive",false)}},onShowRequest:function(){var a=this;if(!a.model.readData("disabled")){a.fireEvent("request:gameSettings.close");Interface.AutoplaySettingsController.superclass.onShowRequest.apply(this,arguments)}},onAutoPlayActive:function(){this.model.storeData("autoPlayActive",true);this.view.update()},onStopAutoPlay:function(){this.fireEvent("request:autoPlayer.stop")},toggle:function(){if(this.model.readData("showing")){this.onHideRequest()}else{this.onShowRequest()}},onSettingDisabled:function(a){this.view.hideSetting(a)},onSettingEnabled:function(a){this.view.showSetting(a)},onSettingChanged:function(a,b){Interface.AutoplaySettingsController.superclass.onSettingChanged.apply(this,arguments);this.view.advancedListChanged(a,b)},onSettingLocked:function(a){if(a==="autoPlayNrSpins"){this.onHideRequest();this.disable("autoplayLocked");this.view.disableKeypadButton("autoplayLocked")}},onSettingUnlocked:function(a){if(a==="autoPlayNrSpins"){this.enable("autoplayLocked");this.view.enableKeypadButton("autoplayLocked")}},onGameModeChanged:function(a){if(a==="BASIC"){this.view.showKeypadButton("gameModeNotBasic")}else{this.view.hideKeypadButton("gameModeNotBasic")}},showStopIfFreeSpinsWon:function(){var a=this;a.fireEvent("request:settingsManager.enableSetting","stopAutoplayIfFreeSpinWon")},showStopIfAutoplayingBonusGameWon:function(){this.fireEvent("request:settingsManager.enableSetting","stopAutoplayIfAutoplayingBonusGameWon")},resetAutoPlay:function(){this.view.resetAutoPlay();this.model.storeData("autoPlayActive",false);this.fireEvent("request:settingsManager.storeData","autoPlayNrSpins",0)}};Interface.AutoplaySettingsController=Sys.extend(Interface.SpinSettingsBaseController,Interface.AutoplaySettingsController,"Interface.AutoplaySettingsController");Sys.ns("Interface");Interface.AutoplaySettingsView={MENU_BUTTON_CSS:"interface-desktopSettingsMenu_button interface-autoplaySettings_icon_uri interface-autoplaySettings-menuButton",KEYPAD_BUTTON_CONFIG:{dimensions:{x:437,y:613,width:143,height:72},buttonImages:{up:"autoPlayButtonUp",down:"autoPlayButtonDown",hover:"autoPlayButtonOver",disabled:"autoPlayButtonDisabled"},buttonLabel:{width:107,height:54,text:Language.Keys.btn_autoplay,font:"24px NetentStandardUI",lineHeight:24,alignment:"center",color:"#000000",breakOn:"<br>"}},ADVANCED_TOGGLE_CSS:{base:"interface-standAloneSettingsSectionToggle_base",disabled:"interface-standAloneSettingsSectionToggle_disabled",button_wrapper:"interface-standAloneSettingsSectionToggle_wrapper",label:"interface-standAloneSettingsSectionToggle_label interface-spinSettings_autoPlayAdvancedToggle_label",button_handle:"interface-standAloneSettingsSectionToggle_handle",button_background:"interface-standAloneSettingsSectionToggle_background",open:"advancedOpen",closed:"advancedClosed"},RESTRICTED_CONFIG_CONTROLS:[],ADVANCED_CONFIG_CONTROLS:[{id:"stopAutoplayOnAnyWin",label:Language.Keys.autoplay_setting_onAnyWin,type:"checkbox"},{id:"stopAutoplayIfFreeSpinWon",label:Language.Keys.autoplay_setting_ifFreeSpinsIsStarted,type:"checkbox",disabled:true},{id:"stopAutoplayIfAutoplayingBonusGameWon",label:Language.Keys.autoplay_setting_ifFBonusIsStarted,type:"checkbox",disabled:true},{id:"stopAutoplayIfWinExceeds",label:Language.Keys.autoplay_setting_ifWinExeeds,type:"checkbox",withInput:{label:undefined}},{id:"stopAutoplayIfBalanceIncreasedBy",label:Language.Keys.autoplay_setting_ifCashIncreasesBy,type:"checkbox",withInput:{label:undefined}},{id:"stopAutoplayIfBalanceDecreasedBy",label:Language.Keys.autoplay_setting_ifCashDecreasesBy,type:"checkbox",withInput:{label:undefined}}],ARROW_LEFT_VALUE:"0.54rem",RENDER_TARGET:"gameWrapper",DISABLE_BUTTON_DURING_SPIN:false,ORDER:3,TITLE:Language.Keys.autoplay,constructor:function(){Interface.AutoplaySettingsView.superclass.constructor.apply(this,arguments)},init:function(){var b=this;Interface.AutoplaySettingsView.superclass.init.apply(b,arguments);b.selectedAutoplayTarget=undefined;b.isActive=false;b.keypadPendingDisable=[];if(b.model.readData("isRestrictedModeEnabled")===true){var a=Sys.find(b.ADVANCED_CONFIG_CONTROLS,function(c){return c.id==="stopAutoplayIfBalanceDecreasedBy"});b.RESTRICTED_CONFIG_CONTROLS.push(a);if(b.ADVANCED_CONFIG_CONTROLS.indexOf(a)>=0){b.ADVANCED_CONFIG_CONTROLS.splice(b.ADVANCED_CONFIG_CONTROLS.indexOf(a),1)}}},setUpContent:function(){var a=this;Interface.AutoplaySettingsView.superclass.setUpContent.apply(a,arguments);a.setupAutoPlayContainer(a.container)},initAnimations:function(){this.setUpKeypadButton()},setupAutoPlayContainer:function(){var a=this;a.autoplaySettingsWrapper=a.container.add(new Sys.Element({id:"autoplaySettings",tag:"div",cls:"interface-spinSettings_autoplaySettings_wrapper"}));if(a.model.readData("isRestrictedModeEnabled")===true){a.setupRestrictedAutoPlayContainer()}a.setupAdvancedAutoPlayContainer();a.setUpAutoplaySpinsSelector();a.setUpAutoplayStopControls()},toggleAdvancedSettings:function(){this.advancedSettingsWrapper.toggleClass("advancedSettingsOpen")},setupAdvancedAutoPlayContainer:function(){var c=this,a=new Sys.Element({id:"advancedAutoplaySettings",tag:"div",cls:"interface-spinSettings_autoplayAdvancedSettings_wrapper"}),b=Services.moneyManager.getCurrencyIsoName();c.ADVANCED_CONFIG_CONTROLS.forEach(function(d){if(Sys.isDefined(d.withInput)){d.withInput.label=b}});c.advancedToggle=new Interface.utils.ToggleSwitch({id:"advancedAutoplaySettingsToggle",title:Services.languageManager.getText(Language.Keys.autoplay_advancedSettings),CSS:c.ADVANCED_TOGGLE_CSS,enabled:true,callback:c.toggleAdvancedSettings.bind(c)});a.add(c.advancedToggle.getContainer());a.add(c.setupResetButton());a.add(c.setupStopAutoPlaySection());a.add(c.getDivider());c.advancedSettingsWrapper=a;c.container.addAsFirst(a);c.ADVANCED_CONFIG_CONTROLS.forEach(function(d){c.fireEvent("view:userAction",d.id,false);if(Sys.isDefined(d.disabled)){c.hideSetting(d.id);c.fireEvent("view:disableSetting",d.id)}})},setupRestrictedAutoPlayContainer:function(){var c=this,a=new Sys.Element({id:"restrictedAutoplaySettings",tag:"div",cls:"interface-spinSettings_autoplayAdvancedSettings_wrapper"}),b=Services.moneyManager.getCurrencyIsoName();c.RESTRICTED_CONFIG_CONTROLS.forEach(function(d){if(Sys.isDefined(d.withInput)){d.withInput.label=b}});a.add(c.setupRestrictedStopAutoPlaySection());a.add(c.getDivider());c.container.addAsFirst(a);c.RESTRICTED_CONFIG_CONTROLS.forEach(function(d){c.fireEvent("view:userAction",d.id,false);if(Sys.isDefined(d.disabled)){c.hideSetting(d.id);c.fireEvent("view:disableSetting",d.id)}})},setupStopAutoPlaySection:function(){var a=this,c=new Sys.Element({id:"advancedSettings",tag:"div",cls:"interface-spinSettings_autoplayAdvancedSettings_settingsListWrapper"}),b=new Interface.utils.DOMControlList({id:"autoplaySettingsStoppedList",controls:a.ADVANCED_CONFIG_CONTROLS,callback:a.advancedListChanged.bind(a)});c.add(new Sys.Element({id:"advancedSettingsListHeader",tag:"div",cls:"interface-spinSettings_autoplayAdvancedSettings_settingsListHeader",textContent:Services.languageManager.getText(Language.Keys.autoplay_stopAutoPlay)}));a.advancedList=b;c.add(b.getContainer());return c},setupRestrictedStopAutoPlaySection:function(){var b=this,a,d=new Sys.Element({id:"restrictedSettings",tag:"div"}),c=new Interface.utils.DOMControlList({id:"autoplaySettingsRestrictedStoppedList",controls:b.RESTRICTED_CONFIG_CONTROLS,callback:b.advancedListChanged.bind(b)});b.restrictedAdvancedList=c;a=b.restrictedAdvancedList.getControl("stopAutoplayIfBalanceDecreasedBy")[0];a.checkBox.setValue(true,true);a.checkBox.lock("autoplay");d.add(c.getContainer());d.add(new Sys.Element({id:"restrictedSettings_info",tag:"div",cls:"interface-spinSettings_autoplayStopControls_info",textContent:Services.languageManager.getText(Language.Keys.autoplay_setting_ifCashDecreasesByInfo)}));return d},advancedListChanged:function(b,d){var c=this,a=false;c.fireEvent("view:userAction",b,d);c.ADVANCED_CONFIG_CONTROLS.forEach(function(e){if(Services.settingsManager.getSetting(e.id)!==false){a=true}});c.RESTRICTED_CONFIG_CONTROLS.forEach(function(e){if(Services.settingsManager.getSetting(e.id)!==false){a=true}});if(a){c.advancedToggle.getContainer().addCls("sectionActive");c.showResetButton()}else{c.advancedToggle.getContainer().removeCls("sectionActive");c.hideResetButton()}},setupResetButton:function(){var a=this;a.resetButton=new Interface.utils.DOMButton({id:"autoplaySettingsReset",textContent:Services.languageManager.getText(Language.Keys.reset),clickCallback:a.resetSettings.bind(a),baseCSS:"interface-desktopControls_Button_small interface-interface-desktopControls_Button_small_uri interface-spinSettings_autoplayStopControls_resetButton"});a.hideResetButton();return a.resetButton.getContainer()},showResetButton:function(){this.resetButton.show(this.MODULE_NAME)},hideResetButton:function(){this.resetButton.hide(this.MODULE_NAME)},hideSetting:function(a){this.advancedList.hide(a)},showSetting:function(a){this.advancedList.show(a)},resetSettings:function(){var a=this;a.ADVANCED_CONFIG_CONTROLS.forEach(function(b){a.advancedList.update(b.id,false);a.advancedListChanged(b.id,false)});a.RESTRICTED_CONFIG_CONTROLS.forEach(function(b){a.restrictedAdvancedList.update(b.id,false);a.advancedListChanged(b.id,false)});a.resetAutoPlay();a.fireEvent("view:stopAutoPlay")},setUpAutoplaySpinsSelector:function(){var b=this,d="[Off]",c=new Sys.Element({id:"autoplaySelectorWrapper",tag:"div",cls:"interface-spinSettings_autoplaySelector_wrapper"}),a={id:"autoplaySelector",values:b.model.getAutoplaySpinsArray(),CSS:{base:"interface-spinSettings_autoplaySelector_base",buttonBase:"interface-spinSettings_autoplaySelector_buttonBase",buttonUp:"interface-DOMOptionScroller_buttonUp_uri",buttonDown:"interface-DOMOptionScroller_buttonDown_uri",valuesHolder:"interface-spinSettings_autoplaySelector_valuesHolder",value:"interface-spinSettings_autoplaySelector_value interface-DOMOptionScroller_value_uri interface-spinSettings_button",wrapper:"interface-spinSettings_autoplaySelector_valueWrapper"},callback:function(e){b.fireEvent("view:userAction","autoPlayNrSpins",Sys.utils.toInt(e));b.disableAdvancedControls();b.disableRestrictedControls();b.fireEvent("view:startAutoPlay")},scrollOffsetModifier:3,valueWidth:50,replaceTextByIndex:[{index:0,text:d,skip:true}]};c.add(new Sys.Element({id:"topLabel",tag:"div",cls:"interface-spinSettings_autoplaySelector_label",textContent:Services.languageManager.getText(Language.Keys.autoplay_numberSpins)}));b.selector=new Interface.utils.DOMOptionScroller(a);c.add(b.selector.getContainer());c.add(new Sys.Element({id:"topLabel",tag:"div",cls:"interface-spinSettings_autoplaySelector_label",textContent:Services.languageManager.getText(Language.Keys.autoplay_panelStartText)}));b.autoplaySettingsWrapper.add(c)},onAutoplayStarting:function(){this.fireEvent("view:autoPlayActive")},selectorCallbackFunction:function(a){var b=this;if(a.element===b.selectedAutoplayTarget){return false}else{if(!Sys.isDefined(b.selectedAutoplayTarget)){a.element.style.opacity="0.7";b.selectedAutoplayTarget=a.element;return true}else{if(a!==b.selectedAutoplayTarget){b.selectedAutoplayTarget.style.opacity="1";a.element.style.opacity="0.7";b.selectedAutoplayTarget=a.element;return true}}}return false},deSelectAutoPlayTarget:function(){if(Sys.isDefined(this.selectedAutoplayTarget)){this.selectedAutoplayTarget.style.opacity="1";this.selectedAutoplayTarget=undefined}},setUpAutoplayStopControls:function(){var a=this,c=new Sys.Element({id:"autoplayStopControls",tag:"div",cls:"interface-spinSettings_autoplayStopControls_wrapper"}),b=new Sys.Element({id:"autoplayStopControlsHeader",tag:"div",cls:"interface-spinSettings_autoplayStopControls_header",textContent:Services.languageManager.getText(Language.Keys.spinsLeftText,[Services.languageManager.getText(Language.Keys.autoSpins)])});a.spinsLeftCounter=new Sys.Element({id:"autoplayStopControlsSpinsCounter",tag:"div",cls:"interface-spinSettings_autoplaySelector_value interface-DOMOptionScroller_value_uri",textContent:"0"});a.stopButton=new Interface.utils.DOMButton({id:"autoplayStopControlsStopButton",baseCSS:"interface-desktopControls_Button interface-spinSettings_autoplayStopControls_stopButton interface-interface-desktopControls_Button_uri",textContent:Services.languageManager.getText(Language.Keys.autoplay_stopText),clickCallback:a.fireEvent.bind(a,"view:stopAutoPlay")});c.add(b);c.add(a.spinsLeftCounter);c.add(a.stopButton.getContainer());a.container.add(c)},setUpKeypadButton:function(){var b=this,a=Sys.applyProperties({clickCallback:b.onButtonClick.bind(b)},b.KEYPAD_BUTTON_CONFIG);a.buttonLabel.depth=Layering.Game.Slots.Keypad.autoPlay.label;if(Sys.isDefined(a.buttonLayoutParameters)){a.buttonLayoutParameters.depth=Layering.Game.Slots.Keypad.autoPlay.button}else{a.dimensions.depth=Layering.Game.Slots.Keypad.autoPlay.button}b.keypadButton=new Interface.utils.CanvasButton(a);b.keypadPendingDisable.forEach(b.keypadButton.disable.bind(b.keypadButton));delete b.keypadPendingDisable},update:function(){var b=this,a=b.model.readData("autoPlayNrSpins"),c=b.model.readData("autoPlayActive");if(c&&a>0){b.spinsLeftCounter.el.textContent=a;b.container.addCls("autoplayActive");b.menuButton.getContainer().el.textContent=a;b.menuButton.getContainer().addCls("autoplayActive");b.menuButton.addProperty("active","autoplayActive");b.isActive=true}else{b.resetAutoPlay()}},reduceCounter:function(b){var a=this;if(b===0){b=""}a.spinsLeftCounter.el.textContent=b;a.menuButton.getContainer().el.textContent=b},resetAutoPlay:function(){var a=this;if(a.isActive){a.container.removeCls("autoplayActive");a.menuButton.removeProperty("active","autoplayActive");a.menuButton.getContainer().removeCls("autoplayActive");a.menuButton.getContainer().el.textContent="";a.isActive=false;a.deSelectAutoPlayTarget()}a.enableRestrictedControls();a.enableAdvancedControls()},enableKeypadButton:function(c){var b=this,a;if(Sys.isDefined(b.keypadButton)){b.keypadButton.enable(c)}else{a=b.keypadPendingDisable.indexOf(c);if(a>=0){b.keypadPendingDisable.splice(a,1)}}},disableKeypadButton:function(b){var a=this;if(Sys.isDefined(a.keypadButton)){a.keypadButton.disable(b)}else{if(!a.keypadPendingDisable.contains(b)){a.keypadPendingDisable.push(b)}}},showKeypadButton:function(a){if(Sys.isDefined(this.keypadButton)){this.keypadButton.show(a)}},hideKeypadButton:function(a){if(Sys.isDefined(this.keypadButton)){this.keypadButton.hide(a)}},disableAdvancedControls:function(){var a=this;a.ADVANCED_CONFIG_CONTROLS.forEach(function(b){if(Sys.isDefined(b.withInput)){a.advancedList.disable(b.id)}})},enableAdvancedControls:function(){var a=this;a.ADVANCED_CONFIG_CONTROLS.forEach(function(b){if(Sys.isDefined(b.withInput)){a.advancedList.enable(b.id)}})},disableRestrictedControls:function(){var a=this;a.RESTRICTED_CONFIG_CONTROLS.forEach(function(b){a.restrictedAdvancedList.disable(b.id)})},enableRestrictedControls:function(){var a=this;a.RESTRICTED_CONFIG_CONTROLS.forEach(function(b){a.restrictedAdvancedList.enable(b.id)})}};Interface.AutoplaySettingsView=Sys.extend(Interface.StandAloneSettingsSectionView,Interface.AutoplaySettingsView,"Interface.AutoplaySettingsView");Sys.ns("Interface");Interface.AutoplaySettingsModel={constructor:function(){Interface.AutoplaySettingsModel.superclass.constructor.apply(this,arguments)},setupData:function(){var c=this,b,a=[{key:"stopAutoplayOnAnyWin",defaultValue:false,settingsManager:true,localStorage:false},{key:"stopAutoplayIfBalanceIncreasedBy",defaultValue:false,settingsManager:true,localStorage:false},{key:"stopAutoplayIfWinExceeds",defaultValue:false,settingsManager:true,localStorage:false},{key:"stopAutoplayIfBalanceDecreasedBy",defaultValue:false,settingsManager:true,localStorage:false}];b=Resources.readData("gameServerInitResponse").autoplayLossLimitEnabled||false;(Resources.readData("queryData").autoplayLossLimitEnabled===true)&&(b=true);c.storeData("isRestrictedModeEnabled",b);Interface.AutoplaySettingsModel.superclass.setupData.apply(c,arguments);a.forEach(c.initData,c)}};Interface.AutoplaySettingsModel=Sys.extend(Interface.SpinSettingsBaseModel,Interface.AutoplaySettingsModel,"Interface.AutoplaySettingsModel");Sys.ns("Interface");Interface.GameSettings={constructor:function(){Interface.GameSettings.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Interface.GameSettingsController,model:Interface.GameSettingsModel,view:Interface.GameSettingsBaseView}}};Interface.GameSettings=Sys.extend(Interface.SettingsSection,Interface.GameSettings,"Interface.GameSettings");Sys.ns("Interface");Interface.GameSettingsController={LOCAL_STORAGE_SETTINGS:["showFeatureSplash","quickSpin","showIntroMovie","spacebarToSpin"],constructor:function(){Interface.GameSettingsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:settingsManager.settingChanged":a.view.update.bind(a.view),"notify:settingsManager.settingDisabled":a.view.hideSetting.bind(a.view),"notify:settingsManager.settingEnabled":a.view.showSetting.bind(a.view),"notify:settingsManager.settingLocked":a.view.disableSetting.bind(a.view),"notify:settingsManager.settingUnlocked":a.view.enableSetting.bind(a.view),"notify:stateHandler.leavingIdleState":a.hide,"request:gameSettings.close":a.onHideRequest,"request:closeOpenWindows":a.onHideRequest,"request:gameSettings.toggle":a.onToggle,"view:gameHistoryClicked":a.onGameHistoryClicked});Interface.GameSettingsController.superclass.setupEvents.apply(a,arguments)},onUserAction:function(b,d){var c=this,a=false;if(c.LOCAL_STORAGE_SETTINGS.contains(b)){a=true}this.fireEvent("request:settingsManager.storeData",b,d,a)},onShowRequest:function(){var a=this;a.fireEvent("request:autoplaySettings.close");Interface.GameSettingsController.superclass.onShowRequest.apply(a,arguments)},onGameHistoryClicked:function(){var a=this.model;if(!a.readData("historyRemoved")&&!a.readData("historyDisabled")){Environment.openNewBrowserTab(Resources.readData("historyUrl"),"gameHistory")}},onToggle:function(){var a=this;if(a.model.readData("showing")){a.hide()}else{a.show()}}};Interface.GameSettingsController=Sys.extend(Interface.SettingsSectionController,Interface.GameSettingsController,"Interface.GameSettingsController");Sys.ns("Interface");Interface.GameSettingsModel={constructor:function(){Interface.GameSettingsModel.superclass.constructor.apply(this,arguments)},setupData:function(){var c=this,a=[{key:"showFeatureSplash",defaultValue:true,settingsManager:true,localStorage:true},{key:"quickSpin",defaultValue:false,settingsManager:true,localStorage:true},{key:"showIntroMovie",defaultValue:true,settingsManager:true,localStorage:true},{key:"spacebarToSpin",defaultValue:false,settingsManager:true,localStorage:true}],b=Resources.readData("gameServerInitResponse");a.forEach(c.initData,c);if(b.playforfun){c.storeData("historyDisabled",true)}else{if(Sys.isDefined(b.historybutton)&&!b.historybutton){c.storeData("historyRemoved",true)}}}};Interface.GameSettingsModel=Sys.extend(Interface.SettingsSectionModel,Interface.GameSettingsModel,"Interface.GameSettingsModel");Sys.ns("Interface");Interface.GameSettingsDesktopView={MENU_BUTTON_CSS:"interface-desktopSettingsMenu_button interface-gameSettings_icon_uri",DISABLE_BUTTON_DURING_SPIN:false,SETTINGS_CONTROLS:[{id:"quickSpin",label:Language.Keys.setting_quickSpinGame,type:"checkbox"},{id:"showFeatureSplash",label:Language.Keys.setting_introScreeGame,type:"checkbox"},{id:"showIntroMovie",label:Language.Keys.setting_introGame,type:"checkbox"},{id:"spacebarToSpin",label:Language.Keys.setting_spaceSpin,type:"checkbox"}],TITLE:Language.Keys.gameSettingsPanelLabel,ARROW_LEFT_VALUE:"0.05rem",ORDER:1,constructor:function(){Interface.GameSettingsDesktopView.superclass.constructor.apply(this,arguments)},setUpContent:function(){var b=this,a=b.model;Interface.GameSettingsDesktopView.superclass.setUpContent.apply(b,arguments);b.settingsList=new Interface.utils.DOMControlList({id:"gameSettingsSettingsList",controls:b.SETTINGS_CONTROLS,callback:b.fireEvent.bind(b,"view:userAction")});b.SETTINGS_CONTROLS.forEach(function(c){b.settingsList.update(c.id,b.model.readData(c.id))});b.container.add(b.settingsList.getContainer());if(!(a.readData("historyRemoved")||a.readData("historyDisabled"))){b.container.add(b.createGameHistoryButton())}},update:function(a,b){this.settingsList.update(a,b)},hideSetting:function(a){this.settingsList.hide(a)},showSetting:function(a){this.settingsList.show(a)},disableSetting:function(a){this.settingsList.disable(a)},enableSetting:function(a){this.settingsList.enable(a)},createGameHistoryButton:function(){var a=this;a.historyButton=new Interface.utils.DOMButton({id:"gameHistoryButton",baseCSS:"interface-desktopControls_Button_small interface-desktopGameHistoryButton preventUserSelect interface-interface-desktopControls_Button_small_uri",clickCallback:a.fireEvent.bind(a,"view:gameHistoryClicked"),textContent:Services.languageManager.getText(Language.Keys.gameHistory)});return a.historyButton.getContainer()}};Interface.GameSettingsDesktopView=Sys.extend(Interface.StandAloneSettingsSectionView,Interface.GameSettingsDesktopView,"Interface.GameSettingsDesktopView");Sys.ns("Interface");Interface.SoundSettings={constructor:function(){Interface.SoundSettings.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["userInput","orientation"],desktop:[{userInput:{inputEvents:["start","end","cancel","move","hover"],listenToUserInput:true}}]}},getDefaultMVCClasses:function(){return{controller:Interface.SoundSettingsController,model:Interface.SoundSettingsModel,view:Interface.SoundSettingsBaseView}}};Interface.SoundSettings=Sys.extend(Interface.SettingsSection,Interface.SoundSettings,"Interface.SoundSettings");Sys.ns("Interface");Interface.SoundSettingsController={constructor:function(){Interface.SoundSettingsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:settingsManager.settingChanged":a.onSettingChanged,"notify:audioPlayer.loadingSound":a.view.startSoundLoading.bind(a.view),"notify:audioPlayer.soundLoaded":a.view.soundLoadedStopLoader.bind(a.view),"view:toggleSound":a.toggleSound});Interface.SoundSettingsController.superclass.setupEvents.apply(a,arguments)},onUserAction:function(a,b){if(a==="audioOn"){Services.settingsManager.storeSetting("volume",b?this.model.getPreviousVolume():0,true)}else{if(a==="volume"){Services.settingsManager.storeSetting("volume",b,true)}}},onUserInputHover:function(a){this.view.onUserInputHover(a)},onSettingChanged:function(a,b){if(a==="volume"){this.view.update(b);if(b>0){this.model.storeData("previousVolume",b)}}}};Interface.SoundSettingsController=Sys.extend(Interface.SettingsSectionController,Interface.SoundSettingsController,"Interface.SoundSettingsController");Sys.ns("Interface");Interface.SoundSettingsModel={constructor:function(){Interface.SoundSettingsModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=this;a.initData({key:"volume",defaultValue:Platform.resourceBundle.preloadAudio?1:0,settingsManager:true,localStorage:Platform.resourceBundle.preloadAudio});a.storeData("previousVolume",1)},getPreviousVolume:function(){var a=this.readData("previousVolume");if(!Sys.isDefined(a)){a=1}return a}};Interface.SoundSettingsModel=Sys.extend(Interface.SettingsSectionModel,Interface.SoundSettingsModel,"Interface.SoundSettingsModel");Sys.ns("Interface");Interface.SoundSettingsBaseView={BASE_CSS:"tab interface-soundSettings_base",PORTRAIT_CSS:"interface-soundSettings_portrait",LANDSCAPE_CSS:"interface-soundSettings_landscape",SECTION_CSS:"utils_empty interface-settingsSection_subSection",LOAD_ANIMATION_CSS:"interface-smallSpinner_uri",constructor:function(){Interface.SoundSettingsBaseView.superclass.constructor.apply(this,arguments)},setUpContent:function(){var a=this;a.container=new Sys.Element({id:"userSettings",tag:"div",cls:a.BASE_CSS});a.audioOnOffContainer=a.container.add(new Sys.Element({id:"soundSettings_soundSettings",tag:"div",cls:a.SECTION_CSS}));a.audioOnOff=new Interface.utils.ToggleSwitch({id:"audioOnOff",title:Services.languageManager.getText(Language.Keys.setting_gameSound),callback:a.onSettingsControllerChanged.bind(a,"audioOn")});a.audioOnOffContainer.add(a.audioOnOff.getContainer());a.fireEvent("view:addToContainer","settingsWindow",{title:Services.languageManager.getText(Language.Keys.soundSettings_uc),content:a.container});a.fireEvent("view:addToNavigator","settingsMenu",{order:1});a.subComponents=[a.audioOnOff];a.addScrolling();if(!a.model.readData("disabled")){a.enable()}a.hide()},onSettingsControllerChanged:function(b,a){this.fireEvent("view:userAction",b,a)},enable:function(){this.callFunctionOnSubComponents("enable")},disable:function(){this.callFunctionOnSubComponents("disable")},update:function(a){this.audioOnOff.toggle(a>0)},startSoundLoading:function(){var a=this;a.audioOnOff.displayLoadAnimation();a.disable();a.update(Services.settingsManager.getSetting("volume"))},soundLoadedStopLoader:function(){this.enable();this.update(Services.settingsManager.getSetting("volume"));this.audioOnOff.hideLoadAnimation()}};Interface.SoundSettingsBaseView=Sys.extend(Interface.SettingsSectionView,Interface.SoundSettingsBaseView,"Interface.SoundSettingsBaseView");Sys.ns("Interface");Interface.SoundSettingsDesktopView={WRAPPER_CSS:"interface-soundSettingsDesktop_sliderWrapper",BASE_CSS:"interface-soundSettingsDesktop_sliderBase interface-standAloneSettingsSectionMiddle_uri",BUTTON_CSS:"interface-desktopSettingsMenu_button interface-soundSettings_audioOn_icon_uri",BUTTON_OFF_CSS:"interface-soundSettings_audioOff_icon_uri",LOAD_ANIMATION_CSS:"interface-soundSettingsDesktop_spinner interface-smallSpinner_uri hidden",CLOSE_ANIMATION_CSS:"interface-soundSettingsDesktop_closeTransition",constructor:function(){Interface.SoundSettingsDesktopView.superclass.constructor.apply(this,arguments)},onUserInputStart:function(a){},onUserInputMove:function(){},onUserInputEnd:function(a){},onUserInputHover:function(b){var a=this;if(Sys.UserInputUtils.isCoordinateTarget(a.container.el,b)||Sys.UserInputUtils.isCoordinateTarget(a.menuButton.el,b)){a.menuButton.addCls("hover");a.open()}else{a.menuButton.removeCls("hover");a.close()}},show:function(){this.open()},hide:function(){this.close()},open:function(){var a=this;a.wrapper.removeCls(a.CLOSE_ANIMATION_CSS);a.isOpen=true;if(!a.model.readData("disabled")){a.volume.enable()}},close:function(){var a=this;a.wrapper.addCls(a.CLOSE_ANIMATION_CSS);if(a.volume){a.volume.disable()}a.isOpen=false},setUpContent:function(){var a=this;a.wrapper=new Sys.Element({id:"soundSettingsWrapper",tag:"div",cls:a.WRAPPER_CSS,renderTo:"gameWrapper"});a.container=a.wrapper.add(new Sys.Element({id:"soundSettings",tag:"div",cls:a.BASE_CSS}));a.menuButton=new Sys.Element({id:"soundSettingsButton",tag:"div",cls:a.BUTTON_CSS});a.abstractButton=new Interface.AbstractButton({dimensions:a.menuButton.el,clickCallback:a.toggle.bind(a)});a.volume=new Interface.utils.VerticalSlider({id:"soundVolumeSlider",minValue:0,maxValue:1,valueStep:0.05,startValue:Services.settingsManager.getSetting("volume"),callback:a.fireEvent.bind(a,"view:userAction","volume"),ascendingGrowth:true,showDisplay:false,callbackOnlyOnEndEvent:false});a.loadAnimation=a.container.add(new Sys.Element({id:"soundSettings_loadAnimation",tag:"div",cls:a.LOAD_ANIMATION_CSS}));a.container.add(a.volume.getContainer());a.fireEvent("view:addToNavigator","desktopSettingsMenu",{order:1,element:a.menuButton});a.update(Services.settingsManager.getSetting("volume"));a.hide()},toggle:function(){this.fireEvent("view:userAction","audioOn",Services.settingsManager.getSetting("volume")===0)},enable:function(){var a=this;a.abstractButton.enable("sectionDisabled");a.volume.enable()},disable:function(){var a=this;a.abstractButton.disable("sectionDisabled");a.volume.disable()},startSoundLoading:function(){this.disable();this.loadAnimation.el.style.display="block"},soundLoadedStopLoader:function(){this.enable();this.loadAnimation.el.style.display="none"},update:function(b){var a=this;if(!a.volume.enabled){a.enable()}a.menuButton.removeCls(a.BUTTON_OFF_CSS);if(!(b>0)){a.menuButton.addCls(a.BUTTON_OFF_CSS)}a.volume.moveSlider(b)},removeSetting:function(){}};Interface.SoundSettingsDesktopView=Sys.extend(Core.View,Interface.SoundSettingsDesktopView,"Interface.SoundSettingsDesktopView");Sys.ns("Core");Core.Trigger={constructor:function(){Core.Trigger.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.TriggerModel,controller:Core.TriggerController}}};Core.Trigger=Sys.extend(Core.Module,Core.Trigger,"Core.Trigger");Resources.storeData("triggerScripts",{});Sys.ns("Core");Core.TriggerController={DEBUG:false,constructor:function(){Core.TriggerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Core.TriggerController.superclass.setupEvents.apply(a,arguments);a.on({pageVisibilityChanged_event:a.onPageVisibilityChanged,"notify:moduleLoader.finishedLoadingModules":a.onFinishedLoadingModules})},onFinishedLoadingModules:function(){this.fireEvent("request:audioPlayer.disableEventInteractions");this.fireEvent("notify:trigger.ready")},onPageVisibilityChanged:function(a){if(a){Audio.Engine.setVolume(0)}else{Audio.Engine.setVolume(Services.settingsManager.getSetting("volume"))}},registerTrigger:function(d,a,c){var b=this;b.addListener(d,function(){b.executeTrigger.apply(b,[d].concat(Array.prototype.slice.call(arguments)))});b.model.registerTrigger(d,a,c)},executeTrigger:function(g){var c=this.model.getScriptsLinkedToTrigger(g),b=c.length,e=Array.prototype.slice.call(arguments,1),a,d,f;for(f=-1;++f<b;){d=c[f];a=this.determineExecutionEnvironment(g,d.type);d.script.apply(a.scope,e)}},listTriggers:function(){return Object.keys(this.model.getTriggers())},listLinkedTriggers:function(){return this.model.getLinkedTriggers()},getTriggerDescription:function(a){return this.model.getTriggerDescription(a)},getScript:function(a){return Resources.readData("triggerScripts")[a].script.toString()},getScriptsLinkedToTrigger:function(a){return this.model.getScriptsLinkedToTrigger(a)},getScriptNamesLinkedToTrigger:function(a){return this.model.getScriptNamesLinkedToTrigger(a)},linkScriptToTrigger:function(b,a){this.model.linkScriptToTrigger(b,a)},unlinkScriptAndTrigger:function(b,a){this.model.unlinkScriptAndTrigger(b,a)},determineExecutionEnvironment:function(c,b){var a={args:[]};switch(b){case"audio":a.scope=Audio.Engine;break;case"animation":a.scope={};break;default:a.scope=[this.model.getTriggerScope(c)]}return a}};Core.TriggerController=Sys.extend(Core.Controller,Core.TriggerController,"Core.TriggerController");Sys.ns("Core");Core.TriggerModel={constructor:function(){Core.TriggerModel.superclass.constructor.apply(this,arguments)},registerTrigger:function(a,c,b){this.readData("triggers")[a]={description:b,defaultScope:c}},getTriggers:function(){return this.readData("triggers")},hasTrigger:function(a){return Sys.isDefined(this.readData("triggers")[a])},getLinkedTriggers:function(){return Object.keys(this.readData("scriptLookup"))},getTriggerDescription:function(b){var a=this.readData("triggers")[b];if(Sys.isObj(a)){return a.description}},getTriggerScope:function(b){var a=this.readData("triggers")[b];if(Sys.isObj(a)){return a.defaultScope}},getScriptNamesLinkedToTrigger:function(b){var a=this.readData("scriptLookup")[b];if(!a){a=[]}return a},getScriptsLinkedToTrigger:function(c){var e=Resources.readData("triggerScripts"),b=this.getScriptNamesLinkedToTrigger(c),a=[],d;for(d=-1;++d<b.length;){a.push(e[b[d]])}return a},linkScriptToTrigger:function(c,a){var b=this.readData("scriptLookup");if(!Sys.isArray(b[a])){b[a]=[]}if(!b[a].contains(c)){b[a].push(c)}},unlinkScriptAndTrigger:function(e,a){var d=this.readData("scriptLookup"),c=d[a],b;if(Sys.isArray(c)){b=c.indexOf(e);if(b>=0){c.splice(b,1)}}},setupData:function(){this.storeData("triggers",{});this.storeData("scriptLookup",this.initializeScriptLookup())},initializeScriptLookup:function(){var b=Resources.readData("triggerScripts"),a=Object.keys(b),h=a.length,f={},g,d,e,c;for(e=-1;++e<h;){g=a[e];d=b[g];for(c=-1;++c<d.usedOn.length;){if(!Sys.isDefined(f[d.usedOn[c]])){f[d.usedOn[c]]=[]}f[d.usedOn[c]].push(g)}}return f}};Core.TriggerModel=Sys.extend(Core.Model,Core.TriggerModel,"Core.TriggerModel");(function(a){a.buttonUp={usedOn:["notify:button.up","notify:spinButton.up"],type:"audio",script:function(){this.play("main","buttonUp")}};a.buttonDown={usedOn:["notify:button.down","notify:spinButton.down"],type:"audio",script:function(){this.play("main","buttonDown")}};a.buttonHover={usedOn:["notify:button.hover","notify:spinButton.hover","notify:paytableClose.hover","notify:paytableIndicator_0.hover","notify:paytableIndicator_1.hover","notify:paytableIndicator_2.hover","notify:paytableNext.hover","notify:paytablePrevious.hover"],type:"audio",script:function(b){if(!b){this.play("main","buttonHover")}}};a.buttonClick={usedOn:["notify:button.click"],type:"audio",script:function(){this.play("main","buttonClick")}};a.spinButtonClick={usedOn:["notify:spinButton.clicked"],type:"audio",script:function(){this.play("main","spinButtonClick")}};a.sliderIncrease={usedOn:[],type:"audio",script:function(){}};a.sliderDecrease={usedOn:[],type:"audio",script:function(){}};a.paytableFlip={usedOn:["notify:paytableNext.click","notify:paytablePrevious.click","notify:paytableIndicator_0.click","notify:paytableIndicator_1.click","notify:paytableIndicator_2.click"],type:"audio",script:function(){}};a.paytableButtonDown={usedOn:["notify:paytableClose.down"],type:"audio",script:function(){}};a.paytableButtonUp={usedOn:["notify:paytableClose.up"],type:"audio",script:function(){}};a.paytableButtonClick={usedOn:["notify:paytableClose.click"],type:"audio",script:function(){}};Resources.storeData("triggerScripts",a)}(Resources.readData("triggerScripts")));(function(a){var b="nearWin",c="spinSounds";a.reelSpin={usedOn:["notify:spin.spinAnimationStarted"],type:"audio",script:function(d){this.play(c,"reelSpin")}};a.reelBounceStart={usedOn:["notify:spin.reelStopBouncingStarted"],type:"audio",script:function(){this.play(c,"reelBounce")}};a.reelStop={usedOn:["notify:spin.reelStopStarted"],type:"audio",script:function(d){this.play(c,"reelStop")}};a.spinComplete={usedOn:["notify:spin.spinAnimationComplete"],type:"audio",script:function(){var d=this.getGroup(b);if(Sys.isDefined(d)){d.fadeOut({duration:1})}var e=this.getGroup(c);if(Sys.isDefined(e)){e.fadeOut({duration:0.5})}}};a.quickStop={usedOn:["notify:quickStopper.quickStop"],type:"audio",script:function(){}};a.scatterHit={usedOn:["notify:reelStopAnimations.symbolsToAnimate"],type:"audio",script:function(e,d){this.play(c,"scatterHit")}};a.nearWin={usedOn:["notify:spin.nearWinStarted"],type:"audio",script:function(){this.play(b,"nearWin")}};a.nearWinFail={usedOn:[],type:"audio",script:function(){var d=this.getGroup(b);if(Sys.isDefined(d)){d.fadeOut({duration:1})}}};Resources.storeData("triggerScripts",a)}(Resources.readData("triggerScripts")));(function(a){var c="winPresentation",d="main",b;a.standardWinStartAudio={usedOn:["notify:standardWin.startPresentation"],type:"audio",script:function(e){switch(e){case"smallWin":a.smallWin.script.call(this);break;case"mediumWin":a.mediumWin.script.call(this);break;case"largeWin":a.largeWin.script.call(this);break;default:}}};a.stopWinSound={usedOn:["notify:standardWin.countupAborted","notify:stateHandler.leavingStandardWinPresentationState"],type:"audio",script:function(){var e=this.getGroup(c);if(Sys.isDefined(e)){e.fadeOut({duration:0.5})}}};a.smallWin={usedOn:[],type:"audio",script:function(){var f=Resources.readData("audioConfig").clips;var e=f.main.smallWin;if(Sys.isDefined(e.duck)&&Sys.isDefined(e.duck.ambienceGeneral)){this.duck(this.getGroup(d),e.duck.ambienceGeneral)}this.play(c,"smallWin")}};a.mediumWin={usedOn:[],type:"audio",script:function(){this.play(c,"mediumWin")}};a.largeWin={usedOn:[],type:"audio",script:function(){var f=Resources.readData("audioConfig").clips;var e=f.main.largeWin;if(Sys.isDefined(e.duck)&&Sys.isDefined(e.duck.ambienceGeneral)){this.duck(this.getGroup(d),e.duck.ambienceGeneral)}this.play(c,"largeWin")}};a.bigWinStart={usedOn:["notify:stateHandler.enteringBigWinState"],type:"audio",script:function(){var f=this,e;b=true;a.ambienceGeneralStop.script.call(this);f.play(c,"bigWinStart");f.play(c,"bigWinLoop",{loop:true});e=f.startMetronome("bigWin",126);e.at(13).stop(c);e.at(13).play(c,"bigWinEnd");e.at(13).then(function(){f.stopMetronome("bigWin");b=false})}};a.bigWinLoop={usedOn:["notify:stateHandler.enteringBigWinState"],type:"audio",script:function(){}};a.bigWinCountUpEnd={usedOn:["notify:bigWin.showTotalInCountUp"],type:"audio",script:function(){if(b===true){this.stop(c);this.play(c,"bigWinEnd",{offset:2.7})}}};a.bigWinEnd={usedOn:["notify:stateHandler.leavingBigWinState"],type:"audio",script:function(){this.getGroup(c).fadeOut({duration:2});a.ambienceGeneralStart.script.call(this)}};Resources.storeData("triggerScripts",a)}(Resources.readData("triggerScripts")));(function(a){var b="main";a.globalSettings={usedOn:["notify:settingsManager.settingChanged"],type:"audio",script:function(c,d){if(c==="volume"){this.setVolume(d)}}};a.volumeRestore={usedOn:["notify:stateHandler.leavingSetupGameState"],type:"audio",script:function(){var c=Services.settingsManager.getSetting("volume");this.setVolume(c)}};a.soundLoaded={usedOn:["notify:audioPlayer.soundLoaded"],type:"audio",script:function(){if(Services.storage.readData("IntroMovie.showing")===true){return}var c=Services.storage.readData("playModeManager.modes");switch(c){case"freespin":a.ambienceFreeSpinStart.script.call(this);break;case"basic":a.ambienceGeneralStart.script.call(this);break;default:break}}};a.ambienceGeneralStart={usedOn:["notify:stateHandler.leavingShowingIntroMovieState"],type:"audio",script:function(){this.stop(b);this.play(b,"ambienceGeneral",{loop:true})}};a.ambienceGeneralStop={usedOn:["notify:stateHandler.enteringShowingIntroMovieState"],type:"audio",script:function(){this.stop(b)}};a.ambienceFreeSpinStart={usedOn:["notify:stateHandler.enteringFreeSpinIntroState"],type:"audio",script:function(){this.stop(b);this.play(b,"freeSpin")}};a.ambienceFreeSpinStop={usedOn:["notify:stateHandler.leavingFreeSpinOutroState"],type:"audio",script:function(){a.ambienceGeneralStart.script.call(this)}};a.freeSpinCountdown={usedOn:["notify:stateHandler.enteringCountDownFreespinsState"],type:"audio",script:function(){}};Resources.storeData("triggerScripts",a)}(Resources.readData("triggerScripts")));Sys.ns("Core");Core.SlowRequestAnimation={constructor:function(){Core.SlowRequestAnimation.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.SlowRequestAnimationModel,view:Core.SlowRequestAnimationView,controller:Core.SlowRequestAnimationController}},getMixinDependencies:function(){return["orientation"]}};Core.SlowRequestAnimation=Sys.extend(Core.Module,Core.SlowRequestAnimation,"Core.SlowRequestAnimation");Sys.ns("Core");Core.SlowRequestAnimationModel={constructor:function(){Core.SlowRequestAnimationModel.superclass.constructor.apply(this,arguments);this.initModel()},initModel:function(){var a=this;a.storeData("timeConfig",{between:300,slowConnectionTime:10000,slowDialogTime:30000});a.storeData("activeStack",[]);a.storeData("requestConfig",a.getRequestConfig());a.storeData("dialogShowing",false);a.setState("idle")},updateActiveStack:function(d){var c=this,a=this.readData("activeStack"),b=a.indexOf(d);if(b>-1){a.splice(b,1);c.storeData("activeStack",a)}return a},pushActive:function(c){var b=this,a=b.readData("activeStack");a.push(c);b.storeData("activeStack",a)},getRequestConfig:function(){return["spin","drop","freespin","respin","freespininit"]},removeSlowTimeout:function(){var a=this.readData("slowTimeout");if(a){clearTimeout(a);this.removeData("slowTimeout")}},removeDialogTimeout:function(){var a=this.readData("dialogTimeout");if(a){this.storeData("dialogShowing",false);clearTimeout(a);this.removeData("dialogTimeout")}},getSlowConnectionTimeout:function(){return this.readData("slowTimeout")},getDialogTimeout:function(){return this.readData("dialogTimeout")},storeDialogTimeout:function(a){var b=this,c=b.readData("dialogTimeout");if(c){clearTimeout(c);b.storeData("dialogTimeout",a)}else{b.storeData("dialogTimeout",a)}},storeSlowConnectionTimeout:function(a){var b=this,c=b.readData("slowTimeout");if(c){clearTimeout(c);b.storeData("slowTimeout",a)}else{b.storeData("slowTimeout",a)}}};Core.SlowRequestAnimationModel=Sys.extend(Core.Model,Core.SlowRequestAnimationModel,"Core.SlowRequestAnimationModel");Sys.ns("Core");Core.SlowRequestAnimationController={constructor:function(){Core.SlowRequestAnimationController.superclass.constructor.apply(this,arguments);this.initController()},initController:function(){var a=this;a.on({"view:showDialog":a.onShowDialog,"view:dialogContinue":a.onDialogContinueOption,"view:setSafeArea":a.fireEvent.bind(a,"request:fullscreen.setSafeArea"),"notify:stateHandler.leavingBeforeLoaderCloseState":a.onLoaderClose,"notify:serverManager.actionRequestSent":a.onServerRequest,"notify:serverManager.actionRequestError":a.tryToHideAnimation,"notify:serverManager.slowRequest":a.onSlowResponse,"notify:responseParser.responseParsed":a.onServerResponse,"request:slowRequestAnimation.show":a.showSpinnerAnimation,"request:slowRequestAnimation.hide":a.hideSpinnerAnimation})},onLoaderClose:function(){this.view.initView()},onShowDialog:function(a){var b=this;b.fireEvent("request:dialogWindow.showDialog",a);b.model.storeData("dialogShowing",true)},animationRequested:function(){var a=this;if(a.model.isState("active")){a.view.display({modal:false});a.model.setState("running")}},showSpinnerAnimation:function(){this.fireEvent("request:userInputManager.activateExclusivity","slowRequestAnimation");this.view.addOverlay();this.view.showSpinner()},hideSpinnerAnimation:function(){this.fireEvent("request:userInputManager.deactivateExclusivity","slowRequestAnimation");this.view.removeOverlay();this.view.hideSpinner()},onServerRequest:function(b){var a=this;if(a.model.readData("requestConfig").contains(b)&&a.model.isState("idle")){a.model.setState("active");a.model.pushActive(b)}},onSlowResponse:function(){this.animationRequested()},onServerResponse:function(a){if((Sys.isDefined(a)&&Sys.isDefined(a.clientaction))){this.tryToHideAnimation(a.clientaction)}},tryToHideAnimation:function(d){var c=this,b=c.model,a;if(b.isState("running")||b.isState("active")){a=b.updateActiveStack(d);if(a.length>0){}else{if(c.model.readData("dialogShowing")){c.fireEvent("request:dialogWindow.closeCurrentDialog")}c.view.hideWrapper();c.view.resetSlowMessage();c.view.resetDialogMessage(false);b.setState("idle")}}},onDialogContinueOption:function(){this.view.resetDialogMessage(true)}};Core.SlowRequestAnimationController=Sys.extend(Core.Controller,Core.SlowRequestAnimationController,"Core.SlowRequestAnimationController");Sys.ns("Core.Slots");Core.SlowRequestAnimationView={BASE_CSS:"interface-slowRequestAnimation _base",PORTRAIT_CSS:"interface-slowRequestAnimation _portrait",LANDSCAPE_CSS:"interface-slowRequestAnimation _landscape",PIXEL_FACTOR:0.01,constructor:function(){Core.SlowRequestAnimationView.superclass.constructor.apply(this,arguments)},initView:function(){var a=this;a.hasOverlay=false;a.setupElements()},removeOverlay:function(){var b=this,a=b.getLayoutConfig().background,c=b.getLayoutConfig().animation;b.background.el.style.top=a.top*b.PIXEL_FACTOR+"rem";b.background.el.style.left=a.left*b.PIXEL_FACTOR+"rem";b.background.el.style.width=a.width*b.PIXEL_FACTOR+"rem";b.background.el.style.height=a.height*b.PIXEL_FACTOR+"rem";b.background.el.style.borderRadius="0";b.background.el.style.zIndex=340;b.animation.el.style.top=c.top*b.PIXEL_FACTOR+"rem";b.animation.el.style.left=c.left*b.PIXEL_FACTOR+"rem";b.hasOverlay=false},addOverlay:function(){var b=this,a=b.getLayoutConfig().overlayConfig.background,c=b.getLayoutConfig().overlayConfig.animation;b.background.el.style.top=a.top*b.PIXEL_FACTOR+"rem";b.background.el.style.left=a.left*b.PIXEL_FACTOR+"rem";b.background.el.style.width=a.width*b.PIXEL_FACTOR+"rem";b.background.el.style.height=a.height*b.PIXEL_FACTOR+"rem";b.background.el.style.borderRadius="0";b.background.el.style.zIndex=340;b.animation.el.style.top=c.top*b.PIXEL_FACTOR+"rem";b.animation.el.style.left=c.left*b.PIXEL_FACTOR+"rem";b.hasOverlay=true},onPortrait:function(){var a=this;Mixins.orientation.view.methods.onPortrait.call(a);if(a.hasOverlay){a.addOverlay()}},onLandscape:function(){var a=this;Mixins.orientation.view.methods.onLandscape.call(a);if(a.hasOverlay){a.addOverlay()}},getLayoutConfig:function(){var a={width:960,height:540};return{overlayConfig:{background:{top:0-Environment.getSpaceAboveGame(),left:0,width:a.width,height:a.height+Environment.getSpaceBelowGame()},animation:{top:a.height/2-(Environment.scaleValue(180)/2)+Environment.getSpaceAboveGame(),left:a.width/2-(Environment.scaleValue(210)/2)}},wrapper:{top:0,left:0},background:{top:(a.height/2)-(Environment.scaleValue(180)/2),left:(a.width/2)-(Environment.scaleValue(210)/2),width:Environment.scaleValue(210),height:Environment.scaleValue(180)},animation:{top:(a.height/2)-(Environment.scaleValue(180)/2),left:(a.width/2)-(Environment.scaleValue(376)/2),width:Environment.scaleValue(210),height:Environment.scaleValue(180)},textArea:{top:Environment.scaleValue(130),left:0,width:0,height:Environment.scaleValue(80)},guiArea:{top:Environment.scaleValue(410),left:0,width:0,height:Environment.scaleValue(100)}}},setupBackgroundArea:function(c){var b=this,a=c||b.getLayoutConfig();return new Sys.Element({tag:"div",id:"slowRequestAnimation",cls:"slowRequestAnimation background",style:"top:"+a.background.top*b.PIXEL_FACTOR+"rem;left:"+a.background.left*b.PIXEL_FACTOR+"rem;width:"+a.background.width*b.PIXEL_FACTOR+"rem;height:"+a.background.height*b.PIXEL_FACTOR+"rem;"})},getDialogConfig:function(){var a=this;return{slowDialog:{title:Services.languageManager.getText(Language.Keys.connectionQualityPoor),text:Services.languageManager.getText(Language.Keys.slowConnection),buttons:[{text:Services.languageManager.getText(Language.Keys.btn_casino),action:Environment.goToLobby.bind(Environment,"9")},{text:Services.languageManager.getText(Language.Keys.btn_continue),action:a.fireEvent.bind(a,"view:dialogContinue")}]}}},setupAnimationArea:function(c){var b=this,a=c||this.getLayoutConfig();return new Sys.Element({tag:"div",cls:"slowRequestAnimation loadAnimation animation slowRequestAnimation_uri",style:"width:"+a.animation.width*b.PIXEL_FACTOR+"rem;height:"+a.animation.height*b.PIXEL_FACTOR+"rem;"})},setupTextArea:function(c){var b=this,d,a=c||this.getLayoutConfig();b.textSpan=new Sys.Element({tag:"span",textContent:Services.languageManager.getText(Language.Keys.slowConnection)});d=new Sys.Element({tag:"div",cls:"slowRequestAnimation text hide",style:"left:"+a.textArea.left*b.PIXEL_FACTOR+"rem;width:100%;min-height:"+a.textArea.height*b.PIXEL_FACTOR+"rem;"});d.add(b.textSpan);return d},setupElements:function(){var b=this,a=b.getLayoutConfig();b.wrapper=new Sys.Element({tag:"div",id:"slowRequestAnimation",cls:"slowRequestAnimation wrapper hide",style:"top:"+a.wrapper.top*b.PIXEL_FACTOR+"rem;left:"+a.wrapper.left*b.PIXEL_FACTOR+"rem;width: 100%;height: 100%;",renderTo:"gameWrapper"});b.background=b.setupBackgroundArea(a);b.animation=b.setupAnimationArea(a);b.textArea=b.setupTextArea(a);b.background.add(b.animation);b.wrapper.add(b.background);b.wrapper.add(b.textArea);b.container=b.wrapper;b.fireEvent("view:setSafeArea","slowRequestAnimation",{element:b.container.getEl()})},setupRequestDialogTimeout:function(){var b=this,c,a=b.model.readData("timeConfig").slowDialogTime;c=setTimeout(function(){b.requestSlowDialog()},a);b.model.storeDialogTimeout(c)},requestSlowDialog:function(){var b=this,a=b.getDialogConfig().slowDialog;if(b.model.isState("running")){b.hideSpinner();b.hideText();b.fireEvent("view:showDialog",a)}},onShowSlowConnection:function(){this.showText()},display:function(a){var c=this,d,b;if(a.modal){c.wrapper.addCls("modal")}c.wrapper.removeCls("hide");if(!a.modal){b=c.model.readData("timeConfig").slowConnectionTime;d=setTimeout(function(){c.onShowSlowConnection();c.setupRequestDialogTimeout()},b);c.model.storeSlowConnectionTimeout(d)}return true},resetSlowMessage:function(){var a=this,b=a.model.getSlowConnectionTimeout();if(b){a.model.removeSlowTimeout();a.hideText()}},resetDialogMessage:function(a){var b=this,c=b.model.getDialogTimeout();if(c){b.model.removeDialogTimeout();if(a&&b.model.isState("running")){b.showSpinner();b.showText();b.setupRequestDialogTimeout()}}},showSpinner:function(){this.wrapper.removeCls("hide")},hideSpinner:function(){this.hideWrapper()},hideWrapper:function(){this.wrapper.addCls("hide")},hideText:function(){this.textArea.addCls("hide")},showText:function(){this.textArea.removeCls("hide")}};Core.SlowRequestAnimationView=Sys.extend(Core.View,Core.SlowRequestAnimationView,"Core.SlowRequestAnimationView");Sys.ns("Core");Core.SlowRequestAnimationDesktopView={constructor:function(){Core.SlowRequestAnimationDesktopView.superclass.constructor.apply(this,arguments)},setupRequestDialogTimeout:function(){}};Core.SlowRequestAnimationDesktopView=Sys.extend(Core.SlowRequestAnimationView,Core.SlowRequestAnimationDesktopView,"Core.SlowRequestAnimationDesktopView");Sys.ns("Interface");Interface.HomeButton={constructor:function(){Interface.HomeButton.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["orientation",{userInput:{listenToUserInput:true}}]},getDefaultMVCClasses:function(){return{controller:Interface.HomeButtonController,model:Core.Model,view:Interface.HomeButtonBaseView}}};Interface.HomeButton=Sys.extend(Core.Module,Interface.HomeButton,"Interface.HomeButton");Sys.ns("Interface");Interface.HomeButtonController={constructor:function(){Interface.HomeButtonController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Interface.HomeButtonController.superclass.setupEvents.apply(this,arguments);a.on({"view:setSafeArea":a.fireEvent.bind(a,"request:fullscreen.setSafeArea"),"notify:stateHandler.leavingBeforeLoaderCloseState":a.onLoaderClose,"notify:settingsMenu.open":a.view.hide.bind(a.view),"notify:settingsMenu.closed":a.view.show.bind(a.view),"request:homeButton.hidePermanently":a.hidePermanently})},onLoaderClose:function(){var a=this;a.view.show();a.view.setFullscreenSafeArea()},hidePermanently:function(){this.model.storeData("hiddenPermanently",true);this.view.hide()},onUserInputStart:function(a){if(this.view.isInputTarget(a)){this.model.storeData("activeInputTarget",true)}},onUserInputEnd:function(c){var b=this,a=Resources.readData("lobbyUrl");if(b.model.readData("activeInputTarget")){if(b.view.isInputTarget(c)){if(Sys.isDefined(a)&&a!==""){b.fireEvent("request:slowRequestAnimation.show")}Environment.goToLobby(0)}}b.model.storeData("activeInputTarget",false)}};Interface.HomeButtonController=Sys.extend(Core.Controller,Interface.HomeButtonController,"Interface.HomeButtonController");Sys.ns("Interface");Interface.HomeButtonBaseView={BASE_BUTTON_CSS:"interface-homeButton_baseButton",PORTRAIT_CSS:"interface-homeButton_portraitBase",LANDSCAPE_CSS:"interface-homeButton_landscapeBase",URI_BUTTON:"interface-homeButton_button_uri",RENDER_TARGET:"gameWrapper",constructor:function(){Interface.HomeButtonBaseView.superclass.constructor.apply(this,arguments)},adaptToOrientation:function(a){this.setStyle(a)},init:function(){var a=this;Interface.HomeButtonBaseView.superclass.init.apply(a,arguments);a.container=new Sys.Element({id:"homeButton",tag:"div",cls:a.BASE_BUTTON_CSS,renderTo:a.RENDER_TARGET,style:"display: none;"})},setFullscreenSafeArea:function(){var a=this;a.fireEvent("view:setSafeArea","homeButton",{element:a.container.getEl()})},show:function(){var b=this,a=b.container;if(!b.model.readData("hiddenPermanently")){a.el.style.display="block";if(!a.hasCls(b.URI_BUTTON)){a.addCls(b.URI_BUTTON)}}},hide:function(){this.container.el.style.display="none"},isInputTarget:function(a){return Sys.UserInputUtils.isCoordinateTarget(this.container.el,a)},setStyle:function(a){var c=this,d=a+"_CSS",b=a==="LANDSCAPE"?"PORTRAIT_CSS":"LANDSCAPE_CSS";if(Sys.isDefined(c[d])){c.container.removeCls(c[b]);c.container.addCls(c[d])}}};Interface.HomeButtonBaseView=Sys.extend(Core.View,Interface.HomeButtonBaseView,"Interface.HomeButtonBaseView");Sys.ns("Interface");Interface.HomeButtonMobileView={PORTRAIT_CSS:"interface-homeButton_portraitBase_mobile",LANDSCAPE_CSS:"interface-homeButton_landscapeBase_mobile",constructor:function(){Interface.HomeButtonMobileView.superclass.constructor.apply(this,arguments)}};Interface.HomeButtonMobileView=Sys.extend(Interface.HomeButtonBaseView,Interface.HomeButtonMobileView,"Interface.HomeButtonMobileView");Sys.ns("Interface");Interface.SoundOnOffButton={constructor:function(){Interface.SoundOnOffButton.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["orientation",{userInput:{listenToUserInput:true}},{properties:{updateOnStartup:true}}]},getDefaultMVCClasses:function(){return{controller:Interface.SoundOnOffButtonController,model:Core.Model,view:Interface.SoundOnOffButtonBaseView}}};Interface.SoundOnOffButton=Sys.extend(Core.Module,Interface.SoundOnOffButton,"Interface.SoundOnOffButton");Sys.ns("Interface");Interface.SoundOnOffButtonController={constructor:function(){Interface.SoundOnOffButtonController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:audioPlayer.loadingSound":a.loadingSound,"notify:audioPlayer.soundLoaded":a.soundFinishedLoading,"notify:settingsMenu.open":a.onSettingsMenuOpened,"notify:settingsMenu.closed":a.onSettingsMenuClosed,"notify:settingsManager.settingChanged":a.onSettingChanged})},loadingSound:function(){this.model.storeData("soundIsLoading",true);this.addProperty("soundLoading",this.MODULE_NAME)},soundFinishedLoading:function(){this.model.storeData("soundIsLoading",false);this.removeProperty("soundLoading",this.MODULE_NAME)},onSettingsMenuOpened:function(){this.addProperty("hidden","settingsMenuOpen")},onSettingsMenuClosed:function(){this.removeProperty("hidden","settingsMenuOpen")},onUserInputStart:function(b){if(this.model.readData("soundIsLoading")){return}var a=this.view.isTarget(b);this.model.storeData("isInputTarget",a)},onUserInputEnd:function(a){if(this.model.readData("soundIsLoading")){return}if(this.view.isTarget(a)&&this.model.readData("isInputTarget")){Services.settingsManager.storeSetting("volume",Services.settingsManager.getSetting("volume")>0?0:1)}},onSettingChanged:function(a){if(a==="volume"){this.updateAppearance()}},updateAppearance:function(){this.view.update()}};Interface.SoundOnOffButtonController=Sys.extend(Core.Controller,Interface.SoundOnOffButtonController,"Interface.SoundOnOffButtonController");Sys.ns("Interface");Interface.SoundOnOffButtonBaseView={BASE_BUTTON_CSS:"interface-soundOnOffButton_baseButton",PORTRAIT_CSS:"interface-soundOnOffButton_portrait",LANDSCAPE_CSS:"interface-soundOnOffButton_landscape",ON_URI:"interface-soundOnOffButton_on_uri",OFF_URI:"interface-soundOnOffButton_off_uri",LOADING_URI:"interface-smallSpinner_uri",RENDER_TARGET:"gameWrapper",constructor:function(){Interface.SoundOnOffButtonBaseView.superclass.constructor.apply(this,arguments)},adaptToOrientation:function(a){this.setStyle(a)},init:function(){var a=this;Interface.SoundOnOffButtonBaseView.superclass.init.apply(a,arguments);a.container=new Sys.Element({id:"soundOnOffButton",tag:"div",cls:a.BASE_BUTTON_CSS,renderTo:a.RENDER_TARGET})},isTarget:function(a){return Sys.UserInputUtils.isCoordinateTarget(this.container.el,a)},setStyle:function(a){var c=this,d=a+"_CSS",b=a==="LANDSCAPE"?"PORTRAIT_CSS":"LANDSCAPE_CSS";if(Sys.isDefined(c[d])){c.container.removeCls(c[b]);c.container.addCls(c[d])}},update:function(){var c=this,b=c.model,a=c.container;if(b.hasProperty("hidden")){a.el.style.display="none"}else{a.el.style.display="block"}a.removeCSSClass(c.ON_URI);a.removeCSSClass(c.OFF_URI);a.removeCSSClass(c.LOADING_URI);if(b.hasProperty("soundLoading")){a.addCSSClass(c.LOADING_URI)}else{if(Services.settingsManager.getSetting("volume")>0){a.addCSSClass(c.ON_URI)}else{a.addCSSClass(c.OFF_URI)}}}};Interface.SoundOnOffButtonBaseView=Sys.extend(Core.View,Interface.SoundOnOffButtonBaseView,"Interface.SoundOnOffButtonBaseView");Sys.ns("Interface");Interface.SoundOnOffButtonMobileView={PORTRAIT_CSS:"interface-soundOnOffButton_portrait_mobile",LANDSCAPE_CSS:"interface-soundOnOffButton_landscape_mobile",constructor:function(){Interface.SoundOnOffButtonMobileView.superclass.constructor.apply(this,arguments)}};Interface.SoundOnOffButtonMobileView=Sys.extend(Interface.SoundOnOffButtonBaseView,Interface.SoundOnOffButtonMobileView,"Interface.SoundOnOffButtonMobileView");Sys.ns("Interface");Interface.AutoPlayButton={constructor:function(){Interface.AutoPlayButton.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["orientation","userInput","animation","properties"],desktop:[{userInput:{inputEvents:["start","end","cancel","move","hover"]}},"properties","animation"]}},getDefaultMVCClasses:function(){return{controller:Interface.AutoPlayButtonController,model:Interface.AutoPlayButtonModel,view:Interface.AutoPlayButtonBaseView}}};Interface.AutoPlayButton=Sys.extend(Core.Module,Interface.AutoPlayButton,"Interface.AutoPlayButton");Sys.ns("Interface");Interface.AutoPlayButtonController={constructor:function(){Interface.AutoPlayButtonController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Interface.AutoPlayButtonController.superclass.setupEvents.apply(a,arguments);a.on({"notify:stateHandler.leavingBeforeLoaderCloseState":a.onBeforeLoaderClose,"notify:stateHandler.leavingIdleState":a.hide,"notify:stateHandler.enteringIdleState":a.show,"notify:settingsManager.settingChanged":a.onSettingChanged,"notify:settingsManager.settingDisabled":a.settingDisabled,"notify:settingsManager.settingLocked":a.settingLocked,"view:settingChangedLocally":a.onSettingChangedLocally})},onSettingChanged:function(a,b){if(a==="autoPlayNrSpins"){this.view.changeSetting(a,b);if(b!==0&&this.model.readData("restrictedModeEnabled")){this.fireEvent("request:spinSettings.show")}}},onSettingChangedLocally:function(a,b){this.fireEvent("request:settingsManager.storeData",a,b)},settingDisabled:function(a){if(a==="autoPlayNrSpins"){this.view.disable()}},settingLocked:function(a){if(a==="autoPlayNrSpins"){this.view.locked()}},onBeforeLoaderClose:function(){var a=this;if(a.view.dispatchAddToContainerRequest()){a.view.show()}else{a.fireEvent("request:quickSettingsMenu.removeAndDisableSetting","autoPlay")}}};Interface.AutoPlayButtonController=Sys.extend(Interface.SettingsSectionController,Interface.AutoPlayButtonController,"Interface.AutoPlayButtonController");Sys.ns("Interface");Interface.AutoPlayButtonModel={DEFAULT_NUMBER_OF_ROUNDS:50,constructor:function(){Interface.AutoPlayButtonModel.superclass.constructor.apply(this,arguments)},setupData:function(){var e=this,a=Resources.readData("gameServerInitResponseObject").autoplay,g=e.DEFAULT_NUMBER_OF_ROUNDS,c,f,b,d;if(Sys.isDefined(a)&&(e.validateSingleAutoPlayValue(a)||e.validateAutoplayArray(a))){if(!Sys.isArray(a)){c=a}else{c=a[0];for(b=1;b<a.length;b++){f=Math.abs(g-c)-Math.abs(g-a[b]);if(f>0){c=a[b]}else{if(f===0&&a[b]>c){c=a[b]}}}}}else{c=g}e.storeData("roundsToTrigger",c);d=Resources.readData("gameServerInitResponse").autoplayLossLimitEnabled||false;(Resources.readData("queryData").autoplayLossLimitEnabled===true)&&(d=true);e.storeData("restrictedModeEnabled",d);if(d){e.storeData("isRemovedAndDisabled",true)}},validateAutoplayArray:function(a){var b=this,c=true,d=a.length;if(Sys.isArray(a)&&d>0&&d<9){Sys.each(a,function(f,e){a[e]=Sys.utils.toInt(f);if(!b.validateSingleAutoPlayValue(a[e])){c=false}})}else{c=false}return c},validateSingleAutoPlayValue:function(a){var b=true,c=Sys.utils.toInt(a);if(Sys.isArray(a)||isNaN(c)||c<5||c>1000){b=false}return b}};Interface.AutoPlayButtonModel=Sys.extend(Core.Model,Interface.AutoPlayButtonModel,"Interface.AutoPlayButtonModel");Sys.ns("Interface");Interface.AutoPlayButtonBaseView={BASE_CSS:"interface-autoPlayButton_baseContainer",PORTRAIT_CSS:"interface-autoPlayButton_portraitBase",LANDSCAPE_CSS:"interface-autoPlayButton_landscapeBase",PRESSED_CSS:"interface-autoPlayButton_pressedBase",TOGGLE_BASE_CSS:"interface-autoPlayToggle_base",TOGGLE_BUTTON_WRAPPER_CSS:"interface-autoPlayToggle_buttonWrapper",TOGGLE_BUTTON_BACKGROUND_CSS:"",TOGGLE_BUTTON_HANDLE_CSS:"",NUMBER_DISPLAY_CSS:"interface-autoPlayButton_numberDisplay",TARGET_CONTAINER:"quickSettingsMenu",constructor:function(){Interface.AutoPlayButtonBaseView.superclass.constructor.apply(this,arguments)},changeSetting:function(b,d){var c=this,a=true;if(b==="autoPlayNrSpins"){if(d===0){a=false;c.showNumberDisplay()}if(a!==c.button.isOn()){c.sliderShown=a;c.button.toggle(a,true);if(a===true){c.hideNumberDisplay()}}}},setUpContent:function(){var a=this;a.container=new Sys.Element({id:"autoPlayButton",tag:"div",cls:a.BASE_CSS,style:"visibility:hidden;"});a.button=new Interface.utils.ToggleSwitch({id:"autoplayQuickSettingsButton",CSS:{base:a.TOGGLE_BASE_CSS,button_wrapper:a.TOGGLE_BUTTON_WRAPPER_CSS,button_background:a.TOGGLE_BUTTON_BACKGROUND_CSS,button_handle:a.TOGGLE_BUTTON_HANDLE_CSS},enabled:true,callback:a.onSwitchToggled.bind(a)});a.numberDisplay=new Sys.Element({tag:"div","class":a.NUMBER_DISPLAY_CSS,textContent:a.model.readData("roundsToTrigger")});a.container.add(a.button.getContainer());a.container.add(a.numberDisplay)},dispatchAddToContainerRequest:function(){var a=this;if(!a.model.readData("isRemovedAndDisabled")){a.fireEvent("view:addToContainer",a.TARGET_CONTAINER,{content:a.container});return true}return false},onSwitchToggled:function(b){var a=this;if(b){a.fireEvent("view:settingChangedLocally","autoPlayNrSpins",a.model.readData("roundsToTrigger"));a.hideNumberDisplay()}else{a.fireEvent("view:settingChangedLocally","autoPlayNrSpins",0);a.showNumberDisplay()}},show:function(){var a=this;a.container.el.style.visibility="visible";a.button.enable()},hide:function(){var a=this;a.container.el.style.visibility="hidden";a.button.disable()},press:function(){this.button.addCls(this.PRESSED_CSS)},release:function(){this.button.removeCls(this.PRESSED_CSS)},disable:function(){var a=this;a.fireEvent("view:removeFromContainer",a.TARGET_CONTAINER,{content:a.container})},locked:function(){this.disable()},showNumberDisplay:function(){this.numberDisplay.el.style.display="block"},hideNumberDisplay:function(){this.numberDisplay.el.style.display="none"},onUserInputStart:function(a){this.wasInitialTarget=Sys.UserInputUtils.isCoordinateTarget(this.numberDisplay.el,a)},onUserInputMove:function(){},onUserInputEnd:function(a){if(this.wasInitialTarget&&Sys.UserInputUtils.isCoordinateTarget(this.numberDisplay.el,a)){this.button.toggle()}},hideButton:function(){},showButton:function(){},enable:function(){}};Interface.AutoPlayButtonBaseView=Sys.extend(Core.View,Interface.AutoPlayButtonBaseView,"Interface.AutoPlayButtonBaseView");Sys.ns("Interface");Interface.QuickSpinButton={constructor:function(){Interface.QuickSpinButton.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["orientation"]},getDefaultMVCClasses:function(){return{controller:Interface.QuickSpinButtonController,model:Interface.QuickSpinButtonModel,view:Interface.QuickSpinButtonBaseView}}};Interface.QuickSpinButton=Sys.extend(Core.Module,Interface.QuickSpinButton,"Interface.QuickSpinButton");Sys.ns("Interface");Interface.QuickSpinButtonController={constructor:function(){Interface.QuickSpinButtonController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Interface.QuickSpinButtonController.superclass.setupEvents.apply(a,arguments);a.on({"notify:stateHandler.leavingBeforeLoaderCloseState":a.onBeforeLoaderClose,"notify:stateHandler.leavingIdleState":a.view.hide.bind(a.view),"notify:stateHandler.enteringIdleState":a.view.show.bind(a.view),"notify:settingsManager.settingChanged":a.onSettingChanged,"notify:settingsManager.settingDisabled":a.settingDisabled,"view:settingChangedLocally":a.onSettingChangedLocally})},onSettingChanged:function(a,b){if(a==="quickSpin"){this.view.changeSetting(a,b)}},onSettingChangedLocally:function(a,b){this.fireEvent("request:settingsManager.storeData",a,b)},settingDisabled:function(a){var b=this;if(a==="quickSpin"){b.view.disable()}},onBeforeLoaderClose:function(){var a=this;if(a.view.dispatchAddToContainerRequest()){a.view.show()}else{a.fireEvent("request:quickSettingsMenu.removeAndDisableSetting","quickSpin")}}};Interface.QuickSpinButtonController=Sys.extend(Interface.SettingsSectionController,Interface.QuickSpinButtonController,"Interface.QuickSpinButtonController");Sys.ns("Interface");Interface.QuickSpinButtonModel={constructor:function(){Interface.QuickSpinButtonModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=Services.localStorageManager.hasData("quickSpin")&&Services.localStorageManager.readData("quickSpin")==="true";this.storeData("quickSpin",a);Services.settingsManager.storeSetting("quickSpin",a,false,false)}};Interface.QuickSpinButtonModel=Sys.extend(Core.Model,Interface.QuickSpinButtonModel,"Interface.QuickSpinButtonModel");Sys.ns("Interface");Interface.QuickSpinButtonBaseView={BASE_CSS:"interface-quickSpinButton_baseContainer",PORTRAIT_CSS:"interface-quickSpinButton_portraitBase",LANDSCAPE_CSS:"interface-quickSpinButton_landscapeBase",PRESSED_CSS:"interface-quickSpinButton_pressedBase",TOGGLE_BASE_CSS:"interface-quickSpinToggle_base",TOGGLE_BUTTON_WRAPPER_CSS:"interface-quickSpinToggle_buttonWrapper",TOGGLE_BUTTON_BACKGROUND_CSS:"",TOGGLE_BUTTON_HANDLE_CSS:"",TARGET_CONTAINER:"quickSettingsMenu",constructor:function(){Interface.QuickSpinButtonBaseView.superclass.constructor.apply(this,arguments)},changeSetting:function(a,b){if(a==="quickSpin"&&b!==this.button.isOn()){this.button.toggle(b,true)}},setUpContent:function(){var a=this;a.container=new Sys.Element({id:"quickSpinButton",tag:"div",cls:a.BASE_CSS,renderTo:a.RENDER_TARGET,style:"visibility:hidden;"});a.button=new Interface.utils.ToggleSwitch({id:"quickSpinQuickSettingsButton",CSS:{base:a.TOGGLE_BASE_CSS,button_wrapper:a.TOGGLE_BUTTON_WRAPPER_CSS,button_background:a.TOGGLE_BUTTON_BACKGROUND_CSS,button_handle:a.TOGGLE_BUTTON_HANDLE_CSS},enabled:true,callback:a.onSwitchToggled.bind(a,"quickSpin")});a.container.add(a.button.getContainer());a.button.toggle(a.model.readData("quickSpin"))},dispatchAddToContainerRequest:function(){var a=this;if(!a.model.readData("isRemovedAndDisabled")){a.fireEvent("view:addToContainer",a.TARGET_CONTAINER,{content:a.container});return true}return false},onSwitchToggled:function(a,b){this.fireEvent("view:settingChangedLocally",a,b)},show:function(){this.button.enable();this.container.el.style.visibility="visible"},hide:function(){this.container.el.style.visibility="hidden";this.button.disable()},disable:function(){var a=this;a.fireEvent("view:removeFromContainer",a.TARGET_CONTAINER,{content:a.container})},press:function(){this.button.addCls(this.PRESSED_CSS)},release:function(){this.button.removeCls(this.PRESSED_CSS)}};Interface.QuickSpinButtonBaseView=Sys.extend(Core.View,Interface.QuickSpinButtonBaseView,"Interface.QuickSpinButtonBaseView");Sys.ns("Interface");Interface.BalanceDisplay={constructor:function(){Interface.BalanceDisplay.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["orientation"]},getDefaultMVCClasses:function(){return{controller:Interface.BalanceDisplayController,view:Interface.BalanceDisplayBaseView}}};Interface.BalanceDisplay=Sys.extend(Core.Module,Interface.BalanceDisplay,"Interface.BalanceDisplay");Sys.ns("Interface");Interface.BalanceDisplayModel={constructor:function(){Interface.BalanceDisplayModel.superclass.constructor.apply(this,arguments)},setupData:function(){}};Interface.BalanceDisplayModel=Sys.extend(Core.Model,Interface.BalanceDisplayModel,"Interface.BalanceDisplayModel");Sys.ns("Interface");Interface.BalanceDisplayController={constructor:function(){Interface.BalanceDisplayController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:balanceDisplay.appendChild":a.appendChild,"request:balanceDisplay.addClass":a.view.addClass.bind(a.view),"request:balanceDisplay.removeClass":a.view.removeClass.bind(a.view)})},appendChild:function(a){this.view.addChild(a)}};Interface.BalanceDisplayController=Sys.extend(Core.Controller,Interface.BalanceDisplayController,"Interface.BalanceDisplayController");Sys.ns("Interface");Interface.BalanceDisplayBaseView={BASE_CSS:"interface-balanceDisplay_base",PORTRAIT_CSS:"interface-balanceDisplay_portrait",LANDSCAPE_CSS:"interface-balanceDisplay_landscape",RENDER_TARGET:"gameWrapper",constructor:function(){Interface.BalanceDisplayBaseView.superclass.constructor.apply(this,arguments)},adaptToOrientation:function(a){this.setStyle(a)},init:function(){this.constructDOMElement()},constructDOMElement:function(){var a=this;a.container=new Sys.Element({id:"gameFooter",tag:"div",cls:a.BASE_CSS,renderTo:a.RENDER_TARGET})},addClass:function(a){this.container.addCls(a)},removeClass:function(a){this.container.removeCls(a)},addChild:function(b){var a=this;a.container.add(b)}};Interface.BalanceDisplayBaseView=Sys.extend(Core.View,Interface.BalanceDisplayBaseView,"Interface.BalanceDisplayBaseView");Sys.ns("interface");Interface.BalanceDisplayMobileView={PORTRAIT_CSS:"interface-balanceDisplay_portrait_mobile",LANDSCAPE_CSS:"interface-balanceDisplay_landscape_mobile",constructor:function(){Interface.BalanceDisplayMobileView.superclass.constructor.apply(this,arguments)}};Interface.BalanceDisplayMobileView=Sys.extend(Interface.BalanceDisplayBaseView,Interface.BalanceDisplayMobileView,"Interface.BalanceDisplayMobileView");Sys.ns("Interface");Interface.BalanceDisplayDesktopView={LANDSCAPE_CSS:"interface-balanceDisplay_landscape_desktop",constructor:function(){Interface.BalanceDisplayDesktopView.superclass.constructor.apply(this,arguments)}};Interface.BalanceDisplayDesktopView=Sys.extend(Interface.BalanceDisplayBaseView,Interface.BalanceDisplayDesktopView,"Interface.BalanceDisplayDesktopView");Sys.ns("Interface");Interface.SystemClock={constructor:function(){Interface.SystemClock.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["orientation"]},getDefaultMVCClasses:function(){return{controller:Interface.SystemClockController,model:Interface.SystemClockModel,view:Interface.SystemClockBaseView}}};Interface.SystemClock=Sys.extend(Core.Module,Interface.SystemClock,"Interface.SystemClock");Sys.ns("Interface");Interface.SystemClockController={constructor:function(){Interface.SystemClockController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:systemClock.enableInMode":a.view.show.bind(a.view),"request:systemClock.show":a.view.show.bind(a.view),"request:systemClock.hide":a.view.show.bind(a.hide)})}};Interface.SystemClockController=Sys.extend(Core.Controller,Interface.SystemClockController,"Interface.SystemClockController");Sys.ns("Interface");Interface.SystemClockModel={constructor:function(){Interface.SystemClockModel.superclass.constructor.apply(this,arguments)},getTime:function(){var a=new Date();return{hours:a.getHours(),minutes:a.getMinutes()}}};Interface.SystemClockModel=Sys.extend(Core.Model,Interface.SystemClockModel,"Interface.SystemClockModel");Sys.ns("Interface");Interface.SystemClockBaseView={BASE_CSS:"interface-systemClock_base",PORTRAIT_POSITION:{ABOVE_GAME:true,TOP:0.05,LEFT:0.5},LANDSCAPE_POSITION:{BOTTOM:0,LEFT:0.055},RENDER_TARGET:"gameWrapper",constructor:function(){Interface.SystemClockBaseView.superclass.constructor.apply(this,arguments)},init:function(){var a=this;Interface.SystemClockBaseView.superclass.init.apply(a,arguments);a.container=new Sys.Element({id:"systemClock",tag:"div",cls:a.BASE_CSS,renderTo:a.RENDER_TARGET,style:"display:none;"});a.hours=document.createElement("span");a.container.el.appendChild(a.hours);a.colon=document.createElement("span");a.colon.textContent=":";a.container.el.appendChild(a.colon);a.minutes=document.createElement("span");a.container.el.appendChild(a.minutes);a.showColon=true},updateTime:function(){var c=this,d=c.model.getTime(),a=d.hours,b=d.minutes;if(a<10){a="0"+a}if(b<10){b="0"+b}c.hours.textContent=a;c.minutes.textContent=b;c.colon.style.visibility=c.showColon?"visible":"hidden";c.showColon=!c.showColon;c.ticker=setTimeout(function(){c.updateTime()},1000)},show:function(){this.container.el.style.display="block";this.updateTime()},hide:function(){this.container.el.style.display="none";clearTimeout(this.ticker)}};Interface.SystemClockBaseView=Sys.extend(Core.View,Interface.SystemClockBaseView,"Interface.SystemClockBaseView");Sys.ns("Interface");Interface.SystemClockTabletView={PORTRAIT_POSITION:{BOTTOM:0,LEFT:0.055},constructor:function(){Interface.SystemClockTabletView.superclass.constructor.apply(this,arguments)}};Interface.SystemClockTabletView=Sys.extend(Interface.SystemClockBaseView,Interface.SystemClockTabletView,"Interface.SystemClockTabletView");Sys.ns("Interface");Interface.SystemClockDesktopView={PORTRAIT_POSITION:undefined,LANDSCAPE_POSITION:undefined,constructor:function(){Interface.SystemClockDesktopView.superclass.constructor.apply(this,arguments)}};Interface.SystemClockDesktopView=Sys.extend(Interface.SystemClockBaseView,Interface.SystemClockDesktopView,"Interface.SystemClockDesktopView");Sys.ns("Interface");Interface.NetEntLogo={constructor:function(){Interface.NetEntLogo.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["orientation"]},getDefaultMVCClasses:function(){return{controller:Interface.NetEntLogoController,view:Interface.NetEntLogoBaseView}}};Interface.NetEntLogo=Sys.extend(Core.Module,Interface.NetEntLogo,"Interface.NetEntLogo");Sys.ns("Interface");Interface.NetEntLogoController={constructor:function(){Interface.NetEntLogoController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:netEntLogo.show":a.view.show.bind(a.view),"request:netEntLogo.hide":a.view.hide.bind(a.view)})}};Interface.NetEntLogoController=Sys.extend(Core.Controller,Interface.NetEntLogoController,"Interface.NetEntLogoController");Sys.ns("Interface");Interface.NetEntLogoBaseView={BASE_CSS:"interface-netEntLogo_base interface-netEntLogo_uri",PORTRAIT_POSITION:{BELOW_GAME:true,BOTTOM:0.01,LEFT:0.5},LANDSCAPE_POSITION:{BOTTOM:0,RIGHT:0.04},RENDER_TARGET:"gameWrapper",constructor:function(){Interface.NetEntLogoBaseView.superclass.constructor.apply(this,arguments)},init:function(){var a=this;Interface.NetEntLogoBaseView.superclass.init.apply(a,arguments);a.hidden=false;a.container=new Sys.Element({id:"netEntLogo",tag:"div",cls:a.BASE_CSS,renderTo:a.RENDER_TARGET})},show:function(){this.container.el.style.display="block"},hide:function(){this.container.el.style.display="none"}};Interface.NetEntLogoBaseView=Sys.extend(Core.View,Interface.NetEntLogoBaseView,"Interface.NetEntLogoBaseView");Sys.ns("Interface");Interface.QuickSettingsMenu={constructor:function(){Interface.QuickSettingsMenu.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{controller:Interface.QuickSettingsMenuController,model:Interface.QuickSettingsMenuModel,view:Interface.QuickSettingsMenuBaseView}},getMixinDependencies:function(){return[{userInput:{listenToUserInput:true}},"orientation","properties"]}};Interface.QuickSettingsMenu=Sys.extend(Core.Module,Interface.QuickSettingsMenu,"Interface.QuickSettingsMenu");Sys.ns("Interface");Interface.QuickSettingsMenuController={constructor:function(){Interface.QuickSettingsMenuController.superclass.constructor.apply(this,arguments);this.numberOfChildren=0},setupEvents:function(){var a=this;a.eventToUseWhenActive={"notify:stateHandler.leavingBeforeLoaderCloseState":a.onLeavingBeforeLoaderCloseState,"notify:stateHandler.enteringIdleState":a.onEnteringIdleState.bind(a,true),"notify:stateHandler.leavingIdleState":a.onLeavingIdleState,"notify:spinButton.shown":a.show,"notify:spinButton.hidden":a.hide,"notify:spinButton.pressed":a.onSpinButtonPress,"notify:spinButton.released":a.onSpinButtonRelease.bind(a,true),"notify:settingsManager.settingChanged":a.onSettingsChanged};a.on({"request:quickSettingsMenu.addChild":a.addChild,"request:quickSettingsMenu.removeChild":a.removeChild,"request:quickSettingsMenu.externalActivate":a.onExternalActivate,"request:quickSettingsMenu.externalDeactivate":a.onExternalDeactivate,"request:quickSettingsMenu.movePosition":a.onMovePositionRequest,"request:quickSettingsMenu.removeAndDisableSetting":a.onRemoveAndDisableSetting,"notify:autoPlayer.starting":a.onExternalDeactivate.bind(a,"autoplay"),"notify:autoPlayer.stopped":a.onExternalActivate.bind(a,"autoplay")});a.on(a.eventToUseWhenActive)},onMovePositionRequest:function(a){this.view.moveSettingPosition(a)},onLeavingBeforeLoaderCloseState:function(){this.model.storeData("activated",false);this.view.deactivate()},disableMenu:function(){var d=this,c=d.eventToUseWhenActive,e=Object.keys(c),b=e.length,a;for(a=-1;++a<b;){d.removeListener(e[a])}d.model.storeData("activated",false);d.hide()},addChild:function(b,a){this.numberOfChildren++;this.view.addChild(b,a)},removeChild:function(c,a){var b=this;b.numberOfChildren--;b.view.removeChild(c,a);if(b.numberOfChildren<=1){b.disableMenu()}},onExternalDeactivate:function(a){this.addProperty("externalDeactivated",a);this.hide()},onExternalActivate:function(b){var a=this;a.removeProperty("externalDeactivated",b);if(a.model.readData("status")!=="open"){a.show(true)}},onSpinButtonPress:function(){if(this.model.readData("activated")){this.hide()}},onSpinButtonRelease:function(a){if(this.model.readData("activated")){this.show(a)}},onEnteringIdleState:function(a){this.model.storeData("activated",true);this.show(a)},onLeavingIdleState:function(){this.model.storeData("activated",false);this.hide()},hide:function(){var a=this;a.view.deactivate();if(a.model.readData("status")==="open"){a.view.close();a.model.storeData("status","close");a.fireEvent("request:spinButton.removeProperty","visibleOnInput",a.MODULE_NAME)}},show:function(a){if(this.model.readData("activated")&&!this.model.hasProperty("externalDeactivated")){this.view.activate(a)}},onUserInputStart:function(a){if(this.view.isInputTarget(a)&&this.model.readData("activated")){this.model.storeData("activeInputTarget",true)}},onUserInputMove:function(a){},onUserInputEnd:function(c){var b=this,a=b.model.readData("status");if(a==="open"&&(b.view.isInputTarget(c)||!b.view.isContainer(c))){b.view.close();b.model.storeData("status","close");b.fireEvent("request:spinButton.removeProperty","visibleOnInput",b.MODULE_NAME)}else{if(b.view.isInputTarget(c)&&b.model.readData("activeInputTarget")){b.view.open();b.model.storeData("status","open");b.fireEvent("notify:quickSettingsMenu."+b.model.readState);b.fireEvent("request:spinButton.addProperty","visibleOnInput",b.MODULE_NAME)}}b.model.storeData("activeInputTarget",false)},onSettingsChanged:function(a,b){if(a==="leftHandMode"){this.view.positionMenu(b)}},onRemoveAndDisableSetting:function(a){this.view.removeAndDisableSetting(a)}};Interface.QuickSettingsMenuController=Sys.extend(Core.Controller,Interface.QuickSettingsMenuController,"Interface.QuickSettingsMenuController");Sys.ns("Interface");Interface.QuickSettingsMenuModel={PROPERTIES:{externalDeactivated:[]},constructor:function(){Interface.QuickSettingsMenuModel.superclass.constructor.apply(this,arguments)},setupData:function(){var b=this,a=Services.localStorageManager.hasData("leftHandMode")&&Services.localStorageManager.readData("leftHandMode")==="true";b.storeData("children",{});b.storeData("disableDuringSpin",[]);b.storeData("status","close");b.storeData("leftHandMode",a)}};Interface.QuickSettingsMenuModel=Sys.extend(Core.Model,Interface.QuickSettingsMenuModel,"Interface.QuickSettingsMenuModel");Sys.ns("Interface");Interface.QuickSettingsMenuBaseView={BASE_CSS:"interface-quickSettingsMenu_base",PORTRAIT_CSS:"interface-quickSettingsMenu_portrait",LANDSCAPE_CSS:"interface-quickSettingsMenu_landscape",LANDSCAPE_BG_URI:"interface-quickSettingsMenu_sliderBg_landscape_uri",PORTRAIT_BG_URI:"interface-quickSettingsMenu_sliderBg_portrait_uri",LANDSCAPE_FRONT_CSS:"interface-quickSettingsMenu_front_landscape",PORTRAIT_FRONT_CSS:"interface-quickSettingsMenu_front_portrait",LANDSCAPE_BACK_CSS:"interface-quickSettingsMenu_back_landscape",PORTRAIT_BACK_CSS:"interface-quickSettingsMenu_back_portrait",SLIDER_BUTTON_URI:"interface-quickSettingsMenu_sliderButton_uri",ICON_BASE_CSS:"interface-quickSettingsMenu_icon_base",LANDSCAPE_ICON_CSS:"interface-quickSettingsMenu_icon_landscape",PORTRAIT_ICON_CSS:"interface-quickSettingsMenu_icon_portrait",ICON_CLOSE_CSS:"interface-quickSettingsMenu_icon_close",ICON_OPEN_CSS:"interface-quickSettingsMenu_icon_open",ICON_URI:"interface-quickSettingsMenu_icon_uri",BASE_SLIDE_CSS:"interface-quickSettingsMenu_portraitSlide",LANDSCAPE_AUTOPLAY_SLIDE_CSS:"interface-quickSettingsMenu_autoPlaySlide_landscape",PORTRAIT_AUTOPLAY_SLIDE_CSS:"interface-quickSettingsMenu_autoPlaySlide_portrait",AUTOPLAY_SLIDE_CLOSE:"interface-quickSettingsMenu_autoPlaySlide_close",AUTOPLAY_SLIDE_OPEN:"interface-quickSettingsMenu_autoPlaySlide_open",LANDSCAPE_QUICKSPIN_SLIDE_CSS:"interface-quickSettingsMenu_quickSpinSlide_landscape",PORTRAIT_QUICKSPIN_SLIDE_CSS:"interface-quickSettingsMenu_quickSpinSlide_portrait",QUICKSPIN_SLIDE_CLOSE:"interface-quickSettingsMenu_quickSpinSlide_close",QUICKSPIN_SLIDE_OPEN:"interface-quickSettingsMenu_quickSpinSlide_open",BASE_CHILDREN_CSS:"interface-quickSettingsMenu_children_base",LANDSCAPE_CHILDREN_CSS:"interface-quickSettingsMenu_children_landscape_base",PORTRAIT_CHILDREN_CSS:"interface-quickSettingsMenu_children_portrait_base",CHILD_CSS:"interface-quickSettingsMenu_child_base",PORTRAIT_CHILD_CSS:"interface-quickSettingsMenu_child_portrait",LANDSCAPE_CHILD_CSS:"interface-quickSettingsMenu_child_landscape",HANDLE_CSS:"interface-quickSettingsMenu_handle",LANDSCAPE_HANDLE_CSS:{open:"interface-quickSettingsMenu_handle_open_landscape",close:"interface-quickSettingsMenu_handle_close_landscape"},PORTRAIT_HANDLE_CSS:{open:"interface-quickSettingsMenu_handle_portrait",close:"interface-quickSettingsMenu_handle_portrait"},MENU_LEFT_SIDE_CSS:"interface-quickSettingsMenu_left",HANDLE_LEFT_SIDE_CSS:"interface-quickSettingsMenu_handle_left",PORTRAIT_POSITION:{BELOW_GAME:true,TOP:0.4,MIN_TOP:825,LEFT:0.3994},PORTRAIT_SIZE:{HEIGHT:0.55,WIDTH:0.28},LANDSCAPE_CLOSEDSIZE:"0.00rem",LANDSCAPE_FRONTSTARTPOS:"-0.64rem",LANDSCAPE_FRONTENDPOS:"-0.24rem",LANDSAPE_BACKSTARTPOS:"0.00rem",LANDSCAPE_BACKENDPOS:"0.50rem",LANDSCAPE_OPENSIZE:"2.70rem",RENDER_TARGET:"gameWrapper",PIXEL_FACTOR:0.01,constructor:function(){Interface.QuickSettingsMenuBaseView.superclass.constructor.apply(this,arguments)},moveSettingPosition:function(a){var b=this;if(Sys.isDefined(a)){if(Sys.isString(a.orientation)&&a.orientation.toLowerCase()==="portrait"){if(Sys.isDefined(a.vertical)){b.PORTRAIT_POSITION["TOP"]=b.PORTRAIT_POSITION["TOP"]+a.vertical}if(Environment.orientation()==="LANDSCAPE"){b.onLandscape()}else{b.onPortrait()}}}},open:function(){var b=this,a=Environment.orientation();b["open"+a](a);b.icon.replaceCSSClass(b.ICON_CLOSE_CSS,b.ICON_OPEN_CSS)},openLANDSCAPE:function(){var d=this,a=d.model.readData("status"),c=d.getNewStatus(a),e=d.LANDSCAPE_HANDLE_CSS,b=d.animations.LANDSCAPE;d.back.el.style.display="block";d.childrenContainer.el.style.display="block";if(a!==c){d.handle.replaceCSSClass(e[a],e[c])}Sys.iterate(d.children,function(f){b.openChild.run(d.children[f].el)});b.open.run(d.container.el);b.openFront.run(d.front.el);b.openBack.run(d.back.el);if(Sys.isIphone4Or4s){d.container.el.style.display="none";d.container.el.offsetHeight;d.container.el.style.display="block"}},openPORTRAIT:function(){var a=this;a.childrenContainer.el.style.display="none";a.front.el.style.left="";Sys.iterate(a.children,function(b){a.children[b].el.style.opacity=1});a.autoPlaySlide.replaceCSSClass(a.AUTOPLAY_SLIDE_CLOSE,a.AUTOPLAY_SLIDE_OPEN);a.quickSpinSlide.replaceCSSClass(a.QUICKSPIN_SLIDE_CLOSE,a.QUICKSPIN_SLIDE_OPEN)},getNewStatus:function(a){if(Environment.orientation()===this.currentOrientation){return(a==="close")?"open":"close"}else{return a}},close:function(){var b=this,a=Environment.orientation();b["close"+a](a);b.icon.replaceCSSClass(b.ICON_OPEN_CSS,b.ICON_CLOSE_CSS)},closeLANDSCAPE:function(){var d=this,a=d.model.readData("status"),c=(a==="close")?"open":"close",b=d.animations.LANDSCAPE;d.handle.replaceCSSClass(d.LANDSCAPE_HANDLE_CSS[a],d.LANDSCAPE_HANDLE_CSS[c]);Sys.iterate(d.children,function(e){b.closeChild.run(d.children[e].el)});b.close.run(d.container.el);b.closeFront.run(d.front.el);b.closeBack.run(d.back.el);if(Sys.isIphone4Or4s){d.container.el.style.display="none";d.container.el.offsetHeight;d.container.el.style.display="block"}},closePORTRAIT:function(){var a=this;a.autoPlaySlide.replaceCSSClass(a.AUTOPLAY_SLIDE_OPEN,a.AUTOPLAY_SLIDE_CLOSE);a.quickSpinSlide.replaceCSSClass(a.QUICKSPIN_SLIDE_OPEN,a.QUICKSPIN_SLIDE_CLOSE)},activate:function(c){var b=this,a=Environment.orientation();if(!b.model.readData("animationReady")){b.setupAnimations()}b.container.el.style.display="block";b.childrenContainer.el.style.display="none";b.back.el.style.display="none";b.handle.el.style.display="block";if(c){b.animations[a].activate.run(b.container.el)}},deactivate:function(){var c=this,b=Sys.utils.pollyFill("animation"),a=c.model.readData("status");c.childrenContainer.el.style.display="none";c.handle.el.style.display="none";c.container.el.style.display="none";c.container.el.style[b]="none";c.front.el.style[b]="none"},isInputTarget:function(a){return Sys.UserInputUtils.isCoordinateTarget(this.handle.el,a)},isContainer:function(a){return Sys.UserInputUtils.isCoordinateTarget(this.container.el,a)},init:function(){var a=this;Interface.QuickSettingsMenuBaseView.superclass.init.apply(a,arguments);a.setupDOMStructure();a.children={}},setupEvents:function(){var a=this;a.on({"model:childAdded":a.addChild,"model:childRemoved":a.removeChild,"model:childActivated":a.activateChild,"model:childDeactivated":a.deactivateChild})},addChild:function(e,b){var d=this,a=Environment.orientation(),c=b.content;c.addCls(d.CHILD_CSS);c.addCls(d[a+"_CHILD_CSS"]);d.append(e,c,a);d.children[e]=c},append:function(d,c,a){var b=this;if(a==="LANDSCAPE"){b.childrenContainer.add(c)}else{if(d==="autoPlayButton"){b.autoPlaySlide.add(c)}else{if(d==="quickSpinButton"){b.quickSpinSlide.add(c)}}}},removeChild:function(d,b){var c=this,a=Environment.orientation();if(a==="LANDSCAPE"){c.childrenContainer.remove(b.content)}else{if(d==="autoPlayButton"){c.autoPlaySlide.remove(b.content)}else{if(d==="quickSpinButton"){c.quickSpinSlide.remove(b.content)}}}delete c.children[d]},onPortrait:function(){var d=this,b=d.model.readData("status"),c=Sys.utils.pollyFill("animation"),a=Sys.isDefined(d.animations)&&d.model.readData("activated");if(Environment.orientation()!==this.currentOrientation){d.adaptToOrientation("PORTRAIT");if(a){d.container.el.style[c]="none";d.animations.PORTRAIT.activate.run(d.container.el)}Sys.iterate(d.children,function(e){d.children[e].el.style[c]="none"});d[b+"PORTRAIT"]();d.currentOrientation="PORTRAIT"}d.front.el.style.left="";d.setPosition("PORTRAIT");d.container.el.style.top=(Sys.utils.toInt(d.container.el.style.top)+70)*d.PIXEL_FACTOR+"rem";d.setHandlePostion()},onLandscape:function(){var d=this,b=d.model.readData("status"),c=Sys.utils.pollyFill("animation"),a=Sys.isDefined(d.animations)&&d.model.readData("activated");if(Environment.orientation()!==this.currentOrientation){d.adaptToOrientation("LANDSCAPE");if(a){d.container.el.style[c]="none";if(b==="close"){d.animations.LANDSCAPE.activate.run(d.container.el);d.back.el.style.display="none"}else{d.childrenContainer.el.style.display="block";d.open()}d.animations.LANDSCAPE[b+"Front"].run(d.front.el);d.animations.LANDSCAPE[b+"Back"].run(d.back.el)}this.currentOrientation="LANDSCAPE"}},adaptToOrientation:function(b){var d=this,c=(b==="LANDSCAPE")?"PORTRAIT":"LANDSCAPE",a=d.model.readData("status");d.setStyle(b);d.resetPosition();Sys.iterate(d.updateOnOrientation,function(e,f){d[e].replaceCSSClass(d[c+f],d[b+f])});d.handle.replaceCSSClass(d[c+"_HANDLE_CSS"][a],d[b+"_HANDLE_CSS"][a]);d.moveChildren(d[c+"_CHILD_CSS"],d[b+"_CHILD_CSS"],b);if(d.model.readData("activated")===true){d.activate()}else{d.deactivate()}},setHandlePostion:function(){var b=this,a=b.handle.el.style,c=b.container.el.style;a.top=c.top;a.bottom=c.bottom;a.left=c.left;a.right=c.right},moveChildren:function(c,d,a){var b=this;Sys.iterate(b.children,function(e){b.children[e].replaceCSSClass(c,d);if(a==="LANDSCAPE"){b.childrenContainer.add(b.children[e])}else{if(e==="autoPlayButton"){b.autoPlaySlide.add(b.children[e])}else{if(e==="quickSpinButton"){b.quickSpinSlide.add(b.children[e])}}}})},resetPosition:function(){var e=this,f=e.container.el.style,a=e.handle.el.style,d=e.front.el.style,c=Sys.utils.pollyFill("animation"),g=["top","left","bottom","right","width","height","opacity"];f[c]="none";d[c]="none";for(var b=-1;++b<g.length;){f[g[b]]="";a[g[b]]=""}},setupDOMStructure:function(){var b=this,a=Environment.orientation();b.container=new Sys.Element({tag:"div",cls:b.BASE_CSS+" "+b.LANDSCAPE_BG_URI,renderTo:b.RENDER_TARGET});b.handle=new Sys.Element({tag:"div",cls:b.HANDLE_CSS+" "+b[a+"_HANDLE_CSS"].close,renderTo:b.RENDER_TARGET});b.front=new Sys.Element({tag:"div",cls:b[a+"_FRONT_CSS"]+" "+b.SLIDER_BUTTON_URI});b.back=new Sys.Element({tag:"div",cls:b[a+"_BACK_CSS"]+" "+b.LANDSCAPE_BG_URI});b.icon=new Sys.Element({tag:"div",cls:b.ICON_BASE_CSS+" "+b[a+"_ICON_CSS"]+" "+b.ICON_CLOSE_CSS+" "+b.ICON_URI});b.childrenContainer=new Sys.Element({tag:"div",cls:b.BASE_CHILDREN_CSS+" "+b[a+"_CHILDREN_CSS"]});b.autoPlaySlide=new Sys.Element({tag:"div",cls:b.BASE_SLIDE_CSS+" "+b[a+"_AUTOPLAY_SLIDE_CSS"]+" "+b.AUTOPLAY_SLIDE_CLOSE+" "+b.PORTRAIT_BG_URI});b.quickSpinSlide=new Sys.Element({tag:"div",cls:b.BASE_SLIDE_CSS+" "+b[a+"_QUICKSPIN_SLIDE_CSS"]+" "+b.QUICKSPIN_SLIDE_CLOSE+" "+b.PORTRAIT_BG_URI});b.updateOnOrientation={front:"_FRONT_CSS",back:"_BACK_CSS",icon:"_ICON_CSS",autoPlaySlide:"_AUTOPLAY_SLIDE_CSS",quickSpinSlide:"_QUICKSPIN_SLIDE_CSS",childrenContainer:"_CHILDREN_CSS"};b.container.add(b.front);b.front.add(b.icon);b.container.add(b.back);b.container.add(b.childrenContainer);b.container.add(b.autoPlaySlide);b.container.add(b.quickSpinSlide);b.positionMenu(b.model.readData("leftHandMode"))},setupAnimations:function(){var a=this;a.animations={};a.setupLandscapeAnimations();a.setupPortraitAnimation();a.model.storeData("animationReady",true)},setupLandscapeAnimations:function(){var l=this,h=l.LANDSCAPE_CLOSEDSIZE,j=l.LANDSCAPE_FRONTSTARTPOS,d=l.LANDSCAPE_FRONTENDPOS,n=l.LANDSAPE_BACKSTARTPOS,k=l.LANDSCAPE_BACKENDPOS,g=l.LANDSCAPE_OPENSIZE,f=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_openFrontLandscape",frames:{"0%":{left:j},"100%":{left:d}},duration:50,delay:4,fillMode:"both"}),o=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_closeFrontLandscape",frames:{"0%":{left:d},"100%":{left:j}},duration:124,delay:126,fillMode:"both"}),c=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_openBackLandscape",frames:{"0%":{width:n},"100%":{width:k}},duration:5,delay:45,fillMode:"both"}),e=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_closeBackLandscape",frames:{"0%":{width:k},"100%":{width:n}},duration:20,delay:109,fillMode:"both"}),p=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_openAnimationLandscape",frames:{"0%":{width:h},"100%":{width:g}},duration:250,fillMode:"both"}),m=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_closeAnimationLandscape",frames:{"0%":{width:g},"100%":{width:h}},duration:250,fillMode:"both"}),i=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_activateLandscape",frames:{"0%":{width:"0.00rem"},"100%":{width:h}},duration:100,fillMode:"both"}),a=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_itemInLandscape",frames:{"0%":{opacity:0},"100%":{opacity:1}},duration:150,delay:200,fillMode:"both"}),b=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_itemOutLandscape",frames:{"0%":{opacity:1},"100%":{opacity:0}},duration:50,fillMode:"both"});l.animations.LANDSCAPE={open:p,close:m,openChild:a,closeChild:b,activate:i,openFront:f,closeFront:o,openBack:c,closeBack:e}},setupPortraitAnimation:function(){var a=this,b=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_activatePortrait",frames:{"0%":{height:"0.00rem"},"100%":{height:"1.60rem"}},duration:200,fillMode:"both"});a.animations.PORTRAIT={activate:b}},positionMenu:function(b){var c=this,d=c.handle,a=c.container;if(b){d.addCSSClass(c.HANDLE_LEFT_SIDE_CSS);a.addCSSClass(c.MENU_LEFT_SIDE_CSS)}else{d.removeCSSClass(c.HANDLE_LEFT_SIDE_CSS);a.removeCSSClass(c.MENU_LEFT_SIDE_CSS)}},removeSettingSlide:function(a){this.container.remove(a)},removeAndDisableSetting:function(a){var b=this;a+="Slide";if(b.hasOwnProperty(a)){b.removeSettingSlide(b[a])}}};Interface.QuickSettingsMenuBaseView=Sys.extend(Core.View,Interface.QuickSettingsMenuBaseView,"Interface.QuickSettingsMenuBaseView");Sys.ns("Interface");Interface.QuickSettingsMenuTabletView={BASE_CSS:"interface-quickSettingsMenu_base",PORTRAIT_CSS:"interface-quickSettingsMenu_landscape",LANDSCAPE_CSS:"interface-quickSettingsMenu_landscape_tablet",LANDSCAPE_BG_URI:"interface-quickSettingsMenu_sliderBg_landscape_uri",PORTRAIT_BG_URI:"interface-quickSettingsMenu_sliderBg_landscape_uri",LANDSCAPE_FRONT_CSS:"interface-quickSettingsMenu_front_landscape_tablet",PORTRAIT_FRONT_CSS:"interface-quickSettingsMenu_front_landscape",LANDSCAPE_BACK_CSS:"interface-quickSettingsMenu_back_landscape",PORTRAIT_BACK_CSS:"interface-quickSettingsMenu_back_landscape",HANDLE_CSS:"interface-quickSettingsMenu_handle",SLIDER_BUTTON_URI:"interface-quickSettingsMenu_sliderButton_uri",ICON_BASE_CSS:"interface-quickSettingsMenu_icon_base",LANDSCAPE_ICON_CSS:"interface-quickSettingsMenu_icon_landscape",PORTRAIT_ICON_CSS:"interface-quickSettingsMenu_icon_landscape",ICON_CLOSE_CSS:"interface-quickSettingsMenu_icon_close",ICON_OPEN_CSS:"interface-quickSettingsMenu_icon_open",ICON_URI:"interface-quickSettingsMenu_icon_uri",BASE_SLIDE_CSS:"interface-quickSettingsMenu_portraitSlide",LANDSCAPE_AUTOPLAY_SLIDE_CSS:"interface-quickSettingsMenu_autoPlaySlide_landscape",PORTRAIT_AUTOPLAY_SLIDE_CSS:"interface-quickSettingsMenu_autoPlaySlide_landscape",AUTOPLAY_SLIDE_CLOSE:"interface-quickSettingsMenu_autoPlaySlide_close",AUTOPLAY_SLIDE_OPEN:"interface-quickSettingsMenu_autoPlaySlide_open",LANDSCAPE_QUICKSPIN_SLIDE_CSS:"interface-quickSettingsMenu_quickSpinSlide_landscape",PORTRAIT_QUICKSPIN_SLIDE_CSS:"interface-quickSettingsMenu_quickSpinSlide_landscape",QUICKSPIN_SLIDE_CLOSE:"interface-quickSettingsMenu_quickSpinSlide_close",QUICKSPIN_SLIDE_OPEN:"interface-quickSettingsMenu_quickSpinSlide_open",BASE_CHILDREN_CSS:"interface-quickSettingsMenu_children_base",LANDSCAPE_CHILDREN_CSS:"interface-quickSettingsMenu_children_landscape_base",PORTRAIT_CHILDREN_CSS:"interface-quickSettingsMenu_children_landscape_base",CHILD_CSS:"interface-quickSettingsMenu_child_base",PORTRAIT_CHILD_CSS:"interface-quickSettingsMenu_child_landscape",LANDSCAPE_CHILD_CSS:"interface-quickSettingsMenu_child_landscape",LANDSCAPE_HANDLE_CSS:{open:"interface-quickSettingsMenu_handle_open_landscape_tablet",close:"interface-quickSettingsMenu_handle_close_landscape"},PORTRAIT_HANDLE_CSS:{open:"interface-quickSettingsMenu_handle_open_landscape",close:"interface-quickSettingsMenu_handle_close_landscape"},LANDSCAPE_FRONTSTARTPOS:"-1.06rem",LANDSAPE_BACKSTARTPOS:"-0.40rem",moveChildren:function(){},append:function(c,b){var a=this;a.childrenContainer.add(b)},updateStyle:function(){var a=this;a.resetPosition()},setHandlePostion:function(){},openPORTRAIT:function(){var c=this,a=c.model.readData("status"),b=c.getNewStatus(a);c.back.el.style.display="block";c.childrenContainer.el.style.display="block";Sys.iterate(c.children,function(d){c.animations.PORTRAIT.openChild.run(c.children[d].el)});c.handle.replaceCSSClass(c.PORTRAIT_HANDLE_CSS[a],c.PORTRAIT_HANDLE_CSS[b]);c.animations.PORTRAIT.open.run(c.container.el);c.animations.PORTRAIT.openFront.run(c.front.el);c.animations.PORTRAIT.openBack.run(c.back.el)},closePORTRAIT:function(c){var d=this,a=d.model.readData("status"),b=(a==="close")?"open":"close";Sys.iterate(d.children,function(e){d.animations.PORTRAIT.closeChild.run(d.children[e].el)});d.handle.replaceCSSClass(d.PORTRAIT_HANDLE_CSS[a],d.PORTRAIT_HANDLE_CSS[b]);d.animations[c].close.run(d.container.el);d.animations[c].closeFront.run(d.front.el);d.animations[c].closeBack.run(d.back.el)},onPortrait:function(){var d=this,b=d.model.readData("status"),c=Sys.utils.pollyFill("animation"),a=Sys.isDefined(d.animations)&&d.model.readData("activated");if(Environment.orientation()!==this.currentOrientation){d.adaptToOrientation("PORTRAIT");if(a){d.container.el.style[c]="none";if(b==="close"){d.animations.PORTRAIT.activate.run(d.container.el);d.back.el.style.display="none"}else{d.childrenContainer.el.style.display="block";d.open()}d.animations.PORTRAIT[b+"Front"].run(d.front.el);d.animations.PORTRAIT[b+"Back"].run(d.back.el)}d.currentOrientation="PORTRAIT"}},setupPortraitAnimation:function(){var j=this,b=Environment.getResolution(),g="0.00rem",i="-0.64rem",e=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_openFrontPortrait",frames:{"0%":{left:i},"100%":{left:"-0.24rem"}},duration:50,delay:4,fillMode:"both"}),l=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_closeFrontPortrait",frames:{"0%":{left:"-0.24rem"},"100%":{left:i}},duration:124,delay:126,fillMode:"both"}),d=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_openBackPortrait",frames:{"0%":{width:"0.00rem"},"100%":{width:"0.50rem"}},duration:5,delay:40,fillMode:"both"}),f=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_closeBackPortrait",frames:{"0%":{width:"0.50rem"},"100%":{width:"0.00rem"}},duration:20,delay:111,fillMode:"both"}),m=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_openAnimationPortrait",frames:{"0%":{width:g},"100%":{width:"2.70rem"}},duration:250,fillMode:"both"}),k=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_closeAnimationPortrait",frames:{"0%":{width:"2.70rem"},"100%":{width:g}},duration:250,fillMode:"both"}),h=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_activatePortrait",frames:{"0%":{width:"0.00rem"},"100%":{width:g}},duration:100,fillMode:"both"}),a=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_itemInPortrait",frames:{"0%":{opacity:0},"100%":{opacity:1}},duration:100,delay:125,fillMode:"both"}),c=new Interface.utils.CSSAnimation({name:"interface-quickSettingsMenu_itemOutLPortrait",frames:{"0%":{opacity:1},"100%":{opacity:0}},duration:50,fillMode:"both"});j.animations.PORTRAIT={open:m,close:k,openChild:a,closeChild:c,activate:h,openFront:e,closeFront:l,openBack:d,closeBack:f}}};Interface.QuickSettingsMenuTabletView=Sys.extend(Interface.QuickSettingsMenuBaseView,Interface.QuickSettingsMenuTabletView,"Interface.QuickSettingsMenuTabletView");Sys.ns("Integration");Integration.PluginMenu={constructor:function(){Integration.PluginMenu.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["orientation"]},getDefaultMVCClasses:function(){return{controller:Integration.PluginMenuController,view:Integration.PluginMenuBaseView,model:Integration.PluginMenuModel}}};Integration.PluginMenu=Sys.extend(Core.Module,Integration.PluginMenu,"Integration.PluginMenu");Sys.ns("Integration");Integration.PluginMenuController={MAX_HEIGHT:428,constructor:function(){Integration.PluginMenuController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var b=this,a={"notify:stateHandler.enteringBeforeLoaderCloseState":b.view.setupContent.bind(b.view),"notify:settingsMenu.open":b.view.hideButton.bind(b.view),"notify:settingsMenu.closed":b.view.showButton.bind(b.view),"request:pluginMenu.init":b.initParams,"request:pluginMenu.activate":b.activate,"request:pluginMenu.deactivate":b.deactivate,"request:pluginMenu.notification":b.onNotification,"request:settingsButton.enable":b.view.enableButton.bind(b.view),"request:settingsButton.disable":b.view.disableButton.bind(b.view),"notify:stateHandler.enteringIdleState":b.view.enableButton.bind(b.view),"notify:stateHandler.leavingIdleState":b.view.disableButton.bind(b.view),"view:buttonClicked":b.onButtonClicked};a["notify:userInputManager."+b.MODULE_NAME+"ExclusiveStart"]=b.onUserInputStart;a["notify:userInputManager."+b.MODULE_NAME+"ExclusiveEnd"]=b.onUserInputEnd;b.on(a)},initParams:function(b,a){var c=this;if(b!==""&&b!=="default"){c.view.buttonImageExternalUrl=b}c.view.height=a<c.MAX_HEIGHT?a:c.MAX_HEIGHT},onButtonClicked:function(){var a=this;if(a.model.readData("pluginMenuActivated")===false){a.activate()}else{a.deactivate()}},activate:function(){var a=this;a.fireEvent("request:userInputManager.activateExclusivity",a.MODULE_NAME);a.fireEvent("request:quickSettingsMenu.externalDeactivate",a.MODULE_NAME);a.fireEvent("request:spinButton.hide",a.MODULE_NAME);a.view.activatePluginMenu();a.model.storeData("pluginMenuActivated",true);a.fireEvent("notify:pluginMenu.activated")},deactivate:function(){var a=this;a.fireEvent("request:userInputManager.deactivateExclusivity",a.MODULE_NAME);a.fireEvent("request:quickSettingsMenu.externalActivate",a.MODULE_NAME);a.fireEvent("request:spinButton.show",a.MODULE_NAME);a.view.deactivatePluginMenu();a.model.storeData("pluginMenuActivated",false);a.fireEvent("notify:pluginMenu.deactivated")},onUserInputStart:function(c){var a=this,b=!Sys.UserInputUtils.isCoordinateTarget(a.view.pluginIframe,c);a.model.storeData("clickedOutsideIframe",b)},onUserInputEnd:function(c){var b=this,a=!Sys.UserInputUtils.isCoordinateTarget(b.view.pluginIframe,c);if(b.model.readData("clickedOutsideIframe")&&a){b.deactivate()}},onNotification:function(a){var b=this;b.view.changeToNotificationImage(a)}};Integration.PluginMenuController=Sys.extend(Core.Controller,Integration.PluginMenuController,"Integration.PluginMenuController");Sys.ns("Integration");Integration.PluginMenuBaseView={HEIGHT:0,BUTTON_EXTERNAL_IMAGE_URL:"",BUTTON_DEFAULT_IMAGE_CSS:"integration-pluginMenu_button_uri",BUTTON_DEFAULT_NOTIFICATION_IMAGE_CSS:"integration-pluginMenu_button_notification_uri",BASE_BUTTON_CSS:"integration-pluginMenuButton_baseButton",PORTRAIT_CSS:"integration-pluginMenuButton_portraitBase",LANDSCAPE_CSS:"integration-pluginMenuButton_landscapeBase",DARK_OVERLAY_BASE_CSS:"integration-pluginMenuDarkOverlay_baseOverlay",DARK_OVERLAY_PORTRAIT_CSS:"integration-pluginMenuDarkOverlay_portraitBase",DARK_OVERLAY_LANDSCAPE_CSS:"integration-pluginMenuDarkOverlay_landscapeBase",RENDER_TARGET:"gameWrapper",constructor:function(){var a=this;Integration.PluginMenuBaseView.superclass.constructor.apply(this,arguments);a.height=a.HEIGHT;a.buttonImageExternalUrl=a.BUTTON_EXTERNAL_IMAGE_URL},setupContent:function(){var a=this;a.createDarkOverlay();a.createMenuButton();a.pluginIframe=document.getElementById("netEntExtendPlugin");if(a.height!==0){document.getElementById("gameWrapper").classList.add("pluginMenu");a.showButton()}},createDarkOverlay:function(){var a=this;a.darkOverlay=new Sys.Element({tag:"div",id:"pluginMenuDarkOverlay",cls:a.DARK_OVERLAY_BASE_CSS,style:"display:none",renderTo:a.RENDER_TARGET})},createMenuButton:function(){var a=this;a.menuButton=new Interface.utils.DOMButton({id:"pluginMenuButton",baseCSS:a.BASE_BUTTON_CSS+" "+a.BUTTON_DEFAULT_IMAGE_CSS,renderTo:a.RENDER_TARGET,clickCallback:a.onButtonClick.bind(a)});a.disableButton();a.hideButton();a.menuButtonSysElement=a.menuButton.getContainer();if(a.buttonImageExternalUrl!==""){a.menuButtonSysElement.el.style["background-image"]="url("+a.buttonImageExternalUrl+")"}},onButtonClick:function(){this.fireEvent("view:buttonClicked");this.changeToNormalImage()},activatePluginMenu:function(){this.darkOverlay.el.style.display="block";this.pluginIframe.height=this.height+"px"},deactivatePluginMenu:function(){this.darkOverlay.el.style.display="none";this.pluginIframe.height="0px"},setStyle:function(d){var e=this,c=d+"_CSS",f=d==="LANDSCAPE"?"PORTRAIT_CSS":"LANDSCAPE_CSS",b="DARK_OVERLAY_"+d+"_CSS",a="DARK_OVERLAY_"+d==="LANDSCAPE"?"PORTRAIT_CSS":"LANDSCAPE_CSS";if(Sys.isDefined(e.menuButtonSysElement)&&Sys.isDefined(e[c])){e.menuButtonSysElement.removeCls(e[f]);e.menuButtonSysElement.addCls(e[c])}if(Sys.isDefined(e.darkOverlay)&&Sys.isDefined(e[b])){e.darkOverlay.removeCls(e[a]);e.darkOverlay.addCls(e[b])}},showButton:function(){if(this.height!==0){this.menuButton.show(this.MODULE_NAME)}},hideButton:function(){this.menuButton.hide(this.MODULE_NAME)},enableButton:function(){this.menuButton.enable(this.MODULE_NAME)},disableButton:function(){this.menuButton.disable(this.MODULE_NAME)},adaptToOrientation:function(a){this.setStyle(a)},changeToNotificationImage:function(a){var b=this;if(a!==""&&a!=="default"){b.menuButtonSysElement.el.style["background-image"]="url("+a+")"}else{b.menuButtonSysElement.removeCls(b.BUTTON_DEFAULT_IMAGE_CSS);b.menuButtonSysElement.addCls(b.BUTTON_DEFAULT_NOTIFICATION_IMAGE_CSS)}},changeToNormalImage:function(){var a=this;if(a.buttonImageExternalUrl!==""){a.menuButtonSysElement.el.style["background-image"]="url("+a.buttonImageExternalUrl+")"}else{a.menuButtonSysElement.removeCls(a.BUTTON_DEFAULT_NOTIFICATION_IMAGE_CSS);a.menuButtonSysElement.addCls(a.BUTTON_DEFAULT_IMAGE_CSS)}}};Integration.PluginMenuBaseView=Sys.extend(Core.View,Integration.PluginMenuBaseView,"Integration.PluginMenuBaseView");Sys.ns("Integration");Integration.PluginMenuMobileView={PORTRAIT_CSS:"integration-pluginMenuButton_portraitBase_mobile",LANDSCAPE_CSS:"integration-pluginMenuButton_landscapeBase_mobile",DARK_OVERLAY_PORTRAIT_CSS:"integration-pluginMenuDarkOverlay_portraitBase_mobile",DARK_OVERLAY_LANDSCAPE_CSS:"integration-pluginMenuDarkOverlay_landscapeBase_mobile",constructor:function(){Integration.PluginMenuMobileView.superclass.constructor.apply(this,arguments)}};Integration.PluginMenuMobileView=Sys.extend(Integration.PluginMenuBaseView,Integration.PluginMenuMobileView,"Integration.PluginMenuMobileView");Sys.ns("Integration");Integration.PluginMenuModel={constructor:function(){Integration.PluginMenuModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=this;a.storeData("pluginMenuActivated",false)}};Integration.PluginMenuModel=Sys.extend(Core.Model,Integration.PluginMenuModel,"Integration.PluginMenuModel");if(Sys.isAndroidDevice&&!Sys.isChrome){}if(Sys.isAndroidDevice){Sys.override(Interface.SettingsWindowBaseView,{open:function(){Game.stage.view.animationManager.pauseAnimation();this.container.el.style.display="block";this.fireEvent("view:opened")},close:function(){Game.stage.view.animationManager.continueAnimation();this.container.el.style.display="none";this.fireEvent("view:closed")}});Sys.override(Core.ResourceLoaderController,{fetchAudioElementSource:function(e){var d=this,f=document.createElement("audio"),c,b,a;c=function(){a();d.fetchedResource(e,f)};b=function(){a();d.failedToLoadResource(e)};a=function(){f.removeEventListener("canplaythrough",c,false);f.removeEventListener("error",b,false)};f.addEventListener("canplaythrough",c,false);f.addEventListener("error",b,false);f.src=e.url;f.load()}})}if(Sys.isiPhoneIOS8){if(Sys.isDefined(Interface.HomeButtonController)){Sys.override(Interface.HomeButtonController,{onUserInputEnd:function(d){var b=this,c,a=Resources.readData("lobbyUrl");if(b.model.readData("activeInputTarget")){if(b.view.isInputTarget(d)){if(Sys.isDefined(a)&&a!==""){b.fireEvent("request:slowRequestAnimation.show")}clearTimeout(c);c=setTimeout(function(){Environment.goToLobby(0)},100)}}}})}if(Sys.isDefined(Interface.SettingsWindowMobileView)){Sys.override(Interface.SettingsWindowMobileView,{setHeight:function(b){if(b==="PORTRAIT"){var a=Environment.getGameHeight()+Environment.getSpaceBelowGame();if(Sys.isIphone4Or4s){a=1161}this.container.el.style.height=a+"px"}else{this.container.el.style.height=""}}})}}Sys.ns("Game.Slots");Game.Slots.BlurredSymbols={constructor:function(){Game.Slots.BlurredSymbols.superclass.constructor.apply(this,arguments)},getStateChanges:function(){return{setupGame:{queue:[function(a){a.stateHandler.pushState(a.states.blurImages)}]},blurImages:{state:{name:"BlurImage",execute:function(a){},waitEvents:{"notify:blurredSymbols.blurredImagesCompleted":false}}}}},getDefaultMVCClasses:function(){return{model:Game.Slots.BlurredSymbolsModel,view:Core.View,controller:Game.Slots.BlurredSymbolsController}}};Game.Slots.BlurredSymbols=Sys.extend(Core.Module,Game.Slots.BlurredSymbols,"Game.Slots.BlurredSymbols");Sys.ns("Game.Slots");Game.Slots.BlurredSymbolsController={constructor:function(){Game.Slots.BlurredSymbolsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringBlurImageState":a.blurSymbols})},blurSymbols:function(){this.model.createBlurredImages();this.fireEvent("notify:blurredSymbols.blurredImagesCompleted")}};Game.Slots.BlurredSymbolsController=Sys.extend(Core.Controller,Game.Slots.BlurredSymbolsController,"Game.Slots.BlurredSymbolsController");Sys.ns("Game.Slots");Game.Slots.BlurredSymbolsModel={constructor:function(){Game.Slots.BlurredSymbolsModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=Resources.readData("config");this.storeData("reelConfig",a.reel);this.storeData("layeringConfig",a.layering)},createBlurredImages:function(){var h=this,j=Resources.readData("animationImages"),e=h.readData("reelConfig"),l=e.blurredSymbols,a=e.blurredSymbolHeights,k,f=Environment.getVirtualToWindowScale(3),c,m,g={},b;for(var d=0;d<l.length;d++){b=l[d];if(Sys.isNumber(a)){k=a}else{if(Sys.isDefined(a[b])){k=a[b]}else{k=a.standard}}k*=f;c=j[b];if(c){m=Animation.utils.stackBlur.stackBlurImage(c,k,15,true);g[b+"-BLURRED"]=m}}Game.stage.view.animationManager.addImages(g)}};Game.Slots.BlurredSymbolsModel=Sys.extend(Core.Model,Game.Slots.BlurredSymbolsModel,"Game.Slots.BlurredSymbolsModel");Sys.ns("Game");Game.Logo={constructor:function(){Game.Logo.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation"]},getDefaultMVCClasses:function(){return{view:Game.LogoView,controller:Game.LogoController}}};Game.Logo=Sys.extend(Core.Module,Game.Logo,"Game.Logo");Sys.ns("Game");Game.LogoController={constructor:function(){Game.LogoController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:logo.hide":a.hide,"request:logo.show":a.show})},hide:function(){this.view.hide()},show:function(){this.view.show()}};Game.LogoController=Sys.extend(Core.Controller,Game.LogoController,"Game.LogoController");Sys.ns("Game");Game.LogoView={IMAGE:"logo",OFFSET_LEFT:0,OFFSET_TOP:0,SIZE_WIDTH:418,SIZE_HEIGHT:89,constructor:function(){Game.LogoView.superclass.constructor.apply(this,arguments)},hide:function(){this.item.stop()},show:function(){this.item.play()},initAnimations:function(){var d=this,c=Environment.getStageResolution(),b=d.getScaleFactor(),e=new Animation.CanvasAnimationList({}),a=new Animation.CanvasAnimationItem({left:((c.width-d.SIZE_WIDTH*b)/2)+d.OFFSET_LEFT*b,top:d.OFFSET_TOP*b,width:d.SIZE_WIDTH*b,height:d.SIZE_HEIGHT*b,depth:Layering.Game.Logo.image,image:d.IMAGE});e.add(a);d.list=e;d.item=a;Game.stage.view.addToRenderLoop(e)},getScaleFactor:function(){return Resources.readData("config").mobileResourceToVirtualScale||1}};Game.LogoView=Sys.extend(Core.View,Game.LogoView,"Game.LogoView");Sys.ns("Game.Slots");Game.Slots.FreeSpinIntro={constructor:function(){Game.Slots.FreeSpinIntro.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["serverResponse","animation","userInput","trigger"]},getStateChanges:function(){var a=this.model,b={freeSpinIntro:{state:{name:"FreeSpinIntro",execute:function(){},waitEvents:{"notify:freeSpinIntro.closed":false}}},stopped:{queue:[function(c){if(a.readData("showFreeSpinIntro")){c.stateHandler.pushState(c.states.freeSpinIntro)}}]},beforeLoaderClose:{queue:[function(c){if(a.readData("showFreeSpinIntro")){c.stateHandler.pushState(c.states.freeSpinIntro)}}]}};return b},getDefaultMVCClasses:function(){return{model:Game.Slots.FreeSpinIntroModel,controller:Game.Slots.FreeSpinIntroController,view:Game.Slots.FreeSpinIntroView}}};Game.Slots.FreeSpinIntro=Sys.extend(Core.Module,Game.Slots.FreeSpinIntro,"Game.Slots.FreeSpinIntro");Sys.ns("Game.Slots");Game.Slots.FreeSpinIntroModel={constructor:function(){Game.Slots.FreeSpinIntroModel.superclass.constructor.apply(this,arguments)},DEFAULT_REELSET:"freespin",processServerResponse:function(e){var b=this,d=(e.restore===true)&&e.currentGameState==="freespin",c=e.currentGameState!=="freespin"&&e.nextaction==="freespin",a=Sys.isDefined(e.freespins)?e.freespins.left:0;b.storeData("freeSpinsWon",a);b.storeData("showFreeSpinIntro",d||c);b.storeData("isRestoreState",d)},getInitReelInfo:function(a){return Sys.utils.parseReelInfo(a,this.DEFAULT_REELSET)},setupData:function(){Game.Slots.FreeSpinIntroModel.superclass.setupData.apply(this,arguments);Services.storage.storeData("freeSpins.canStart",false)}};Game.Slots.FreeSpinIntroModel=Sys.extend(Core.Model,Game.Slots.FreeSpinIntroModel,"Game.Slots.FreeSpinIntroModel");Sys.ns("Game.Slots");Game.Slots.FreeSpinIntroView={SPLASH_BACKGROUND_IMAGE:"freespinIntroBackground",SPLASH_CONGRATULATIONS:{fontSize:30,fontFamily:"Arial",key:Language.Keys.congratulations_uc,x:664,y:100,operations:[{fillStyle:"#000000",drawType:"fill"}]},SPLASH_YOU_WON:{fontSize:30,fontFamily:"Arial",key:Language.Keys.youWin,x:664,y:200,operations:[{fillStyle:"#000000",drawType:"fill"}]},SPLASH_FREE_SPINS:{fontSize:30,fontFamily:"Arial",key:Language.Keys.freeSpins,centerX:664,centerY:500,width:400,height:100,operations:[{fillStyle:"#000000",drawType:"fill"}]},SPLASH_FREE_SPINS_WON:{fontSize:60,fontFamily:"Arial",centerX:664,centerY:350,width:200,height:200,operations:[{fillStyle:"#FFFFFF",drawType:"fill"}]},SPLASH_BUTTON_CONTINUE:{fontSize:30,fontFamily:"Arial",key:Language.Keys.startFreespins,loadingKey:Language.Keys.loadingDots,restoreKey:Language.Keys.continue_uc,centerX:664,centerY:640,width:400,height:200,maxWidth:400,operations:[{fillStyle:"#FFFFFF",drawType:"fill"}]},MOVIE_BUTTON_CONTINUE:{fontSize:30,fontFamily:"Arial",key:Language.Keys.skipIntro,centerX:664,centerY:640,width:400,height:200,maxWidth:400,operations:[{fillStyle:"#FFFFFF",drawType:"fill"}]},constructor:function(){var a=this;Game.Slots.FreeSpinIntroView.superclass.constructor.apply(a,arguments);a.interactable=false;a.scale=Environment.getVirtualToWindowScale(3);a.hasMovie=false},show:function(){var a=this;a.setNumberOfFreespinsWon(a.model.readData("freeSpinsWon"));a.showSplash()},continueRequest:function(){var b=this,a=b.model.readData("isRestoreState");if(b.playing==="splash"){b.hideSplash();if(b.hasMovie&&!a){b.showMovie()}else{b.close()}}else{if(b.playing==="movie"){b.hideMovie();b.close()}}},close:function(){this.fireEvent("view:closed")},enableContinueButton:function(){this.interactable=true;this.setButtonContinueText()},inputTargetsButton:function(f){var e=this,c=e.activeButtonConfig,b=e.scaleValue(c.width),d=e.scaleValue(c.height),a=e.scaleValue(c.centerX)-(b/2),g=e.scaleValue(c.centerY)-(d/2);return(e.interactable&&f.x>=a&&f.x<=a+b&&f.y>=g&&f.y<=g+d)},showSplash:function(){var b=this,a=b.model.readData("isRestoreState");b.activeButtonConfig=b.SPLASH_BUTTON_CONTINUE;b.playing="splash";b.splashList.restore();b.splashList.play()},hideSplash:function(){this.splashList.stop();this.playing="";this.fireEvent("view:splashClosed")},showMovie:function(){var a=this;a.activeButtonConfig=a.MOVIE_BUTTON_CONTINUE;a.playing="movie";a.movieList.restore();a.movieList.play();a.fireEvent("view:movieStarted")},hideMovie:function(){var a=this;a.movieList.restore();a.movieList.stop();a.playing=""},initAnimations:function(){var a=this,b=a.createSplashAnimations(),c=a.createMovieAnimations();Game.stage.view.addToRenderLoop(b);b.stop();a.splashList=b;if(Sys.isDefined(c)){a.hasMovie=true;Game.stage.view.addToRenderLoop(c);c.stop();a.movieList=c}},createSplashAnimations:function(){var c=this,b={},e=c.getLayeringValues(),a=c.SPLASH_BUTTON_CONTINUE,d=new Animation.CanvasAnimationList({});b.background=c.createSplashBackgroundItem(e.background);b.congratulations=c.createSplashCongratulationsItem(e.text);b.freeSpinsWon=c.createSplashFreespinsWonItem(e.text);b.freeSpins=c.createSplashFreespinsItem(e.text);b.button=c.createButtonItem(a,e.text,Services.languageManager.getText(a.loadingKey));d.add(b.background);d.add(b.congratulations);d.add(b.freeSpinsWon);d.add(b.freeSpins);d.add(b.button);c.splashItems=b;return d},createMovieAnimations:function(){},createSplashBackgroundItem:function(a){return new Animation.CanvasAnimationItem({fullScreen:true,depth:a,image:this.SPLASH_BACKGROUND_IMAGE})},createSplashCongratulationsItem:function(f){var i=this,a=Environment.getStageResolution(),d=document.createElement("canvas"),c=d.getContext("2d"),e=i.SPLASH_CONGRATULATIONS,b=Services.languageManager.getText(e.key),g=i.SPLASH_YOU_WON,h=Services.languageManager.getText(g.key);d.width=a.width;d.height=a.height;b=(e.uppercase===true)?b.toUpperCase():b;Animation.utils.text.performOperations(b,e.fontSize+"px "+e.fontFamily,e.x,e.y,e.operations,c);h=(e.uppercase===true)?h.toUpperCase():h;Animation.utils.text.performOperations(h,g.fontSize+"px "+g.fontFamily,g.x,g.y,g.operations,c);return new Animation.CanvasAnimationItem({fullScreen:true,depth:f,image:d})},createSplashFreespinsWonItem:function(a){return this.createTextItem(this.SPLASH_FREE_SPINS_WON,a)},createSplashFreespinsItem:function(a){return this.createTextItem(this.SPLASH_FREE_SPINS,a)},createButtonItem:function(b,f,e){var d=this.createTextItem(b,f),c=d.prop.customProps.context,a;e=(b.uppercase===true)?e.toUpperCase():e;a=this.getAutoSizedFont(e,b.fontSize,b.fontFamily,0,b.maxWidth,c);Animation.utils.text.performOperations(e,a,Math.round(b.width/2),Math.round(b.height/2),b.operations,c);return d},getAutoSizedFont:function(f,d,a,e,c,b){return d+"px "+a},createTextItem:function(c,f){var b=document.createElement("canvas"),d=b.getContext("2d"),e=c.width,a=c.height;b.width=e;b.height=a;d.textAlign="center";d.textBaseline="middle";return new Animation.CanvasAnimationItem({width:e,height:a,top:c.centerY-Math.round(a/2),left:c.centerX-Math.round(e/2),depth:f,image:b,customProps:{context:d}})},setNumberOfFreespinsWon:function(b){var a=this.SPLASH_FREE_SPINS_WON,c=(b===1)?"FREE SPIN":"FREE SPINS";this.updateTextContext(a,this.splashItems.freeSpinsWon.prop.customProps.context,b.toString());this.updateTextContext(this.SPLASH_FREE_SPINS,this.splashItems.freeSpins.prop.customProps.context,c)},setButtonContinueText:function(){var b=this.SPLASH_BUTTON_CONTINUE,a=this.model.readData("isRestoreState"),c=a?b.restoreKey:b.key;this.updateTextContext(b,this.splashItems.button.prop.customProps.context,Services.languageManager.getText(c))},updateTextContext:function(b,c,d){var a;c.clearRect(0,0,b.width,b.height);c.textAlign="center";c.textBaseline="middle";d=(b.uppercase===true)?d.toUpperCase():d;a=this.getAutoSizedFont(d,b.fontSize,b.fontFamily,0,b.maxWidth,c);Animation.utils.text.performOperations(d,a,Math.round(b.width/2),Math.round(b.height/2),b.operations,c,b.maxWidth)},getLayeringValues:function(){return Layering.Game.Slots.FreeSpinIntro},scaleValue:function(a){return Math.round(this.scale*a)}};Game.Slots.FreeSpinIntroView=Sys.extend(Core.View,Game.Slots.FreeSpinIntroView,"Game.Slots.FreeSpinIntroView");Sys.ns("Game.Slots");Game.Slots.FreeSpinIntroController={AUTO_CLOSE_TIME:3500,constructor:function(){Game.Slots.FreeSpinIntroController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"view:closed":a.onClosed,"view:splashClosed":a.onSplashClosed,"request:freeSpins.start":a.view.continueRequest.bind(a.view),"view:animationComplete":a.view.continueRequest.bind(a.view),"view:movieStarted":a.onMovieStarted,"notify:stateHandler.enteringFreeSpinIntroState":a.start,"notify:responseParser.freeSpinInitResponseParsed":a.onFreespinInitResponseParsed,"notify:moduleLoader.finishedLoadingModules":a.onModulesFinishedLoading})},registerTriggers:function(){Services.trigger.registerTrigger("notify:freeSpinIntro.closed",this,"When the free spin intro is closed.");Services.trigger.registerTrigger("notify:freeSpinIntro.splashClosed",this,"When the free spin intro splash is closed.")},onSplashClosed:function(){var a=this;a.fireEvent("request:spin.activateInitReelset","freespin","base");a.fireEvent("request:background.changeImage","freespinBackground");a.fireEvent("request:coinsField.showProgressiveWin",true);a.fireEvent("request:audioPlayer.stop","introFreeSpin");a.fireEvent("notify:freeSpinIntro.splashClosed");Services.storage.storeData("freeSpins.canStart",false)},start:function(){var a=this;a.model.storeData("freeSpinInitialized",false);a.show();a.fireEvent("request:closeOpenWindows");a.fireEvent("request:disableBasicGamePanel","freespinSplash");a.requestFreeSpinInit()},requestFreeSpinInit:function(){this.fireEvent("request:serverManager.sendAction","initfreespin","notify:responseParser.freeSpinInitResponseParsed")},onFreespinInitResponseParsed:function(c){var b=this,a=b.model.getInitReelInfo(c);b.fireEvent("request:spin.updateInitReelInfo",b.model.DEFAULT_REELSET,a);b.fireEvent("request:playModeManager.removeMode","basic");b.fireEvent("request:playModeManager.addMode","freespin");b.fireEvent("notify:freeSpin.freeSpinInitCompleted");b.fireEvent("notify:freeSpinIntro.freeSpinInitCompleted");b.model.storeData("freeSpinInitialized",true);b.onAllLoadComplete()},onAllLoadComplete:function(){var a=this;a.fireEvent("notify:gameModeChanged","FREESPIN");a.startListeningToUserInput();a.view.enableContinueButton();a.resumeAutoClose()},show:function(){var a=this;a.view.show();a.stopAutoplay();a.fireEvent("request:audioPlayer.play",{name:"introFreeSpin",id:"introFreeSpin"});a.fireEvent("request:ambienceManager.ambiencePauseSwitch",true);a.fireEvent("request:coinsField.showProgressiveWin",true);Services.storage.storeData("freeSpins.canStart",true)},stopAutoplay:function(){if(Services.settingsManager.getSetting("autoPlayNrSpins")>0&&Services.settingsManager.getSetting("stopAutoplayIfFreeSpinWon")){this.fireEvent("request:autoPlayer.stop")}},resumeAutoClose:function(){var a=this;if((Services.settingsManager.getSetting("autoPlayNrSpins")>0)&&!(Services.settingsManager.getSetting("stopAutoplayIfFreeSpinWon"))){a.autoCloseTimeOut=setTimeout(function(){a.autoCloseSplash()},a.AUTO_CLOSE_TIME)}},autoCloseSplash:function(){var a=this;clearTimeout(a.autoCloseTimeOut);if(a.model.readData("freeSpinInitialized")){a.view.continueRequest()}else{a.autoCloseTimeOut=setTimeout(a.autoCloseSplash,a.AUTO_CLOSE_TIME)}},onClosed:function(){var a=this;a.fireEvent("request:ambienceManager.ambienceChangeActive",{name:"ambienceFreeSpin",id:"ambienceFreeSpin",loop:true});clearTimeout(a.autoCloseTimeOut);a.fireEvent("request:audioPlayer.stop","introFreeSpin");a.stopListeningToUserInput();a.fireEvent("request:spinButton.show",a.MODULE_NAME);a.fireEvent("request:ambienceManager.ambiencePauseSwitch",false);a.fireEvent("notify:freeSpinIntro.closed",a.model.readData("freeSpinsWon"))},onMovieStarted:function(){var a=this;a.fireEvent("notify:freeSpinIntro.movieStarted")},onUserInputEnd:function(a){if(this.view.inputTargetsButton(Sys.UserInputUtils.getCoordinatesRelativeToElement(a,Game.stage.getGameContainer()))){this.view.continueRequest()}},onModulesFinishedLoading:function(){this.fireEvent("request:spinSettings.showStopIfFreeSpinsWon")}};Game.Slots.FreeSpinIntroController=Sys.extend(Core.Controller,Game.Slots.FreeSpinIntroController,"Game.Slots.FreeSpinIntroController");Sys.ns("Game.Slots");Game.Slots.FreeSpinOutro={constructor:function(){Game.Slots.FreeSpinOutro.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["serverResponse","animation","userInput","trigger"]},getStateChanges:function(){var a=this.model,b={freeSpinOutro:{state:{name:"FreeSpinOutro",execute:function(c){},waitEvents:{"notify:freeSpinOutro.closed":false}}},stopped:{queue:[function(c){if(a.isState("animationRequested")){c.stateHandler.pushState(c.states.freeSpinOutro)}}]},beforeLoaderClose:{queue:[function(c){if(a.readData("animationRequested")){c.stateHandler.pushState(c.states.freeSpinOutro)}}]}};return b},getDefaultMVCClasses:function(){return{model:Game.Slots.FreeSpinOutroModel,controller:Game.Slots.FreeSpinOutroController,view:Game.Slots.FreeSpinOutroView}}};Game.Slots.FreeSpinOutro=Sys.extend(Core.Module,Game.Slots.FreeSpinOutro,"Game.Slots.FreeSpinOutro");Sys.ns("Game.Slots");Game.Slots.FreeSpinOutroModel={constructor:function(){Game.Slots.FreeSpinOutroModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(b){var a=Sys.isDefined(b.wins)?b.wins.coinsTotal:0;if(b.currentGameState==="freespin"&&b.gamestate.current==="basic"){this.setState("animationRequested");this.storeData("coinsWon",a);this.storeData("previousReelset",b.rs.i0.id)}else{this.setState("idle")}}};Game.Slots.FreeSpinOutroModel=Sys.extend(Core.Model,Game.Slots.FreeSpinOutroModel,"Game.Slots.FreeSpinOutroModel");Sys.ns("Game.Slots");Game.Slots.FreeSpinOutroView={constructor:function(){Game.Slots.FreeSpinOutroView.superclass.constructor.apply(this,arguments)},show:function(){var b=this.model.readData("coinsWon"),a=this.animationList.items.indexOf(this.animationItems.congratulations);this.animationItems.coinWin.prop.coinsWon=b;if(b>0){if(a<0){this.animationList.add(this.animationItems.congratulations)}}else{if(a>0){this.animationList.items.splice(a,1)}}if(!this.animated){Game.stage.view.addToRenderLoop(this.animationList);this.animated=true}else{this.animationList.play()}},close:function(){this.animationList.stop();this.fireEvent("view:closed")},initAnimations:function(){var g=this,e=Layering.Game.Slots.FreeSpinOutro,h={},b=Environment.getStageResolution(),c=g.createTextImages(),d=c.congratulation,i=c.coinsWon,j=c.button,a=b.height/3-d.height-i.height/2,f=(b.height/3)*2-j.height/2;g.animationList=new Animation.List({});h.background=new Animation.Item({fullScreen:true,depth:e.background,executeBefore:function(k){var l=this;k.fillStyle="#000000";k.fillRect(l.pivot.x,l.pivot.y,l.width,l.height)}});h.congratulations=new Animation.CanvasAnimationItem({width:d.width,height:d.height,top:a,left:0,depth:e.text,executeBefore:function(k){var l=this;k.drawImage(g.inMemCanvas,d.x,d.y,d.width,d.height,l.pivot.x,l.pivot.y,l.width,l.height)}});a+=d.height;h.coinsWonText=new Animation.CanvasAnimationItem({width:i.width,height:i.height,top:a,left:0,depth:e.text,executeBefore:function(k){var l=this;k.drawImage(g.inMemCanvas,i.x,i.y,i.width,i.height,l.pivot.x,l.pivot.y,l.width,l.height)}});a+=i.height;h.coinWin=new Animation.CanvasAnimationItem({width:d.width,height:d.height,top:a,left:b.width/2,depth:e.text,coinsWon:0,executeBefore:function(k){var l=this;k.fillStyle="#ffffff";k.textBaseline="middle";k.textAlign="center";k.font="32px Arial";k.fillText(l.coinsWon,l.pivot.x,l.pivot.y,b.width-200)}});h.button=new Animation.CanvasAnimationItem({width:j.width,height:j.height,top:f,left:(b.width-j.width)/2,depth:e.button,executeBefore:function(k){var l=this;k.drawImage(g.inMemCanvas,j.x,j.y,j.width,j.height,l.pivot.x,l.pivot.y,l.width,l.height)}});g.model.storeData("buttonLayoutProperties",[{x:h.button.prop.left,y:h.button.prop.top,width:h.button.prop.width,height:h.button.prop.height}]);g.animationList.add(h.background);g.animationList.add(h.congratulations);g.animationList.add(h.coinsWonText);g.animationList.add(h.coinWin);g.animationList.add(h.button);g.animationItems=h;g.animated=false},createTextImages:function(){var c=document.createElement("canvas"),i=c.getContext("2d"),a=Environment.getStageResolution(),e=Math.round(a.width/2),g=Services.languageManager.getText(Language.Keys.congratulations),d=Services.languageManager.getText(Language.Keys.coinsWonColon),b=Services.languageManager.getText(Language.Keys["continue"]),h,f;c.width=a.width;c.height=a.height;i.fillStyle="#ffffff";i.textBaseline="middle";i.textAlign="center";i.font="32px Arial";i.fillText(g,e,25,a.width-200);i.fillText(d,e,75,a.width-200);h=i.measureText(b).width;f=Math.round(h/2);i.fillRect(0,150,h+20,50);i.fillStyle="#000000";i.fillText(b,f+10,175);this.inMemCanvas=c;return{congratulation:{x:0,y:0,width:a.width,height:50},coinsWon:{x:0,y:50,width:a.width,height:75},button:{x:0,y:150,width:h+20,height:50}}},inputTargetsButton:function(c){var b=document.getElementById("canvasAnimationManager"),a=Sys.UserInputUtils.getCoordinatesRelativeToElement(c,b);return Sys.UserInputUtils.isUserInputInSegment(a,this.model.readData("buttonLayoutProperties"))}};Game.Slots.FreeSpinOutroView=Sys.extend(Core.View,Game.Slots.FreeSpinOutroView,"Game.Slots.FreeSpinOutroView");Sys.ns("Game.Slots");Game.Slots.FreeSpinOutroController={AUTO_CLOSE_TIME:6000,DEFAULT_AFTER_REELSET:"basic",LISTEN_TO_USER_INPUT_WHEN_START:true,UPDATE_COINS_FIELD_WHEN_START:true,constructor:function(){Game.Slots.FreeSpinOutroController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"view:closed":a.onClosed,"notify:stateHandler.enteringFreeSpinOutroState":a.show,"request:freeSpinOutro.close":a.close})},show:function(){var a=this;if(a.LISTEN_TO_USER_INPUT_WHEN_START){a.startListeningToUserInput()}a.view.show();a.fireEvent("request:ambienceManager.ambienceStopActive");a.playOutroSound();if(a.UPDATE_COINS_FIELD_WHEN_START){a.fireEvent("request:coinsField.showNormalWin")}a.fireEvent("request:playModeManager.removeMode","freespin");a.fireEvent("request:playModeManager.addMode","basic");a.fireEvent("request:closeOpenWindows");if(Services.settingsManager.getSetting("autoPlayNrSpins")>0){a.autoCloseTimeOut=setTimeout(function(){a.close()},a.AUTO_CLOSE_TIME)}},playOutroSound:function(){this.fireEvent("request:audioPlayer.play",{name:"outroFreeSpin"})},close:function(){var a=this;clearTimeout(a.autoCloseTimeOut);a.fireEvent("request:spin.activateReelset",a.DEFAULT_AFTER_REELSET,"base");a.view.close();a.stopListeningToUserInput();a.fireEvent("notify:gameModeChanged","BASIC");a.fireEvent("request:enableBasicGamePanel","freespinSplash")},onClosed:function(){var a=this;a.fireEvent("request:background.restoreImage");a.fireEvent("request:ambienceManager.ambienceChangeActive",{name:"ambienceGeneral",id:"ambienceGeneral",loop:true});a.fireEvent("notify:freeSpinOutro.closed")},onUserInputEnd:function(a){if(this.view.inputTargetsButton(a)){this.close()}}};Game.Slots.FreeSpinOutroController=Sys.extend(Core.Controller,Game.Slots.FreeSpinOutroController,"Game.Slots.FreeSpinOutroController");Sys.ns("Game.Slots");Game.Slots.CountDownFreespins={constructor:function(){Game.Slots.CountDownFreespins.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["userInput"]},getStateChanges:function(){var a=this.model,b={stopped:{queue:[function(c){if(a.isState("countDownAnimationRequested")){c.stateHandler.pushState(c.states.countDownFreespins)}}]},beforeLoaderClose:{queue:[function(c){if(a.isState("countDownAnimationRequested")){c.stateHandler.pushState(c.states.countDownFreespins)}else{if(a.isState("countDownLoopAnimationRequested")){c.stateHandler.pushState(c.states.countDownFreespinsRestore)}}}]},countDownFreespins:{state:{name:"CountDownFreespins",execute:function(){},waitEvents:{"notify:countDownFreespin:splashClosed":false}}},countDownFreespinsRestore:{state:{name:"CountDownFreespinsRestore",execute:function(){},waitEvents:{"notify:countDownFreespin:restoreSplashActive":false}}}};return b},getDefaultMVCClasses:function(){return{model:Game.Slots.CountDownFreespinsModel,view:Game.Slots.CountDownFreespinsView,controller:Game.Slots.CountDownFreespinsController}}};Game.Slots.CountDownFreespins=Sys.extend(Core.Module,Game.Slots.CountDownFreespins,"Game.Slots.CountDownFreespins");Sys.ns("Game.Slots");Game.Slots.CountDownFreespinsController={constructor:function(){Game.Slots.CountDownFreespinsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringCountDownFreespinsState":a.onEnteringCountDownFreespinsState,"notify:stateHandler.enteringCountDownFreespinsRestoreState":a.onEnteringCountDownFreespinsRestoreState,"notify:stateHandler.leavingCountDownFreespinsState":a.onLeavingCountDownFreespinsState,"notify:responseParser.responseParsed":a.checkIfCountDown,"view:splashClosed":a.fireEvent.bind(a,"notify:countDownFreespin:splashClosed"),"notify:stateHandler.leavingStoppedState":a.view.closeLoopSplash.bind(a.view),"notify:spinButton.clicked":a.handleUserInput,"notify:spinButton.clickedWhileHidden":a.handleUserInput,"request:abortPresentation":a.handleUserInput});a.splashClosedEvent="notify:countDownFreespin:splashClosed"},onEnteringCountDownFreespinsState:function(){var a=this;a.view.showSplash();a.fireEvent("request:coinsField.showFreeSpinsLeft");a.model.storeData("showing",true);a.startListeningToUserInput()},onEnteringCountDownFreespinsRestoreState:function(){this.view.showLoopSplash();this.fireEvent("request:coinsField.showFreeSpinsLeft");this.fireEvent("notify:countDownFreespin:restoreSplashActive")},onLeavingCountDownFreespinsState:function(){this.stopListeningToUserInput()},checkIfCountDown:function(b){var a=this;if(b.clientaction==="init"&&b.currentGameState==="freespin"&&b.nextaction==="freespin"){a.model.storeData("remainingFreeSpins",b.freespins.left);a.model.setState("countDownLoopAnimationRequested")}else{if(b.currentGameState==="freespin"&&b.nextaction==="freespin"){a.model.storeData("remainingFreeSpins",b.freespins.left);a.model.setState("countDownAnimationRequested")}else{a.model.setState("idle")}}},onUserInputStart:function(a){if(Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(),a)){this.handleUserInput()}},handleUserInput:function(){this.model.storeData("showing",false);this.stopListeningToUserInput();this.view.closeSplash()}};Game.Slots.CountDownFreespinsController=Sys.extend(Core.Controller,Game.Slots.CountDownFreespinsController,"Game.Slots.CountDownFreespinsController");Sys.ns("Game.Slots");Game.Slots.CountDownFreespinsModel={SHOW_DURATION:2000,constructor:function(){Game.Slots.CountDownFreespinsModel.superclass.constructor.apply(this,arguments)},setupData:function(){this.storeData("depth",Layering.Game.Slots.FreeSpinCountDown);this.storeData("duration",this.SHOW_DURATION)}};Game.Slots.CountDownFreespinsModel=Sys.extend(Core.Model,Game.Slots.CountDownFreespinsModel,"Game.Slots.CountDownFreespinsModel");Sys.ns("Game.Slots");Game.Slots.CountDownFreespinsView={constructor:function(){Game.Slots.CountDownFreespinsView.superclass.constructor.apply(this,arguments);this.setupSplash()},setupSplash:function(){var a=this,d=a.model.readData("duration"),e=a.model.readData("depth").text,f=Environment.getStageResolution(),c,b={width:400,height:400,top:f.height/2,left:f.width/2,depth:e,customProps:{message:"<freespins left value>"},executeBefore:function(g){var h=this,k=h.pivot.x,j=h.pivot.y,i=h.customProps.message;g.save();g.fillStyle="#fff4da";g.font="96px Arial";g.textBaseline="middle";g.textAlign="center";g.strokeStyle="#008c95";g.lineWidth=3;g.shadowColor="rgba( 0, 0, 0, 0.7 )";g.shadowOffsetY="5";g.fillText(i,k,j,h.width);g.shadowOffsetY="0";g.strokeText(i,k,j,h.width);g.restore()},operations:{fade:[]}};c=Sys.clone(b);b.operations.fade=[{time:0,value:1},{time:d,value:1}];a.item=new Animation.CanvasAnimationItem(b);c.operations.fade=[{time:0,value:1},{time:d,value:1,goTo:0}];a.loopItem=new Animation.CanvasAnimationItem(c);a.list=new Animation.CanvasAnimationList({endEvent:{event:"view:splashClosed",scope:a}});a.loopList=new Animation.CanvasAnimationList();a.list.add(a.item);a.loopList.add(a.loopItem)},showSplash:function(){var a=this;a.list.restore();a.item.prop.customProps.message=a.model.readData("remainingFreeSpins");Game.stage.view.addToRenderLoop(a.list)},showLoopSplash:function(){var a=this;a.loopList.restore();a.loopItem.prop.customProps.message=a.model.readData("remainingFreeSpins");Game.stage.view.addToRenderLoop(a.loopList)},closeSplash:function(){if(this.list.isRunning()){Game.stage.view.removeFromRenderLoop(this.list);this.fireEvent("view:splashClosed")}},closeLoopSplash:function(){if(this.loopList.isRunning()){Game.stage.view.removeFromRenderLoop(this.loopList)}}};Game.Slots.CountDownFreespinsView=Sys.extend(Core.View,Game.Slots.CountDownFreespinsView,"Game.Slots.CountDownFreespinsView");Sys.ns("Core");Core.Fullscreen={getDefaultMVCClasses:function(){var a;if(Platform.hasFullscreenAPI===true){a=Core.FullscreenView}else{if(Platform.isIOSDevice===true){a=Core.FullscreenViewIOS}}if(Environment.isIniFrame||!Sys.isDefined(a)){return{controller:Core.Controller}}return{controller:Core.FullscreenController,model:Core.FullscreenModel,view:a}}};Core.Fullscreen=Sys.extend(Core.Module,Core.Fullscreen,"Core.Fullscreen");Sys.ns("Core");Core.FullscreenController={setupEvents:function(){if(Platform.hasFullscreenAPI===true){this.setupFullscreenAPIEvents()}else{if(Platform.isIOSDevice&&Platform.isMobileDevice&&Sys.isSafari){this.setupIOSEvents()}}},handleInput:function(a){var b=this;if(!b.view.isFullscreen()&&!b.model.isInSafeArea(a)){b.view.request()}},setSafeArea:function(b,a){this.model.setSafeArea(b,a)},removeSafeArea:function(a){this.model.removeSafeArea(a)},setupFullscreenAPIEvents:function(){var a=this;a.on({"notify:userInputManager.userInputEnded":a.handleInput,"request:fullscreen.request":a.view.request.bind(a.view),"request:fullscreen.exit":a.view.exit.bind(a.view),"request:fullscreen.setSafeArea":a.setSafeArea,"request:fullscreen.removeSafeArea":a.removeSafeArea})},setupIOSEvents:function(){var a=this;a.on({"notify:viewport.scaled":a.view.handleFullscreen.bind(a.view),"notify:userInputManager.userInputEnded":a.view.handleFullscreen.bind(a.view),"notify:orientation.changed":a.view.handleFullscreen.bind(a.view),"view:allowPropagation":a.fireEvent.bind(a,"request:userInputManager.allowPropagation"),"view:disAllowPropagation":a.fireEvent.bind(a,"request:userInputManager.disAllowPropagation"),"notify:loader.closed":a.view.onLoaderClosed.bind(a.view)})}};Core.FullscreenController=Sys.extend(Core.Controller,Core.FullscreenController,"Core.FullscreenController");Sys.ns("Core");Core.FullscreenModel={constructor:function(){Core.FullscreenModel.superclass.constructor.apply(this,arguments)},setupData:function(){this.storeData("safeAreas",{})},setSafeArea:function(c,a){var b=this.readData("safeAreas");b=b||{};b[c]=a;this.storeData("safeAreas",b)},removeSafeArea:function(b){var a=this.readData("safeAreas");a=a||{};a[b]=undefined;this.storeData("safeAreas",a)},isInSafeArea:function(j){var e=this.readData("safeAreas");if(Sys.isDefined(j)&&Sys.isDefined(e)){var f=Object.keys(e),a=f.length,k=Sys.UserInputUtils.getCoordinatesRelativeToElement(j,Game.stage.getGameContainer()),c=Environment.getVirtualToWindowScale(3),h=k.x*c,g=k.y*c,b,d;for(d=-1;++d<a;){b=e[f[d]];if(Sys.isDefined(b.element)){if(Sys.UserInputUtils.isCoordinateTarget(b.element,j)){return true}}else{if(!Sys.isDefined(b.height)){if(Math.sqrt(Math.pow((h-b.x),2)+Math.pow((g-b.y),2))<b.width){return true}}else{if((h>=b.x&&h<=b.x+b.width&&g>=b.y&&g<=b.y+b.height)){return true}}}}}return false}};Core.FullscreenModel=Sys.extend(Core.Model,Core.FullscreenModel,"Core.FullscreenModel");Sys.ns("Core");Core.FullscreenView={init:function(){var k=this,a={},g=["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],f=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],c=f.length,b,h,e,d;for(e=0;e<c;e++){h=f[e];if(h[1] in document){for(d=0,b=h.length;d<b;d++){a[g[d]]=h[d]}break}}k.fullscreenAPI=a;Core.FullscreenView.superclass.init.apply(this,arguments)},setupEvents:function(){var a=this;document.addEventListener(a.fullscreenAPI.fullscreenchange,function(){clearTimeout(a._fullscreenTimeout);a._fullscreenTimeout=setTimeout(function(){a.fireEvent("request:viewport.resize")},250)},false)},request:function(){var a=false;if(!a){document.documentElement[this.fullscreenAPI.requestFullscreen]()}},exit:function(){document[this.fullscreenAPI.exitFullscreen]()},isFullscreen:function(){return !!document[this.fullscreenAPI.fullscreenElement]}};Core.FullscreenView=Sys.extend(Core.View,Core.FullscreenView,"Core.FullscreenView");Sys.ns("Core");Core.FullscreenViewIOS={init:function(){var b=this;b._device=Resources.readData("screenSpecification");b.isIphone6PlusStandardMode=b._device&&b._device[7]==="iPhone 6+";b.setupScrollOverlay();if(b.isIphone6PlusStandardMode){window.addEventListener("scroll",b.handleFullscreen.bind(b),false)}if(Sys.isGcmEnabled){var a=document.querySelector("iframe[name='commonUIIFrame']");if(a!==null){a.style.position="fixed"}}},handleFullscreen:function(){var a=this;if(a.isFullscreen()){a.removeOverlay()}else{a.showOverlay()}},onLoaderClosed:function(){var a=this;if(a.animationContainer.style.position!=="fixed"){a.animationContainer.style.position="fixed"}},showOverlay:function(){this.fireEvent("view:allowPropagation");this.scrollOverlay.style.visibility="visible";this.animationContainer.style.visibility="visible"},removeOverlay:function(){this.fireEvent("view:disAllowPropagation");this.scrollOverlay.style.visibility="hidden";this.animationContainer.style.visibility="hidden"},isFullscreen:function(){return window.innerHeight>=this._getMinimalViewHeight()},setupScrollOverlay:function(){var a=this;a.scrollOverlay=document.createElement("div");a.scrollOverlay.className="scrollup";a.scrollOverlay.style.visibility="hidden";a.animationContainer=document.createElement("div");if(a.isIphone6PlusStandardMode&&Services.orientation.isLandscape()){a.animationContainer.style.position="absolute"}a.animationContainer.className="scrollAnimationContainer iOS_scrollup_uri";a.animationContainer.style.visibility="hidden";document.body.appendChild(a.animationContainer);document.body.appendChild(a.scrollOverlay)},_getMinimalViewHeight:function(){var b=this._device,a=Environment.getResolution(),c=Environment.getScale();if(!b){return -1}if(Services.orientation.isPortrait()){return Math.floor(a.width*c*b[1]/b[0])}return Math.floor(a.width*c*b[3]/b[2])}};Core.FullscreenViewIOS=Sys.extend(Core.FullscreenView,Core.FullscreenViewIOS,"Core.FullscreenViewIOS");Sys.ns("Core");Core.BonusMessage={constructor:function(){Core.BonusMessage.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Core.Model,controller:Core.BonusMessageController}}};Core.BonusMessage=Sys.extend(Core.Module,Core.BonusMessage,"Core.BonusMessage");Sys.ns("Core");Core.BonusMessageController={constructor:function(){Core.BonusMessageController.superclass.constructor.apply(this,arguments)},setupEvents:function(){this.on({"notify:responseParser.responseParsed":this.onServerResponse,"notify:stateHandler.enteringIdleState":this.showBonusMessageDialog})},onServerResponse:function(a){var b;if(Sys.isDefined(a.bonusAwarded)){b=a.bonusAwarded.toFixed(2)}this.model.storeData("bonusAwarded",b)},showBonusMessageDialog:function(){var a=this.model.readData("bonusAwarded");if(Sys.isDefined(a)){this.requestDialog(a);this.model.setState("dialogOpen")}},requestDialog:function(a){this.fireEvent("request:dialogWindow.showDialog",this.getDialog(a))},getDialog:function(a){return{title:Services.languageManager.getText(Language.Keys.bonusAwardedTitle),text:Services.languageManager.getText(Language.Keys.bonusAwardedCongrats,[a]),buttons:[{scope:this,text:Services.languageManager.getText(Language.Keys.btn_continue),action:function(){}}]}}};Core.BonusMessageController=Sys.extend(Core.Controller,Core.BonusMessageController,"Core.BonusMessageController");Sys.ns("Animation");Animation.BufferedReelModel=function(a){var c=this,d=0;Sys.applyProperties(c,a);c.slotLength=c.symbolLength+c.symbolSpacing;for(var b=0;b<c.endBounceSupportPointOffsets.length;b++){d=Math.max(d,Math.abs(c.endBounceSupportPointOffsets[b]))}c.visibleSymbolsCount=Math.ceil(c.visibleWindowLength/c.slotLength)+1+Math.ceil(d/c.slotLength);if(c.symbolSpacing<0){c.leadingSymbolsCount=Math.ceil(c.symbolLength/c.slotLength);c.visibleSymbolsCount+=c.leadingSymbolsCount}else{c.leadingSymbolsCount=0}c.symbolBufferMaxLength=c.calculateSymbolBufferSize();c.recalculateStartDuration();c.reset()};Animation.BufferedReelModel.prototype={calculateSymbolBufferSize:function(){var b=this,c=0,a;for(a=0;a<b.endBounceSupportPointOffsets.length;a++){c=Math.max(c,Math.abs(b.endBounceSupportPointOffsets[a]))}if(b.startBounceSupportPointOffset<0){c=Math.max(c,Math.abs(b.startBounceSupportPointOffset))}else{if(b.startBounceSupportPointOffset>b.visibleWindowLength){c=Math.max(c,b.startBounceSupportPointOffset-b.visibleWindowLength)}}return b.visibleSymbolsCount+Math.ceil(c/b.slotLength)},reset:function(){var a=this;a.symbolBuffer=[];a.targetOffset=0;a.usedDuration=0;a.stopDuration=0;a.currentBounce=a.endBounceSupportPointOffsets.length;a.hasCompletedSpin=true;a.hasCompletedBounce=true;a.outcomeVisibleOnReel=true;a.state="stopping";a.moveToInitialPosition()},moveToInitialPosition:function(){var a=this;a.windowToBufferOffset=0;a.moveDistance(a.symbolBufferMaxLength*a.slotLength+a.outcomeOffset)},setInitialOutcome:function(a){var b=this;b.moveDistance(b.symbolBufferMaxLength*b.slotLength);b.nextOutcomeSymbols=a;b.outcomeSymbolsInserted=0;b.moveDistance(b.numberOfOutcomeSymbols*b.slotLength);b.moveDistance(b.getDistanceToStopPosition())},replaceAllSymbolsWith:function(b){for(var a=0;a<this.symbolBuffer.length;a++){var c=this.symbolBuffer[a];c.symbol=b}},updateOutcome:function(b,c){var a=this.getFirstOutcomeSymbolIndex()+b;if(b>=0&&b<this.numberOfOutcomeSymbols&&!isNaN(a)&&a>=0){this.symbolBuffer[a].symbol=c}},setBufferOffset:function(c){var a=this,b=Math.round((c-a.windowToBufferOffset)/a.slotLength);if(b>0){a.addSymbolsToBuffer(b,true)}a.windowToBufferOffset=c},getFirstOutcomeSymbolIndex:function(){var c=this,b,a=false;for(b=-1;++b<c.symbolBuffer.length;){if(c.symbolBuffer[b].isOutcomeSymbol){a=true}else{if(a){return b-c.numberOfOutcomeSymbols}}}return NaN},storeSpinOutcome:function(a){this.nextOutcomeSymbols=a},start:function(){var a=this;a.usedDuration=0;a.targetOffset=a.visibleWindowLength+a.slotLength*a.leadingSymbolsCount;a.state="starting";a.hasCompletedSpin=false;a.hasCompletedBounce=false;a.hasBeenToldToStop=false},stop:function(){this.hasBeenToldToStop=true},getDistanceToStopPosition:function(){var a=this,c=a.getFirstOutcomeSymbolIndex()*a.slotLength,b=Sys.Math.absoluteDifference(c,a.windowToBufferOffset);if(c>a.windowToBufferOffset){b*=-1}return b+a.outcomeOffset},move:function(a){this.moveDistance(this.getDistance(a))},moveDistance:function(d){var c=this,b,a;c.windowToBufferOffset-=d;if(c.windowToBufferOffset<c.slotLength*c.leadingSymbolsCount){b=Math.ceil(Math.abs(c.windowToBufferOffset)/c.slotLength);a=c.addSymbolsToBuffer(b,c.state==="stopping");c.windowToBufferOffset+=b*c.slotLength;if(c.containsOutcome(a)&&c.state==="spinning"){c.handleOutcomeEnteredReelEvent()}}},presentOutcome:function(){var a=this,b;a.hasCompletedSpin=true;a.state="presenting";b=a.getDistanceToStopPosition();while(isNaN(b)){a.moveDistance(a.slotLength);b=a.getDistanceToStopPosition()}a.moveDistance(b);a.state="stopping"},addSymbolsToBuffer:function(d,c){var b=this,a=b.symbolRetrievalFunction(d,c);b.symbolBuffer=a.concat(b.symbolBuffer.splice(0,b.symbolBufferMaxLength-d));return a},containsOutcome:function(b){for(var a=-1;++a<b.length;){if(b[a].isOutcomeSymbol){return true}}return false},handleOutcomeEnteredReelEvent:function(){var a=this;a.usedDuration=0;a.currentBounce=0;a.state="stopping";a.targetOffset=a.getDistanceToStopPosition();a.stopDuration=Math.round(a.timeToMoveOneSlot*(a.targetOffset/a.slotLength));a.outcomeVisibleOnReel=false},getDistance:function(b){var a=this;if(a.state==="starting"){return a.getStartingDistance(b)}else{if(a.state==="stopping"){return a.getStoppingDistance(b)}else{return a.getSpinningDistance(b)}}},getStartingDistance:function(b){var a=this,c=a.getInterpolatedDistance(a.targetOffset,a.startBounceSupportPointOffset,a.usedDuration,b,a.startDuration);a.usedDuration+=b;if(c.progressAfterTime===1){a.state="spinning";a.reelStartCompleteCallback()}return c.distance},getStoppingDistance:function(b){var a=this,d,c=0;if(!a.hasCompletedSpin){d=a.getInterpolatedDistance(a.targetOffset,a.targetOffset/2,a.usedDuration,b,a.stopDuration);c=d.distance;a.usedDuration+=b;if(d.progressAfterTime===1){a.hasCompletedSpin=true;a.usedDuration=0;a.reelBounceStartCallback()}}else{if(a.currentBounce<a.endBounceSupportPointOffsets.length){d=a.getInterpolatedDistance(0,a.endBounceSupportPointOffsets[a.currentBounce],a.usedDuration,b,a.endBounceDurations[a.currentBounce]);c=d.distance;a.usedDuration+=b;if(d.progressAfterTime===1){a.currentBounce++;a.usedDuration=0}}else{if(!a.hasCompletedBounce){a.hasCompletedBounce=true;a.reelStoppedCallback()}return 0}}return c},getInterpolatedDistance:function(i,f,c,d,h){var a=Math.min(1,c/h),b=Animation.utils.getInterpolationValue(0,i,a,{type:"bezier",support:f}),e=Math.min(1,(c+d)/h),g=Animation.utils.getInterpolationValue(0,i,e,{type:"bezier",support:f});return{distance:g-b,progressAfterTime:e}},getSpinningDistance:function(b){var a=b/this.timeToMoveOneSlot;return Math.round(a*this.slotLength)},getSymbolsToRender:function(){var e=this,c=[],g=Math.floor(e.windowToBufferOffset/e.slotLength)-e.leadingSymbolsCount,a,d,b,f;g=Math.max(0,g);a=Math.min(e.visibleSymbolsCount,e.symbolBuffer.length-g);for(d=-1;++d<a;){b=g+d;f=e.symbolBuffer[b];f.position=b*e.slotLength-Math.round(e.windowToBufferOffset);c.push(f);if(!e.outcomeVisibleOnReel){e.reelStartedStoppingCallback();e.outcomeVisibleOnReel=true}}return c},isStopping:function(){return this.hasBeenToldToStop},isSpinning:function(){return this.state==="spinning"},setTimeToMoveOneSlot:function(a){this.timeToMoveOneSlot=a;this.recalculateStartDuration()},recalculateStartDuration:function(){var a=this;a.startDuration=a.timeToMoveOneSlot*((a.visibleWindowLength+Math.abs(a.startBounceSupportPointOffset)*2)/a.slotLength)}};Sys.ns("Core.Slots");Core.Slots.SymbolBuffer={SYMBOL_CONSTANTS:{any:-1,fakeReel:-2,lowWin:-3},EMPTY_SYMBOL:"SYM16",constructor:function(a,d,c){var b=this;Core.Slots.SymbolBuffer.superclass.constructor.apply(b,arguments);b.pipeCount=a;b.clearBuffer();b.currentReelSet=undefined;b.setUpWorkspace(c);b.createFillers(d);b.setupEvents();b.showOutcomeSymbols()},setupEvents:function(){var a=this;a.on({"request:symbolBuffer.hideOutcomeSymbols":a.hideOutcomeSymbols,"request:symbolBuffer.showOutcomeSymbols":a.showOutcomeSymbols})},showOutcomeSymbols:function(){},hideOutcomeSymbols:function(){},clearBuffer:function(){this.buffer=Sys.utils.init2dMatrix(this.pipeCount,0)},setUpWorkspace:function(c){var b=this,a=b.pipeCount;b.workspace={pipeCount:a,currentReelSet:b.currentReelSet,currentOutcome:undefined,outcomeInsertedOnReel:Sys.utils.initArray(a,false),heldReels:[],linkedReels:Sys.utils.initArray(a,false),symbolsBeforeOutcome:Sys.utils.initArray(a,Infinity),symbolConstants:b.SYMBOL_CONSTANTS,announce:c.fillerEventCallback}},createFillers:function(b){var c=this,a;c.fillers=[];Sys.each(b,function(d){a=Sys.utils.getClassFromString(d);c.fillers.push(new a(c.workspace))})},getSymbols:function(b,a,d){var c=this;if(c.buffer[b].length<a){c.fill(a-c.buffer[b].length,b,d)}return c.buffer[b].splice(-a,a)},fill:function(a,d,f){var e=this,b=[],c;for(c=-1;++c<e.pipeCount;){if(c<d||e.workspace.heldReels.contains(c)||(c!==d&&f)){b.push([])}else{b.push(Sys.utils.initArray(a,e.SYMBOL_CONSTANTS.any))}}e.fillBuffer(b,f===true)},fillBuffer:function(g,c){var m=this,b=m.fillers,d=b.length,l=m.pipeCount,k=m.workspace.symbolsBeforeOutcome,f,h,e,a;for(h=-1;++h<d;){a=b[h].fill(g,c);if(!a){break}}for(h=-1;++h<l;){f=g[h].length;if(k[h]>=f){k[h]-=f}else{for(e=h;++e<l;){k[e]+=f-k[h]}k[h]=0}m.buffer[h]=g[h].reverse().concat(m.buffer[h])}},cleanUp:function(){var c=this,d=c.fillers,a=d.length,b;for(b=-1;++b<a;){d[b].cleanUp()}c.cleanUpWorkspace()},cleanUpWorkspace:function(){var a=this.workspace,b=a.pipeCount;a.currentOutcome=undefined;a.outcomeInsertedOnReel=Sys.utils.initArray(b,false);a.heldReels.length=0;a.linkedReels=Sys.utils.initArray(b,false);a.symbolsBeforeOutcome=Sys.utils.initArray(b,Infinity)},activateReelSet:function(b){var a=this;if(b!==a.currentReelSet){a.currentReelSet=b;a.workspace.currentReelSet=b;Sys.each(a.fillers,function(c){c.setReelSet(b)})}},removeScattersWhereScatterOverlayExists:function(e){for(var d=0;d<e.length;d++){var h=e[d];var c=h.symbols;var f=h.overlaySymbols;for(var b=0;b<c.length;b++){var g=c[b];var a=f[b];if(a===g){c[b]=this.EMPTY_SYMBOL}}}return e},setOutcome:function(a,b){if(Sys.isDefined(b)&&b.currentGameState==="respin"){a=this.removeScattersWhereScatterOverlayExists(Sys.clone(a))}this.workspace.currentOutcome=a;Sys.each(this.fillers,function(c){c.processOutcome(a,b)})},setStopDistance:function(a){this.fillers.forEach(function(b){b.updateStoppingDistances(a)});this.workspace.symbolsBeforeOutcome=a},getStopDistance:function(){return this.workspace.symbolsBeforeOutcome},setVisibleSymbolsCounts:function(a){this.workspace.visibleSymbolsCounts=a},getIndexOfLastStoppingReel:function(){return Math.max(this.workspace.outcomeInsertedOnReel.indexOf(false)-1,-1)},setHeldReels:function(b){var a=this.workspace;a.heldReels=b;a.heldReels.forEach(function(c){a.outcomeInsertedOnReel[c]=true})}};Core.Slots.SymbolBuffer=Sys.extend(Sys.Observable,Core.Slots.SymbolBuffer,"Core.Slots.SymbolBuffer");Sys.ns("Game");Game.PIXIFactory={createTextureFromSpineAtlas:function(a){return PIXI.Texture.fromFrame(a)},createSprite:function(d,a,b){var c=new PIXI.Sprite(d);c.position=Sys.isDefined(a)?new PIXI.Point(a.x,a.y):new PIXI.Point(0,0);c.anchor=Sys.isDefined(b)?new PIXI.Point(b.x,b.y):new PIXI.Point(0,0);return c},createContainer:function(a,c){var b=new PIXI.Container();b.position=Sys.isDefined(a)?new PIXI.Point(a.x,a.y):new PIXI.Point(0,0);b.pivot=Sys.isDefined(c)?new PIXI.Point(c.x,c.y):new PIXI.Point(0,0);return b},createTexture:function(a){var b;b=Sys.isDefined(Resources.readData("animationImages")[a])?Resources.readData("animationImages")[a]:PIXI.Texture.EMPTY;return b},createSpriteWithTexture:function(b,a,c){var e,d;e=this.createTexture(b);d=this.createSprite(e,a,c);return d},createAndAddSprite:function(c,b,a,d){var e=this.createSpriteWithTexture(c,a,d);b.addChild(e);return e},createAndAddContainer:function(d,a,c){var b=this.createContainer(a,c);d.addChild(b);return b},createAndAddText:function(f,e,c,b,d){var a=new PIXI.Text(f,e);a.resolution=2;a.position=Sys.isDefined(b)?new PIXI.Point(b.x,b.y):new PIXI.Point(0,0);a.anchor=Sys.isDefined(d)?new PIXI.Point(d.x,d.y):new PIXI.Point(0,0);c.addChild(a);return a},createAndAddBitmapText:function(f,e,c,b,d){var a=new PIXI.extras.BitmapText(f,e);a.position=Sys.isDefined(b)?new PIXI.Point(b.x,b.y):new PIXI.Point(0,0);a.anchor=Sys.isDefined(d)?new PIXI.Point(d.x,d.y):new PIXI.Point(0,0);c.addChild(a);return a},createVideoElement:function(d,b,g,f){var c=document.createElement("video"),e=Resources.readData("videos");c.src=e[d];c.preload="auto";c.loop=Sys.isDefined(b)?b:true;c.autoplay=Sys.isDefined(g)?g:false;c.type=Sys.isDefined(f)?f:undefined;c.hidden=true;if(Platform.isEdgeBrowser){c.id=d;c.style.display="none";var a=(document.getElementById("videosHolder"))?document.getElementById("videosHolder"):document.createElement("div");a.id="videosHolder";a.style.position="absolute";a.style.top="5000px";a.style.left="5000px";a.style.display="none";document.body.appendChild(a);a.appendChild(c)}return c},createAndAddVideo:function(e,b,a,c){var f=PIXI.Texture.fromVideo(e,PIXI.SCALE_MODES.DEFAULT),d=this.createSprite(f,a,c);b.addChild(d);var g=f.baseTexture.source;g.pause();return d},playMSEdgeVideo:function(a){var c="50px",b="0px";if(document.getElementById("viewport")){c=document.getElementById("viewport").style.left;b=document.getElementById("viewport").style.top}document.getElementById("videosHolder").style.left=c;document.getElementById("videosHolder").style.top=b;document.getElementById(a).style.display="block";document.getElementById(a).currentTime=0;document.getElementById(a).play()},pauseMSEdgeVideo:function(a){document.getElementById("videosHolder").style.left="5000px";document.getElementById("videosHolder").style.top="5000px";document.getElementById(a).style.display="none";document.getElementById(a).pause()},resetMSEdgeVideo:function(a){document.getElementById("videosHolder").style.left="5000px";document.getElementById("videosHolder").style.top="5000px";document.getElementById(a).style.display="none"},createSpineAnimation:function(b,a){var d=Resources.readData("spines")[b],c=new PIXI.spine.Spine(d);c.position=Sys.isDefined(a)?new PIXI.Point(a.x,a.y):new PIXI.Point(0,0);return c},createAndAddSpineAnimation:function(c,b,a){var d=this.createSpineAnimation(c,a);b.addChild(d);return d},createReelAreaGraphic:function(e,h,f,d){var c=Game.stage.model.getCurrentReelGroupConfiguration().reelFrame,b=new PIXI.Graphics(),g=e?e:16711680,a=h?h:0.3;b.beginFill(g,a);b.drawRect(c.left,c.top,c.width+(f||0),c.height+(d||0));b.endFill();return b}};Sys.ns("Game");Game.PIXIParticleFactory={createAndAddParticleEmitter:function(l,k,g,h,e){var o=Resources.readData("emitters");var j=o[l];if(Sys.isDefined(e)){var m=Sys.isArray(e)?e.length:e,n=[],d,b=m.toString().length,f;for(f=0;f<m;f++){d=Sys.utils.repeatString("0",(b-f.toString().length))+f;n.push(PIXI.Texture.fromFrame(g+d+".png"))}g=n;if(!Sys.isArray(e)){e=Sys.utils.initArray(m,33.333)}}var a=new cloudkid.Emitter(k,g,j);if(Sys.isDefined(e)){a.particleConstructor=cloudkid.ParticleMovie;a.frameTimes=e}var c=new Animation.Holder({id:"emitterHolder"+l,target:a,loop:true,addToAnimationLoop:h,onUpdate:function(i){a.update(i*0.001)}});return c}};Sys.ns("Game");Game.PIXIUtils={_tempPoint:new PIXI.Point(),hitTestDisplayObject:function(a,c){var b=false;if(c.hitArea){c.worldTransform.applyInverse(a,this._tempPoint);b=c.hitArea.contains(this._tempPoint.x,this._tempPoint.y)}else{if(c.containsPoint){b=c.containsPoint(a)}}return b},resetSpineAnimation:function(a){a.lastTime=null;a.skeleton.setToSetupPose();a.state.clearTracks()},mapValue:function(a,b,d,e,c){return(a-b)*(c-e)/(d-b)+e}};Sys.ns("Animation");Animation.Holder={constructor:function(a){var c=this,b={id:undefined,target:undefined,prop:undefined,animation:{keyFrames:[],step:0,complete:false},running:false,playbackSpeed:undefined,loop:false,readyToLoop:false,onStart:undefined,onEnd:undefined,onUpdate:undefined,children:[],parent:undefined,localTime:0,delay:0,startTimeOffset:undefined,addToAnimationLoop:false};a=Sys.applyProperties(b,a);a=c.parseConfig(a);c=Sys.applyProperties(c,a);if(a.addToAnimationLoop){Game.stage.view.animationManager.addToAnimationLoop(c)}},parseConfig:function(a){var b={animation:{keyFrames:[],step:0,complete:false}},d=function(i,h){return(i.time-h.time)},e;Sys.iterate(a,function(h,i){if(h==="animate"){if(Sys.isObj(i)){Sys.iterate(i,function(k,j){e={time:Sys.utils.toInt(k)};if(Sys.isObj(j)){if(Sys.isDefined(j.value)){e=Sys.applyProperties(e,j)}else{e.value=j}}else{e.value=j}b.animation.keyFrames.push(e)});b.animation.keyFrames.sort(d)}else{if(Sys.isArray(i)){b.animation.keyFrames=i}else{}}}else{b[h]=i}});if(!Sys.isDefined(b.target)&&Sys.isDefined(b.parent)&&Sys.isDefined(b.parent.target)){b.target=b.parent.target}if(!Sys.isDefined(b.id)&&Sys.isDefined(b.target)&&Sys.isDefined(b.target.id)){var g=Sys.isDefined(b.prop)?b.prop:"";b.id=b.target.id+":"+g+"Animation"}if(Sys.isDefined(b.children)&&b.children.length>0){var f=[],c=this;b.children.forEach(function(i){var h;if(Sys.isDefined(i.localTime)){h=i}else{i.parent={target:a.target};h=new Animation.Holder(i)}h.parent=c;f.push(h)});b.children=f}return b},run:function(c){var a=this,b=c.timeStep;if(a.localTime===0&&Sys.isDefined(a.startTimeOffset)){b+=a.startTimeOffset}if(Sys.isDefined(a.playbackSpeed)){b*=a.playbackSpeed}a.localTime+=b;if(a.localTime>=a.delay){a.doAnimation(b);a.children.forEach(function(d){if(d.running){d.run({timeStep:b,time:c.time});if(d.running){a.running=true;if(!d.loop&&!d.readyToLoop){a.readyToLoop=false}}}});if(Sys.isDefined(a.onUpdate)){a.onUpdate(b)}}if(a.loop&&a.readyToLoop){a.restoreOnLoop()}else{if(!a.running){if(Sys.isDefined(a.onEnd)){a.onEnd()}a.restore()}}},doAnimation:function(a){var d=this,c=d.animation.keyFrames.length;if(c<2||!Sys.isDefined(d.target)){d.readyToLoop=true;d.running=false;return}var b=d.performAction(a);if(!b){d.running=false;d.readyToLoop=true}},play:function(c,a){var d=this,b=Sys.isDefined(a)?a:true;d.running=true;d.handleItems("play",c);if(d.localTime===0&&Sys.isDefined(d.onStart)){d.onStart()}if(b){d.runParent()}},runParent:function(){var a=this;if(Sys.isDefined(a.parent)){a.parent.running=true;a.parent.runParent()}},pause:function(a){this.running=false;this.handleItems("pause",a)},stop:function(c,a){var d=this,b=Sys.isDefined(a)?a:true;d.running=false;d.handleItems("stop",c);if(b){d.restore(c,true)}},restore:function(c,a){var d=this,b=Sys.isDefined(a)?a:true;d.localTime=0;d.readyToLoop=false;d.restoreAnimation();d.handleItems("restore",c);if(d.running&&b){d.play(c,true)}},restoreOnLoop:function(c,a){var d=this,b=Sys.isDefined(a)?a:true;if(b||!d.loop){d.running=true;d.readyToLoop=false;d.restoreAnimation();d.handleItems("restoreOnLoop")}},restoreAnimation:function(){this.animation.time=0;this.animation.step=0;this.animation.keyFrames.forEach(function(a){if(Sys.isDefined(a.callback)){a.callbackCompleted=false}})},updateOperation:function(a){var b=this,c={};c.animate=a;c=b.parseConfig(c);b.animation=c.animation;b.restore()},handleItems:function(c,b){var a=(Sys.isDefined(b)&&Sys.isArray(b))?b:this.children;a.forEach(function(d){d[c](true,false)})},setParent:function(a){this.parent=a;a.children.push(this);if(!Sys.isDefined(this.target)){this.target=a.target}},addChild:function(a){var b=this;if(Sys.isArray(a)){a.forEach(function(c){c.setParent(b)})}else{if(Sys.isObj(a)){a.setParent(b)}}},findChild:function(e,c){var b=Sys.isDefined(c)?c:"id",d=false,a=function(g){var f=false,h=false;g.forEach(function(i){if(Sys.isDefined(i[b])&&i[b]===e){f=i}if(Sys.isDefined(i.children)){h=a(i.children);if(Sys.isObj(h)){f=h}}});return f};if(this[b]===e){return this}if(Sys.isDefined(this.children)){d=a(this.children)}return d},performAction:function(i){var g=this,c=g.animation,d=c.keyFrames,b=d.length,a=g.increaseAnimationTime(i),f=d[c.step],h=d[c.step+1],e=true;g.handleCallback(f);if(h.time<=a){g.progressKeyFrame();f=d[c.step];if(c.step===b-1){h=f;e=false}else{h=d[c.step+1]}}g.calculate(c.time,f,h);return e},progressKeyFrame:function(e){var c=this,d=c.animation,b=d.keyFrames,a;d.step=Sys.isDefined(e)?e:d.step+1;a=b[d.step];c.handleCallback(a);if(Sys.isDefined(a.goTo)){c.doGoTo(a)}if(d.step!==b.length-1){if(d.time>=b[d.step+1].time){c.progressKeyFrame()}}else{if(c.loop){d.time-=b[d.step].time;c.progressKeyFrame(0)}}},doGoTo:function(b){var a=this;a.animation.time=a.animation.keyFrames[b.goTo].time;a.animation.step=b.goTo},calculate:function(d,b,a){var c=this,f=c.calculateTime(d,b,a),h=b.value,g=a.value,e;if(Sys.isObj(h)){Sys.iterate(h,function(i,j){e=Sys.isDefined(c.prop)?c.target[c.prop]:c.target;e[i]=Animation.utils.getInterpolationValue(j,g[i],f,b.ease)})}else{c.target[c.prop]=Animation.utils.getInterpolationValue(h,g,f,b.ease)}},handleCallback:function(b){var c=b.callback,a;if(Sys.isDefined(c)&&!b.callbackCompleted){if(c.fireImmediately){if(Sys.isString(c.func)){c.scope.fireEvent(c.func,c.args)}else{if(Sys.isFunc(c.func)){c.func.apply(c.scope,c.args)}}}else{a=Game.stage.view.animationManager.callbackContainer;a.push(c)}b.callbackCompleted=true}},calculateTime:function(d,b,a){var e=d-b.time,c=a.time-b.time;return c!==0?e/c:1},increaseAnimationTime:function(a){if(!Sys.isDefined(this.animation.time)){this.animation.time=a}else{this.animation.time+=a}return this.animation.time},animate:function(a,b){this.updateOperation(a);if(b){this.play()}}};Animation.Holder=Sys.extend(Sys.Observable,Animation.Holder,"Animation.Holder");Sys.ns("Animation");Animation.PixiAnimationManager={PIXI_RENDERER_OPTIONS:{antialias:false,resolution:1,transparent:false},constructor:function(a){var b=this;Animation.PixiAnimationManager.superclass.constructor.call(b);b.canvasList={};b.initRenderer(a);b.currentTime=0;b.timeFromStart=0;b.paused=false;b.currentStepTime=0;b.setupImages(a.images,"notify:animationManager.allImagesLoaded");b.callbackContainer=[];b.isRunning=false;b.selectRenderFunction()},start:function(b){var a=this;a.isRunning=true;a.currentTime=0;a.lastTimeStepOccured=Date.now();a.paused=false;a.requestNextAnimationStep()},switchScenes:function(a){this.currentScene=a},clearScene:function(a){if(Sys.isDefined(a)){this.scenes[a].lists=[]}},addToRenderLoop:function(c,b){var a=Sys.isDefined(b)?b:this.currentScene;if(!this.isInScene(c,a)){this.scenes[a].lists.push(c);if(c.id==="reelsMainList"){this.getLayer("reel").addChild(c.pixiItem)}else{}}else{c.prop.running=true}},isInScene:function(c,d){var b=Sys.isDefined(d)?d:this.currentScene,a=this.scenes[b];return(a.lists.contains(c)||a.listsToAdd.contains(c)||a.nonActiveLists.contains(c))},removeList:function(g,h){var e=this,c=Sys.isDefined(h)?h:e.currentScene,d=e.scenes[c],a=d.lists.indexOf(g),b=d.listsToAdd.indexOf(g),f=d.nonActiveLists.indexOf(g);if(a>-1){d.lists[a].prop.running=false}else{if(f>-1){d.nonActiveLists[f].prop.running=false}else{if(b>-1){d.listsToAdd.splice(b,1)}}}},restore:function(c){var a,b=this;if(Sys.isDefined(c.canvas)){a=b.canvasList[c.canvas]}else{a=b.canvasList[b.defaultCanvas]}if(c.prop.reset){a.restore();a.globalAlpha=1}if(Sys.isDefined(c.prop.globalCompositeOperation)){a.globalCompositeOperation="source-over"}a.fillStyle="";a.strokeStyle="";a.shadowColor="";a.strokeStyle="";a.shadowBlur=""},pauseAnimation:function(){this.paused=true;clearTimeout(this.renderTimeout)},continueAnimation:function(){this.paused=false;this.run()},shouldRenderNextFrame:function(){return(!this.paused)},run:function(){var a=this;a.animate();a.renderer.render(a.stage);if(a.callbackContainer.length>0){a.fireCallbacks();a.callbackContainer.length=0}if(a.shouldRenderNextFrame()){a.lastTimeStepOccured=a.updateTime();a.requestNextAnimationStep()}else{a.isRunning=false}},fireCallbacks:function(){var d=this,c=d.callbackContainer.length,b,a;for(b=-1;++b<c;){a=d.callbackContainer[b];if(Sys.isString(a.func)){a.scope.fireEvent(a.func,a.args)}else{if(Sys.isFunc(a.func)){a.func.apply(a.scope,a.args)}}}},calculate:function(){var b=this,a=this.scenes[this.currentScene];if(Sys.isDefined(a)){a.run({timeStep:b.currentStepTime,time:b.currentTime})}else{}},requestNextAnimationStep:function(){var a=this;a.animationFunction.call(window,function(){a.run()})},updateTime:function(){var b=this,a=Date.now(),c=a-b.lastTimeStepOccured;if(c>250){c=1000/60}b.currentStepTime=c|0;b.currentTime+=b.currentStepTime;return a},selectRenderFunction:function(){var a=this;this.animationFunction=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){clearTimeout(a.renderTimeout);a.renderTimeout=setTimeout(b,Math.round(1000/60))}},setupScenes:function(b){var c=Sys.isDefined(b)?b:[],a={};c.push("base");Sys.each(c,function(d){a[d]=new Animation.CanvasAnimationScene({})});this.scenes=a;this.scenes.base.play();this.currentScene="base"},setupImages:function(d,h){var e=this,g=Sys.isDefined(d.files)?d.files:d,b=Resources.readData("animationImages")||{},a=Resources.readData("spines")||{},f=Resources.readData("bitmapFonts")||{},c=Resources.readData("spriteConfigurations")||{};e.imageReadyEvent=h;e.imagesRemaining=[];e.remainingImages=0;e.imageConfig=d;Sys.iterate(g,function(i,k){var j=new Image();j.onload=function(){e.remainingImages--;e.imagesLoaded()};j.src=k;b[i]=j;e.imagesRemaining.push(j);e.remainingImages++});Resources.storeData("animationImages",b)},assetsLoadedCompleteHandler:function(b,e){var f=this,a=Resources.readData("spines")||{},d=Resources.readData("emitters")||{},c=f.imageConfig;if(e){Sys.iterate(c.spineConfigurations,function(g,h){a[g]=e[g].spineData});Sys.iterate(c.emitterConfigurations,function(h,g){d[h]=e[h].data})}Resources.storeData("spines",a);Resources.storeData("images",undefined);Game.stage.model.storeData("images",undefined);f.imageConfig=undefined;f.fireEvent(f.imageReadyEvent)},setupPixiAssets:function(){var g=this,h=Resources.readData("animationImages"),n=Resources.readData("spines")||{},a=Resources.readData("emitters")||{},c=Resources.readData("spriteSheets")||{},f=Resources.readData("bitmapFonts")||{},m=Resources.readData("spriteConfigurations")||{},k=[],b=g.imageConfig,e=!Platform.isDesktopDevice?0.75:1,l={};Sys.iterate(h,function(q,r){var i=g.getCustomResolution(q,e),p=new PIXI.BaseTexture(r,0,i.scale);q=i.name;p.imageUrl=q;PIXI.utils.BaseTextureCache[p.imageUrl]=p;var o=new PIXI.Texture(p);PIXI.utils.TextureCache[q]=o;l[q]=o});Resources.storeData("animationImages",l);if(Sys.isDefined(b.spineConfigurations)){Sys.iterate(b.spineConfigurations,function(i,o){k.push({name:i,src:o});n[i]=o});Resources.storeData("spines",n)}if(Sys.isDefined(b.emitterConfigurations)){Sys.iterate(b.emitterConfigurations,function(i,o){k.push({name:i,src:o});a[i]=o});Resources.storeData("emitters",a)}if(Sys.isDefined(b.spriteSheetConfigurations)){Sys.iterate(b.spriteSheetConfigurations,function(o,i){k.push({name:o,src:i});c[o]=i});Resources.storeData("spriteSheets",c)}if(Sys.isDefined(b.bitmapFontConfigurations)){Sys.iterate(b.bitmapFontConfigurations,function(i,o){k.push({name:i,src:o});f[i]=o});Resources.storeData("bitmapFonts",f)}if(k.length>0){g.loader=new PIXI.loaders.Loader();var j=g.assetsLoadedCompleteHandler.bind(g);g.loader.once("complete",j);for(var d=0;d<k.length;d++){g.loader.add(k[d].name,k[d].src)}g.loader.once("error",function(p,o,i){g.loader.removeListener("complete",j);g.fireEvent("request:loaderErrorHandler.handleRequestError",i.xhr)});g.loader.load()}else{g.assetsLoadedCompleteHandler()}if(Sys.isDefined(b.spriteConfigurations)){Sys.iterate(b.spriteConfigurations,function(i,o){m[i]=o})}g.spriteConfigurations=m;Resources.storeData("spriteConfigurations",m)},getCustomResolution:function(b,c){var a=/@(.+)x/.exec(b);if(a){return{scale:parseFloat(a[1]),name:b.slice(0,a.index)}}return{scale:c,name:b}},imagesLoaded:function(){if(this.remainingImages<1){this.canImagesBeUsed()}},canImagesBeUsed:function(){var d=this,b=d.imagesRemaining,a=b.length,c;for(c=-1;++c<a;){if(b[c].width>0&&b[c].height>0){b.splice(c,1);--c;--a}}clearTimeout(d.tryToDrawImagesTimeout);if(b.length>1){d.tryToDrawImagesTimeout=setTimeout(function(){d.canImagesBeUsed()},50)}else{d.setupPixiAssets();d.fireEvent("notify:animationManager.animationLoopInitialized")}},onResize:function(){var a=this,b=Environment.getVirtualToWindowScale(3);a.rootDisplayObject.scale=new PIXI.Point(b,b)},getLayer:function(a){return Sys.isDefined(this.layers[a])?this.layers[a]:null},createLayers:function(a){var b=this;if(Sys.isDefined(a.layers)){b.layers={};a.layers.forEach(function(c){b.layers[c]=new PIXI.Container();b.layers[c].name=c;b.rootDisplayObject.addChild(b.layers[c])})}else{b.layers={background:new PIXI.Container(),tickerTape:new PIXI.Container(),reelBackground:new PIXI.Container(),reel:new PIXI.Container(),noWinSymbols:new PIXI.Container(),winSymbolFrames:new PIXI.Container(),winPresentationLayer:new PIXI.Container(),winSymbols:new PIXI.Container(),betLines:new PIXI.Container(),betLineIndicators:new PIXI.Container(),winAnims:new PIXI.Container(),countUp:new PIXI.Container(),bigWin:new PIXI.Container(),winCoinNumbers:new PIXI.Container(),userInterface:new PIXI.Container(),countDownFreeSpins:new PIXI.Container(),splashScreens:new PIXI.Container(),paytableBackground:new PIXI.Container(),logo:new PIXI.Container(),introMovie:new PIXI.Container(),quickStopper:new PIXI.Container()};Sys.iterate(b.layers,function(c,d){d.name=c;b.rootDisplayObject.addChild(d)})}},initRenderer:function(c){var d=this,b=new PIXI.Container(),f,e="Error",a=Resources.readData("queryData"),g=(Platform.isEdgeBrowser||Platform.isIEBrowser)&&Platform.isDesktopDevice;g=Sys.isDefined(a.forcecanvasrendering)?a.forcecanvasrendering:g;if(Sys.isDefined(g)&&g===true){f=new PIXI.CanvasRenderer(c.width,c.height,d.PIXI_RENDERER_OPTIONS);e="Canvas"}else{f=PIXI.autoDetectRenderer(c.width,c.height,d.PIXI_RENDERER_OPTIONS);e="Auto - ";if(Sys.isDefined(f.filterManager)){e+="WebGL"}else{e+="Canvas"}}f.view.id="canvasAnimationManager";f.plugins.interaction.autoPreventDefault=false;c.parent.appendChild(f.view);d.stage=b;d.rootDisplayObject=new PIXI.Container();d.stage.addChild(d.rootDisplayObject);d.renderer=f;d.renderDisplay=e;d.createLayers(c);d.onResize();d.animationBuffer=[]},animate:function(){var a=this;a.animationBuffer.forEach(function(b){if(b.running){b.run({timeStep:a.currentStepTime,time:a.currentTime})}})},addToAnimationLoop:function(a){if(Sys.isArray(a)){this.addHoldersToLoop(a)}else{this.addHolderToLoop(a)}},removeFromAnimationLoop:function(b){var c=this,a;if(Sys.isArray(b)){b.forEach(function(d){a=c.animationBuffer.indexOf(d);if(a!==-1){c.animationBuffer.splice(a,1)}})}else{a=c.animationBuffer.indexOf(b);if(a!==-1){c.animationBuffer.splice(a,1)}}},forceCanvasRedraw:function(){var a=this.renderer.view;a.width++;a.width--},addHoldersToLoop:function(b){var a=this;b.forEach(function(c){a.addHolderToLoop(c)})},addHolderToLoop:function(a){if(!this.isInAnimationLoop(a)){this.animationBuffer.push(a)}},isInAnimationLoop:function(a){return this.animationBuffer.indexOf(a)!==-1}};Animation.PixiAnimationManager=Sys.extend(Sys.Observable,Animation.PixiAnimationManager,"Animation.PixiAnimationManager");Sys.ns("Animation");Animation.BufferedReel={constructor:function(a){var b=this;Animation.BufferedReel.superclass.constructor.call(b,{});a=b.applyDefaultsToConfig(a);b.id=a.id;b.pixiContainer=new PIXI.Container();b.pixiContainer.id=b.id;b.pixiContainer.position=new PIXI.Point(a.left,a.top);b.running=true;Game.stage.view.animationManager.addToAnimationLoop(b);b.symbolWidths=a.symbolWidths;b.symbolHeights=a.symbolHeights;b.blurredSymbolWidths=a.blurredSymbolWidths;b.blurredSymbolHeights=a.blurredSymbolHeights;b.maxBlurredSymbolHeight=0;Sys.iterate(a.blurredSymbolHeights,function(d,c){b.maxBlurredSymbolHeight=Math.max(b.maxBlurredSymbolHeight,c)});b.maxBlurredSymbolWidth=0;Sys.iterate(a.blurredSymbolWidths,function(d,c){b.maxBlurredSymbolWidth=Math.max(b.maxBlurredSymbolWidth,c)});b.depthDistribution=a.depthDistribution;b.symbolSpecificDepthModifiers=a.symbolSpecificDepthModifiers;b.webGLBlur=a.webGLBlur||false;b.orientation=a.orientation;b.reelAreaLength=a.visibleLength;b.spinDirection=a.spinDirection;b.maxTimeStep=a.timeToMoveOneSlot*0.75;b.hasSignaledReelStop=true;b.model=b.createModel(a);b.initBlurredReels();b.createSymbolSprites();b.symbolsWithSpecialEffects={}},initBlurredReels:function(){var a=this;if(a.webGLBlur){a.blurFilter=new PIXI.filters.BlurYFilter();a.pixiContainer.filters=[a.blurFilter]}},applyDefaultsToConfig:function(a){var b={id:"UnidentifiedReelList",symbolWidths:150,symbolHeights:150,blurredSymbolWidths:undefined,blurredSymbolHeights:undefined,symbolCenterToCenter:150,depthDistribution:{type:"increasing",step:1},symbolSpecificDepthModifiers:{},numberOfOutcomeSymbols:3,orientation:"vertical",visibleLength:undefined,outcomeOffset:0,spinDirection:"positive",timeToMoveOneSlot:1000,startBounceSupportPointOffset:undefined,endBounceSupportPointOffsets:[],endBounceDurations:[],symbolRetrievalFunction:function(){},reelStartCompleteCallback:function(){},reelStartedStoppingCallback:function(){},reelBounceStartCallback:function(){},reelStoppedCallback:function(){}};Sys.applyProperties(b,a);if(Sys.isNumber(b.symbolWidths)){b.symbolWidths={standard:b.symbolWidths}}if(Sys.isNumber(b.symbolHeights)){b.symbolHeights={standard:b.symbolHeights}}if(!Sys.isDefined(b.blurredSymbolWidths)){b.blurredSymbolWidths=b.symbolWidths}else{if(Sys.isNumber(b.blurredSymbolWidths)){b.blurredSymbolWidths={standard:b.blurredSymbolWidths}}}if(!Sys.isDefined(b.blurredSymbolHeights)){b.blurredSymbolHeights=b.symbolHeights}else{if(Sys.isNumber(b.blurredSymbolHeights)){b.blurredSymbolHeights={standard:b.blurredSymbolHeights}}}if(!Sys.isDefined(b.visibleLength)){b.visibleLength=b.numberOfOutcomeSymbols*b.symbolCenterToCenter}if(!Sys.isDefined(b.startBounceSupportPointOffset)){b.startBounceSupportPointOffset=-2*b.symbolCenterToCenter}return b},getSymbolLayout:function(){var d=this,c=[],b,a,e=0;if(d.indexOfFirstOutcomeItem){e=d.indexOfFirstOutcomeItem}for(a=0;a<d.model.numberOfOutcomeSymbols;++a){b=d.pixiContainer.children[e+a];c.push({left:b.position.x,top:b.position.y,width:b.width,height:b.height})}return c},createModel:function(a){var d=this,c=a.orientation==="vertical",b=c?d.maxBlurredSymbolHeight:d.maxBlurredSymbolWidth,e=a.symbolCenterToCenter-b;return new Animation.BufferedReelModel({id:a.id,symbolLength:b,symbolSpacing:e,numberOfOutcomeSymbols:a.numberOfOutcomeSymbols,visibleWindowLength:a.visibleLength,outcomeOffset:a.outcomeOffset,startBounceSupportPointOffset:a.startBounceSupportPointOffset,endBounceSupportPointOffsets:a.endBounceSupportPointOffsets,endBounceDurations:a.endBounceDurations,timeToMoveOneSlot:a.timeToMoveOneSlot,symbolRetrievalFunction:a.symbolRetrievalFunction,reelStartCompleteCallback:a.reelStartCompleteCallback,reelStartedStoppingCallback:a.reelStartedStoppingCallback,reelBounceStartCallback:a.reelBounceStartCallback,reelStoppedCallback:a.reelStoppedCallback,symbolCenterToCenter:a.symbolCenterToCenter})},reset:function(){this.model.reset()},createSymbolSprites:function(){var c=this,a=c.model.visibleSymbolsCount,d,b;for(b=0;b<a;b++){d=Game.PIXIFactory.createAndAddSprite("empty texture to be replaced later",c.pixiContainer,{x:0,y:0},{x:0.5,y:0.5});d.id="BufferedReelSymbol_"+b;if(c.orientation==="vertical"){d.x=c.symbolWidths.standard*0.5}else{d.y=c.symbolHeights.standard*0.5}}},calculateDepthDistributionArray:function(){var f=this,g=f.model.visibleSymbolsCount,e=f.depthDistribution.type,d=f.depthDistribution.step,c,h,a=Math.floor(g/2),b=[];for(c=0;c<g;c++){if(e==="increasing"){h=c}else{if(e==="decreasing"){h=g-c}else{if(e==="curve-out"){h=Math.abs(a-Math.abs(a-c))}else{if(e==="curve-in"){h=Math.abs(a-c)}}}}b.push(h*d)}return b},startSpin:function(){this.model.start()},stopSpin:function(a){this.model.storeSpinOutcome(a.symbols);this.model.stop()},isStopping:function(){return this.model.isStopping()},presentOutcome:function(){this.model.presentOutcome()},setAllReelSymbols:function(a){this.model.setInitialOutcome(a.symbols)},setReelSymbol:function(b,a){this.model.updateOutcome(a,b)},setSymbols:function(b){var c=-1,a=this.model.numberOfOutcomeSymbols;for(;++c<a;){if(Sys.isDefined(b[c])){this.model.updateOutcome(c,b[c])}}},run:function(e){var c=this,d=Math.min(e.timeStep,c.maxTimeStep),a,b,f;f=c.model.move(d);if(c.model.state==="starting"){b=f;c.dispatchReachedIdleSpeedEvent=true;c.fireEvent("notify:reelList.reelMovedInStartingState",b,c.id)}else{if(c.model.state==="spinning"){if(c.dispatchReachedIdleSpeedEvent===true){c.dispatchReachedIdleSpeedEvent=false;b=f;c.fireEvent("notify:reelList.reelReachedIdleSpeed",b,c.id)}}}a=c.model.getSymbolsToRender();c.getReelItemsForRendering(a)},getReelItemsForRendering:function(h){var f=this,c=f.shouldUseMotionBlur(),b,e,g,a,d=h.length;if(f.webGLBlur){f.blurFilter.blur=f.model.blurFactor}f.indexOfFirstOutcomeItem=f.pixiContainer.children.length-1;for(b=-1;++b<d;){if(h[b].isOutcomeSymbol&&b<f.indexOfFirstOutcomeItem){f.indexOfFirstOutcomeItem=b}e=f.pixiContainer.children[b];g=h[b].symbol;a=h[b].position;if(!f.webGLBlur&&c){g+="-BLURRED"}else{if(f.shouldUseSpecialEffect(g)){g+="-SPECIAL_EFFECT"}}if(f.orientation==="vertical"){e.position.y=a}else{e.position.x=a}e.texture=Resources.readData("animationImages")[g];e.id=g}},shouldUseMotionBlur:function(){return this.model.isSpinning()},getReelPositionDepthOffsets:function(a){var c=this,b=c.depthDistributionArray;if(c.depthDistribution==="increasing"||c.depthDistribution==="decreasing"){return b}else{return b.slice(Math.floor((b.length-a)/2))}},hideSymbols:function(a){this.setPlayingStateForSymbols(a,false)},showSymbols:function(a){this.setPlayingStateForSymbols(a,true)},setPlayingStateForSymbols:function(b,d){var a,c;if(Sys.isArray(b)){a=b.length;for(c=-1;++c<a;){this.setPlayingStateForSymbol(b[c],d)}}else{this.setPlayingStateForSymbol(b,d)}},setPlayingStateForSymbol:function(b,c){var a=this.pixiContainer.children;b+=this.indexOfFirstOutcomeItem;if(Sys.isNumber(b)&&Sys.isDefined(a[b])){a[b].visible=c}},shouldUseSpecialEffect:function(a){return this.symbolsWithSpecialEffects[a]===true},getSlotLength:function(){return this.model.slotLength},getVisibleSymbolsCount:function(){return this.model.visibleSymbolsCount},getBufferOffset:function(){return this.model.windowToBufferOffset},setBufferOffset:function(a){this.model.setBufferOffset(a)},getTimeToMoveOneSlot:function(){return this.model.timeToMoveOneSlot},setTimeToMoveOneSlot:function(a){this.maxTimeStep=Math.round(a*0.75);this.model.setTimeToMoveOneSlot(a)}};Animation.BufferedReel=Sys.extend(Sys.Observable,Animation.BufferedReel,"Animation.BufferedReel");Sys.override(Animation.BufferedReelModel,{calculateSymbolBufferSize:function(){var b=this,c=0,a;for(a=0;a<b.endBounceSupportPointOffsets.length;a++){c=Math.max(c,Math.abs(b.endBounceSupportPointOffsets[a]))}if(b.startBounceSupportPointOffset<0){c=Math.max(c,Math.abs(b.startBounceSupportPointOffset))}else{if(b.startBounceSupportPointOffset>b.visibleWindowLength){c=Math.max(c,b.startBounceSupportPointOffset-b.visibleWindowLength)}}return b.visibleSymbolsCount+=Math.ceil(c/b.slotLength)},move:function(a){var b=this.getDistance(a);this.moveDistance(b);return b},moveDistance:function(d){var c=this,b,a;c.windowToBufferOffset-=d;c.blurFactor=d*0.5;if(c.windowToBufferOffset<c.slotLength*c.leadingSymbolsCount){b=Math.ceil(Math.abs(c.windowToBufferOffset)/c.slotLength);a=c.addSymbolsToBuffer(b,c.state==="stopping");c.windowToBufferOffset+=b*c.slotLength;if(c.containsOutcome(a)&&c.state==="spinning"){c.handleOutcomeEnteredReelEvent()}}},handleOutcomeEnteredReelEvent:function(){var a=this;a.usedDuration=0;a.currentBounce=0;a.state="stopping";a.targetOffset=a.getDistanceToStopPosition();a.stopDuration=a.timeToMoveOneSlot*(a.targetOffset/a.slotLength);a.outcomeVisibleOnReel=false},getInterpolatedDistance:function(i,f,c,d,h){var a=Math.min(1,c/h),b=Animation.utils.getInterpolationValue(0,i,a,{func:Animation.utils.powerOneSupportPoint,cfg:f}),e=Math.min(1,(c+d)/h),g=Animation.utils.getInterpolationValue(0,i,e,{func:Animation.utils.powerOneSupportPoint,cfg:f});return{distance:g-b,progressAfterTime:e}},getSpinningDistance:function(b){var a=b/this.timeToMoveOneSlot;return a*this.slotLength},getSymbolsToRender:function(){var e=this,c=[],g=Math.floor(e.windowToBufferOffset/e.slotLength)-e.leadingSymbolsCount,a,d,b,f;g=Math.max(0,g);g=g>1?1:g;a=Math.min(e.visibleSymbolsCount,e.symbolBuffer.length-g);for(d=-1;++d<a;){b=g+d;f=e.symbolBuffer[b];f.position=b*e.slotLength-e.windowToBufferOffset+e.outcomeOffset+e.symbolCenterToCenter*0.5;f.inUse=false;c.push(f);if(!e.outcomeVisibleOnReel){e.reelStartedStoppingCallback();e.outcomeVisibleOnReel=true}}return c},setTimeToMoveOneSlot:function(b){var a=this;this.timeToMoveOneSlot=b;this.recalculateStartDuration();if(!a.hasCompletedSpin){this.recalculateStopParameters()}},recalculateStopParameters:function(){var a=this;a.targetOffset=a.getDistanceToStopPosition();a.stopDuration=Math.round(a.timeToMoveOneSlot*(a.targetOffset/a.slotLength));a.usedDuration=0}});Sys.ns("Animation");Animation.utils={randomBetween:function(b,a){return b+(a-b)*Math.random()},toNthDecimalPlace:function(a,d){var c=Sys.isDefined(d)?d:1,b=Math.pow(10,c);return Math.round(a*b)/b},rk4:function(f,g,o,h){var m=f,e=g,r=o(m,e,0),l=f+0.5*e*h,d=g+0.5*r*h,q=o(l,d,h/2),k=f+0.5*d*h,c=g+0.5*q*h,p=o(k,c,h/2),j=f+c*h,b=g+p*h,n=o(j,b,h),i=f+(h/6)*(e+2*d+2*c+b),s=g+(h/6)*(r+2*q+2*p+n);return[i,s]},goToTime:function(g,f,j,l){var m=this,n=Sys.isDefined(j)?j:true,h=Sys.isDefined(l)?l:false,c,b,i,a,e,d,k=function(){c=g.prop;Sys.iterate(c.operations,function(p,o){if(!n||(n&&o.timeBuffer<f)){Animation.utils.setTimeBuffer(g,p,f)}if(h){Sys.each(o,function(q){if(Sys.isDefined(q.fireEvent)&&q.time<=f){q.fireEvent.fired=true}if(Sys.isDefined(q.events)){i=f-b.time;a=q.time-b.time;e=a!==0?i/a:1;d=Math.round(Animation.utils.getInterpolationValue(b.value,q.value,e));Sys.each(q.events,function(r){if(r.onFrame<=d){r.fired=true}})}b=q})}})};k();if(Sys.isDefined(g.items)){Sys.each(g.items,function(o){m.goToTime(o,f,n,h)})}},fireEventOnFrame:function(c,b){var a=Game.stage.view.animationManager.renderLoopEndEvents;Sys.each(b.events,function(d){if(c>=d.onFrame&&!d.fired){a.push(d);d.fired=true}})},addEndEvent:function(e,d){var g=e.prop,b=g.operations,a=0,c,f;Sys.iterate(b,function(h,i){f=i[i.length-1];if(a<f.time){a=f.time;c=f}});if(Sys.isDefined(c)){if(!Sys.isDefined(c.fireEvent)){c.fireEvent=d}}},getInterpolationValue:function(f,e,b,c,d){if(b>1){b=1}else{if(b<0){b=0}}if(Sys.isDefined(c)){if(Sys.isFunc(c)){return c(f,e,b)}else{var a=Sys.isDefined(c.cfg)?c.cfg:undefined;return c.func(f,e,b,d,a)}}return f+b*(e-f)},noInterpolation:function(c,b,a){return a===1?b:c},powerOneIn:function(c,b,a){return((1-a)*(1-a))*c+2*a*(1-a)*c+(a*a)*b},powerOneOut:function(c,b,a){return((1-a)*(1-a))*c+2*a*(1-a)*b+(a*a)*b},powerTwoIn:function(c,b,a){return Math.pow(1-a,3)*c+3*a*Math.pow(1-a,2)*c+3*Math.pow(a,2)*(1-a)*c+Math.pow(a,3)*b},powerTwoOut:function(c,b,a){return Math.pow(1-a,3)*c+3*a*Math.pow(1-a,2)*b+3*Math.pow(a,2)*(1-a)*b+Math.pow(a,3)*b},powerNIn:function(h,j,c,a,g){var e=Sys.utils.initArray(g+1,h),f,b,d;e.push(j);b=e.length;for(d=1;d<b;d++){for(f=0;f<(b-d);f++){e[f]=(1-c)*e[f]+c*e[f+1]}}return e[0]},powerNOut:function(h,j,c,a,g){var e=Sys.utils.initArray(g+1,j),f,b,d;e.unshift(h);b=e.length;for(d=1;d<b;d++){for(f=0;f<(b-d);f++){e[f]=(1-c)*e[f]+c*e[f+1]}}return e[0]},powerOneSupportPoint:function(f,e,c,d,b){var a=b;if(Sys.isDefined(d)&&Sys.isObj(b)){a=b[d]}return((1-c)*(1-c))*f+2*c*(1-c)*a+(c*c)*e},backOut:function(g,f,d,e,a){var b=Sys.isDefined(a)?a:1,c=(d-=1)*d*((b+1)*d+b)+1;return((f-g)*c)+g}};Sys.ns("Core.Slots");Core.Slots.ReelGroup=function(d,a,c,b){this.constructor(d,a,c,b)};Core.Slots.ReelGroup.prototype={constructor:function(e,a,d,b){var c=this;c.createSymbolBuffer(a.numberOfReels,a.fillers,d);c.createReelLists(e,a.numberOfReels,a.reelLayout,d);c.spinType="standard";c.spinTimes=a.spinTimes;c.gameModeSpinTimes=a.spinTimes.gameModes||{};c.nearWinEnabled=b.nearWinEnabled;c.lastReelToStop=c.getReelCount()-1},createSymbolBuffer:function(c,b,a){this.symbolBuffer=new Core.Slots.SymbolBuffer(c,b,a)},createReelLists:function(l,c,h,j){var k=this,g=0,f,e=k.symbolBuffer,d,a,b=[];k.reelLists=[];k.slotLengthGroups={};k.reels=new PIXI.Container();k.reels.id="reelsMainContainer";k.reels.visible=false;Game.stage.view.animationManager.getLayer("reel").addChild(k.reels);for(;g<c;g++){f=Sys.applyProperties({},h.standard);if(Sys.isDefined(h[g])){Sys.applyProperties(f,h[g])}f.id=l+"_"+g;f.symbolRetrievalFunction=e.getSymbols.bind(e,g);Sys.applyProperties(f,k.getReelSpecificCallbacks(g,j));d=new Animation.BufferedReel(f);a=d.getSlotLength();if(!Sys.isDefined(k.slotLengthGroups[a])){k.slotLengthGroups[a]=[]}k.slotLengthGroups[a].push(d);b.push(d.getVisibleSymbolsCount());k.reelLists.push(d);k.reels.addChild(d.pixiContainer)}k.addReelMask(h.standard);k.symbolBuffer.setVisibleSymbolsCounts(b)},addReelMask:function(a){var b=new PIXI.Graphics();b.beginFill(16711680,0.8);b.drawRect(0,a.top,1280,a.visibleLength);b.endFill();this.reels.addChild(b);this.reels.mask=b},getReelSpecificCallbacks:function(d,c){var b=this,a={};a.reelStartCompleteCallback=function(){if(d===b.lastReelToStop){b.startSpinCompleteTime=Date.now();b.tryToStartStopSequence()}c.reelStartCompleteCallback(d)};a.reelStartedStoppingCallback=function(){c.reelStartedStoppingCallback(d)};a.reelBounceStartCallback=function(){c.reelBounceStartCallback(d)};a.reelStoppedCallback=function(){c.reelStoppedCallback(d)};return a},startSpin:function(b){var c=this,a=c.reelLists;c.symbolBuffer.cleanUp();c.syncReels();c.hasBeenToldToStop=false;c.isQuickStopped=false;c.startSpinCompleteTime=undefined;c.hasPassedMinimumSpinTime=false;c.stopStartTime=undefined;c.stopSequencePausers=Sys.utils.init2dMatrix(c.getReelCount(),0);a.forEach(function(d){d.startSpin()})},syncReels:function(){var e=this,c,a,f,b,d=e.symbolBuffer.workspace.heldReels;Sys.iterate(this.slotLengthGroups,function(h,g){c=0;a=Number(h);Sys.each(g,function(i){c=Math.max(c,i.getBufferOffset())});Sys.each(g,function(i){f=i.getBufferOffset();b=e.reelLists.indexOf(i);if(b>-1&&!d.contains(b)&&f<c){i.setBufferOffset(c)}})})},setSpinType:function(a){this.spinType=a},stopSpin:function(b,a,d){var c=this;c.symbolBuffer.setOutcome(b,d);c.nearWinList=a;c.hasBeenToldToStop=true;c.tryToStartStopSequence()},cancelSpin:function(){this.presentOutcome(Resources.readData("config").reelSets[this.activeReelSet].noWinOutcome)},presentOutcome:function(d,e){var c=this,b=c.symbolBuffer,a=c.reelLists;c.hasBeenToldToStop=false;c.stopSequencePausers=Sys.utils.init2dMatrix(c.getReelCount(),0);b.cleanUp();b.clearBuffer();a.forEach(function(f){f.reset()});b.setOutcome(d,e);c.stopNow();a.forEach(function(f){f.presentOutcome()})},setTimeToMoveOneSlot:function(b){var a=this.reelLists;a.forEach(function(c){c.setTimeToMoveOneSlot(b)})},stopNow:function(){var d=this,a=d.getReelCount(),c=[],b;for(b=-1;++b<a;){if(d.stopSequencePausers[b].length===0){c[b]=0}else{c[b]=Infinity;break}}for(;++b<a;){c[b]=Infinity}d.symbolBuffer.setStopDistance(c)},calculateSymbolsBeforeOutcome:function(){var p=this,o=p.getReelCount(),g=p.spinTimes[p.spinType],r=p.gameModeSpinTimes[p.activeReelSet]||{},l=r[p.spinType]||{},b=g.minimumSpinTime,f=Sys.isNumber(g.nearWinDelay)?g.nearWinDelay:0,m=[],a,d=g.reelStopDelays.concat(),k,q=p.symbolBuffer.getIndexOfLastStoppingReel(),s=p.nearWinList,e,c,n=0;if(Sys.isNumber(l.minimumSpinTime)){b=l.minimumSpinTime}if(Sys.isNumber(l.nearWinDelay)){f=l.nearWinDelay}if(Sys.isArray(l.reelStopDelays)){d=l.reelStopDelays}a=(b-(Date.now()-p.startSpinCompleteTime));for(k=-1;++k<=q;){m[k]=0}for(k=q;++k<o;){if(p.stopSequencePausers[k].length===0){e=a+d[k];if(p.nearWinEnabled&&Sys.isArray(s)){if(s.indexOf(k)>=0){e+=f;for(var h=k+1;h<d.length;h++){d[h]+=f}}}c=Math.round(e/p.reelLists[k].getTimeToMoveOneSlot())+n;if(c<0){n=-c;c=0}m[k]=c}else{m[k]=Infinity;break}}for(;++k<o;){m[k]=Infinity}return m},tryToStartStopSequence:function(){var a=this;if(a.canStop()){if(a.isQuickStopped){a.stopNow()}else{a.symbolBuffer.setStopDistance(a.calculateSymbolsBeforeOutcome())}}},canStop:function(){return this.hasBeenToldToStop&&Sys.isDefined(this.startSpinCompleteTime)},pauseStopSequence:function(a,e){var d=this,c,b=d.getReelCount();if(!Sys.isDefined(a)||!Sys.isDefined(e)){return}d.stopSequencePausers[e].push(a);c=d.symbolBuffer.getStopDistance();for(;e<b;++e){c[e]=Infinity}d.symbolBuffer.setStopDistance(c)},resumeStopSequence:function(a,d){var c=this,b;if(!Sys.isDefined(a)||!Sys.isDefined(d)){return}b=c.stopSequencePausers[d].indexOf(a);if(b>=0){c.stopSequencePausers[d].splice(b,1);if(c.stopSequencePausers[d].length===0){c.tryToStartStopSequence()}}},getReelCount:function(){return this.reelLists.length},setSymbols:function(b){var c=-1,a=this.reelLists;for(;++c<a.length;){if(Sys.isDefined(b[c])){a[c].setSymbols(b[c])}}},hide:function(){this.reelLists.forEach(function(a){a.stop()})},show:function(){this.reelLists.forEach(function(a){a.show()})},hideReel:function(b){var a=this.reelLists[b];if(Sys.isDefined(a)){a.stop()}},showReel:function(b){var a=this.reelLists[b];if(Sys.isDefined(a)){a.play()}},hideSymbolsOnReel:function(c,b){var a=this.reelLists[c];if(Sys.isDefined(a)){a.hideSymbols(b)}},hideSymbols:function(a){var b=this;Sys.iterate(a,function(d,c){b.hideSymbolsOnReel(d,c)})},showSymbolsOnReel:function(c,b){var a=this.reelLists[c];if(Sys.isDefined(a)){a.showSymbols(b)}},showSymbols:function(a){var b=this;Sys.iterate(a,function(d,c){b.showSymbolsOnReel(d,c)})},activate:function(a,c){var b=this;if(Sys.isDefined(b.activeReelSet)){b.deactivate(b.activeReelSet)}b.reels.visible=true;b.symbolBuffer.activateReelSet(a);b.activeReelSet=a;b.updateSpinTimings(a)},deactivate:function(a){var b=this;if(a===b.activeReelSet){b.reels.visible=false;b.activeReelSet=undefined}},quickStop:function(){var a=this;a.isQuickStopped=true;if(a.canStop()){a.stopNow()}},updateSpinTimings:function(a){var b=this.gameModeSpinTimes;if(b[a]&&Sys.isNumber(b[a].timeToMoveOneSlot)){this.setTimeToMoveOneSlot(b[a].timeToMoveOneSlot)}}};Sys.override(Core.Orientation,{getOrientation:function(){if(Sys.isDefined(Environment.deviceOrientation)){return Environment.deviceOrientation}if(Platform.isDesktopDevice||Platform.isTabletDevice){return"LANDSCAPE"}if(Platform.isIOSDevice===true||Platform.isAndroidStockBrowser){if(window.orientation){if(Math.abs(window.orientation)===90){return"LANDSCAPE"}return"PORTRAIT"}}if(window.innerHeight<=window.innerWidth){return"LANDSCAPE"}else{return"PORTRAIT"}}});Sys.override(Game.StageView,{setupAnimationManager:function(){var b=this,a=Environment.getResolution();b.animationManager=new Animation.PixiAnimationManager({parent:document.getElementById("gameElements"),images:b.model.readData("images"),sprites:b.model.readData("sprites"),top:"0px",left:"0px",height:a.height,width:a.width,scenes:b.model.readData("scenes"),layers:b.model.readData("layers")})}});Sys.ns("Interface.utils");Interface.utils.PIXIControl={constructor:function(){Interface.utils.PIXIControl.superclass.constructor.apply(this,arguments)},moveToPosition:function(b){var a=b.position;var c=b.anchorPoint?b.anchorPoint:new PIXI.Point();this.moveTo(a,c)},moveTo:function(a,b){var c=b?b:new PIXI.Point();this.x=a.x-this.width*c.x;this.y=a.y-this.height*c.y}};Interface.utils.PIXIControl=Sys.extend(PIXI.Container,Interface.utils.PIXIControl,"Interface.utils.PIXIControl");Sys.ns("Interface.utils");Interface.utils.PIXIInteractive={DEFAULT_ID:"interactive",UP:"up",DOWN:"down",OVER:"over",MOVE:"move",constructor:function(){Interface.utils.PIXIInteractive.superclass.constructor.apply(this,arguments);this.eventHandler=EventHandler;this._enabled=this._enabled!==false;this.interactive=true;this.setCurrentState(this.UP)},setEnabled:function(a){if(this._enabled===a){return}this._enabled=a},getEnabled:function(){return this._enabled},setCurrentState:function(a){if(this._currentState===a){return}this._currentState=a},mousedown:function(a){this.handleEvent(this.DOWN,a)},mouseup:function(a){this.handleEvent(this.UP,a)},mousemove:function(a){var b=this.checkInteractionTarget(a.data);if(this.moveCallback&&this._enabled&&b){this.handleEvent(this.MOVE,a)}},mouseover:function(a){this.handleEvent(this.OVER,a)},mouseout:function(a){this.handleEvent("out",a)},mouseupoutside:function(a){this.handleEvent(this.UP,a)},click:function(a){var b=this.checkInteractionTarget(a.data);if(this._enabled&&b){this.executeCallback("click",a)}},touchstart:function(a){this.handleEvent(this.DOWN,a)},touchend:function(a){this.handleEvent(this.UP,a)},touchmove:function(a){if(this._currentState!==this.UP){var b=Game.PIXIUtils.hitTestDisplayObject(a.data.global,this);if(!b&&!Platform.isDesktopDevice){this.touchend(a)}}},touchendoutside:function(a){this.handleEvent(this.UP,a)},tap:function(a){var b=this.checkInteractionTarget(a.data);if(this._enabled&&b){this.executeCallback("click",a)}},handleEvent:function(a,b){var c=this.checkInteractionTarget(b.data);if(c){this.setStateFromEvent(a,b);if(this._enabled){this.executeCallback(a,b)}}},fireEvent:function(){if(arguments.length===0){return}this.eventHandler.dispatchEvent.apply(this.eventHandler,arguments)},checkInteractionTarget:function(a){if(Sys.isDefined(a.originalEvent)===false||a.originalEvent===null){return false}var b=Sys.isDefined(a.originalEvent.target.id);return(b&&a.originalEvent.target.id==="canvasAnimationManager")},executeCallback:function(a,b){var c=(a+"Callback");if(this[c]){this[c](b)}},setStateFromEvent:function(b,c){if(b===this.DOWN){this.setCurrentState(this.DOWN);this._internalPressed=true}else{if(b===this.UP){this._internalPressed=false;this._externalPressed=false;if(this._internalOver){this.setCurrentState(this.OVER)}else{this.setCurrentState(this.UP)}}else{if(b===this.OVER){this._internalOver=true;if(this._internalPressed){this.setCurrentState(this.DOWN)}else{this._externalPressed=false;var a=c.data.originalEvent;if(a.buttons===1||a.buttons===3){this._externalPressed=true}if(this._externalPressed===false){this.setCurrentState(this.OVER)}}}else{if(this._internalOver){this._internalOver=false}if(this._externalPressed){this._externalPressed=false}this.setCurrentState(this.UP)}}}}};Interface.utils.PIXIInteractive=Sys.extend(Interface.utils.PIXIControl,Interface.utils.PIXIInteractive,"Interface.utils.PIXIInteractive");Sys.ns("Interface.utils");Interface.utils.PIXIBox={HORIZONTAL:"horizontal",VERTICAL:"vertical",ALIGN_TOP:"top",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_BOTTOM:"bottom",ALIGN_RIGHT:"right",DEFAULT_GAP:4,constructor:function(a){Interface.utils.PIXIBox.superclass.constructor.apply(this,arguments);this._layout=(a===undefined)?this.HORIZONTAL:a;this._gap=this.DEFAULT_GAP;this._verticalAlign=this.ALIGN_TOP;this._horizontalAlign=this.ALIGN_LEFT;this._explicitWidth=NaN;this._explicitHeight=NaN;this.shouldUpdateLayout=false},addChildAt:function(b,a){b=Interface.utils.PIXIBox.superclass.addChildAt.apply(this,arguments);this.shouldUpdateLayout=true;return b},removeChildAt:function(a){var b=Interface.utils.PIXIBox.superclass.removeChildAt.apply(this,arguments);this.shouldUpdateLayout=true;return b},getExcessSpace:function(f){var d=this.getBoxWidth(),a=this.getBoxHeight(),c=f?a:d,e=this.children.length;for(var b=0;b<e;b++){var g=this.children[b];c-=f?g.height:g.width}c=c-this._gap*(e-1);return(c<0)?0:c},updateLayout:function(){var k=this.isVertical(),e=this.getVerticalAlignValue(),d=this.getHorizontalAlignValue(),b=this.getExcessSpace(k),h=b,a=this.getBoxWidth(),l=this.getBoxHeight();h*=(k)?e:d;var g=this.children.length;for(var f=0;f<g;f++){var c=this.children[f];if(k){c.y=Math.floor(h);c.x=(a-c.width)*e}else{c.x=Math.floor(h);c.y=(l-c.height)*d}var j=k?c.height:c.width;h+=j+this.getCurrentGap(f,g)}this.shouldUpdateLayout=false},getCurrentGap:function(b,a){return this._gap},updateTransform:function(){if(this.shouldUpdateLayout){this.updateLayout()}Interface.utils.PIXIBox.superclass.updateTransform.apply(this,arguments)},setGap:function(a){if(this._gap===a){return}this._gap=a;this.shouldUpdateLayout=true},setHorizontalAlign:function(a){if(this._horizontalAlign===a){return}this._horizontalAlign=a;this.shouldUpdateLayout=true},setVerticalAlign:function(a){if(this._verticalAlign===a){return}this._verticalAlign=a;this.shouldUpdateLayout=true},getHorizontalAlignValue:function(){if(this._horizontalAlign==="center"){return 0.5}else{if(this._horizontalAlign==="right"){return 1}}return 0},getVerticalAlignValue:function(){if(this._verticalAlign==="middle"){return 0.5}else{if(this._verticalAlign==="bottom"){return 1}}return 0},isVertical:function(){return(this._layout===this.VERTICAL)},setExplicitWidth:function(a){if(this._explicitWidth===a){return}this._explicitWidth=a;this.shouldUpdateLayout=true},setExplicitHeight:function(a){if(this._explicitHeight===a){return}this._explicitHeight=a;this.shouldUpdateLayout=true},getBoxWidth:function(){return(isNaN(this._explicitWidth))?this.width:this._explicitWidth},getBoxHeight:function(){return(isNaN(this._explicitHeight))?this.height:this._explicitHeight}};Interface.utils.PIXIBox=Sys.extend(Interface.utils.PIXIControl,Interface.utils.PIXIBox,"Interface.utils.PIXIBox");Sys.ns("Interface.utils");Interface.utils.PIXIHBox={constructor:function(){Interface.utils.PIXIHBox.superclass.constructor.apply(this,["horizontal"])}};Interface.utils.PIXIHBox=Sys.extend(Interface.utils.PIXIBox,Interface.utils.PIXIHBox,"Interface.utils.PIXIHBox");Sys.ns("Interface.utils");Interface.utils.PIXIVBox={constructor:function(){Interface.utils.PIXIVBox.superclass.constructor.apply(this,["vertical"])}};Interface.utils.PIXIVBox=Sys.extend(Interface.utils.PIXIBox,Interface.utils.PIXIVBox,"Interface.utils.PIXIVBox");Sys.ns("Interface.utils");Interface.utils.PIXIButton={DEFAULT_ID:"button",SOUND_UP:"buttonUp",SOUND_DOWN:"buttonDown",SOUND_CLICK:"buttonClick",SOUND_OVER:"buttonHover",LABEL_RESOLUTION:2,constructor:function(c,d,a,b,e){Interface.utils.PIXIButton.superclass.constructor.apply(this,arguments);this.ID=Sys.isDefined(e)?e:this.DEFAULT_ID;this._graphicReferences={up:c,down:d,over:a,disabled:b};this._labelStyleReferences={up:undefined,down:undefined,over:undefined,disabled:undefined};this._pooledGraphics={};this.shouldUpdateDimensions=false;this.shouldUpdateLabel=false;this.shouldUpdateGraphics=false;this.updateGraphics();this.updateHitArea();if(Sys.isDefined(Services.trigger)){this.registerTriggers()}this.soundEnabled=true},getCurrentLabelStyle:function(){var a;if(this._enabled){a=this._labelStyleReferences[this._currentState]}else{a=this._labelStyleReferences.disabled}if(a===undefined){a=this._labelStyle}return a},updateLabel:function(){var a;this.shouldUpdateLabel=false;if(this.labelText){this.labelText.text=this._label;a=this.getCurrentLabelStyle();this.labelText.setLabelStyle(a)}else{if(this._label){a=this.getCurrentLabelStyle();this.labelText=new Interface.utils.PIXILabel(this._label,a,this._labelMaxWidth);this.addChild(this.labelText);this.shouldUpdateLabel=true}}this.shouldUpdateDimensions=true},getTexture:function(a){var b=this._pooledGraphics[a];if(!b){b=Game.PIXIFactory.createTexture(a);this._pooledGraphics[a]=b}return b},updateGraphics:function(){var a;if(this._enabled){a=this._graphicReferences[this._currentState]}else{a=this._graphicReferences.disabled}if(this.graphics){var b=this.getTexture(a);if(b!==undefined){this.graphics.texture=b}}else{this.graphics=Game.PIXIFactory.createAndAddSprite(a,this)}this.shouldUpdateGraphics=false;this.shouldUpdateDimensions=true},updateDimensions:function(){this.updateLabelDimensions();this.updateHitArea();this.shouldUpdateDimensions=false},updateLabelDimensions:function(){if(this.labelText&&this.labelText.text){if(this._labelAnchor){this.labelText.setAnchorPoint(this._labelAnchor)}if(this._labelPosition){this.labelText.x=this._labelPosition.x;this.labelText.y=this._labelPosition.y}else{this.labelText.x=Math.floor((this.width-this.labelText.width)/2);this.labelText.y=Math.floor((this.height-this.labelText.height)/2)}}},updateHitArea:function(){if(this.hitArea){if(this._customHitArea){this.hitArea=this._customHitArea}else{this.hitArea.width=this.width;this.hitArea.height=this.height}}else{this.hitArea=new PIXI.Rectangle(0,0,this.width,this.height)}},enable:function(a){this.setEnabled(true)},disable:function(a){this.setEnabled(false)},setEnabled:function(a){if(this._enabled===a){return}this._enabled=a;this.shouldUpdateGraphics=true;this.shouldUpdateLabel=true},setCurrentState:function(b){if(this._currentState===b){return}if(this.labelText){this.labelText.setCurrentState(b);this.labelText.setLabelStyle(this.getCurrentLabelStyle())}var a=this._currentState;this._currentState=b;this.shouldUpdateGraphics=true;this.shouldUpdateLabel=true;if(this.soundEnabled&&this._enabled){this.playSoundByState(b,a)}},click:function(a){var b=this.checkInteractionTarget(a.data);if(this._enabled&&b){this.executeCallback("click",a);if(this.soundEnabled){this.playClickSound()}}},tap:function(a){var b=this.checkInteractionTarget(a.data);if(this._enabled&&b){this.executeCallback("click",a);if(this.soundEnabled){this.playClickSound()}}},setCustomHitArea:function(a){this._customHitArea=a},setLabel:function(a){if(this._label===a){return}this._label=a;this.shouldUpdateLabel=true},setLabelStyle:function(a){if(this._labelStyle===a){return}this._labelStyle=a;this.shouldUpdateLabel=true},setLabelUpStyle:function(a){if(this._labelStyleReferences.up===a){return}this._labelStyleReferences.up=a;this.shouldUpdateLabel=true},setLabelDownStyle:function(a){if(this._labelStyleReferences.down===a){return}this._labelStyleReferences.down=a;this.shouldUpdateLabel=true},setLabelOverStyle:function(a){if(this._labelStyleReferences.over===a){return}this._labelStyleReferences.over=a;this.shouldUpdateLabel=true},setLabelDisabledStyle:function(a){if(this._labelStyleReferences.disabled===a){return}this._labelStyleReferences.disabled=a;this.shouldUpdateLabel=true},setLabelPosition:function(a){this._labelPosition=a;this.shouldUpdateDimensions=true},setLabelAnchorPoint:function(a){this._labelAnchor=a;if(this.labelText){this.labelText.setAnchorPoint(this._labelAnchor)}this.shouldUpdateDimensions=true},setLabelMaxWidth:function(a){this._labelMaxWidth=a;if(this.labelText){this.labelText.setLabelMaxWidth(a)}},redraw:function(){if(this.shouldUpdateLabel){this.updateLabel()}if(this.shouldUpdateGraphics){this.updateGraphics()}if(this.shouldUpdateDimensions){this.updateDimensions()}},updateTransform:function(){if(this.redraw){this.redraw()}Interface.utils.PIXIButton.superclass.updateTransform.apply(this,arguments)},registerTriggers:function(){var a=this.ID;Services.trigger.registerTrigger("notify:"+a+".up",this,"When the button returns to the up state.");Services.trigger.registerTrigger("notify:"+a+".hover",this,"When the button is hovered.");Services.trigger.registerTrigger("notify:"+a+".over",this,"When the button hovered but wasn't the initial input target.");Services.trigger.registerTrigger("notify:"+a+".down",this,"When the button is pressed down.");Services.trigger.registerTrigger("notify:"+a+".click",this,"When the button is clicked.")},playClickSound:function(){var b=this.SOUND_CLICK;var a="click";if(b){this.fireEvent("request:audioPlayer.play",{name:b});this.fireEvent("notify:"+this.ID+"."+a)}},playSoundByState:function(c,a){var d;var b;if(c===this.UP){d=this.SOUND_UP;b="up"}else{if(c===this.DOWN){d=this.SOUND_DOWN;b="down"}else{if(c===this.OVER&&a!==this.DOWN){d=this.SOUND_OVER;b="hover"}}}if(d){this.fireEvent("request:audioPlayer.play",{name:d});this.fireEvent("notify:"+this.ID+"."+b)}}};Interface.utils.PIXIButton=Sys.extend(Interface.utils.PIXIInteractive,Interface.utils.PIXIButton,"Interface.utils.PIXIButton");Sys.ns("Interface.utils");Interface.utils.PIXICheckBox={DEFAULT_LABEL_GAP:4,constructor:function(h,i,f,c,d,e,g,b,a){Interface.utils.PIXICheckBox.superclass.constructor.apply(this,[h,i,f,c,a]);this._selectedGraphicReferences={up:d,down:e,over:g,disabled:b};this.selected=false;this._labelGap=this.DEFAULT_LABEL_GAP;this._pooledGraphics={}},getTexture:function(a){var b=this._pooledGraphics[a];if(!b){b=Game.PIXIFactory.createTexture(a);this._pooledGraphics[a]=b}return b},updateGraphics:function(){var b,a=this.selected?this._selectedGraphicReferences:this._graphicReferences;if(this._enabled){b=a[this._currentState]}else{b=a.disabled}if(this.graphics){var c=this.getTexture(b);if(c!==undefined){this.graphics.texture=c}}else{this.graphics=Game.PIXIFactory.createAndAddSprite(b,this)}},updateLabelDimensions:function(){if(this.labelText&&this.labelText.text){if(this._labelPosition){this.labelText.x=this._labelPosition.x;this.labelText.y=this._labelPosition.y}else{this.labelText.x=this.graphics.width+this._labelGap;this.labelText.y=Math.floor((this.height-this.labelText.height)/2)}}},setLabelGap:function(a){if(this._labelGap!==a){this._labelGap=a;this.shouldUpdateLabel=true}},toggleSelected:function(){this.selected=!this.selected},handleEvent:function(a,b){var c=this.checkInteractionTarget(b.data);if(this._enabled&&c){if(a===this.DOWN){this.setCurrentState(this.DOWN);this._internalPressed=true}else{if(a===this.UP){if(this._internalOver&&this._internalPressed){this.toggleSelected()}if(this._internalOver){this.setCurrentState(this.OVER)}else{this.setCurrentState(this.UP)}this._internalPressed=false}else{if(a===this.OVER){this._internalOver=true;if(this._internalPressed){this.setCurrentState(this.DOWN)}else{this.setCurrentState(this.OVER)}}else{if(this._internalOver){this._internalOver=false}this.setCurrentState(this.UP)}}}}}};Interface.utils.PIXICheckBox=Sys.extend(Interface.utils.PIXIButton,Interface.utils.PIXICheckBox,"Interface.utils.PIXICheckBox");Sys.ns("Interface.utils");Interface.utils.PIXILabel={constructor:function(c,a,b){Interface.utils.PIXILabel.superclass.constructor.apply(this,arguments);this.setLabel(c);this.setLabelStyle(a);this.setLabelMaxWidth(b);this.updateLabel()},updateLabel:function(){if(this.labelText){this.labelText.text=this._label;this.labelText.style=this._labelStyle}else{this.labelText=new PIXI.Text(this._label,this._labelStyle);this.labelText.resolution=2;this.addChild(this.labelText)}this.shouldUpdateLabel=false;if(this.labelText){if(this._labelMaxWidth){this.setLabelMaxWidth(this._labelMaxWidth)}this.checkLabelMaxWidthAndReduceFontSizeIfNecessary();if(this._anchorPoint){this.labelText.anchor=this._anchorPoint}}},setAnchorPoint:function(a){this._anchorPoint=a;this.updateLabel()},updateHitArea:function(){if(this.hitArea){this.hitArea.width=this.width;this.hitArea.height=this.height}else{this.hitArea=new PIXI.Rectangle(0,0,this.width,this.height)}},checkLabelMaxWidthAndReduceFontSizeIfNecessary:function(){if(this._labelMaxWidth){var c=this.getTextWidth(this._label,this.labelText.style.font);if(c>this._labelMaxWidth){var f=this._labelMaxWidth/c;var d=this.labelText.style.font.split(" ");var b=d[0].split("px")[0];b=parseInt(b,10);b=Math.round(b*f);var e=b+"px "+d[1];var a=Sys.clone(this.labelText.style);a.font=e;this.labelText.style=a}}},getTextWidth:function(e,a){var b=this.textCanvas||(this.textCanvas=document.createElement("canvas"));var c=b.getContext("2d");c.font=a;var d=c.measureText(e);return d.width},setLabelMaxWidth:function(a){if(this._labelMaxWidth===a){return}this._labelMaxWidth=a;this.shouldUpdateLabel=true},setLabel:function(a){if(this._label===a){return}this._label=a;this.shouldUpdateLabel=true},setLabelStyle:function(a){if(this._labelStyle===a){return}this._labelStyle=a;this.style=a;this.shouldUpdateLabel=true},redraw:function(){this.alpha=this._enable?0.5:1;if(this.shouldUpdateLabel){this.updateLabel();this.updateHitArea()}},updateTransform:function(){if(this.redraw){this.redraw()}Interface.utils.PIXILabel.superclass.updateTransform.apply(this,arguments)}};Interface.utils.PIXILabel=Sys.extend(Interface.utils.PIXIInteractive,Interface.utils.PIXILabel,"Interface.utils.PIXILabel");Sys.ns("Interface.utils");Interface.utils.PIXIStepSlider={VALUE_CHANGED:"valueChanged",constructor:function(c,d,a,b){Interface.utils.PIXIStepSlider.superclass.constructor.apply(this,arguments);this._graphicsReferences={bar:c,barDisabled:d,background:a,backgroundDisabled:b};this._values=[0,1,2,3,4];this._index=0;this._enabled=this._enabled!==false;this._pooledGraphics={};this._allowMove=false;this.interactive=true;this.shouldUpdateDimensions=false;this.shouldUpdateGraphics=false;this.updateGraphics();this.updateDimensions();this.enableEventListeners(this._enabled)},getTexture:function(a){var b=this._pooledGraphics[a];if(!b){b=Game.PIXIFactory.createTexture(a);this._pooledGraphics[a]=b}return b},updateGraphics:function(){var a;if(this._background){a=this._enabled?this._graphicsReferences.background:this._graphicsReferences.backgroundDisabled;this._background.texture=this.getTexture(a)}else{this._background=Game.PIXIFactory.createAndAddSprite(this._graphicsReferences.background,this)}if(this._bar){a=this._enabled?this._graphicsReferences.bar:this._graphicsReferences.barDisabled;this._bar.texture=this.getTexture(a)}else{this._bar=Game.PIXIFactory.createAndAddSprite(this._graphicsReferences.bar,this)}this.shouldUpdateGraphics=false;this.shouldUpdateDimensions=true},updateDimensions:function(){this._bar.x=(this._background.width-this._bar.texture.width)/2;this._bar.y=(this._background.height-this._bar.texture.height)/2;var a=this._bar.texture.width/this._values.length;this._bar.width=Math.round(a*(this._index+1));this.shouldUpdateDimensions=false},redraw:function(){if(this.shouldUpdateGraphics){this.updateGraphics()}if(this.shouldUpdateDimensions){this.updateDimensions()}},updateTransform:function(){if(this.redraw){this.redraw()}Interface.utils.PIXIStepSlider.superclass.updateTransform.apply(this,arguments)},pixelToIndex:function(a){var d=this._values.length-1;var c=this._bar.texture.width/this._values.length;var e=a-this.worldTransform.tx-this._bar.x;var b=Math.floor(e/c);if(b<0){b=0}else{if(b>d){b=d}}return b},moveToPosition:function(a){this.updateDimensions();Interface.utils.PIXIStepSlider.superclass.moveToPosition.apply(this,arguments)},updateIndexFromEventData:function(b){var a=this.pixelToIndex(b.data.global.x);if(a>(this._values.length-1)){a=this._values.length-1}if(a<0){a=0}if(this._index===a){return}this._index=a;this.shouldUpdateDimensions=true;this.emit(this.VALUE_CHANGED,{value:this.getValue(),index:this._index})},checkInteractionTarget:function(b){if(Sys.isDefined(b.originalEvent)===false||b.originalEvent===null){return false}var a=Sys.isDefined(b.originalEvent.target.id);return(a&&b.originalEvent.target.id==="canvasAnimationManager")},onMouseDownHandler:function(a){var b=this.checkInteractionTarget(a.data);if(b){this._allowMove=true}},onMouseMoveHandler:function(a){if(this._allowMove){this.updateIndexFromEventData(a)}},onMouseUpHandler:function(a){this._allowMove=false;this.updateIndexFromEventData(a)},enableEventListeners:function(a){if(a){this.clickCallback=this.onMouseUpHandler.bind(this);this.upCallback=this.onMouseUpHandler.bind(this);this.upOutsideCallback=this.onMouseUpHandler.bind(this);this.downCallback=this.onMouseDownHandler.bind(this);this.moveCallback=this.onMouseMoveHandler.bind(this)}else{this.clickCallback=undefined;this.upCallback=undefined;this.upOutsideCallback=undefined;this.downCallback=undefined;this.moveCallback=undefined}},setEnabled:function(a){if(this._enabled===a){return}this._enabled=a;this.enableEventListeners(this._enabled);this.shouldUpdateGraphics=true},setIndex:function(a){if(a>(this._values.length-1)){a=this._values.length-1}if(a<0){a=0}if(this._index===a){return}this._index=a;this.shouldUpdateDimensions=true},getIndex:function(){return this._index},setValues:function(a){if(this._values===a){return}this._values=a;this.shouldUpdateDimensions=true},getValue:function(){return this._values[this._index]}};Interface.utils.PIXIStepSlider=Sys.extend(Interface.utils.PIXIInteractive,Interface.utils.PIXIStepSlider,"Interface.utils.PIXIStepSlider");Sys.ns("Interface.utils");Interface.utils.PIXIValueStepper={VALUE_CHANGED:"valueChanged",DEFAULT_GAP:4,constructor:function(f,b,d,g,h,c,i,e,a){Interface.utils.PIXIValueStepper.superclass.constructor.apply(this,arguments);this._enabled=this._enabled!==false;this.interactive=false;this._values=[0,1,2,3,4];this._index=0;this._gap=this.DEFAULT_GAP;this.shouldUpdateValueTextField=false;this.shouldUpdateDimensions=true;this.createButtons(f,b,d,g,h,c,i,e,a);this.createValueText();this.valueTextMaxWidth=this.getValueTextMaxWidth()},createButtons:function(h,b,f,i,j,d,k,g,a){var c=Sys.isDefined(a)?a+"Increase":undefined;var e=Sys.isDefined(a)?a+"Decrease":undefined;this.plusButton=new Interface.utils.PIXIButton(j,d,k,g,c);this.plusButton.clickCallback=this.plusClickHandler.bind(this);this.addChild(this.plusButton);this.minusButton=new Interface.utils.PIXIButton(h,b,f,i,e);this.minusButton.clickCallback=this.minusClickHandler.bind(this);this.addChild(this.minusButton)},createValueText:function(){this.valueTextField=Game.PIXIFactory.createAndAddText(this.getValue(),{},this)},getValueTextMaxWidth:function(){var d=0;for(var a=0;a<this._values.length;a++){var c=this._values[a];this.valueTextField.text=c;this.valueTextField.updateTransform();var b=this.valueTextField.width;if(b>d){d=b}}return d},increaseIndex:function(){var a=this.getIndex();this.setIndexWithValueChangedEvent(a+1)},decreaseIndex:function(){var a=this.getIndex();this.setIndexWithValueChangedEvent(a-1)},setIndexWithValueChangedEvent:function(a){if(a>(this._values.length-1)){a=this._values.length-1}if(a<0){a=0}if(this._index===a){return}this._index=a;this.shouldUpdateValueTextField=true;this.emit(this.VALUE_CHANGED,{value:this.getValue(),index:this._index})},moveToPosition:function(a){this.updateDimensions();Interface.utils.PIXIValueStepper.superclass.moveToPosition.apply(this,arguments)},plusClickHandler:function(){this.increaseIndex()},minusClickHandler:function(){this.decreaseIndex()},updateButtonsEnableState:function(){if(this._index===0){this.minusButton.setEnabled(false)}else{if(this.minusButton.getEnabled()===false){this.minusButton.setEnabled(true)}}if(this._index===this._values.length-1){this.plusButton.setEnabled(false)}else{if(this.plusButton.getEnabled()===false){this.plusButton.setEnabled(true)}}},updateValueTextField:function(){if(this.valueTextField){this.valueTextField.text=this.getValue();this.valueTextField.style=this._textStyle;if(this._enabled){this.updateButtonsEnableState()}}this.shouldUpdateValueTextField=false;this.shouldUpdateDimensions=true},updateDimensions:function(){var b=(this._valueTextCustomWidth===undefined)?this.valueTextMaxWidth:this._valueTextCustomWidth;var a=(b-this.valueTextField.width);this.valueTextField.x=this.minusButton.width+this._gap+(a/2);this.valueTextField.y=(this.height-this.valueTextField.height)/2;this.plusButton.x=this.minusButton.width+this._gap+b+this._gap;this.shouldUpdateDimensions=false},redraw:function(){if(this.shouldUpdateValueTextField){this.updateValueTextField()}if(this.shouldUpdateDimensions){this.updateDimensions()}},updateTransform:function(){if(this.redraw){this.redraw()}Interface.utils.PIXIStepSlider.superclass.updateTransform.apply(this,arguments)},setValueFieldStyle:function(a){if(this._textStyle===a){return}this._textStyle=a;this.shouldUpdateValueTextField=true},setEnabled:function(a){if(this._enabled===a){return}this._enabled=a;if(a){this.updateButtonsEnableState()}else{this.plusButton.setEnabled(a);this.minusButton.setEnabled(a)}},setGap:function(a){if(this._gap===a){return}this._gap=a;this.shouldUpdateDimensions=true},setIndex:function(a){if(a>(this._values.length-1)){a=this._values.length-1}if(a<0){a=0}if(this._index===a){return}this._index=a;this.shouldUpdateValueTextField=true},getIndex:function(){return this._index},setValues:function(a){if(this._values===a){return}this._values=a;this.valueTextMaxWidth=this.getValueTextMaxWidth();this.shouldUpdateValueTextField=true},setValueTextWidth:function(a){if(this._valueTextCustomWidth===a){return}this._valueTextCustomWidth=a;this.updateDimensions()},getValues:function(){return this._values},setValue:function(b){var a=this._values.indexOf(b);if(a>=0){this.setIndex(a)}},getValue:function(){return this._values[this._index]}};Interface.utils.PIXIValueStepper=Sys.extend(Interface.utils.PIXIControl,Interface.utils.PIXIValueStepper,"Interface.utils.PIXIValueStepper");Sys.ns("Interface.utils");Interface.utils.PIXIValueStepperWithSlider={DEFAULT_GAP:4,constructor:function(h,c,f,i,k,e,m,g,j,d,a,l,b){Interface.utils.PIXIValueStepperWithSlider.superclass.constructor.apply(this,[h,c,f,i,k,e,m,g,b]);this.createSlider(j,d,a,l)},createSlider:function(c,d,a,b){this.slider=new Interface.utils.PIXIStepSlider(c,d,a,b);this.slider.setValues(this.getValues());this.slider.setIndex(this.getIndex());this.slider.on("valueChanged",this.sliderValueChangeHandler,this);this.addChild(this.slider)},setIndexWithValueChangedEvent:function(a){Interface.utils.PIXIValueStepperWithSlider.superclass.setIndexWithValueChangedEvent.apply(this,arguments);this.slider.setIndex(a)},sliderValueChangeHandler:function(b){var a=b.index;if(a>(this._values.length-1)){a=this._values.length-1}if(a<0){a=0}if(this._index===a){return}this._index=a;this.shouldUpdateValueTextField=true;this.emit(this.VALUE_CHANGED,{value:this.getValue(),index:this._index})},updateGraphics:function(){Interface.utils.PIXIValueStepperWithSlider.superclass.updateGraphics.apply(this,arguments)},updateDimensions:function(){var b=(this._valueTextCustomWidth===undefined)?this.valueTextMaxWidth:this._valueTextCustomWidth;var a=(b-this.valueTextField.width);this.valueTextField.x=this.minusButton.width+this._gap+(a/2);this.valueTextField.y=(this.minusButton.height-this.valueTextField.height)/2;this.plusButton.x=this.minusButton.width+this._gap+b+this._gap;this.shouldUpdateDimensions=false;this.slider.x=(this.width-this.slider.width)/2;this.slider.y=this.minusButton.height+this._gap;this.shouldUpdateDimensions=false},setEnabled:function(a){Interface.utils.PIXIValueStepperWithSlider.superclass.setEnabled.apply(this,arguments);this.slider.setEnabled(a)},setIndex:function(a){Interface.utils.PIXIValueStepperWithSlider.superclass.setIndex.apply(this,arguments);this.slider.setIndex(a)},setValues:function(a){Interface.utils.PIXIValueStepperWithSlider.superclass.setValues.apply(this,arguments);this.slider.setValues(a)}};Interface.utils.PIXIValueStepperWithSlider=Sys.extend(Interface.utils.PIXIValueStepper,Interface.utils.PIXIValueStepperWithSlider,"Interface.utils.PIXIValueStepperWithSlider");Sys.ns("Interface.utils");Interface.utils.PIXIScrollContainer={SCROLL_SPEED:300,constructor:function(b){var a=this;if(Sys.isDefined){a.maxHeight=b}else{a.maxHeight=0}Interface.utils.PIXIScrollContainer.superclass.constructor.apply(a,arguments);a.initScrollContainer()},initScrollContainer:function(){var a=this;a.isScrollContainer=true;a.contentHeight=0;a.contentWidth=0;a.scrollBarContentMargin=0;a.scrollBarSize=10;a.scrollBarColor=11184810;a.scrollBarAlpha=1;a.scrollSliderColor=2105376;a.scrollSliderAlpha=1;a.touchStartPositionY=0;a.bottomPadding=0;a.scrollBar=new PIXI.Container();a.scrollBar.isScrollBar=true;a.scrollBarGraphics=new PIXI.Graphics();a.scrollBarGraphics.beginFill(a.scrollBarColor,a.scrollBarAlpha);a.scrollBarGraphics.drawCircle(0,a.scrollBarSize,a.scrollBarSize);a.scrollBarGraphics.endFill();a.scrollBar.addChild(a.scrollBarGraphics);a.scrollBar.visible=false;a.scrollBar.interactive=true;a.scrollSlider=new PIXI.Container();a.scrollSlider.isScrollSlider=true;a.scrollSliderGraphics=new PIXI.Graphics();a.scrollSliderGraphics.beginFill(a.scrollSliderColor,a.scrollSliderAlpha);a.scrollSliderGraphics.drawCircle(0,a.scrollBarSize,a.scrollBarSize);a.scrollSliderGraphics.drawRect(-a.scrollBarSize,a.scrollBarSize,a.scrollBarSize*2,a.maxHeight-a.scrollBarSize*2);a.scrollSliderGraphics.drawCircle(0,a.maxHeight-a.scrollBarSize*2,a.scrollBarSize);a.scrollSliderGraphics.endFill();a.scrollSlider.addChild(a.scrollSliderGraphics);a.scrollSlider.visible=false;a.scrollSlider.interactive=true;a.mask=new PIXI.Graphics();a.mask.beginFill();a.mask.drawRect(0,0,1,a.maxHeight);a.mask.endFill();a.mask.isMask=true;a.addChild(a.mask);a.addChild(a.scrollSlider);a.addChild(a.scrollBar);a.setupEvents();a.interactive=true},setupEvents:function(){var a=this;a.addEventListener("notify:userInputManager.userInputScroll",a.mouseWheel.bind(a));a.scrollBar.on("touchstart",a.touchStartScrollBar.bind(a));a.scrollBar.on("touchmove",a.touchMoveScrollBar.bind(a));a.scrollBar.on("touchend",a.touchEndScrollBar.bind(a));a.scrollSlider.on("touchstart",a.touchStartScrollBar.bind(a));a.scrollSlider.on("touchend",a.touchEndScrollBar.bind(a));window.addEventListener("click",a.mouseUp.bind(a));a.scrollBar.on("mousemove",a.mouseMove.bind(a));a.scrollBar.on("mousedown",a.mouseDown.bind(a));a.scrollSlider.on("mousemove",a.mouseMove.bind(a));a.scrollSlider.on("mousedown",a.mouseDown.bind(a))},updateScrollContainer:function(){var d=this,c,b,a=false;b=d.forcedHeight||d.getChildrenMaxHeight();c=d.forcedWidth||d.getChildrenMaxWidth();b+=d.bottomPadding;if(b>d.maxHeight){a=true}if(a){d.scrollBar.visible=true;d.scrollBar.updateTransform();d.scrollSlider.visible=true;d.scrollSlider.updateTransform()}d.scrollBarGraphics.clear();d.scrollSliderGraphics.clear();if(!Sys.isDefined(d.scrollBar.sprite)){d.scrollBarGraphics.beginFill(d.scrollBarColor,d.scrollBarAlpha);d.scrollBarGraphics.drawCircle(0,d.scrollBarSize,d.scrollBarSize);d.scrollBarGraphics.endFill();d.scrollBar.position.x=c-d.scrollBar.width+d.scrollBarContentMargin}else{d.scrollBar.position.x=c-d.scrollBar.width+d.scrollBarContentMargin}d.scrollSliderGraphics.beginFill(d.scrollSliderColor,d.scrollSliderAlpha);d.scrollSliderGraphics.drawCircle(0,d.scrollBarSize,d.scrollBarSize);d.scrollSliderGraphics.drawRect(-d.scrollBarSize,d.scrollBarSize,d.scrollBarSize*2,d.maxHeight-d.scrollBarSize*2);d.scrollSliderGraphics.drawCircle(0,d.maxHeight-d.scrollBarSize,d.scrollBarSize);d.scrollSliderGraphics.endFill();d.contentHeight=b;d.contentWidth=c+d.scrollBarContentMargin;d.scrollSlider.position.x=c-d.scrollBar.width+d.scrollBarContentMargin;d.mask.beginFill();d.mask.drawRect(0,0,c+d.scrollBarContentMargin,d.maxHeight);d.mask.endFill();d.children.sort(function(f,e){if(f.isScrollBar){return true}else{return f.isScrollSlider&&!e.isScrollBar}})},updateContent:function(d){if(!this.isActive()){return}var b=this,c=(b.contentHeight-b.maxHeight)/(b.maxHeight-b.scrollBar.height)*d;for(var a=0;a<b.children.length;++a){if(!Sys.isDefined(b.children[a].isScrollBar)&&!Sys.isDefined(b.children[a].isScrollSlider)&&!Sys.isDefined(b.children[a].isMask)){b.children[a].position.y=b.children[a].offsetY-c}}},updateScrollBarByMousePosition:function(c){if(!this.isActive()||!this.scrollActive){return}var b=this,a=document.getElementsByTagName("canvas")[0];b.moveScrollBar(b.getMousePosition(a,c).y);b.updateContent(b.scrollBar.position.y)},updateScrollBarByScrollPosition:function(f){if(!this.isActive()){return}var d=this,a=document.getElementsByTagName("canvas")[0],h=d.getMousePosition(a,f),b=d.scrollContainerToGlobalPosition(0,d.scrollBar.position.y).y,c=d.SCROLL_SPEED/d.contentHeight,g=f.deltaY||f.detail/3*100;h=d.globalToScrollContainerPosition(h.x,h.y);if(h.x>0&&h.x<d.contentWidth&&h.y>0&&h.y<d.maxHeight){d.moveScrollBar(b+g*c);d.updateContent(d.scrollBar.position.y)}},updateScrollBarByTouch:function(d){var c=this,b=c.scrollContainerToGlobalPosition(0,c.scrollBar.position.y).y,a=c.touchStartPositionY-d.data.global.y;c.touchStartPositionY-=a;c.moveScrollBar(b+a/5);c.updateContent(c.scrollBar.position.y)},moveScrollBar:function(d){var c=this,e=c.globalToScrollContainerPosition(0,d).y,b=c.scrollActive?-c.scrollBar.height/2:0,a=c.scrollActive?0:-c.scrollBar.height/2;if(d<=c.position.y+c.maxHeight-c.scrollBar.height/2+a&&d>=c.position.y+c.scrollBar.height/2+a){c.scrollBar.position.y=e+b}else{if(d>c.position.y+c.maxHeight-c.scrollBar.height/2+a){c.scrollBar.position.y=c.maxHeight-c.scrollBar.height}else{if(d<c.position.y+c.scrollBar.height/2+a){c.scrollBar.position.y=0}}}},isActive:function(){if(!this.visible){return false}if(Sys.isDefined(this.parent)){return this.parent.visible}return true},addChild:function(c,a){if(!Sys.isDefined(a)){a=true}var b=this;Interface.utils.PIXIScrollContainer.superclass.addChild.apply(b,[c]);c.offsetY=c.position.y;if(a){b.updateScrollContainer()}},useScrollBarSprite:function(a){this.scrollBar.addChild(a);this.scrollBar.sprite=a;a.anchor.x=0.5},mouseMove:function(a){this.updateScrollBarByMousePosition(a)},touchStartScrollBar:function(a){this.scrollActive=true;this.updateScrollBarByMousePosition(a);a.stopPropagation()},touchMoveScrollBar:function(a){this.updateScrollBarByMousePosition(a);if(this.scrollActive){a.stopPropagation()}},touchEndScrollBar:function(a){this.scrollActive=false;a.stopPropagation()},touchStart:function(a){this.scrollActive=false;this.touchStartPositionY=a.data.global.y},touchMove:function(a){this.updateScrollBarByTouch(a)},touchEnd:function(a){this.scrollActive=false},mouseDown:function(a){this.scrollActive=true;this.updateScrollBarByMousePosition(a)},mouseUp:function(){this.scrollActive=false},mouseWheel:function(b,a){this.updateScrollBarByScrollPosition(a)},getMousePosition:function(a,c){var b=a.getBoundingClientRect();if(c.clientX){return{x:Math.floor((c.clientX-b.left)/(b.right-b.left)*a.width),y:Math.floor((c.clientY-b.top)/(b.bottom-b.top)*a.height)}}else{if(c.data.originalEvent.clientX){return{x:Math.floor((c.data.originalEvent.clientX-b.left)/(b.right-b.left)*a.width),y:Math.floor((c.data.originalEvent.clientY-b.top)/(b.bottom-b.top)*a.height)}}else{return{x:Math.floor((c.data.originalEvent.touches[0].pageX-b.left)/(b.right-b.left)*a.width/0.75),y:Math.floor((c.data.originalEvent.touches[0].pageY-b.top)/(b.bottom-b.top)*a.height/0.75)}}}},globalToScrollContainerPosition:function(a,b){return new PIXI.Point(a-this.position.x,b-this.position.y)},scrollContainerToGlobalPosition:function(a,b){return new PIXI.Point(a+this.position.x,b+this.position.y)},setScrollBarSize:function(a){this.scrollBarSize=a;this.updateScrollContainer()},setMaxHeight:function(a){this.maxHeight=a;this.updateScrollContainer()},setScrollBarContentMargin:function(a){this.scrollBarContentMargin=a;this.updateScrollContainer()},setScrollBarColor:function(a){this.scrollBarColor=a;this.updateScrollContainer()},setScrollSliderColor:function(a){this.scrollSliderColor=a;this.updateScrollContainer()},forceWidth:function(a){this.forcedWidth=a;this.updateScrollContainer()},forceHeight:function(a){this.forcedHeight=a;this.updateScrollContainer()},setBottomPadding:function(a){this.bottomPadding=a;this.updateScrollContainer()},getChildrenMaxHeight:function(b,a){if(!Sys.isDefined(b)){b=this}if(Sys.isDefined(b.children)&&b.children.length!==0&&!this.isScrollContainerOwnProperty(b)){if(!Sys.isDefined(a)){a=0}var f=this,e=b.children;for(var d=0;d<e.length;++d){a=this.getChildrenMaxHeight(e[d],a);var c=!b.isScrollContainer?b.position.y:0;if(c+e[d].position.y+e[d].height>a&&!f.isScrollContainerOwnProperty(e[d])&&!e[d].noHeight){a=c+e[d].position.y+e[d].height}}}return a},getChildrenMaxWidth:function(a,f){if(!Sys.isDefined(a)){a=this}if(Sys.isDefined(a.children)&&a.children.length!==0&&!this.isScrollContainerOwnProperty(a)){if(!Sys.isDefined(f)){f=0}var e=this,d=a.children;for(var c=0;c<d.length;++c){f=this.getChildrenMaxWidth(d[c],f);var b=!a.isScrollContainer?a.position.x:0;if(b+d[c].position.x+d[c].width>f&&!e.isScrollContainerOwnProperty(d[c])&&!d[c].noWidth){f=b+d[c].position.x+d[c].width}}}return f},addEventListener:function(g,f){var e=this,a=Resources.readData("config"),d=Sys.isDefined(a)&&Sys.isDefined(a.eventHandler)?a.eventHandler:EventHandler,c;d.addListener(e,g);c=d.EVENTS[g];for(var b=0;b<c.length;++b){if(c[b]===e){c[b].handlers={};c[b].handlers[g]=f}}},isScrollContainerOwnProperty:function(a){return a.isScrollBar||a.isScrollSlider||a.isMask},excludeFromWidthMeasure:function(a){for(var b=0;b<a.length;++b){a[b].noWidth=true}},excludeFromHeightMeasure:function(a){for(var b=0;b<a.length;++b){a[b].noHeight=true}}};Interface.utils.PIXIScrollContainer=Sys.extend(PIXI.Container,Interface.utils.PIXIScrollContainer,"Interface.utils.PIXIScrollContainer");Sys.ns("Animation");Animation.DesaturationFilter={constructor:function(){PIXI.AbstractFilter.call(this,null,"precision mediump float;varying vec2 vTextureCoord;uniform float delta;uniform float alpha;uniform sampler2D uSampler;void main(void){   vec4 color = texture2D(uSampler, vTextureCoord);   color.rgb = mix(color.rgb, vec3(0.2126*color.r + 0.7152*color.g + 0.0722*color.b), delta);   color.a = color.a * alpha;   gl_FragColor = color;}",{delta:{type:"1f",value:1},alpha:{type:"1f",value:1}})}};Animation.DesaturationFilter=Sys.extend(Sys.Observable,Animation.DesaturationFilter,"Animation.DesaturationFilter");Animation.DesaturationFilter.prototype=Object.create(PIXI.AbstractFilter.prototype);Object.defineProperties(Animation.DesaturationFilter.prototype,{delta:{get:function(){return this.uniforms.delta.value},set:function(a){this.uniforms.delta.value=a}},alpha:{get:function(){return this.uniforms.alpha.value},set:function(a){this.uniforms.alpha.value=a}}});Sys.override(Interface.SettingsWindowDesktopView,{showChild:function(a){if(a==="paytable"){this.container.el.style.visibility="hidden"}else{this.container.el.style.visibility="visible"}this.setTitle(this.model.getChildConfig(a).title)}});Sys.ns("Warlords");Warlords.StackedFakeReelFiller={constructor:function(a){var b=this;Warlords.StackedFakeReelFiller.superclass.constructor.apply(b,arguments)},getSymbol:function(f,b,a){var d=this,c=f[b];if(a===false){var e=c.indexOf("_")!==-1;if(e){b=++b%f.length;return d.getSymbol(f,b,a)}}b=++b%f.length;return{symbol:d.wrapSymbol(c),stripIndex:b}},fill:function(g){var r=this,k,e,m,f=r.reelPositions,s=r.workspace.symbolConstants,h=[s.any,s.fakeReel,s.lowWin],b,q;for(k=-1;++k<g.length;){m=g[k];var l=r.workspace.symbolsBeforeOutcome[k];var p=r.workspace.outcomeInsertedOnReel[k];if(!r.slotsLeftInPipe(m,h)){continue}b=r.reelStrips[k];q=f[k];for(e=-1;++e<m.length;){var a=m[e];if(h.contains(a)){var c=a>-3&&l>4;if(c===false&&p===false){var d=(q-1);if(d<0){d=b.length-1}var o=b[d];if(Warlords.Utils.isSymbolTypeOfSecondOrThirdStackedType(o)){c=true}}var n=this.getSymbol(b,q,c);m[e]=n.symbol;q=n.stripIndex}}f[k]=q}return false},setReelSet:function(d){var c=this,a=Resources.readData("config").reelSets,b=Sys.isDefined(a[d])?a[d]:a.basic;Warlords.Utils.renameStackedSymbolNamesOnReelSet(b.fakeReels);if(Sys.isDefined(b)){c.reelStrips=b.fakeReels;c.reelPositions=Sys.utils.initArray(c.reelStrips.length,0)}}};Warlords.StackedFakeReelFiller=Sys.extend(Core.Slots.SimpleFakeReelFiller,Warlords.StackedFakeReelFiller,"Warlords.StackedFakeReelFiller");Sys.ns("Warlords");Warlords.StackedOutcomeFiller={STACKED_SYMBOL_LENGTH:3,constructor:function(a){Warlords.StackedOutcomeFiller.superclass.constructor.apply(this,arguments)},fill:function(p,l){var v=this,s,t=v.workspace,b,u=t.currentOutcome,e=0,h,f,q,c=false;if(!Sys.isDefined(u)){return v.slotsLeftInBuffer(p)}for(s=-1;++s<p.length;){h=p[s];if(!v.slotsLeftInPipe(h,[t.symbolConstants.any])){continue}b=t.symbolsBeforeOutcome[s];if(b>=h.length||!v.hasInsertedPreviousOutcome(s)){break}if(t.outcomeInsertedOnReel[s]){continue}f=u[s].symbols.slice(0);q=v.findOutcomeStart(v.analyzePipeBuffer(h,l,[t.symbolConstants.any]),f.length,Math.max(e,b));if(q>=0){var a=v.wrapSymbols(f);for(var g=0;g<a.length;g++){var d=a[g];d.symbolIndex=g}v.fillSlots(a.reverse(),h,q);var n=v.checkForSplitStackedSymbolsAndAddWhatsMissing(h,q);Warlords.Utils.renameStackedSymbolsOnPipeBuffer(h);if(n>0){for(var r=s+1;r<p.length;r++){var m=p[r];for(var o=0;o<n;o++){m.splice(0,0,-3)}v.workspace.symbolsBeforeOutcome[r]+=n}q+=n;v.workspace.symbolsBeforeOutcome[s]+=n}t.outcomeInsertedOnReel[s]=true;c=true;e=q}}return(c&&!l)?v.evenBuffer(p):v.slotsLeftInBuffer(p)},checkForSplitStackedSymbolsAndAddWhatsMissing:function(f,a){var h=this,l;var e=0;var b=a;for(var d=0;d<f.length;d++){var g=f[d];if(Warlords.Utils.isStackedSymbol(g)){e++;l=g.symbol;if(d===(f.length-1)){b=f.length}}}if(e>0){var k=h.STACKED_SYMBOL_LENGTH-e;for(var c=0;c<k;c++){f.splice(b,0,{isOutcomeSymbol:false,symbol:l})}if(b<=a){return k}}return 0},findOutcomeStart:function(e,g,d){var b,f,a,c;for(c=-1;++c<e.length;){b=e[c];if(b.start>=d){f=b.start;a=b.length}else{f=d;a=b.length-(d-b.start)}if(a>=g){return f}}return -1}};Warlords.StackedOutcomeFiller=Sys.extend(Core.Slots.SimpleOutcomeFiller,Warlords.StackedOutcomeFiller,"Warlords.StackedOutcomeFiller");Sys.ns("Warlords");Warlords.ResponseParserController={constructor:function(){Warlords.ResponseParserController.superclass.constructor.apply(this,arguments)},parseServerResponse:function(e){var c=this,d=Core.Slots.ResponseParserController.superclass.parseServerResponse.call(c,e),b;if(d.gamestate){d.currentGameState=c.getCurrentGameState(d)}if(d.rs){b=this.parseReelInfo(d);d.reelInfo=b;d.nearWinList=this.parseNearWin(d);var a=d.win&&d.win.cap.reached;if(a){d.wins=c.parseWinSituationsWithoutCoinAndCents(d,b);d.wins.cents=d.freespins.win.cents;d.wins.coins=d.freespins.win.coins;d.wins.centsTotal=d.totalwin.cents;d.wins.coinsTotal=d.totalwin.coins;d.wins.winType=c.setWinType(d.wins.coins,Services.moneyManager.getBetCoins())}else{if(d.ws){d.wins=c.parseWinSituations(d,b);d.wins.winType=c.setWinType(d.wins.coins,Services.moneyManager.getBetCoins());d.wins.centsTotal=d.totalwin.cents;d.wins.coinsTotal=d.totalwin.coins}else{if(Sys.isDefined(d.totalwin)){d.wins={centsTotal:d.totalwin.cents,coinsTotal:d.totalwin.coins}}}}}else{if(Sys.isDefined(d.totalwin)){d.wins={centsTotal:d.totalwin.cents,coinsTotal:d.totalwin.coins}}}return d},parseWinSituationsWithoutCoinAndCents:function(b,c){var d=0,a=[],e;if(b.ws){while(b.ws["i"+d]){a.push(b.ws["i"+d]);d++}}e=this.parseWinLayoutsWithoutCoinsAndCents(a,c);this.doGameSpecificWinSituationParsing(e,a);return e},parseWinLayoutsWithoutCoinsAndCents:function(a,f){var b,g,c,d=[],i,j=0,h=0,e=0;for(b=0;b<a.length;b++){d.push({betline:Sys.isNumber(a[b].betline)?a[b].betline+1:undefined,positions:[],reelset:a[b].reelset,wins:{}});if(Sys.isDefined(a[b].pos)){for(g=0;Sys.isDefined(a[b].pos["i"+g]);g++){i={};i.reelIndex=a[b].pos["i"+g][0];i.symbolIndex=a[b].pos["i"+g][1];i=Sys.apply(i,f[i.reelIndex].symbols[i.symbolIndex]);d[b].positions.push(i)}d[b].positions.sort(this.sortSymbols)}for(c=0;Sys.isDefined(a[b].types["i"+c])&&Sys.isDefined(a[b].types["i"+c].wintype);c++){d[b].wins.type=a[b].types["i"+c].wintype;if(a[b].types["i"+c].wintype==="coins"){d[b].wins.coins=a[b].types["i"+c].coins;d[b].wins.cents=a[b].types["i"+c].cents;j+=a[b].types["i"+c].coins;h+=a[b].types["i"+c].cents}else{if(a[b].types["i"+c].wintype==="freespins"){d[b].wins.freespins=a[b].types["i"+c].freespins;e+=a[b].types["i"+c].freespins}else{}}}}d.sort(this.sortWinSituations);return{winSituations:d,freespins:e}}};Warlords.ResponseParserController=Sys.extend(Core.Slots.ResponseParserController,Warlords.ResponseParserController,"Warlords.ResponseParserController");Sys.ns("Warlords");Warlords.AudioPlayer={constructor:function(){Warlords.AudioPlayer.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){if(Platform.hasWebAudioContext){return{model:Core.Audio.AudioPlayerModel,view:Warlords.AudioPlayerView,controller:Warlords.AudioPlayerController}}else{return{model:Core.Audio.AudioPlayerModel,view:Core.Audio.Legacy.LegacyAudioPlayerView,controller:Core.Audio.AudioPlayerController}}}};Warlords.AudioPlayer=Sys.extend(Core.Audio.AudioPlayer,Warlords.AudioPlayer,"Warlords.AudioPlayer");Sys.ns("Warlords");Warlords.AudioPlayerController={init:function(){var a=this;Core.Audio.AudioPlayerController.superclass.init.apply(a,arguments);a.soundsToLoadOnEnable=["main","freespin"];if(Sys.isDefined(Resources.readData("preloadedAudio"))){a.model.storeData("hasPreloadedAudio",true);a.view.decodePreloadedAudio()}else{setTimeout(function(){a.fireEvent("notify:audioPlayer.ready")},0);a.model.storeData("hasPreloadedAudio",false)}},handleLoadError:function(b,a){}};Warlords.AudioPlayerController=Sys.extend(Core.Audio.AudioPlayerController,Warlords.AudioPlayerController,"Warlords.AudioPlayerController");Sys.ns("Warlords");Warlords.AudioPlayerView={constructor:function(){Warlords.AudioPlayerView.superclass.constructor.apply(this,arguments)},checkAPICompability:function(a){var h=this,b=h.model.readData("clips"),i=a,f,d,j=true;if(Sys.isDefined(b[a])){var c=Object.keys(b[a]);i=c[c.length-1];d=a}f=h.setUpSource({name:i,volume:0,buffer:d});try{f.source.noteGrainOn(0,0);f.source.noteOff(h.context.currentTime)}catch(g){j=false}h.canPlayWithoutDuration=j}};Warlords.AudioPlayerView=Sys.extend(Core.Audio.AudioPlayerView,Warlords.AudioPlayerView,"Warlords.AudioPlayerView");EnvironmentAnimations={};EnvironmentAnimations.Soldier=function(){var a=this;a.container=new PIXI.Container();a.soldierAnimation=Game.PIXIFactory.createAndAddSpineAnimation("soldierAnimation",a.container);a.onComplete=function(){}};EnvironmentAnimations.Soldier.prototype.constructor=EnvironmentAnimations.Soldier;EnvironmentAnimations.Soldier.prototype.play=function(){var a=this;Game.PIXIUtils.resetSpineAnimation(a.soldierAnimation);a.soldierAnimation.state.setAnimationByName(0,"animation",false);a.soldierAnimation.state.onComplete=function(){a.onComplete()}};EnvironmentAnimations.Soldier.prototype.addTo=function(a){a.addChild(this.container)};EnvironmentAnimations.Soldier.prototype.removeFrom=function(a){this.soldierAnimation.state=null;this.container.removeChild(this.soldierAnimation);a.removeChild(this.container)};EnvironmentAnimations.Soldier.prototype.show=function(){Warlords.Utils.show(this.container)};EnvironmentAnimations.Soldier.prototype.hide=function(){Warlords.Utils.hide(this.container)};Object.defineProperty(EnvironmentAnimations.Soldier.prototype,"position",{get:function(){return this.container.position},set:function(a){this.container.position=a}});Object.defineProperty(EnvironmentAnimations.Soldier.prototype,"position.x",{get:function(){return this.container.position.x},set:function(a){this.container.position.x=a}});Object.defineProperty(EnvironmentAnimations.Soldier.prototype,"position.y",{get:function(){return this.container.position.y},set:function(a){this.container.position.y=a}});Object.defineProperty(EnvironmentAnimations.Soldier.prototype,"filters",{set:function(a){this.soldierAnimation.filters=a}});Sys.ns("Warlords");Warlords.EnvironmentAnimations={constructor:function(){Warlords.EnvironmentAnimations.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation","serverResponse","trigger","orientation"]},getDefaultMVCClasses:function(){return{controller:Game.BackgroundController,view:Game.BackgroundView,model:Game.BackgroundView}}};Warlords.EnvironmentAnimations=Sys.extend(Game.Background,Warlords.EnvironmentAnimations,"Warlords.EnvironmentAnimations");Sys.ns("Warlords");Warlords.EnvironmentAnimationsView={MAINGAME_BACKGROUND_IMAGE:"",FRESSPIN_BACKGROUND_IMAGE_1:"freespinBackground1",FRESSPIN_BACKGROUND_IMAGE_2:"freespinBackground2",FRESSPIN_BACKGROUND_IMAGE_3:"freespinBackground3",FREESPIN_CHARACTER_IMAGE_1:"freespinBackgroundCharacter1",FREESPIN_FOG_IMAGE_1:"freespinBackgroundfog1",FREESPIN_CHARACTER_IMAGE_2:"freespinBackgroundCharacter2",FREESPIN_FOG_IMAGE_2:"freespinBackgroundfog2",FREESPIN_CHARACTER_IMAGE_3:"freespinBackgroundCharacter3",FREESPIN_FOG_IMAGE_3:"freespinBackgroundfog3",SOLDIER_SPAWN_FREQUENCY:1600,SOLDIER_SPAWN_Y:[-50,-30,-10,10],PORTRAIT_SCALE:2,STONE_TIME_SCALE:1,constructor:function(){Warlords.EnvironmentAnimationsView.superclass.constructor.apply(this,arguments);this.initialized=false},setupEvents:function(){var a=this;a.on({"model:stateChanged":a.onStateChanged})},onPortrait:function(){},onLandscape:function(){},initAnimations:function(){var d=this;d.maingameBGContainer=new PIXI.Container();d.maingameBGContainer.name="maingameBGContainer";d.maingameBGContainer.visible=false;this.createMaingameBackgroundImage(d.maingameBGContainer);this.createMaingameBackgroundAnimations(d.maingameBGContainer);d.freespinBGContainer=new PIXI.Container();d.freespinBGContainer.name="freespinBGContainer";d.freespinBGContainer.visible=false;d.freespinBGCharacterContainer=new PIXI.Container();d.freespinBGCharacterContainer.name="freespinBGCharacterContainer";d.freespinBGCharacterContainer.visible=false;this.createFreespinBackgroundImage(d.freespinBGContainer,d.freespinBGCharacterContainer);this.createFreespinBackgroundAnimations(d.freespinBGContainer);this.createRespinAnimations();d.effectContainer=new PIXI.Container();this.createEffectLayer(d.effectContainer);d.soldierContainer=new PIXI.Container();d.soldierPositions=[];d.spawnedSoldiers=[];d.fog=new PIXI.Container();Game.PIXIFactory.createAndAddSprite("soldierFog",d.fog);d.fog.position=new PIXI.Point(450,470);d.fog.scale=new PIXI.Point(6,5.42637073170732);var b=Game.stage.view.animationManager.getLayer("background");b.addChild(d.maingameBGContainer);b.addChild(d.freespinBGContainer);b.addChild(d.freespinBGCharacterContainer);var c=Game.stage.view.animationManager.getLayer("soldiers");c.addChild(d.soldierContainer);c.addChild(d.fog);var a=Game.stage.view.animationManager.getLayer("bgEffect");a.addChild(d.effectContainer);d.totalDarknessFilter=new Warlords.TotalDarknessFilter();d.totalDarknessFilter.delta=0;d.soldierDarkenAnimation=Warlords.Utils.createAnimation(d.totalDarknessFilter,"delta",0,0.6,2000);d.soldierLightenAnimation=Warlords.Utils.createAnimation(d.totalDarknessFilter,"delta",0.6,0,2000);this.initialized=true;d.update(d.model.state,{});d.mode=null;d.createWhiteOutAnimation(Game.stage.view.animationManager.getLayer("whiteOutLayer"))},createEffectLayer:function(a){this.haze=Game.PIXIFactory.createAndAddSprite("backgroundHaze",a);this.haze.scale=new PIXI.Point(2,2)},createWhiteOutAnimation:function(b){var c=this;var a=new PIXI.Graphics();a.beginFill(16777215,1);a.drawRect(0,0,1280,720);a.endFill();b.addChild(a);a.alpha=0;c.whiteoutAnimation=new Animation.Holder({target:a});Game.stage.view.animationManager.addToAnimationLoop(c.whiteoutAnimation)},playWhiteOutAnimation:function(b){var a=this;a.whiteoutAnimation.animate([{time:1,value:{alpha:0}},{time:100,value:{alpha:b}},{time:350,value:{alpha:0}}]);a.whiteoutAnimation.play()},createMaingameBackgroundImage:function(a){var b=this;b.maingameBGSprite=Game.PIXIFactory.createAndAddSprite(this.MAINGAME_BACKGROUND_IMAGE,a);b.maingameBGSprite.fadeAnimation=new Animation.Holder({target:b.maingameBGSprite});Game.stage.view.animationManager.addToAnimationLoop(b.maingameBGSprite.fadeAnimation);a.addChild(b.maingameBGSprite)},createFreespinBackgroundImage:function(a,c){var b=this;b.freespinBGSprite=Game.PIXIFactory.createAndAddSprite(this.FRESSPIN_BACKGROUND_IMAGE_1,a);b.freespinBGSpriteFog=Game.PIXIFactory.createAndAddSprite(this.FREESPIN_FOG_IMAGE_1,c);b.freespinBGSpriteFog.scale.x=b.PORTRAIT_SCALE;b.freespinBGSpriteFog.scale.y=b.PORTRAIT_SCALE;b.freespinBGSpriteCharacter=Game.PIXIFactory.createAndAddSprite(this.FREESPIN_CHARACTER_IMAGE_1,c);b.freespinBGSprite.fadeAnimation=new Animation.Holder({target:b.freespinBGSprite});b.freespinBGSpriteFog.fadeAnimation=new Animation.Holder({target:b.freespinBGSpriteFog});b.freespinBGSpriteCharacter.fadeAnimation=new Animation.Holder({target:b.freespinBGSpriteCharacter});Game.stage.view.animationManager.addToAnimationLoop(b.freespinBGSprite.fadeAnimation);Game.stage.view.animationManager.addToAnimationLoop(b.freespinBGSpriteFog.fadeAnimation);Game.stage.view.animationManager.addToAnimationLoop(b.freespinBGSpriteCharacter.fadeAnimation);a.addChild(b.freespinBGSprite);c.addChild(b.freespinBGSpriteFog);c.addChild(b.freespinBGSpriteCharacter)},removeBackgroundCharacter:function(){var a=this;a.freespinBGCharacterContainer.visible=false},activateBackgroundCharacters:function(){var a=this;a.freespinBGCharacterContainer.visible=true},createMaingameBackgroundAnimations:function(a){var b=this;b.maingameBGIdleAnimations=Game.PIXIFactory.createAndAddSpineAnimation("maingameBGAnimations",a);b.maingameBGIdleAnimations.name="maingameBGIdleAnimations";b.maingameBGIdleAnimations.fadeAnimation=new Animation.Holder({target:b.maingameBGIdleAnimations});Game.stage.view.animationManager.addToAnimationLoop(b.maingameBGIdleAnimations.fadeAnimation);b.maingameBGWinAnimations=Game.PIXIFactory.createAndAddSpineAnimation("maingameBGWinAnimations",a);b.maingameBGWinAnimations.name="maingameBGWinAnimations";b.maingameBGWinAnimations.visible=false;a.addChild(b.maingameBGIdleAnimations);a.addChild(b.maingameBGWinAnimations)},createFreespinBackgroundAnimations:function(a){var b=this;b.freespinOneBGWinAnimations=Game.PIXIFactory.createAndAddSpineAnimation("fs1BGAnimations",a);b.freespinOneBGWinAnimations.name="freespinOneBGWinAnimations";b.freespinOneBGIdleAnimation=Game.PIXIFactory.createAndAddSpineAnimation("fs1BGAnimations",a);b.freespinOneBGIdleAnimation.name="freespinOneBGIdleAnimation";b.freespinTwoBGWinAnimations=Game.PIXIFactory.createAndAddSpineAnimation("fs2BGAnimations",a);b.freespinTwoBGWinAnimations.name="freespinTwoBGWinAnimations";b.freespinTwoBGIdleAnimation=Game.PIXIFactory.createAndAddSpineAnimation("fs2BGAnimations",a);b.freespinTwoBGIdleAnimation.name="freespinTwoBGIdleAnimation";b.freespinThreeBGWinAnimations=Game.PIXIFactory.createAndAddSpineAnimation("fs3BGAnimations",a);b.freespinThreeBGWinAnimations.name="freespinThreeBGWinAnimations";b.freespinThreeBGIdleAnimation=Game.PIXIFactory.createAndAddSpineAnimation("fs3BGAnimations",a);b.freespinThreeBGIdleAnimation.name="freespinThreeBGIdleAnimation";Warlords.Utils.hide(b.freespinOneBGWinAnimations);Warlords.Utils.hide(b.freespinOneBGIdleAnimation);Warlords.Utils.hide(b.freespinTwoBGWinAnimations);Warlords.Utils.hide(b.freespinTwoBGIdleAnimation);Warlords.Utils.hide(b.freespinThreeBGWinAnimations);Warlords.Utils.hide(b.freespinThreeBGIdleAnimation)},createRespinAnimations:function(){var a=this;a.respinDarkenAnimation=Game.PIXIFactory.createAndAddSpineAnimation("respinAnimations",a.maingameBGContainer);a.respinDarkenAnimation.visible=false;a.maingameBGContainer.addChild(a.respinDarkenAnimation);a.respinFadeoutAnimations=[];a.stoneHitShake=[];Warlords.Utils.createShakeAnimation([Game.stage.view.animationManager.getLayer("background")],a.stoneHitShake,2,15,30,true)},update:function(b,c){var a=this;if(a.initialized){if(b===this.model.IDLE_STATE){a.activateIdle()}else{if(b===this.model.NEARWIN_STATE){a.activateNearWin()}else{if(b===this.model.NEARWIN_END_STATE){a.activateNearWinEnd()}else{if(b===this.model.RESPIN_STATE){a.activateRespin()}else{if(b===this.model.FINAL_CHANCE){a.activateFinalChance()}else{if(b===this.model.FREESPIN_STATE){a.activateFreespin()}}}}}}}},activateIdle:function(){var a=this;a.mode="idle";if(a.activeContainer===a.maingameBGContainer){a.resetMainGameWinAnimations();a.setActiveBackgroundAlpha(1,true);a.setActiveAnimationsAlpha(1,true)}else{a.resetActiveFreespinBGWinAnimation();a.changeToMaingameBackgroundImage();a.activateMaingameBGAnimations();if(!Platform.isEdgeBrowser&&!Platform.isIEBrowser){a.activateSoldierAnimation()}a.setActiveBackgroundAlpha(1,false);a.setActiveAnimationsAlpha(1,false);a.setActiveContainer(a.maingameBGContainer);if(!Platform.isEdgeBrowser&&!Platform.isIEBrowser){a.activateHaze()}}a.removeBackgroundCharacter()},activateHaze:function(){Warlords.Utils.show(this.haze)},deactivateHaze:function(){Warlords.Utils.hide(this.haze)},activateNearWin:function(){var a=this;a.runDarkenAnimation()},activateNearWinEnd:function(){var a=this;a.runDarkenEndAnimation()},activateRespin:function(){var a=this;a.runRespinAnimation()},activateFreespin:function(){var b=this;b.mode="freespin";var a=b.model.readData("winningScatter");b.changeToFreespinBackgroundImage(a);b.activateFreespinBGAnimations(a);b.deactivateHaze();b.resetRespinAnimations();b.resetMainGameWinAnimations();b.resetSoldierAnimation();b.activateBackgroundCharacters();b.setActiveContainer(b.freespinBGContainer)},activateFinalChance:function(){var a=this;a.resetMainGameWinAnimations()},onStateChanged:function(a,b){this.update(a,b)},setActiveContainer:function(a){var b=this;if(b.activeContainer!==a){if(b.activeContainer){b.activeContainer.visible=false}a.visible=true;b.activeContainer=a}},activateSoldierAnimation:function(){var a=this;a.spawnSoldiers=true;Warlords.Utils.show(a.soldierContainer);Warlords.Utils.show(a.fog);this.runSoldierAnimations()},resetSoldierAnimation:function(){var b=this;b.spawnSoldiers=false;for(var a=0;a<b.spawnedSoldiers.length;++a){b.spawnedSoldiers[a].hide();b.spawnedSoldiers[a].removeFrom(b.soldierContainer)}b.spawnedSoldiers.length=0;clearInterval(b.soldierInterval);Warlords.Utils.hide(b.soldierContainer);Warlords.Utils.hide(b.fog)},setActiveBackgroundAlpha:function(c,a){var b=this;if(a){b.fadeItemTo(b.activeBackground,c)}else{b.activeBackground.alpha=c}},setActiveAnimationsAlpha:function(b){var a=this;a.fadeItemTo(a.activeBGIdleAnimations,b)},resetActiveBGAnimation:function(){var a=this;if(a.activeBGIdleAnimations&&a.activeBGIdleAnimations.isRunning){Game.PIXIUtils.resetSpineAnimation(a.activeBGIdleAnimations);a.activeBGIdleAnimations.visible=false;a.activeBGIdleAnimations.isRunning=false;a.activeBGIdleAnimations=undefined}},gameInFocus:function(){var a=this;if(!a.focus&&a.mode!=="freespin"){a.runSoldierAnimations()}a.spawnSoldiers=true;a.focus=true},gameNotInFocus:function(){var b=this;b.spawnSoldiers=false;for(var a=0;a<b.spawnedSoldiers.length;++a){b.spawnedSoldiers[a].hide();b.spawnedSoldiers[a].removeFrom(b.soldierContainer)}b.spawnedSoldiers.length=0;clearInterval(b.soldierInterval);b.focus=false},runSoldierAnimations:function(){var a=this;a.soldierInterval=setInterval(function(){a.runSoldierAnimation(new EnvironmentAnimations.Soldier(),0)},a.SOLDIER_SPAWN_FREQUENCY)},runSoldierAnimation:function(a,b,c){var d=c||this;setTimeout(function(){if(d.soldierPositions.length===0){d.soldierPositions=d.SOLDIER_SPAWN_Y.slice()}a.filters=[d.totalDarknessFilter];d.spawnedSoldiers.push(a);a.addTo(d.soldierContainer);var e=Warlords.Utils.randomInt(0,d.soldierPositions.length-1);a.position.x=d.soldierPositions[e];d.soldierPositions.splice(e,1);a.hide();a.play();a.show();a.onComplete=function(){setTimeout(function(){if(Sys.isDefined(a)){a.removeFrom(d.soldierContainer);d.spawnedSoldiers.splice(0,1)}},500)}},b)},runDarkenAnimation:function(){var a=this;Game.PIXIUtils.resetSpineAnimation(a.respinDarkenAnimation);a.respinDarkenAnimation.visible=true;a.respinDarkenAnimation.state.setAnimationByName(0,"darkenstart",false);a.soldierDarkenAnimation.play()},runDarkenEndAnimation:function(){var a=this;var b=a.respinDarkenAnimation.state.setAnimationByName(0,"darkenend",false);b.onComplete=function(){a.respinDarkenAnimation.visible=false};a.soldierLightenAnimation.play()},runRespinAnimation:function(a){var d=this,b;a=Sys.isDefined(a)?a:true;if(d.respinLoop){return}d.respinLoop=true;if(a){for(var c=0;c<6;++c){d.playStoneAnimation(c)}b=2000}else{d.playStoneAnimation(Warlords.Utils.randomInt(0,5));b=700}setTimeout(function(){d.respinAnimationLoop(d.respinLoop)},b);if(d.respinDarkenAnimation.visible===false){d.runDarkenAnimation()}},playStoneAnimation:function(a){var c=this,d=Game.PIXIFactory.createAndAddSpineAnimation("respinAnimations",c.maingameBGContainer);Game.PIXIUtils.resetSpineAnimation(d);var b=d.state.setAnimationByName(0,"stone"+(a+1),false);b.timeScale=c.STONE_TIME_SCALE;d.state.onEvent=function(f,g){if(g.data.name==="shake"&&c.respinLoop){c.stoneShake()}};d.state.onComplete=function(){setTimeout(function(){c.maingameBGContainer.removeChild(d)},100)}},resetRespinAnimations:function(){var a=this;a.respinLoop=false;a.runDarkenEndAnimation()},respinAnimationLoop:function(f,a){var d=this,c;if(!Sys.isDefined(a)){a=[-1,-1,-1]}do{c=Warlords.Utils.randomInt(0,5)}while(a.contains(c));a.push(c);a.splice(0,1);var e=Game.PIXIFactory.createAndAddSpineAnimation("respinAnimations",d.maingameBGContainer);Game.PIXIUtils.resetSpineAnimation(e);var b=e.state.setAnimationByName(0,"stone"+(c+1),false);b.timeScale=d.STONE_TIME_SCALE;e.state.onEvent=function(g,h){if(h.data.name==="shake"&&d.respinLoop){d.stoneShake()}};e.state.onComplete=function(){setTimeout(function(){d.maingameBGContainer.removeChild(e)},100)};if(!f){return}setTimeout(function(){if(d.respinLoop){d.respinAnimationLoop(d.respinLoop,a)}},700)},stoneShake:function(){this.stoneHitShake[0].play()},runBigWinEndAnimation:function(){},runSuperMegaWinAnimation:function(){},runMegaWinAnimation:function(){},runBigWinAnimation:function(){},runBigWinSkyColor:function(){},runMegaWinSkyColor:function(){},runSuperMegaWinSkyColor:function(){},runLargeWinAnimation:function(){var a=this;if(a.model.state==="freespin"){a.playFreespinBGWinAnimation("large")}else{a.playMainGameBGWinAnimation("LargeWin")}},runMediumWinAnimation:function(){var a=this;if(a.model.state==="freespin"){a.playFreespinBGWinAnimation("medium")}else{a.playMainGameBGWinAnimation("MedWin")}},runSmallWinAnimation:function(){var a=this;if(a.model.state==="freespin"){a.playFreespinBGWinAnimation("small")}else{a.playMainGameBGWinAnimation("smallWin")}},playFreespinBGWinAnimation:function(b){var a=this;a.activeFreespinBGWinAnimations.state.setAnimationByName(0,b,false);a.activeFreespinBGWinAnimations.visible=true;a.activeFreespinBGWinAnimations.state.onComplete=function(){a.activeFreespinBGWinAnimations.visible=false}},playMainGameBGWinAnimation:function(a){var b=this;b.maingameBGWinAnimations.state.setAnimationByName(0,a,false);b.maingameBGWinAnimations.visible=true;b.maingameBGWinAnimations.state.onComplete=function(){b.maingameBGWinAnimations.visible=false}},resetWinAndRespinAnimations:function(){var a=this;a.resetMainGameWinAnimations();a.resetActiveFreespinBGWinAnimation()},changeToMaingameBackgroundImage:function(){var a=this;a.activeBackground=a.maingameBGSprite},activateMaingameBGAnimations:function(){var b=this;b.resetActiveBGAnimation();if(Platform.isEdgeBrowser||Platform.isIEBrowser){b.maingameBGIdleAnimations.state.setAnimationByName(0,"animation");var a=b.maingameBGIdleAnimations.state.getCurrent(0);a.time=a.endTime}else{b.maingameBGIdleAnimations.state.setAnimationByName(0,"animation",true)}b.maingameBGIdleAnimations.isRunning=true;b.maingameBGIdleAnimations.visible=true;b.activeBGIdleAnimations=b.maingameBGIdleAnimations},resetMainGameWinAnimations:function(){var a=this;if(a.maingameBGWinAnimations&&a.maingameBGWinAnimations.visible){a.maingameBGWinAnimations.state.onComplete=function(){a.maingameBGWinAnimations.visible=false;Game.PIXIUtils.resetSpineAnimation(a.maingameBGWinAnimations)}}},changeToFreespinBackgroundImage:function(e){var d=this,c,f,b,a=Resources.readData("animationImages");switch(e){case"SYM13":c=a[d.FRESSPIN_BACKGROUND_IMAGE_1];b=a[d.FREESPIN_FOG_IMAGE_1];f=a[d.FREESPIN_CHARACTER_IMAGE_1];break;case"SYM14":c=a[d.FRESSPIN_BACKGROUND_IMAGE_2];b=a[d.FREESPIN_FOG_IMAGE_2];f=a[d.FREESPIN_CHARACTER_IMAGE_2];break;case"SYM15":c=a[d.FRESSPIN_BACKGROUND_IMAGE_3];b=a[d.FREESPIN_FOG_IMAGE_3];f=a[d.FREESPIN_CHARACTER_IMAGE_3];break}d.freespinBGSprite.texture=c;d.freespinBGSpriteFog.texture=b;d.freespinBGSpriteCharacter.position.y=25;d.freespinBGSpriteCharacter.texture=f;d.activeBackground=d.freespinBGSprite},activateFreespinBGAnimations:function(c){var b=this;b.resetActiveBGAnimation();switch(c){case"SYM13":b.activeFreespinBGWinAnimations=b.freespinOneBGWinAnimations;b.freespinBGIdleAnimation=b.freespinOneBGIdleAnimation;break;case"SYM14":b.activeFreespinBGWinAnimations=b.freespinTwoBGWinAnimations;b.freespinBGIdleAnimation=b.freespinTwoBGIdleAnimation;break;case"SYM15":b.activeFreespinBGWinAnimations=b.freespinThreeBGWinAnimations;b.freespinBGIdleAnimation=b.freespinThreeBGIdleAnimation;break}Game.PIXIUtils.resetSpineAnimation(b.freespinBGIdleAnimation);if(Platform.isEdgeBrowser||Platform.isIEBrowser){b.freespinBGIdleAnimation.state.setAnimationByName(0,"idle");var a=b.freespinBGIdleAnimation.state.getCurrent(0);a.time=a.endTime}else{b.freespinBGIdleAnimation.state.setAnimationByName(0,"idle",true)}b.freespinBGIdleAnimation.isRunning=true;Warlords.Utils.show(b.freespinBGIdleAnimation);b.activeBGIdleAnimations=b.freespinBGIdleAnimation},resetActiveFreespinBGWinAnimation:function(){var a=this;if(a.activeFreespinBGWinAnimations&&a.activeFreespinBGWinAnimations.visible){a.activeFreespinBGWinAnimations.state.onComplete=function(){a.activeFreespinBGWinAnimations.visible=false;Game.PIXIUtils.resetSpineAnimation(a.activeFreespinBGWinAnimations)}}},getContainersToShake:function(){return[Game.stage.view.animationManager.getLayer("background"),Game.stage.view.animationManager.getLayer("bigWinBackground")]},startBackgroundShake:function(d){var a=this;var c=a.getContainersToShake();var b=Warlords.Utils.createShakeAnimationWithDuration(c,2,d,30,true);b.onComplete=a.stopBackgroundShake.bind(a);b.play();a.shakeAnimation=b},stopBackgroundShake:function(){var a=this;if(a.shakeAnimation){if(a.shakeAnimation.running){a.shakeAnimation.stop();a.shakeAnimation.onEnd()}Game.stage.view.animationManager.removeFromAnimationLoop(a.shakeAnimation);a.shakeAnimation=undefined}},fadeItemTo:function(h,e,b,c,f,i){var a=b?b:500,g=c?c:0;if(h.alpha===e){return}var d={time:1,value:{alpha:h.alpha}};var j={time:a,value:{alpha:e}};if(f!==undefined){j.callback={func:f,scope:i}}h.fadeAnimation.animate([d,j]);h.fadeAnimation.delay=g;h.fadeAnimation.play()}};Warlords.EnvironmentAnimationsView=Sys.extend(Core.View,Warlords.EnvironmentAnimationsView,"Warlords.EnvironmentAnimationsView");Sys.ns("Warlords");Warlords.EnvironmentAnimationsViewMobile={MAINGAME_BACKGROUND_IMAGE:"background",FRESSPIN_BACKGROUND_IMAGE_1:"freespinBackground1",FRESSPIN_BACKGROUND_IMAGE_2:"freespinBackground2",FRESSPIN_BACKGROUND_IMAGE_3:"freespinBackground3",FRESSPIN_CHARACTER_IMAGE_1:"freespinBackgroundCharacter1",FRESSPIN_FOG_IMAGE_1:"freespinBackgroundfog1",FRESSPIN_CHARACTER_IMAGE_2:"freespinBackgroundCharacter2",FRESSPIN_FOG_IMAGE_2:"freespinBackgroundfog2",FRESSPIN_CHARACTER_IMAGE_3:"freespinBackgroundCharacter3",FRESSPIN_FOG_IMAGE_3:"freespinBackgroundfog3",MAINGAME_BACKGROUND_PORTRAIT_IMAGE:"backgroundCssMaingame",FRESSPIN_BACKGROUND_PORTRAIT_IMAGE_1:"backgroundCssFS1",FRESSPIN_BACKGROUND_PORTRAIT_IMAGE_2:"backgroundCssFS2",FRESSPIN_BACKGROUND_PORTRAIT_IMAGE_3:"backgroundCssFS3",PORTRAIT_Y_OFFSET:-222,LANDSCAPE_Y_OFFSET:0,PORTRAIT_SCALE:1.777777,LANDSCAPE_SCALE:1,SCALE_FOG:2,constructor:function(){Warlords.EnvironmentAnimationsViewMobile.superclass.constructor.apply(this,arguments)},onPortrait:function(){var a=this;a.switchMaingameTexture();a.switchFreespinTexture(a.winningScatter)},onLandscape:function(){var a=this;a.switchMaingameTexture();a.switchFreespinTexture(a.winningScatter)},switchMaingameTexture:function(){var c=this,a=Resources.readData("animationImages"),b,e,d;if(Services.orientation.isPortrait()===true){b=a[c.MAINGAME_BACKGROUND_PORTRAIT_IMAGE];e=c.PORTRAIT_SCALE;d=c.PORTRAIT_Y_OFFSET}else{b=a[c.MAINGAME_BACKGROUND_IMAGE];e=c.LANDSCAPE_SCALE;d=c.LANDSCAPE_Y_OFFSET}c.maingameBGSprite.texture=b;c.maingameBGSprite.scale.y=e;c.maingameBGSprite.scale.x=e;c.maingameBGSprite.position.y=d},switchFreespinTexture:function(j){var g=this,h,i,d,e,f,a=Resources.readData("animationImages"),c,b;g.winningScatter=j;switch(j){case"SYM13":h=a[g.FRESSPIN_BACKGROUND_IMAGE_1];d=a[g.FRESSPIN_FOG_IMAGE_1];i=a[g.FRESSPIN_CHARACTER_IMAGE_1];e=a[g.FRESSPIN_BACKGROUND_PORTRAIT_IMAGE_1];break;case"SYM14":h=a[g.FRESSPIN_BACKGROUND_IMAGE_2];d=a[g.FRESSPIN_FOG_IMAGE_2];i=a[g.FRESSPIN_CHARACTER_IMAGE_2];e=a[g.FRESSPIN_BACKGROUND_PORTRAIT_IMAGE_2];break;case"SYM15":h=a[g.FRESSPIN_BACKGROUND_IMAGE_3];d=a[g.FRESSPIN_FOG_IMAGE_3];i=a[g.FRESSPIN_CHARACTER_IMAGE_3];e=a[g.FRESSPIN_BACKGROUND_PORTRAIT_IMAGE_3];break}if(Services.orientation.isPortrait()===true){f=e;c=g.PORTRAIT_SCALE;g.freespinBGSpriteFog.visible=false;g.freespinBGSpriteCharacter.visible=false;b=g.PORTRAIT_Y_OFFSET}else{f=h;c=g.LANDSCAPE_SCALE;g.freespinBGSpriteFog.scale.y=g.SCALE_FOG;g.freespinBGSpriteFog.scale.x=g.SCALE_FOG;g.freespinBGSpriteFog.visible=true;g.freespinBGSpriteFog.texture=d;g.freespinBGSpriteCharacter.visible=true;g.freespinBGSpriteCharacter.position.y=20;b=g.LANDSCAPE_Y_OFFSET}g.freespinBGSprite.scale.y=c;g.freespinBGSprite.scale.x=c;g.freespinBGSprite.position.y=b;g.freespinBGSprite.texture=f;g.freespinBGSpriteCharacter.texture=i},changeToFreespinBackgroundImage:function(b){var a=this;a.switchFreespinTexture(b);a.activateBackgroundCharacters();a.activeBackground=a.freespinBGSprite},createSoldierAnimations:function(a){},createMaingameBackgroundAnimations:function(){},createFreespinBackgroundAnimations:function(){},createRespinAnimations:function(){},getContainersToShake:function(){return Game.stage.view.animationManager.getReelLayers().concat()},createEffectLayer:function(a){},gameInFocus:function(){},gameNotInFocus:function(){},activateIdle:function(){var a=this;if(a.activeContainer===a.maingameBGContainer){a.setActiveBackgroundAlpha(1,true)}else{a.changeToMaingameBackgroundImage();a.setActiveBackgroundAlpha(1,false);a.setActiveContainer(a.maingameBGContainer)}a.removeBackgroundCharacter()},activateNearWin:function(){},activateNearWinEnd:function(){},activateRespin:function(){},activateFreespin:function(){var b=this;var a=b.model.readData("winningScatter");b.changeToFreespinBackgroundImage(a);b.setActiveContainer(b.freespinBGContainer)},activateFinalChance:function(){},runRespinAnimation:function(){},resetRespinAnimations:function(){},runBigWinEndAnimation:function(){},runSuperMegaWinAnimation:function(){},runMegaWinAnimation:function(){},runBigWinAnimation:function(){},runLargeWinAnimation:function(){},runMediumWinAnimation:function(){},runSmallWinAnimation:function(){},runBigWinSkyColor:function(){},runMegaWinSkyColor:function(){},runSuperMegaWinSkyColor:function(){},runDarkenAnimation:function(){},runDarkenEndAnimation:function(){}};Warlords.EnvironmentAnimationsViewMobile=Sys.extend(Warlords.EnvironmentAnimationsView,Warlords.EnvironmentAnimationsViewMobile,"Warlords.EnvironmentAnimationsViewMobile");Sys.ns("Warlords");Warlords.EnvironmentAnimationsModel={IDLE_STATE:"idle",NEARWIN_STATE:"nearwin",NEARWIN_END_STATE:"nearwinend",RESPIN_STATE:"respin",FINAL_CHANCE:"finalChance",FREESPIN_STATE:"freespin",constructor:function(){Warlords.EnvironmentAnimationsModel.superclass.constructor.apply(this,arguments)},setupData:function(){Warlords.EnvironmentAnimationsModel.superclass.setupData.apply(this,arguments);var a=Resources.readData("gameServerInitResponse");this.storeData("nextAction",a.nextaction);this.setState(this.IDLE_STATE)},setState:function(a,b){if(this.state!==a){this.state=a;this.fireEvent("model:stateChanged",this.state,b)}},processServerResponse:function(a){this.storeData("nextAction",a.nextaction);this.storeData("clientAction",a.clientaction);if(Sys.isDefined(a.winning)){this.storeData("winningScatter",a.winning.scatter)}}};Warlords.EnvironmentAnimationsModel=Sys.extend(Core.Model,Warlords.EnvironmentAnimationsModel,"Warlords.EnvironmentAnimationsModel");Sys.ns("Warlords");Warlords.EnvironmentAnimationsController={constructor:function(){Warlords.EnvironmentAnimationsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringIdleState":a.onEnteringIdleState,"notify:stateHandler.enteringSpinningState":a.onEnteringSpinningState,"notify:spin.nearWinStarted":a.onNearWinStarted,"notify:spin.nearWinEnded":a.onNearWinEnded,"notify:standardWin.presentationComplete":a.stopWinAnimation,"notify:stateHandler.enteringFinalChanceAnimation":a.onEnteringFinalChanceAnimation,"notify:stateHandler.enteringFreeSpinIntroState":a.onEnteringFreespinIntro,"notify:freeSpinIntro.splashClosed":a.onFreespinIntroSplashClosed,"notify:freeSpinIntro.closed":a.onFreespinIntroClosed,"notify:freeSpinOutro.closed":a.onFreespinOutroClosed,"request:environmentAnimations.stopWinPresentation":a.stopWinAnimation,"request:environmentAnimations.runSmallWinPresentation":a.runSmallWinPresentation,"request:environmentAnimations.runMediumWinPresentation":a.runMediumWinPresentation,"request:environmentAnimations.runLargeWinPresentation":a.runLargeWinPresentation,"request:environmentAnimations.runBigWinPresentation":a.runBigWinPresentation,"request:environmentAnimations.runMegaWinPresentation":a.runMegaWinPresentation,"request:environmentAnimations.runSuperMegaWinPresentation":a.runSuperMegaWinPresentation,"request:environmentAnimations.runBigWinSkyColor":a.runBigWinSkyColor,"request:environmentAnimations.runMegaWinSkyColor":a.runMegaWinSkyColor,"request:environmentAnimations.runSuperMegaWinSkyColor":a.runSuperMegaWinSkyColor,"request:environmentAnimations.runBigWinEnd":a.runBigWinEnd,"request:environmentAnimations.stopRespinAnimations":a.view.resetRespinAnimations.bind(a.view),"request:environmentAnimations.startBackgroundShake":a.onStartBackgroundShake,"request:environmentAnimations.stopBackgroundShake":a.onStopBackgroundShake,"request:environment.startRespinAnimation":a.view.runRespinAnimation.bind(a.view),"request:environment.startDarkenBackground":a.view.runDarkenAnimation.bind(a.view),"request:environment.endDarkenBackground":a.view.runDarkenEndAnimation.bind(a.view),pageVisibilityChanged_event:a.onPageVisibilityChange,"view:triggerSound":a.onTriggerSound})},onPageVisibilityChange:function(a){if(a){this.view.gameNotInFocus()}else{this.view.gameInFocus()}},onTriggerSound:function(b){var a=this;a.fireEvent("notify:spin."+b)},registerTriggers:function(){Services.trigger.registerTrigger("notify:spin.crosscakeEarthquake",this,"When the rumble occurs.");Services.trigger.registerTrigger("notify:spin.crosscakeEarthquakeEnd",this,"When the rumble ends.")},onEnteringIdleState:function(){this.model.setState(this.model.IDLE_STATE)},onEnteringSpinningState:function(){var a=this.model.readData("nextAction");if(a==="respin"){this.model.setState(this.model.RESPIN_STATE)}},onNearWinStarted:function(){this.model.setState(this.model.NEARWIN_STATE)},onNearWinEnded:function(){var a=this.model.readData("nextAction");if(a==="respin"){this.model.setState(this.model.RESPIN_STATE)}else{this.model.setState(this.model.NEARWIN_END_STATE)}},onEnteringFinalChanceAnimation:function(){this.model.setState(this.model.FINAL_CHANCE)},onEnteringFreespinIntro:function(){this.model.setState(this.model.FREESPIN_STATE)},onFreespinIntroSplashClosed:function(){this.view.removeBackgroundCharacter()},onFreespinIntroClosed:function(){},onFreespinOutroClosed:function(){this.view.activateIdle()},runSmallWinPresentation:function(){this.view.runSmallWinAnimation();this.view.playWhiteOutAnimation(0.3)},runMediumWinPresentation:function(){this.view.runMediumWinAnimation();this.view.playWhiteOutAnimation(0.5)},runLargeWinPresentation:function(){this.view.runLargeWinAnimation();this.view.playWhiteOutAnimation(0.7)},runBigWinPresentation:function(){this.view.runBigWinAnimation();this.view.playWhiteOutAnimation(1)},runMegaWinPresentation:function(){this.view.runMegaWinAnimation();this.view.playWhiteOutAnimation(1)},runSuperMegaWinPresentation:function(){this.view.runSuperMegaWinAnimation();this.view.playWhiteOutAnimation(1)},runBigWinSkyColor:function(){this.view.runBigWinSkyColor()},runMegaWinSkyColor:function(){this.view.runMegaWinSkyColor()},runSuperMegaWinSkyColor:function(){this.view.runSuperMegaWinSkyColor()},runBigWinEnd:function(){this.view.runBigWinEndAnimation();this.view.playWhiteOutAnimation(1)},stopWinAnimation:function(){this.view.resetWinAndRespinAnimations()},onStartBackgroundShake:function(a){this.view.startBackgroundShake(a)},onStopBackgroundShake:function(){this.view.stopBackgroundShake()}};Warlords.EnvironmentAnimationsController=Sys.extend(Game.BackgroundController,Warlords.EnvironmentAnimationsController,"Warlords.EnvironmentAnimationsController");Sys.ns("Warlords");Warlords.LogoView={IMAGE:"logo",constructor:function(){Game.LogoView.superclass.constructor.apply(this,arguments)},hide:function(){this.rootContainer.visible=false},show:function(){this.rootContainer.visible=true},initAnimations:function(){var c=this;c.rootContainer=new PIXI.Container();c.rootContainer.name="LogoView";var a;if(Sys.isDesktop){a=Warlords.Positions.LOGO}else{a=new PIXI.Point(0,0)}c.logoSprite=Game.PIXIFactory.createAndAddSprite(c.IMAGE,c.rootContainer,a,new PIXI.Point(0,0));var b=Game.stage.view.animationManager.getLayer("logo");b.addChild(c.rootContainer)}};Warlords.LogoView=Sys.extend(Game.LogoView,Warlords.LogoView,"Warlords.LogoView");Sys.ns("Warlords");Warlords.WinBanner={constructor:function(){Warlords.WinBanner.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation","trigger","userInput"]},getDefaultMVCClasses:function(){return{model:Warlords.WinBannerModel,view:Warlords.WinBannerView,controller:Warlords.WinBannerController}}};Warlords.WinBanner=Sys.extend(Core.CountUp,Warlords.WinBanner,"Warlords.WinBanner");Sys.ns("Warlords");Warlords.WinBannerController={COUNT_UP_NAME:"winBanner",COUNT_UP_SOUND_ID:"winBannerCountUp",constructor:function(){Warlords.WinBannerController.superclass.constructor.apply(this,arguments);this.isCountUpSoundPlaying=false},setupEvents:function(){var a=this;Warlords.WinBannerController.superclass.setupEvents.apply(this);a.on({"notify:responseParser.responseParsed":a.model.processServerResponse.bind(a.model),"request:winBanner.animate":a.start,"request:winBanner.hide":a.stop,"notify:spin.spinAnimationStarted":a.hide,"request:spin.startSpin":a.onStartSpin,"notify:bigWin.winPresentationStart":a.stopListeningToUserInputFunc,"notify:stateHandler.enteringFreeSpinOutroState":a.onEnteringFreeSpinOutroState,"notify:bigWin.showTotalInCountUp":a.onBigWinShowTotal,"view:playSound":a.playCountUpSound,"view:stopSound":a.stopCountUpSound,"view:showTotalDurationPassed":a.onFadeOut,"view:checkForShake":a.onCheckForShake,"view:updateFrameScale":a.onUpdateFrameScale,"view:playBigWin":a.playBigWin,"view:stopListeningToUserInput":a.stopListeningToUserInputFunc,"view:checkForSound":a.onCheckForSound,"view:countUpMultiplierComplete":a.onCountUpMultiplierComplete})},onCountUpMultiplierComplete:function(){this.fireEvent("notify:progressiveWinBanner.countUpMultiplierComplete")},onCheckForSound:function(){this.fireEvent("request:winningSymbols.runSoundAfterMultiplier")},onBigWinShowTotal:function(){this.view.bigWinTotalShown=true},playBigWin:function(){this.fireEvent("notify:standardWin.presentationComplete")},stopListeningToUserInputFunc:function(){this.stopListeningToUserInput()},onUserInputEnd:function(){this.view.stopOnUserInput();this.stopListeningToUserInput()},onUpdateFrameScale:function(){this.fireEvent("request:winningSymbols.changeFrameScaleToAfterMultiplier")},start:function(a){Warlords.WinBannerController.superclass.start.apply(this,arguments);if(this.model.readData("clientAction")==="freespin"){this.startListeningToUserInput()}},onStartSpin:function(){this.stopListeningToUserInput();this.view.clearTimeouts();this.view.resetStates()},onCheckForShake:function(){this.fireEvent("request:winningSymbols.checkForShake",this.model.readData("coinWin"))},hide:function(){this.view.hide()},playCountUpSound:function(){var a=this;a.fireEvent("request:audioPlayer.play",{name:"countUpLoop",loop:true,id:a.COUNT_UP_SOUND_ID});a.fireEvent("notify:wincountup.wincountupStart");a.isCountUpSoundPlaying=true},stopCountUpSound:function(){var b=this;if(b.isCountUpSoundPlaying){b.fireEvent("request:audioPlayer.stop",b.COUNT_UP_SOUND_ID);var a=b.model.readData("winType");if(!Warlords.Utils.isBigWin(a)){b.fireEvent("request:audioPlayer.play",{name:"countUpEnd",loop:false,id:b.COUNT_UP_SOUND_ID})}b.isCountUpSoundPlaying=false}b.fireEvent("notify:wincountup.wincountupEnd")},registerTriggers:function(){Services.trigger.registerTrigger("notify:wincountup.wincountupStart",this,"count up start");Services.trigger.registerTrigger("notify:wincountup.wincountupEnd",this,"count up end");Services.trigger.registerTrigger("notify:soloMultiplier.outroBanner",this,"soloMultiplier");Services.trigger.registerTrigger("notify:soloMultiplier.outroWinAmountAttention",this,"soloMultiplier")},onFadeOut:function(){this.fireEvent("notify:winBannerFadingOut")},onEnteringFreeSpinOutroState:function(){this.hide()},onCountUpComplete:function(){Warlords.WinBannerController.superclass.onCountUpComplete.apply(this);this.stopCountUpSound();if(this.model.readData("clientAction")==="freespin"&&this.model.readData("winningScatter")==="SYM14"){this.fireEvent("notify:winBanner.finishedForFreeSpin");this.fireEvent("notify:standardWin.presentationComplete");this.view.clearTimeouts()}}};Warlords.WinBannerController=Sys.extend(Core.CountUpController,Warlords.WinBannerController,"Warlords.WinBannerController");Sys.ns("Warlords");Warlords.WinBannerModel={constructor:function(){Warlords.WinBannerModel.superclass.constructor.apply(this,arguments);this.setState("stopped")},setupData:function(){Warlords.WinBannerModel.superclass.setupData.apply(this);this.storeData("coinWin",0);this.storeData("countUpDuration",0)},processServerResponse:function(d){var b=this,a=0,c=0;if(Sys.isDefined(d.wins)&&Sys.isDefined(d.wins.coins)){a=d.wins.coins}if(Sys.isDefined(d.wins)&&Sys.isDefined(d.wins.coinsTotal)){c=d.wins.coinsTotal}if(Sys.isDefined(d.winning)){b.storeData("winningScatter",d.winning.scatter)}b.storeData("coinWin",a);b.storeData("totalCoinWin",c);b.multiplier=d.multiplier;if(Sys.isDefined(b.multiplier)){b.storeData("coinWinBeforeMultiplier",a/b.multiplier);b.storeData("multiplier",b.multiplier)}else{b.storeData("coinWinBeforeMultiplier",a)}b.storeData("winType",d.wins.winType);this.storeData("nextAction",d.nextaction);this.storeData("clientAction",d.clientaction)}};Warlords.WinBannerModel=Sys.extend(Core.CountUpModel,Warlords.WinBannerModel,"Warlords.WinBannerModel");Sys.ns("Warlords");Warlords.WinBannerView={constructor:function(){Warlords.WinBannerView.superclass.constructor.apply(this,arguments)},GAP:10,BACKGROUND_IMAGE:"winBanner",COUNT_UP_TEXT:{key:"0123456789",leftMargin:5},WIN_TEXT:{rightMargin:5},initAnimations:function(){var c=this,a=new PIXI.Point(0,0),d=c.getReelAreaBottom();c.rootContainer=new PIXI.Container();c.rootContainer.name="rootContainer";c.currentCoinCount=0;c.coinWin=0;c.totalCoinWin=0;c.background=Game.PIXIFactory.createAndAddSprite(c.BACKGROUND_IMAGE,c.rootContainer,a,new PIXI.Point(0.5,0.5));c.rootContainer.position=new PIXI.Point(640,Math.floor(d-c.background.height*0.5));c.winTextContainer=new PIXI.Container();c.winTextContainer.name="winTextContainer";c.winTextContainer.scale=new PIXI.Point(1,1);c.winTextContainer.position=new PIXI.Point(0,0);c.rootContainer.addChild(c.winTextContainer);c.countUpTextContainer=new PIXI.Container();c.countUpTextContainer.name="countUpTextContainer";c.winTextContainer.addChild(c.countUpTextContainer);c.countUpText=Game.PIXIFactory.createAndAddBitmapText(c.COUNT_UP_TEXT.key,Game.TextStyles.WIN_BANNER_COUNT_UP_TEXT,c.countUpTextContainer);c.countUpText.position.y=-c.countUpText.height*0.5;c.coinScaleAnimation=c.createCoinScaleAnimation(c.countUpText);var e=Services.languageManager.getText(Language.Keys.winWorks);c.winText=Game.PIXIFactory.createAndAddText(e.toUpperCase()+":",Game.TextStyles.WIN_BANNER_WIN_TEXT,c.winTextContainer,new PIXI.Point(-c.WIN_TEXT.rightMargin,0),new PIXI.Point(1,0.5));c.multiplierTextContainer=new PIXI.Container();c.multiplierTextContainer.name="multiplierTextContainer";c.multiplierText=Game.PIXIFactory.createAndAddText("",Game.TextStyles.WIN_BANNER_MULTIPLIER_TEXT,c.multiplierTextContainer);c.multiplierText.text="";c.multiplierText.anchor=new PIXI.Point(0,0.5);c.rootContainer.addChild(c.multiplierTextContainer);c.multiplierAnimation=c.createMultiplierAnimation(c.multiplierText);c.multiplierFadeAnimation=c.createMultiplierFadeAnimation(c.multiplierText);c.fadeInWin=c.createFadeInWinAnimation(c.rootContainer);c.countUpWin=c.createCountUpAnimation();c.delayWin=c.createShowWinAnimation();c.fadeOutWin=c.createFadeOutAnimation(c.rootContainer);c.winBannerCountUpAnimations=new Animation.Holder({id:"winBannerCountUpAnimations",children:[c.fadeInWin,c.countUpWin,c.delayWin,c.fadeOutWin]});c.timeouts=[];c.countUpMultiplierAnimation=c.createCountUpMultiplierAnimation();Game.stage.view.animationManager.addToAnimationLoop(c.winBannerCountUpAnimations);var b=Game.stage.view.animationManager.getLayer("countUp");b.addChild(c.rootContainer);c.stop()},createFadeInWinAnimation:function(a){var b=this;return new Animation.Holder({id:"fadeInWin",target:a,prop:"alpha",onStart:function(){this.target.alpha=0},onEnd:function(){b.countUpWin.play()},animate:{0:0,200:1}})},createCoinScaleAnimation:function(a){var b={},c;b[0]={x:1,y:1};b[100]={x:1.15,y:1.15};b[500]={x:1,y:1};c=new Animation.Holder({target:a.scale,animate:b});Game.stage.view.animationManager.addToAnimationLoop(c);return c},createMultiplierAnimation:function(a){var b=this,d={},c;d[0]={x:3,y:3};d[100]={x:1,y:1};c=new Animation.Holder({target:a.scale,animate:d,onEnd:b.afterMultiplierAnimation.bind(b)});Game.stage.view.animationManager.addToAnimationLoop(c);return c},createMultiplierFadeAnimation:function(a){var c=this,b={},d;b[0]={alpha:0};b[100]={alpha:1};b[600]={alpha:1};b[800]={alpha:0};d=new Animation.Holder({target:a,animate:b});Game.stage.view.animationManager.addToAnimationLoop(d);return d},createCountUpMultiplierAnimation:function(){var a=this,b;b=new Animation.Holder({target:this,prop:"currentCoinCount",onUpdate:a.setCountUpText.bind(a),onEnd:a.countUpMultiplierComplete.bind(a)});Game.stage.view.animationManager.addToAnimationLoop(b);return b},createCountUpAnimation:function(){var a=this;return new Animation.Holder({id:"countUpText",target:this,prop:"currentCoinCount",onUpdate:a.setCountUpText.bind(a),onEnd:a.countUpAnimationComplete.bind(a)})},createShowWinAnimation:function(){var a=this;return new Animation.Holder({id:"showWin",delay:2000,onEnd:function(){a.fireEvent("view:showTotalDurationPassed");var b=a.model.readData("shouldFadeOut");if(b){a.fadeOutWin.play()}}})},createFadeOutAnimation:function(a){var b=this;return new Animation.Holder({id:"fadeOut",target:a,prop:"alpha",onStart:function(){this.target.alpha=1},onEnd:function(){b.rootContainer.visible=false},animate:{0:1,200:0}})},setCountUpText:function(){var b=this;if(b.currentCoinCount<=0){b.countUpText.alpha=0}else{b.countUpText.alpha=1}b.countUpText.text=Math.floor(b.currentCoinCount).toString();b.countUpText.updateTransform();b.countUpText.position.x=-b.countUpText.textWidth*0.5;b.countUpTextContainer.position.x=b.countUpText.textWidth*0.5+b.COUNT_UP_TEXT.leftMargin;var c=b.winText.width+b.WIN_TEXT.rightMargin,a=b.countUpText.textWidth+b.COUNT_UP_TEXT.leftMargin;b.winTextContainer.position.x=c-((c+a)*0.5)},start:function(f){var e=this,c=e.model.readData("coinWin"),d=e.model.readData("coinWinBeforeMultiplier"),b,a;b=e.createCoinCountUpAnimation(f,0,d);a=e.createCoinCountUpAnimation(500,d,c);e.winBannerCountUpAnimations.stop();e.hideMultiplier();e.coinWin=c;e.totalCoinWin=e.model.readData("totalCoinWin");e.multiplier=e.model.readData("multiplier");e.hasShaken=false;e.rootContainer.visible=true;e.currentCoinCount=0;e.countUpDone=false;e.setCountUpText();e.countUpWin.animate(b);e.countUpMultiplierAnimation.animate(a);if(!e.multiplierShown){e.fireEvent("view:playSound")}e.fadeInWin.play()},createCoinCountUpAnimation:function(c,b,a){return[{time:0,value:b},{time:c,value:a}]},countUpAnimationComplete:function(){var c=this,b=c.model.readData("winningScatter"),d=c.model.readData("clientAction"),a=c.model.readData("winType");c.fireEvent("view:stopSound");if(b!=="SYM14"||d!=="freespin"){c.fireEvent("view:countUpComplete");c.delayWin.play();c.countUpDone=true}else{c.timeouts.push(setTimeout(function(){if(!c.multiplierShown){c.showMultiplier();c.multiplierShown=true}},1000));if(b!=="SYM14"||d!=="freespin"){c.timeouts.push(setTimeout(function(){c.fireEvent("view:countUpComplete");c.delayWin.play();c.countUpDone=true},4000))}}},clearTimeouts:function(){for(var a=0;a<this.timeouts.length;++a){clearTimeout(this.timeouts[a])}this.timeouts.length=0},afterMultiplierAnimation:function(){var b=this,a=b.model.readData("winType");b.checkForEnvironment();b.fireEvent("view:checkForShake");b.fireEvent("view:updateFrameScale");b.fireEvent("view:checkForSound");b.timeouts.push(setTimeout(function(){if(!Warlords.Utils.isBigWin(a)){b.fireEvent("view:playSound");b.countUpMultiplierAnimation.play()}else{b.countUpDone=true;b.hide();b.fireEvent("view:playBigWin")}},200));b.hasShaken=true},checkForEnvironment:function(){this.fireEvent("view:checkForEnvironment")},abortMultiplierAnimations:function(){var a=this;if(a.multiplierAnimation.running){a.multiplierAnimation.stop()}if(a.multiplierFadeAnimation.running){a.multiplierFadeAnimation.stop();a.multiplierText.alpha=0}if(a.countUpMultiplierAnimation.running){a.countUpMultiplierAnimation.stop()}},countUpMultiplierComplete:function(){var a=this;a.fireEvent("view:stopSound");a.fireEvent("view:countUpMultiplierComplete");a.timeouts.push(setTimeout(function(){a.fireEvent("view:countUpComplete");a.delayWin.play();a.countUpDone=true},2000))},stopOnUserInput:function(){var b=this,a=b.model.readData("winType");b.fireEvent("view:stopSound");b.abortMultiplierAnimations();if(!Warlords.Utils.isBigWin(a)){b.showTotalMultiplied()}if(b.model.readData("clientAction")==="freespin"&&b.model.readData("winningScatter")==="SYM14"){b.fireEvent("view:updateFrameScale")}b.clearTimeouts();if(Warlords.Utils.isBigWin(a)&&b.model.readData("winningScatter")==="SYM14"){b.fireEvent("view:playBigWin");b.hide();b.multiplierShown=true}b.timeouts.push(setTimeout(function(){b.delayWin.play();b.countUpDone=true;b.fireEvent("view:countUpComplete")},2000))},resetStates:function(){this.multiplierShown=false;this.bigWinTotalShown=false},showTotalMultiplied:function(){this.countUpWin.stop();this.countUpText.text=this.coinWin},calculateWinTextContainerWidth:function(){var c=this,b=c.model.readData("coinWin");var d=c.countUpText.text;c.countUpText.text=b;var a=c.winTextContainer.width;c.countUpText.text=d;return a},showMultiplier:function(){var c=this;if(c.model.readData("winningScatter")==="SYM14"&&c.model.readData("clientAction")==="freespin"){var b=c.multiplierTextContainer.position.clone();var a=c.calculateWinTextContainerWidth();b.x=a/2+c.GAP;c.multiplierTextContainer.position=b;c.multiplierText.text="x"+c.multiplier;c.multiplierAnimation.play();c.multiplierFadeAnimation.play()}},hideMultiplier:function(){this.multiplierText.text=""},stop:function(){var a=this;var b=a.model.readData("clientAction");if(a.winBannerCountUpAnimations.running||b==="freespin"){if(!a.countUpDone){a.showTotal()}}else{a.rootContainer.visible=false}},pause:function(){this.fireEvent("view:stopSound");this.countUpWin.pause()},resume:function(){if(this.model.isState("countingUp")){this.fireEvent("view:playSound")}this.countUpWin.play()},showTotal:function(){var c=this,b=c.model.readData("winningScatter"),a=c.model.readData("winType"),d=c.model.readData("clientAction");if(c.winBannerCountUpAnimations.running){if(!c.countUpDone){c.currentCoinCount=c.coinWin;if(b!=="SYM14"||!Warlords.Utils.isBigWin(a)||d!=="freespin"||c.bigWinTotalShown){c.setCountUpText()}c.fadeInWin.stop();c.rootContainer.alpha=1;c.countUpWin.stop();c.countUpWin.onEnd()}}},getReelAreaBottom:function(){var a=Resources.readData("config");var c=a.reelGroups["default"];var d=c.reelLayout;var b=d.standard.top+(d.standard.numberOfOutcomeSymbols*d.standard.symbolCenterToCenter);return b}};Warlords.WinBannerView=Sys.extend(Core.CountUpView,Warlords.WinBannerView,"Warlords.WinBannerView");Sys.ns("Game.Slots");Game.Slots.PIXIProgressiveWinBanner={constructor:function(){Game.Slots.PIXIProgressiveWinBanner.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Game.Slots.PIXIProgressiveWinBannerModel,view:Game.Slots.PIXIProgressiveWinBannerView,controller:Game.Slots.PIXIProgressiveWinBannerController}}};Game.Slots.PIXIProgressiveWinBanner=Sys.extend(Warlords.WinBanner,Game.Slots.PIXIProgressiveWinBanner,"Game.Slots.PIXIProgressiveWinBanner");Sys.ns("Game.Slots");Game.Slots.PIXIProgressiveWinBannerController={constructor:function(){Game.Slots.PIXIProgressiveWinBannerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Game.Slots.PIXIProgressiveWinBannerController.superclass.setupEvents.apply(this,arguments);a.on({"request:winBanner.updateProgressiveWin":a.onUpdateProgressiveWin,"notify:spin.spinAnimationStarted":a.onSpinAnimationStarted,"notify:settingsManager.settingChanged":a.onSettingsChanged,"notify:stateHandler.enteringFreeSpinIntroState":a.onEnteringFreeSpinIntroState,"view:checkForEnvironment":a.onCheckForEnvironment})},onCheckForEnvironment:function(){this.fireEvent("request:winningSymbols.runEnvironmentAnimationsAfterMultiplier")},onSpinAnimationStarted:function(){var a=this.model.readData("nextAction");if(a==="respin"){this.view.showProgressiveWin()}else{this.hide()}},onUpdateProgressiveWin:function(){this.view.updateProgressiveWinValues()},onEnteringFreeSpinIntroState:function(){this.hide()},onSettingsChanged:function(a){if(["betLevel","denomination"].contains(a)){this.hide()}}};Game.Slots.PIXIProgressiveWinBannerController=Sys.extend(Warlords.WinBannerController,Game.Slots.PIXIProgressiveWinBannerController,"Game.Slots.PIXIProgressiveWinBannerController");Sys.ns("Game.Slots");Game.Slots.PIXIProgressiveWinBannerModel={constructor:function(){Game.Slots.PIXIProgressiveWinBannerModel.superclass.constructor.apply(this,arguments)},setupData:function(){Game.Slots.PIXIProgressiveWinBannerModel.superclass.setupData.apply(this,arguments);var b=Resources.readData("gameServerInitResponseObject");var a=this;a.storeData("totalCoinWin",0);a.storeData("nextAction",b.nextaction);a.storeData("clientAction",b.clientaction)}};Game.Slots.PIXIProgressiveWinBannerModel=Sys.extend(Warlords.WinBannerModel,Game.Slots.PIXIProgressiveWinBannerModel,"Game.Slots.PIXIProgressiveWinBannerModel");Sys.ns("Game.Slots");Game.Slots.PIXIProgressiveWinBannerView={WIN_COUNT_UP_STATE:"winCountUpState",PROGRESSIVE_WIN_STATE:"progressiveWinState",TOTAL_WIN_TEXT:{rightMargin:5},PROGRESSIVE_WIN_MARGIN:5,PROGRESSIVE_WIN_GAP:20,constructor:function(){Game.Slots.PIXIProgressiveWinBannerView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this,c=b.getReelAreaBottom();Game.Slots.PIXIProgressiveWinBannerView.superclass.initAnimations.apply(this);b.rootContainerWinCountUpPosition=new PIXI.Point(640,Math.floor(c-b.background.height*0.5));b.rootContainerProgressiveWinPosition=new PIXI.Point(640,Math.floor(c-b.background.height*0.25));b.rootContainer.position=b.rootContainerWinCountUpPosition.clone();b.countUpText.text="";b.progressiveWinTextContainer=new PIXI.Container();b.progressiveWinTextContainer.name="progressiveWinTextContainer";b.progressiveWinTextContainer.scale=new PIXI.Point(1,1);b.progressiveWinTextContainer.position=new PIXI.Point(0,0);b.progressiveWinTextContainer.visible=false;b.rootContainer.addChild(b.progressiveWinTextContainer);b.progressiveWinText=Game.PIXIFactory.createAndAddText(Services.languageManager.getText(Language.Keys.winWorks).toUpperCase()+":",Game.TextStyles.WIN_BANNER_PROGRESSIVE_WIN_TEXT,b.progressiveWinTextContainer,new PIXI.Point(0,0),new PIXI.Point(0,0.5));b.progressiveWinValueTextContainer=new PIXI.Container();b.progressiveWinValueTextContainer.name="progressiveWinValueTextContainer";b.progressiveWinTextContainer.addChild(b.progressiveWinValueTextContainer);b.progressiveWinValueText=Game.PIXIFactory.createAndAddBitmapText(b.COUNT_UP_TEXT.key,Game.TextStyles.WIN_BANNER_PROGRESSIVE_VALUE,b.progressiveWinValueTextContainer);b.progressiveWinValueText.position.y=-b.progressiveWinValueText.height*0.5;b.progressiveWinValueText.text="";var a=Services.languageManager.getText(Language.Keys.totalWinColon_uc);b.totalWinText=Game.PIXIFactory.createAndAddText(a.toUpperCase(),Game.TextStyles.WIN_BANNER_PROGRESSIVE_WIN_TEXT,b.progressiveWinTextContainer,new PIXI.Point(0,0),new PIXI.Point(0,0.5));b.totalWinValueTextContainer=new PIXI.Container();b.totalWinValueTextContainer.name="totalWinValueTextContainer";b.progressiveWinTextContainer.addChild(b.totalWinValueTextContainer);b.totalWinValueText=Game.PIXIFactory.createAndAddBitmapText(b.COUNT_UP_TEXT.key,Game.TextStyles.WIN_BANNER_PROGRESSIVE_VALUE,b.totalWinValueTextContainer);b.totalWinValueText.position.y=-b.totalWinValueText.height*0.5;b.totalWinValueText.text="";b.updateProgressiveWinValues();b.scaleDownBackground=b.createScaleDownBackgroundAnimation();b.fadeInRootContainer=b.createFadeInRootContainerAnimation();b.moveDownRootContainer=b.createMoveDownRootContainerAnimation();b.fadeOutWinText=b.createFadeOutWinTextAnimation();b.fadeInProgressiveWinText=b.createFadeInProgressiveWinTextAnimation();b.winBannerToProgressiveWinAnimations=new Animation.Holder({id:"winBannerToProgressiveWinAnimations",children:[b.scaleDownBackground,b.fadeInRootContainer,b.moveDownRootContainer,b.fadeOutWinText,b.fadeInProgressiveWinText]});Game.stage.view.animationManager.addToAnimationLoop(b.winBannerToProgressiveWinAnimations);b.model.storeData("viewState",b.WIN_COUNT_UP_STATE);this.initialized=true},createScaleDownBackgroundAnimation:function(){var a=this;return new Animation.Holder({id:"scaleDown",target:a.background,prop:"scale",animate:[{time:0,value:{y:1}},{time:200,value:{y:0.5}}]})},createScaleUpAnimation:function(){var a=this;return new Animation.Holder({id:"scaleUp",target:a.background,prop:"scale",animate:[{time:0,value:{y:0.5}},{time:200,value:{y:1}}]})},createFadeInRootContainerAnimation:function(){var a=this;return new Animation.Holder({id:"fadeInRootContainer",target:a.rootContainer,prop:"alpha",animate:{0:0,200:1}})},createMoveDownRootContainerAnimation:function(){var b=this;var a=b.getReelAreaBottom();return new Animation.Holder({id:"moveDownRootContainer",target:b.rootContainer,prop:"position",animate:[{time:0,value:{y:b.rootContainerWinCountUpPosition.y}},{time:200,value:{y:b.rootContainerProgressiveWinPosition.y}}]})},createFadeOutWinTextAnimation:function(){var a=this;return new Animation.Holder({id:"fadeOutWinText",target:a.winTextContainer,prop:"alpha",onEnd:a.hideWinTextComponents.bind(a),animate:{0:1,200:0}})},createFadeInProgressiveWinTextAnimation:function(){var a=this;return new Animation.Holder({id:"fadeInProgressiveWinText",target:a.progressiveWinTextContainer,prop:"alpha",onStart:function(){this.target.alpha=0;this.target.visible=true},animate:{0:0,200:1}})},updateGraphicsToWinCountUpState:function(){var a=this;a.hideProgressiveWinTextComponents();a.showWinTextComponents();a.background.scale.y=1;a.rootContainer.position=a.rootContainerWinCountUpPosition.clone()},start:function(d){var b=this;Game.Slots.PIXIProgressiveWinBannerView.superclass.start.apply(this,arguments);var c=b.model.readData("viewState");if(c!==b.WIN_COUNT_UP_STATE){b.updateGraphicsToWinCountUpState();b.model.storeData("viewState",b.WIN_COUNT_UP_STATE)}var a=b.model.readData("nextAction");b.model.storeData("shouldFadeOut",(a!=="respin"));b.clearTimeouts()},stopOnUserInput:function(){var b=this,a=b.model.readData("winType");Game.Slots.PIXIProgressiveWinBannerView.superclass.stopOnUserInput.apply(this);if(!Warlords.Utils.isBigWin(a)&&b.model.readData("winningScatter")==="SYM14"&&!b.hasShaken){b.fireEvent("view:checkForShake");b.fireEvent("view:checkForSound");b.fireEvent("view:checkForEnvironment");b.hasShaken=true}},hide:function(){var a=this;if(a.initialized){var c=a.model.readData("clientAction");if(c!=="freespin"){a.rootContainer.visible=false}else{setTimeout(function(){a.rootContainer.visible=false},100)}var b=a.model.readData("viewState");if(b!==a.WIN_COUNT_UP_STATE){a.updateGraphicsToWinCountUpState();a.model.storeData("viewState",a.WIN_COUNT_UP_STATE)}}},hideWinTextComponents:function(){var a=this;a.winTextContainer.visible=false;a.winTextContainer.alpha=1},showWinTextComponents:function(){var a=this;a.winTextContainer.visible=true;a.winTextContainer.alpha=1},updateProgressiveWinTextLayout:function(){var d=this;d.progressiveWinText.x=0;var c=d.progressiveWinText.width;var b=d.totalWinText.width;d.progressiveWinValueTextContainer.x=c+d.PROGRESSIVE_WIN_MARGIN;d.totalWinText.x=d.progressiveWinValueTextContainer.x+d.progressiveWinValueTextContainer.width+d.PROGRESSIVE_WIN_GAP;d.totalWinValueTextContainer.x=d.totalWinText.x+b+d.PROGRESSIVE_WIN_MARGIN;var a=c+d.PROGRESSIVE_WIN_MARGIN+d.progressiveWinValueTextContainer.width+d.PROGRESSIVE_WIN_GAP+b+d.PROGRESSIVE_WIN_MARGIN;d.progressiveWinTextContainer.position.x=-a/2},updateProgressiveWinValues:function(){var a=this;a.progressiveWinValueText.text=a.model.readData("coinWin");a.totalWinValueText.text=a.model.readData("totalCoinWin");this.updateProgressiveWinTextLayout()},updateGraphicsToProgressiveWinState:function(){var a=this;a.hideWinTextComponents();a.showProgressiveWinTextComponents();a.background.scale.y=0.5;a.rootContainer.position=a.rootContainerProgressiveWinPosition.clone()},hideProgressiveWinTextComponents:function(){var a=this;a.progressiveWinTextContainer.visible=false;a.progressiveWinTextContainer.alpha=1},showProgressiveWinTextComponents:function(){var a=this;a.progressiveWinTextContainer.visible=true;a.progressiveWinTextContainer.alpha=1},showProgressiveWin:function(){var a=this,b=this.model.readData("viewState");if(b!==a.PROGRESSIVE_WIN_STATE){a.progressiveWinValueText.text="";a.totalWinValueText.text=a.model.readData("totalCoinWin");a.updateProgressiveWinTextLayout();if(a.rootContainer.visible){a.scaleDownBackground.play();a.moveDownRootContainer.play();a.fadeOutWinText.play();a.fadeInProgressiveWinText.play()}else{a.updateGraphicsToProgressiveWinState();a.rootContainer.alpha=0;a.rootContainer.visible=true;a.fadeInRootContainer.play()}a.model.storeData("viewState",a.PROGRESSIVE_WIN_STATE)}}};Game.Slots.PIXIProgressiveWinBannerView=Sys.extend(Warlords.WinBannerView,Game.Slots.PIXIProgressiveWinBannerView,"Game.Slots.PIXIProgressiveWinBannerView");Sys.ns("Game.Slots");Game.Slots.PIXIWinBanner={constructor:function(){Game.Slots.PIXIWinBanner.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Game.Slots.PIXIWinBannerModel,view:Game.Slots.PIXIWinBannerView,controller:Game.Slots.PIXIWinBannerController}}};Game.Slots.PIXIWinBanner=Sys.extend(Warlords.WinBanner,Game.Slots.PIXIWinBanner,"Game.Slots.PIXIWinBanner");Sys.ns("Game.Slots");Game.Slots.PIXIWinBannerController={constructor:function(){Game.Slots.PIXIWinBannerController.superclass.constructor.apply(this,arguments)}};Game.Slots.PIXIWinBannerController=Sys.extend(Warlords.WinBannerController,Game.Slots.PIXIWinBannerController,"Game.Slots.PIXIWinBannerController");Sys.ns("Game.Slots");Game.Slots.PIXIWinBannerModel={constructor:function(){Game.Slots.PIXIWinBannerModel.superclass.constructor.apply(this,arguments)},setupData:function(){Game.Slots.PIXIWinBannerModel.superclass.setupData.apply(this,arguments)}};Game.Slots.PIXIWinBannerModel=Sys.extend(Warlords.WinBannerModel,Game.Slots.PIXIWinBannerModel,"Game.Slots.PIXIWinBannerModel");Sys.ns("Game.Slots");Game.Slots.PIXIWinBannerView={constructor:function(){Game.Slots.PIXIWinBannerView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var a=this,b=a.getReelAreaBottom();Game.Slots.PIXIWinBannerView.superclass.initAnimations.apply(this);a.rootContainer.position=new PIXI.Point(640,Math.floor(b-a.background.height*0.5))},stopOnUserInput:function(){var b=this,a=b.model.readData("winType");Game.Slots.PIXIWinBannerView.superclass.stopOnUserInput.apply(this);if(!Warlords.Utils.isBigWin(a)&&b.model.readData("winningScatter")==="SYM14"&&!b.hasShaken){b.fireEvent("view:checkForShake");b.fireEvent("view:checkForSound");b.hasShaken=true}},hide:function(){this.rootContainer.visible=false},checkForEnvironment:function(){}};Game.Slots.PIXIWinBannerView=Sys.extend(Warlords.WinBannerView,Game.Slots.PIXIWinBannerView,"Game.Slots.PIXIWinBannerView");Sys.ns("pixiGenericSlot");pixiGenericSlot.OrientationManager={constructor:function(){pixiGenericSlot.OrientationManager.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["orientation","animation"]},getDefaultMVCClasses:function(){return{model:Core.Model,view:Core.View,controller:pixiGenericSlot.OrientationManagerController}}};pixiGenericSlot.OrientationManager=Sys.extend(Core.Module,pixiGenericSlot.OrientationManager,"pixiGenericSlot.OrientationManager");Sys.ns("pixiGenericSlot");pixiGenericSlot.OrientationManagerController={REEL_LAYER_SCALE_LANDSCAPE:1.0602,REEL_LAYER_SCALE_PORTRAIT:1.25,constructor:function(a){pixiGenericSlot.OrientationManagerController.superclass.constructor.apply(this,arguments)},initAnimations:function(){var a=this;a.reelLayers=Game.stage.view.animationManager.getReelLayers();a.winAnimationLayers=Game.stage.view.animationManager.getwinAnimationLayers();a.userInterfaceLayers=Game.stage.view.animationManager.getInterfaceLayers();a.backgroundLayers=Game.stage.view.animationManager.getBackgroundLayers();a.logoLayers=Game.stage.view.animationManager.getLogoLayers();a.topSrcValue=undefined;a.topBackgroundElement=document.createElement("div");a.topBackgroundElement.id="pixiGenericSlot_topBg";a.topBackgroundElement.style.width="100%";a.topBackgroundElement.style.height="100%";a.topBackgroundElement.style.backgroundImage=a.topSrcValue;a.topBackgroundElement.style.backgroundSize="100% auto";a.topBackgroundElement.style.backgroundRepeat="no-repeat";a.topBackgroundElement.style.position="fixed";a.topBackgroundElement.style.backgroundColor="black";document.body.appendChild(a.topBackgroundElement);a.fireEvent("request:portraitBackgroundManager.changeBackground","maingame")},setupEvents:function(){var a=this;a.on({"request:orientationManager.setDefaultBackground":a.setDefaultCssBackground})},setDefaultCssBackground:function(c,a){var b=this;if(c){b.topSrcValue="url("+c+")";b.topBackgroundElement.style.backgroundSize="100% auto";b.topBackgroundElement.style.backgroundRepeat="no-repeat"}else{b.topSrcValue=undefined;b.topBackgroundElement.style.background=""}b.topBackgroundElement.style.backgroundColor=a;b.topBackgroundElement.style.backgroundImage=b.topSrcValue},onPortrait:function(){var b=this;var a=b.reelLayers.concat(b.winAnimationLayers);b.scaleLayers(a,new PIXI.Point(b.REEL_LAYER_SCALE_PORTRAIT,b.REEL_LAYER_SCALE_PORTRAIT),new PIXI.Point(0,0),new PIXI.Point(-127,-28));b.hideLayers(b.logoLayers)},onLandscape:function(){var b=this;var a=b.reelLayers.concat(b.winAnimationLayers);b.scaleLayers(a,new PIXI.Point(b.REEL_LAYER_SCALE_LANDSCAPE,b.REEL_LAYER_SCALE_LANDSCAPE),new PIXI.Point(0.5,0.5),new PIXI.Point(0,5));b.showLayers(b.logoLayers)},scaleLayers:function(f,h,b,g){var a=new PIXI.Point(1280*b.x,720*b.y);var e=new PIXI.Point(g.x*h.x,g.y*h.y);for(var d=0;d<f.length;d++){var c=f[d];c.scale=new PIXI.Point(h.x,h.y);c.pivot=a;c.position=new PIXI.Point(a.x+e.x,a.y+e.y);if(c.originalPosition){c.originalPosition=new PIXI.Point(a.x+e.x,a.y+e.y)}if(c.originalScale){c.originalScale=new PIXI.Point(h.x,h.y)}}},showLayers:function(b){for(var a=0;a<b.length;a++){b[a].visible=true}},hideLayers:function(b){for(var a=0;a<b.length;a++){b[a].visible=false}}};pixiGenericSlot.OrientationManagerController=Sys.extend(Core.Controller,pixiGenericSlot.OrientationManagerController,"pixiGenericSlot.OrientationManagerController");Sys.ns("Warlords");Warlords.QuickStopperView={constructor:function(){Game.Slots.QuickStopperView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this;b.rootContainer=new PIXI.Container();b.quickStopperGraphics=new PIXI.Graphics();b.quickStopperGraphics.beginFill(16777215,1);b.quickStopperGraphics.drawRect(0,0,1280,720);b.quickStopperGraphics.endFill();b.rootContainer.addChild(b.quickStopperGraphics);b.quickStopAnim=new Animation.Holder({id:"QuickStopperView - fadeAnim",target:b.rootContainer,onEnd:b.onAnimComplete.bind(b),animate:{0:{alpha:0},100:{alpha:0.2},200:{alpha:0}}});Game.stage.view.animationManager.addToAnimationLoop(b.quickStopAnim);var a=Game.stage.view.animationManager.getLayer("quickStopper");a.addChild(b.rootContainer);b.rootContainer.visible=false},onAnimComplete:function(){this.rootContainer.visible=false},setupEvents:function(){var a=this;a.on({"model:quickStop":a.quickStop})},quickStop:function(){this.rootContainer.visible=true;this.quickStopAnim.restore();this.quickStopAnim.play()}};Warlords.QuickStopperView=Sys.extend(Core.View,Warlords.QuickStopperView,"Warlords.QuickStopperView");Sys.ns("Warlords");Warlords.WinSituationsController={constructor:function(){Warlords.WinSituationsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Warlords.WinSituationsController.superclass.setupEvents.apply(a,arguments);a.on({"notify:betlineIndicators.indicatorsCreated":a.view.initView.bind(a.view)})}};Warlords.WinSituationsController=Sys.extend(Game.Slots.WinSituationsController,Warlords.WinSituationsController,"Warlords.WinSituationsController");Sys.ns("Warlords");Warlords.WinSituationsView={constructor:function(){Game.Slots.WinSituationsView.superclass.constructor.apply(this,arguments)},initAnimations:function(){if(!Platform.isDesktopDevice){this.initView()}},initView:function(c){var b=this;b.rootContainer=new PIXI.Container();b.rootContainer.name="WinSituationsView";b.betlines=b.createBetlines(c);var a=Game.stage.view.animationManager.getLayer("betLines");a.addChild(b.rootContainer);b.stop()},createBetlines:function(l){var g=this,n=g.model.readData("lineConfig"),e,k=[],c,h=[],o,b,a,m=[240,440,640,840,1040],f=[130,318,506,694];var d=Resources.readData("animationImages").betline;for(c=1;c<=n.amount;c++){e=n[c];k=[];a=new PIXI.Container();for(b=0;b<e.lineCoordinates.length;b++){k.push(new PIXI.Point(m[b],f[e.lineCoordinates[b]]))}k=g.splitPoints(k,0.04);o=new PIXI.mesh.Rope(d,k);h.push(a);a.addChild(o);g.rootContainer.addChild(a)}return h},interpolatePoint:function(d,c,a){var b=new PIXI.Point(0,0);b.x=d.x*(1-a)+c.x*a;b.y=d.y*(1-a)+c.y*a;return b},averagePoint:function(c,b){var a=new PIXI.Point(0,0);a.x=(c.x+b.x)*0.5;a.y=(c.y+b.y)*0.5;return a},splitPoints:function(j,a){var f=this,g=[],c,e,b;g.push(j[0]);g.push(f.interpolatePoint(j[0],j[1],a));for(var d=1;d<j.length-1;d++){b=j[d];c=j[d-1];e=j[d+1];var k=f.interpolatePoint(b,c,a);var h=f.interpolatePoint(b,e,a);var l=f.averagePoint(f.averagePoint(k,h),b);g.push(k);g.push(l);g.push(h)}g.push(f.interpolatePoint(j[j.length-1],j[j.length-2],a));g.push(j[j.length-1]);return g},hideAllBetlines:function(){var b=this,a;for(a=0;a<b.betlines.length;a++){b.hideBetline(a+1)}},hideBetline:function(a){this.betlines[a-1].visible=false},showBetline:function(a){this.betlines[a-1].visible=true},stop:function(){this.hideAllBetlines()},showAllWinningBetlines:function(d){var b=this,a=b.model.readData("winSituations"),c=1000;Sys.each(a,function(e){if(Sys.isDefined(e.betline)){b.showBetline(e.betline)}});if(Sys.isDefined(d.showDuration)){c=d.showDuration}setTimeout(function(){b.fireEvent("view:animationComplete")},c)},showSingleWinSituation:function(c,d){var b=this,a=b.model.readData("winSituations")[c];if(Sys.isDefined(a.betline)){b.showBetline(a.betline)}b.fireEvent("view:animationComplete")},frameWinningSymbols:function(k){var h=this,b=h.model.readData("lineConfig"),g=h.model.readData("frameConfig"),e=(k.betline&&b[k.betline].color)||b.defaultColor,c=h.offlineContext,j,l,i,a,m,f=g.image,d;if(f){f=Resources.readData("animationImages")[f]}Sys.each(k.positions,function(n){j=Game.stage.model.getSymbolConfiguration(n.reelIndex,n.symbolIndex);l=j.left+g.xOffset;i=j.top+g.yOffset;a=j.width-g.xOffset*2;m=j.height-g.yOffset*2;c.clearRect(l,i,a,m);if(f){c.drawImage(f,l,i)}else{for(d=0;d<b.drawingOperations.length;d++){c.strokeStyle=e;c=Sys.apply(c,b.drawingOperations[d]);c.strokeRect(l,i,a,m)}}})},showDisplayBetline:function(a,b){var d=this,c=d.model.readData("displayBetlineWho");if(!Sys.isArray(a)){a=[a]}if(!Sys.isDefined(b)){b="hover"}if(b!==c){d.hideDisplayBetline(c)}d.model.storeData("displayBetlineWho",b);a.forEach(function(e){d.showBetline(e)})},hideDisplayBetline:function(a){var b=this;if(!Sys.isDefined(a)){a="hover"}if(a===b.model.readData("displayBetlineWho")){b.hideAllBetlines()}}};Warlords.WinSituationsView=Sys.extend(Game.Slots.WinSituationsView,Warlords.WinSituationsView,"Warlords.WinSituationsView");Sys.ns("Warlords");Warlords.BetlineIndicatorsView={constructor:function(){Game.Slots.BetlineIndicatorsView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var o=this,l=Game.stage.view.animationManager.getLayer("betLineIndicators"),n=new PIXI.Container(),g=Game.stage.model.getCurrentReelGroupConfiguration(),b=g.symbolCols,s=g.reelAreaTop,a=g.reelAreaLeft,c=g.reelSpacing,d=g.symbolWidth,q=((d+c)*b)-c,k=30,h=30,m=36,p,r;l.addChild(n);o.indicators=[];o.betlinesOrderLeftSide=[1,3,5,11,15,0,7,8,9,10,2,4,6,12,16];o.betlinesOrderRightSide=[17,19,21,23,28,13,14,25,26,18,20,22,24,27,29];o.numberConfig=o.model.readData("numberConfig");o.activeTexture=Game.PIXIFactory.createTexture("betlineButtonOver");o.idleTexture=Game.PIXIFactory.createTexture("betlineButtonUp");for(var f=0;f<o.betlinesOrderLeftSide.length;f++){p=o.betlinesOrderLeftSide[f]+1;r=o.createBetlineIndicator(p);r.position=new PIXI.Point(a-k,s+h+(m*f));o.indicators[p-1]=r;n.addChild(r)}for(var e=0;e<o.betlinesOrderRightSide.length;e++){p=o.betlinesOrderRightSide[e]+1;r=o.createBetlineIndicator(p);r.position=new PIXI.Point(a-k+((q+k*2)),s+h+(m*e));o.indicators[p-1]=r;n.addChild(r)}o.rootContainer=n;o.deactivateAllIndicators();o.fireEvent("view:indicatorsCreated",o.indicators)},createBetlineIndicator:function(c){var b=this;var a=new Interface.utils.PIXIInteractive();a.mouseout=b.callbackMouseOut.bind(b);a.mouseover=b.callbackMouseOver.bind(b);a.backgroundSprite=Game.PIXIFactory.createSprite(b.idleTexture);a.backgroundSprite.anchor=new PIXI.Point(0.5,0.5);a.addChild(a.backgroundSprite);a.label=Game.PIXIFactory.createAndAddText(c,Game.TextStyles.BETLINE_BUTTON_LABEL,a);a.label.anchor=new PIXI.Point(0.5,0.5);a.betlineNumber=c;return a},callbackMouseOver:function(c){var b=this;var a=c.target;b.fireEvent("view:showBetline",a.betlineNumber)},callbackMouseOut:function(c){var b=this;var a=c.target;b.fireEvent("view:hideBetline",a.betlineNumber)},activateIndicator:function(a){a.label.visible=true;a.backgroundSprite.texture=this.activeTexture},deactivateIndicator:function(a){a.label.visible=false;a.backgroundSprite.texture=this.idleTexture},deactivateAllIndicators:function(){var a=this;Sys.each(a.indicators,function(b){a.deactivateIndicator(b)})},animate:function(d,b,c){var a=this;a.activateIndicator(a.indicators[d-1]);a.fireEvent("view:animationComplete")},animateSeveral:function(a){for(var b=0;b<a.length;++b){this.activateIndicator(this.indicators[a[b]-1])}this.fireEvent("view:animationComplete")},stop:function(){this.deactivateAllIndicators()},showBetlineIndicators:function(){this.rootContainer.visible=true},hideBetlineIndicators:function(){this.rootContainer.visible=false}};Warlords.BetlineIndicatorsView=Sys.extend(Game.Slots.BetlineIndicatorsView,Warlords.BetlineIndicatorsView,"Warlords.BetlineIndicatorsView");Sys.ns("Warlords");Warlords.BetlineIndicatorsController={constructor:function(){Warlords.BetlineIndicatorsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){Warlords.BetlineIndicatorsController.superclass.setupEvents.apply(this,arguments);var a=this;a.on({"request:betlineIndicators.hide":a.hideBetlineIndicators,"request:betlineIndicators.show":a.showBetlineIndicators,"view:indicatorsCreated":a.fireEvent.bind(a,"notify:betlineIndicators.indicatorsCreated"),"request:betlineIndicators.showBetlineIndicator":a.showBetlineIndicator})},showBetlineIndicator:function(a){this.view.animateSeveral(a)},showBetlineIndicators:function(){this.view.showBetlineIndicators()},hideBetlineIndicators:function(){this.view.hideBetlineIndicators()}};Warlords.BetlineIndicatorsController=Sys.extend(Game.Slots.BetlineIndicatorsController,Warlords.BetlineIndicatorsController,"Warlords.BetlineIndicatorsController");Sys.ns("Warlords");Warlords.AmbienceManagerController={setupEvents:function(){var a=this;a.on({"notify:audioPlayer.soundLoaded":a.onSoundLoaded,"request:ambienceManager.ambienceEnableState":a.changeAmbienceEnableState,"request:ambienceManager.ambienceChangeActive":a.setActiveAmbience,"request:ambienceManager.ambiencePauseSwitch":a.changePauseSwitch,"request:ambienceManager.ambienceStopActive":a.stopAmbience,"notify:stateHandler.leavingBeforeLoaderCloseState":a.onBeforeLoaderClose,"notify:stateHandler.leavingShowingIntroMovieState":a.changeAmbienceEnableState.bind(a,true)})},onSoundLoaded:function(){this.model.storeData("isSoundsLoaded",true);var a=Services.settingsManager.getSetting("showIntroMovie");if(!a){this.changeAmbienceEnableState(true)}},changeAmbienceEnableState:function(a){var b=this.model.readData("isSoundsLoaded");if(b){Warlords.AmbienceManagerController.superclass.changeAmbienceEnableState.apply(this,arguments)}}};Warlords.AmbienceManagerController=Sys.extend(Game.AmbienceManagerController,Warlords.AmbienceManagerController,"Warlords.AmbienceManagerController");Sys.ns("Cheats");Cheats.JMXReelSelector={constructor:function(){Cheats.JMXReelSelector.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Cheats.JMXReelSelectorModel,view:Cheats.JMXReelSelectorView,controller:Cheats.JMXReelSelectorController}}};Cheats.JMXReelSelector=Sys.extend(Core.Module,Cheats.JMXReelSelector,"Cheats.JMXReelSelector");Sys.ns("Cheats");Cheats.JMXReelSelectorModel={constructor:function(){Cheats.JMXReelSelectorModel.superclass.constructor.apply(this,arguments)},setupData:function(){var b=this;b.data={availableReelSets:Cheats.JMXReelSelectorConfiguration.model.availableReelSets,currentReelSet:0,currentReelPositions:[]};for(var a=0;a<b.getCurrentReelSet().reelStrips.length;a++){b.data.currentReelPositions[a]="0"}},toggleReelSet:function(){var b=this,a=Sys.utils.getKeys(b.data.availableReelSets).length;b.data.currentReelSet++;if(b.data.currentReelSet===a){b.data.currentReelSet=0}},getAvailableReelSets:function(){return this.readData("availableReelSets")},getCurrentReelSet:function(){var b=Sys.utils.getKeys(this.data.availableReelSets);var a=b[this.data.currentReelSet];return{reelSetName:a,reelStrips:this.data.availableReelSets[b[this.data.currentReelSet]]}},getCurrentReelPositions:function(){return this.readData("currentReelPositions")},setCurrentReelPositions:function(a){return this.storeData("currentReelPositions",a)}};Cheats.JMXReelSelectorModel=Sys.extend(Core.Model,Cheats.JMXReelSelectorModel,"Cheats.JMXReelSelectorModel");Sys.ns("Cheats");Cheats.JMXReelSelectorView={constructor:function(){Cheats.JMXReelSelectorView.superclass.constructor.apply(this,arguments);this.symbolImages=Cheats.JMXReelSelectorConfiguration.view.IMAGES;this.symbolHeight=Cheats.JMXReelSelectorConfiguration.view.SYMBOL_DISPLAY_SIZE_HEIGHT;this.symbolWidth=Cheats.JMXReelSelectorConfiguration.view.SYMBOL_DISPLAY_SIZE_WIDTH;this.reelSetup=Cheats.JMXReelSelectorConfiguration.view.REEL_SETUP;this.wrapperList=[];this.scaleValue=Environment.getWindowToVirtualScale(3);this.symbolScaledWidth=Math.ceil(this.symbolWidth/this.scaleValue);this.symbolScaledHeight=Math.ceil(this.symbolHeight/this.scaleValue)},setUpContent:function(){var a=this;a.setUpContainer();a.setUpControls();a.setUpDisplay();a.hasSetUpContent=true},setUpContainer:function(){this.container=new Sys.Element({tag:"div",id:"JMXReelSelectorContainer",style:"position: absolute; z-index: 10000; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0, 0.9); display: none;",renderTo:"gameWrapper"})},setUpControls:function(){var f=this,a=f.container,c=a.add(new Sys.Element({tag:"div",style:"position: absolute;width: 45%;top: 4.50rem;left: 50%;height: 0.40rem;line-height: 0.40rem;color: white;font-size: 0.30rem;",textContent:"Position: "})),e=a.add(new Sys.Element({tag:"div",style:"position: absolute;width: 20%;top: 4.90rem;left: 50%;height: 0.40rem;line-height: 0.40rem;color: white;font-size: 0.30rem;",textContent:"Reel set:"})),d=new Interface.utils.DOMButton({id:"JMXReelSelectorSetButton",clickCallback:f.fireEvent.bind(f,"view:switchReelSet"),textContent:f.model.getCurrentReelSet().reelSetName}),h=new Interface.utils.DOMButton({id:"JMXReelSelectorOKButton",clickCallback:f.close.bind(f,true),textContent:"OK"}),g=new Interface.utils.DOMButton({id:"JMXReelSelectorCancelButton",clickCallback:f.close.bind(f,false),textContent:"CANCEL"});a.add(d.getContainer());a.add(h.getContainer());a.add(g.getContainer());[h.getContainer(),g.getContainer()].forEach(function(i){i.el.style.position="absolute";i.el.style.display="inline-block";i.el.style.width="15%";i.el.style.height="0.40rem";i.el.style.lineHeight="0.40rem";i.el.style.margin="0.02rem";i.el.style.border="0.02rem solid white";i.el.style.color="white";i.el.style.textAlign="center";i.el.style.fontSize="0.30rem"});var b=d.getContainer();b.el.style.position="absolute";b.el.style.display="inline-block";b.el.style.width="25%";b.el.style.height="0.40rem";b.el.style.lineHeight="0.40rem";b.el.style.margin="0.02rem";b.el.style.border="0.02rem solid white";b.el.style.color="white";b.el.style.textAlign="center";b.el.style.fontSize="0.30rem";d.getContainer().el.style.left="74%";d.getContainer().el.style.top="0.2rem";h.getContainer().el.style.left="80%";h.getContainer().el.style.top="1.2rem";g.getContainer().el.style.left="80%";g.getContainer().el.style.top="2.2rem";f.positionDisplay=c;f.reelSetDisplay=e;f.controls=[d,h,g];f.reelSetButton=d},setUpDisplay:function(){var o=this,b=o.model.getCurrentReelSet().reelStrips.length,m=o.reelSetup,c=o.symbolScaledHeight,d=o.symbolScaledWidth,r,n=Math.ceil(30/o.scaleValue),h=Math.ceil(d+(32/o.scaleValue)),k=Math.ceil(16/o.scaleValue),a;for(var g=0;g<b;g++){var q=new Sys.Element({id:"JMXReelSelectorDisplay_content_"+g,tag:"div",style:"position: absolute; top: 0; left: 0; width: 90%; display: block; line-height: 0; text-align: center;"});var e=new Interface.utils.DOMScrollableContent({id:"JMXReelSelectorDisplay_wrapper_"+g,content:q,snap:{width:d,height:c},scrollCompleteCallback:o.fireEvent.bind(o,"view:updateReelPositions",g)});o.wrapperList[g]=e;var p=o.model.getAvailableReelSets();var l=Sys.utils.getKeys(o.model.getAvailableReelSets());for(var f=0;f<l.length;f++){o[l[f]+"_"+g]=q.add(o.createReel(p[l[f]][g],l[f]+"_"+g,c,d));if(f===0){o[l[f]+"_"+g].el.style.display="block"}}a=e.getContainer();o.container.add(a);if(g>0){r=""+(h*g+n)+"px"}else{r=n+"px"}a.el.style.width=(d+k)+"px";a.el.style.height=(m[g]*c)+"px";a.el.style.backgroundColor="rgba(0,0,0, 0.7)";a.el.style.outline="rgba(200,200,200, 0.4) solid thick";a.el.style.position="absolute";a.el.style.top="5%";a.el.style.left=r;a.el.style.display="block";a.el.style.overflow="hidden"}},createReel:function(c,e,p,a){var b=new Sys.Element({id:e,tag:"div",style:"display:none"}),s=this,h=p,m=a,q="width:"+m+"px; height:"+h+"px; display:inline-block; border: 0; margin: -0.01rem; background-repeat: no-repeat;",o,r,g;var d=Resources.readData("animationImages");o=b.add(new Sys.Element({tag:"div",style:q}));r=c.split(",");for(var l=0;l<r.length;l++){var k=r[l];if(Warlords.Utils.STACKED_SYMBOLS.contains(k)){r[l]=k+"_1";r[l+1]=k+"_2";r[l+2]=k+"_3"}}for(var n=0;n<r.length;n++){var f=r[n];g=d[f];g.width=Math.ceil(g.width/s.scaleValue);g.height=Math.ceil(g.height/s.scaleValue);o.add(new Sys.Element({tag:"div",style:"width:"+m+"px; height:"+h+'px; background-image: url("'+g.baseTexture.source.src+'"); background-size: 100% 100%; background-repeat: no-repeat;'}))}return b},updateReelPositions:function(c){var b=this;b.positionDisplay.el.textContent="Position: ";for(var a=0;a<c.length;a++){b.positionDisplay.el.textContent+=c[a];if(a!==(c.length-1)){b.positionDisplay.el.textContent+=","}}},show:function(c){var b=this;b.jmxData=c;if(!b.hasSetUpContent){b.setUpContent()}b.container.el.style.display="block";for(var a=0;a<b.wrapperList.length;a++){b.wrapperList[a].enable()}b.controls.forEach(function(d){d.enable()})},close:function(c){var b=this;if(c){b.fireEvent("view:updateJMXData")}b.fireEvent("view:close",b.jmxData);b.container.el.style.display="none";for(var a=0;a<b.wrapperList.length;a++){b.wrapperList[a].disable()}b.controls.forEach(function(d){d.disable()})},switchReelSet:function(a){var e=this,b=a.reelStrips.length,d=a.reelSetName,f=e.reelSetButton.getContainer().el.textContent;for(var c=0;c<b;c++){e[f+"_"+c].el.style.display="none";e[d+"_"+c].el.style.display="block"}e.reelSetButton.getContainer().el.textContent=d;for(c=0;c<e.wrapperList.length;c++){e.wrapperList[c].updateScrollerDimensions();e.wrapperList[c].scrollTo(0)}}};Cheats.JMXReelSelectorView=Sys.extend(Core.View,Cheats.JMXReelSelectorView,"Cheats.JMXReelSelectorView");Sys.ns("Cheats");Cheats.JMXReelSelectorController={constructor:function(){Cheats.JMXReelSelectorController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:JMXReelSelector.show":a.show,"view:updateReelPositions":a.updateReelPositions,"view:switchReelSet":a.switchReelSet,"view:updateJMXData":a.updateJMXData,"view:close":a.close})},updateReelPositions:function(d,e){var b=this,f=d,a=Math.round(e/b.view.symbolScaledHeight);a=Math.max(a,0);a=Math.min(a,b.model.getCurrentReelSet().reelStrips[f].split(",").length-1);var c=b.model.getCurrentReelPositions();c[f]=a;b.model.setCurrentReelPositions(c);b.view.updateReelPositions(c)},switchReelSet:function(){var a=this;a.model.toggleReelSet();a.view.switchReelSet(a.model.getCurrentReelSet())},updateJMXData:function(){var d=this,e=d.model.getCurrentReelPositions(),f="",c=d.model.getCurrentReelSet("reelSetName"),b=c.reelSetName;for(var a=0;a<e.length;a++){f+=e[a];if(a!==(e.length-1)){f+=","}}d.view.jmxData.outcome=f},show:function(a){this.view.show(a);this.fireEvent("notify:JMX.child.show")},close:function(a){this.fireEvent("request:JMX.setExtras",a.extras);this.fireEvent("request:JMX.setOutcome",a.outcome);this.fireEvent("request:JMX.setQueue",a.queue);this.fireEvent("notify:JMX.child.closed")}};Cheats.JMXReelSelectorController=Sys.extend(Core.Controller,Cheats.JMXReelSelectorController,"Cheats.JMXReelSelectorController");Sys.ns("Cheats");Cheats.JMXReelSelectorConfiguration={model:{availableReelSets:{basic:["SYM11,SYM5,SYM5,SYM5,SYM7,SYM9,SYM8,SYM11,SYM6,SYM8,SYM9,SYM11,SYM7,SYM9,SYM10,SYM11,SYM9,SYM8,SYM11,SYM7,SYM8,SYM1,SYM6,SYM7,SYM11,SYM9,SYM7,SYM10,SYM11,SYM7,SYM9,SYM1,SYM11,SYM7,SYM8,SYM11,SYM6,SYM7,SYM3,SYM3,SYM3,SYM8,SYM7,SYM9,SYM8,SYM11,SYM1,SYM7,SYM9,SYM10,SYM8,SYM7,SYM9,SYM6,SYM8,SYM11,SYM3,SYM3,SYM3,SYM7,SYM8,SYM11,SYM9,SYM5,SYM5,SYM5,SYM11,SYM8,SYM7,SYM9,SYM11,SYM8,SYM6,SYM7,SYM1,SYM5,SYM5,SYM5,SYM7,SYM11,SYM8,SYM9,SYM7,SYM5,SYM5,SYM5,SYM7,SYM11,SYM6,SYM9,SYM11,SYM1,SYM8,SYM9,SYM6,SYM11,SYM1,SYM7,SYM8,SYM11,SYM10,SYM6,SYM11,SYM7,SYM9,SYM8,SYM4,SYM4,SYM4,SYM9,SYM7,SYM3,SYM3,SYM3,SYM6,SYM11,SYM8,SYM7,SYM9,SYM11,SYM6,SYM8,SYM5,SYM5,SYM5,SYM11,SYM7,SYM9,SYM11,SYM8,SYM6,SYM11,SYM4,SYM4,SYM4,SYM11,SYM7,SYM8,SYM1,SYM11,SYM9,SYM8,SYM11,SYM7,SYM5,SYM5,SYM5,SYM9,SYM11,SYM4,SYM4,SYM4,SYM8,SYM11,SYM10,SYM7,SYM9,SYM11,SYM8,SYM4,SYM4,SYM4,SYM11,SYM7,SYM6,SYM10,SYM8,SYM11,SYM6,SYM4,SYM4,SYM4,SYM9,SYM10,SYM1,SYM11,SYM8,SYM7,SYM11,SYM8,SYM6,SYM7,SYM11,SYM5,SYM5,SYM5,SYM6,SYM11,SYM7,SYM1,SYM11,SYM9,SYM7,SYM4,SYM4,SYM4,SYM11,SYM7,SYM1,SYM8,SYM6,SYM7,SYM9,SYM4,SYM4,SYM4,SYM7,SYM9,SYM8,SYM7,SYM11,SYM6,SYM4,SYM4,SYM4,SYM9,SYM7,SYM8,SYM11,SYM9,SYM7,SYM8,SYM11,SYM7,SYM8,SYM6,SYM5,SYM5,SYM5,SYM11,SYM8,SYM7,SYM9,SYM10","SYM9,SYM8,SYM6,SYM9,SYM7,SYM11,SYM9,SYM7,SYM8,SYM6,SYM4,SYM4,SYM4,SYM6,SYM9,SYM7,SYM10,SYM6,SYM3,SYM3,SYM3,SYM6,SYM1,SYM9,SYM7,SYM8,SYM11,SYM3,SYM3,SYM3,SYM9,SYM6,SYM14,SYM7,SYM9,SYM3,SYM3,SYM3,SYM6,SYM7,SYM9,SYM6,SYM1,SYM7,SYM3,SYM3,SYM3,SYM9,SYM7,SYM11,SYM8,SYM6,SYM9,SYM8,SYM7,SYM9,SYM6,SYM4,SYM4,SYM4,SYM7,SYM1,SYM8,SYM9,SYM7,SYM6,SYM4,SYM4,SYM4,SYM11,SYM7,SYM10,SYM9,SYM3,SYM3,SYM3,SYM6,SYM11,SYM1,SYM6,SYM3,SYM3,SYM3,SYM9,SYM6,SYM8,SYM9,SYM1,SYM6,SYM4,SYM4,SYM4,SYM6,SYM8,SYM9,SYM7,SYM6,SYM9,SYM7,SYM6,SYM9,SYM3,SYM3,SYM3,SYM6,SYM7,SYM9,SYM1,SYM3,SYM3,SYM3,SYM8,SYM6,SYM9,SYM7,SYM15,SYM9,SYM3,SYM3,SYM3,SYM8,SYM6,SYM9,SYM7,SYM10,SYM9,SYM6,SYM7,SYM3,SYM3,SYM3,SYM6,SYM13,SYM7,SYM6,SYM4,SYM4,SYM4,SYM6,SYM10,SYM9,SYM5,SYM5,SYM5,SYM7,SYM8,SYM9,SYM6,SYM3,SYM3,SYM3,SYM7,SYM9,SYM1,SYM6,SYM7,SYM9,SYM6,SYM8,SYM9,SYM10,SYM5,SYM5,SYM5,SYM7,SYM6,SYM8,SYM10,SYM6,SYM5,SYM5,SYM5,SYM8,SYM7,SYM9,SYM6,SYM7,SYM9,SYM6,SYM7,SYM9,SYM3,SYM3,SYM3,SYM8,SYM13,SYM9,SYM7,SYM3,SYM3,SYM3,SYM7,SYM6,SYM9,SYM7,SYM11,SYM8,SYM6,SYM7,SYM13,SYM9,SYM5,SYM5,SYM5,SYM9,SYM6,SYM7,SYM9,SYM6,SYM14,SYM11,SYM6,SYM9,SYM5,SYM5,SYM5,SYM6,SYM7,SYM9,SYM4,SYM4,SYM4,SYM10,SYM6,SYM7,SYM9,SYM6,SYM4,SYM4,SYM4,SYM6,SYM7,SYM9,SYM6,SYM11,SYM7,SYM4,SYM4,SYM4,SYM1,SYM9,SYM11,SYM5,SYM5,SYM5,SYM7,SYM10,SYM6,SYM9,SYM7,SYM4,SYM4,SYM4,SYM8,SYM9,SYM7,SYM5,SYM5,SYM5,SYM9,SYM10,SYM6,SYM9,SYM8,SYM7,SYM6,SYM4,SYM4,SYM4,SYM6,SYM7,SYM8,SYM9,SYM1,SYM8,SYM10,SYM7,SYM9,SYM6,SYM1,SYM7","SYM8,SYM6,SYM15,SYM10,SYM7,SYM8,SYM11,SYM10,SYM6,SYM4,SYM4,SYM4,SYM10,SYM8,SYM11,SYM10,SYM6,SYM15,SYM8,SYM10,SYM6,SYM8,SYM4,SYM4,SYM4,SYM11,SYM10,SYM8,SYM6,SYM10,SYM13,SYM8,SYM4,SYM4,SYM4,SYM11,SYM10,SYM6,SYM8,SYM11,SYM10,SYM6,SYM11,SYM1,SYM10,SYM6,SYM7,SYM9,SYM10,SYM8,SYM5,SYM5,SYM5,SYM7,SYM6,SYM10,SYM11,SYM8,SYM6,SYM10,SYM9,SYM7,SYM10,SYM8,SYM11,SYM9,SYM10,SYM6,SYM1,SYM11,SYM10,SYM8,SYM6,SYM1,SYM10,SYM7,SYM8,SYM5,SYM5,SYM5,SYM8,SYM10,SYM7,SYM6,SYM11,SYM5,SYM5,SYM5,SYM8,SYM6,SYM10,SYM7,SYM9,SYM10,SYM6,SYM8,SYM9,SYM11,SYM10,SYM8,SYM11,SYM10,SYM14,SYM6,SYM10,SYM8,SYM7,SYM10,SYM11,SYM8,SYM10,SYM4,SYM4,SYM4,SYM11,SYM8,SYM6,SYM10,SYM11,SYM8,SYM5,SYM5,SYM5,SYM6,SYM10,SYM11,SYM7,SYM6,SYM11,SYM5,SYM5,SYM5,SYM8,SYM10,SYM7,SYM6,SYM10,SYM4,SYM4,SYM4,SYM11,SYM6,SYM1,SYM8,SYM10,SYM3,SYM3,SYM3,SYM10,SYM11,SYM8,SYM6,SYM10,SYM14,SYM7,SYM6,SYM8,SYM10,SYM6,SYM8,SYM11,SYM10,SYM3,SYM3,SYM3,SYM7,SYM10,SYM8,SYM11,SYM10,SYM6,SYM5,SYM5,SYM5,SYM6,SYM8,SYM10,SYM6,SYM1,SYM4,SYM4,SYM4,SYM7,SYM8,SYM10,SYM6,SYM11,SYM10,SYM8,SYM1,SYM7,SYM4,SYM4,SYM4,SYM6,SYM10,SYM8,SYM6,SYM3,SYM3,SYM3,SYM11,SYM10,SYM7,SYM8,SYM10,SYM6,SYM1,SYM9,SYM11,SYM10,SYM7,SYM6,SYM5,SYM5,SYM5,SYM1,SYM8,SYM6,SYM10,SYM11,SYM8,SYM6,SYM10,SYM7,SYM11,SYM8,SYM5,SYM5,SYM5,SYM8,SYM1,SYM10,SYM8,SYM6,SYM10,SYM5,SYM5,SYM5,SYM10,SYM6,SYM8,SYM10,SYM9,SYM11,SYM10,SYM3,SYM3,SYM3,SYM10,SYM8,SYM7,SYM11,SYM6,SYM10,SYM8,SYM5,SYM5,SYM5,SYM10,SYM13,SYM5,SYM5,SYM5,SYM6,SYM10,SYM11,SYM8,SYM10,SYM11,SYM6,SYM8,SYM9,SYM11,SYM10,SYM7,SYM1,SYM11,SYM6,SYM8,SYM10,SYM3,SYM3,SYM3,SYM11,SYM8,SYM10,SYM7,SYM8,SYM5,SYM5,SYM5,SYM11,SYM10,SYM8,SYM9,SYM10,SYM3,SYM3,SYM3,SYM10,SYM11,SYM6,SYM8,SYM10,SYM1,SYM8,SYM7,SYM10,SYM11,SYM6,SYM10,SYM5,SYM5,SYM5,SYM8,SYM6,SYM10,SYM7,SYM8,SYM11,SYM6,SYM10,SYM1,SYM8,SYM10,SYM11,SYM9,SYM10","SYM8,SYM1,SYM10,SYM8,SYM6,SYM7,SYM4,SYM4,SYM4,SYM9,SYM7,SYM8,SYM10,SYM7,SYM8,SYM9,SYM1,SYM4,SYM4,SYM4,SYM8,SYM11,SYM10,SYM4,SYM4,SYM4,SYM9,SYM11,SYM8,SYM6,SYM10,SYM1,SYM9,SYM8,SYM11,SYM6,SYM10,SYM9,SYM7,SYM8,SYM9,SYM11,SYM8,SYM7,SYM5,SYM5,SYM5,SYM1,SYM11,SYM9,SYM10,SYM6,SYM11,SYM10,SYM7,SYM11,SYM6,SYM7,SYM8,SYM9,SYM10,SYM7,SYM6,SYM15,SYM10,SYM11,SYM5,SYM5,SYM5,SYM8,SYM9,SYM11,SYM7,SYM9,SYM6,SYM11,SYM10,SYM8,SYM9,SYM11,SYM7,SYM10,SYM11,SYM6,SYM5,SYM5,SYM5,SYM6,SYM8,SYM9,SYM11,SYM1,SYM9,SYM6,SYM8,SYM11,SYM6,SYM7,SYM11,SYM10,SYM6,SYM14,SYM8,SYM9,SYM11,SYM7,SYM10,SYM1,SYM9,SYM7,SYM11,SYM6,SYM4,SYM4,SYM4,SYM10,SYM8,SYM11,SYM9,SYM1,SYM4,SYM4,SYM4,SYM10,SYM8,SYM11,SYM6,SYM8,SYM9,SYM4,SYM4,SYM4,SYM14,SYM9,SYM11,SYM10,SYM8,SYM7,SYM10,SYM6,SYM4,SYM4,SYM4,SYM9,SYM11,SYM8,SYM10,SYM11,SYM9,SYM8,SYM11,SYM6,SYM4,SYM4,SYM4,SYM11,SYM10,SYM9,SYM6,SYM7,SYM13,SYM8,SYM10,SYM7,SYM11,SYM5,SYM5,SYM5,SYM6,SYM9,SYM10,SYM13,SYM11,SYM7,SYM8,SYM10,SYM11,SYM9,SYM5,SYM5,SYM5,SYM10,SYM6,SYM7,SYM10,SYM9,SYM1,SYM11,SYM6,SYM10,SYM7,SYM9,SYM6,SYM8,SYM1,SYM11,SYM6,SYM9,SYM8,SYM7,SYM9,SYM8,SYM10,SYM1,SYM9,SYM5,SYM5,SYM5,SYM10,SYM8,SYM6,SYM7,SYM5,SYM5,SYM5,SYM9,SYM11,SYM1,SYM7,SYM10,SYM11,SYM6,SYM9,SYM10,SYM8,SYM11,SYM7,SYM9,SYM11,SYM10,SYM8,SYM7,SYM6,SYM11,SYM9,SYM8,SYM1,SYM7,SYM10,SYM6,SYM9,SYM11,SYM7,SYM10,SYM15,SYM9,SYM6,SYM11,SYM9,SYM7,SYM3,SYM3,SYM3,SYM8,SYM9,SYM10,SYM7,SYM5,SYM5,SYM5,SYM6,SYM8,SYM10,SYM1,SYM9,SYM7,SYM11,SYM10,SYM6,SYM8,SYM11,SYM9,SYM8,SYM1,SYM6,SYM10,SYM7,SYM8,SYM11,SYM9,SYM1,SYM7,SYM3,SYM3,SYM3,SYM6,SYM10,SYM9,SYM11,SYM8,SYM7,SYM11,SYM10,SYM9,SYM13,SYM8,SYM7,SYM10,SYM9,SYM11,SYM4,SYM4,SYM4,SYM10,SYM7,SYM9,SYM8,SYM6,SYM9,SYM7,SYM10,SYM6,SYM8,SYM11,SYM7,SYM9,SYM3,SYM3,SYM3,SYM11,SYM9,SYM14,SYM7,SYM8,SYM11,SYM6,SYM7,SYM10,SYM9,SYM4,SYM4,SYM4,SYM1,SYM7,SYM11,SYM6,SYM8,SYM3,SYM3,SYM3,SYM11,SYM9","SYM4,SYM4,SYM4,SYM9,SYM6,SYM11,SYM7,SYM5,SYM5,SYM5,SYM10,SYM9,SYM7,SYM1,SYM6,SYM11,SYM10,SYM3,SYM3,SYM3,SYM10,SYM11,SYM7,SYM1,SYM8,SYM7,SYM5,SYM5,SYM5,SYM11,SYM8,SYM9,SYM7,SYM11,SYM10,SYM5,SYM5,SYM5,SYM6,SYM8,SYM10,SYM7,SYM6,SYM11,SYM7,SYM10,SYM6,SYM11,SYM1,SYM10,SYM9,SYM7,SYM10,SYM5,SYM5,SYM5,SYM8,SYM10,SYM9,SYM7,SYM11,SYM8,SYM9,SYM10,SYM11,SYM8,SYM6,SYM9,SYM10,SYM5,SYM5,SYM5,SYM11,SYM10,SYM1,SYM9,SYM10,SYM4,SYM4,SYM4,SYM8,SYM7,SYM11,SYM10,SYM7,SYM6,SYM1,SYM10,SYM6,SYM3,SYM3,SYM3,SYM6,SYM11,SYM8,SYM7,SYM10,SYM6,SYM3,SYM3,SYM3,SYM8,SYM6,SYM9,SYM11,SYM7,SYM1,SYM6,SYM10,SYM8,SYM7,SYM10,SYM11,SYM4,SYM4,SYM4,SYM7,SYM1,SYM6,SYM3,SYM3,SYM3,SYM1,SYM9,SYM10,SYM7,SYM5,SYM5,SYM5,SYM6,SYM7,SYM9,SYM10,SYM11,SYM8,SYM1,SYM6,SYM8,SYM10,SYM11,SYM1,SYM9,SYM7,SYM11,SYM10,SYM8,SYM7,SYM9,SYM6,SYM7,SYM10,SYM3,SYM3,SYM3,SYM9,SYM11,SYM8,SYM7,SYM10,SYM4,SYM4,SYM4,SYM7,SYM10,SYM6,SYM5,SYM5,SYM5,SYM11,SYM9,SYM7,SYM11,SYM5,SYM5,SYM5,SYM11,SYM8,SYM1,SYM6,SYM10,SYM3,SYM3,SYM3,SYM6,SYM10,SYM9,SYM8,SYM7,SYM10,SYM8,SYM11,SYM7,SYM6,SYM9,SYM10,SYM11,SYM7,SYM6,SYM1,SYM3,SYM3,SYM3,SYM9,SYM1,SYM7,SYM11,SYM8,SYM10,SYM1,SYM11,SYM6,SYM8,SYM11,SYM7,SYM10,SYM4,SYM4,SYM4,SYM11,SYM8,SYM7,SYM10,SYM9,SYM4,SYM4,SYM4,SYM8,SYM6,SYM7,SYM10,SYM5,SYM5,SYM5,SYM8,SYM1,SYM11,SYM10,SYM4,SYM4,SYM4,SYM10,SYM11,SYM8,SYM9,SYM6,SYM7,SYM10,SYM6,SYM3,SYM3,SYM3,SYM1,SYM10,SYM7,SYM9,SYM6,SYM11,SYM4,SYM4,SYM4,SYM10,SYM9,SYM8"],randomWild:["SYM8,SYM7,SYM9,SYM6,SYM10,SYM11,SYM7,SYM8,SYM11,SYM4,SYM4,SYM4,SYM11,SYM7,SYM8,SYM6,SYM11,SYM9,SYM8,SYM7,SYM9,SYM11,SYM4,SYM4,SYM4,SYM6,SYM8,SYM11,SYM7,SYM8,SYM11,SYM7,SYM9,SYM4,SYM4,SYM4,SYM6,SYM11,SYM5,SYM5,SYM5,SYM7,SYM8,SYM11,SYM9,SYM7,SYM8,SYM11,SYM4,SYM4,SYM4,SYM9,SYM11,SYM8,SYM7,SYM11,SYM9,SYM8,SYM10,SYM7,SYM11,SYM4,SYM4,SYM4,SYM11,SYM7,SYM6,SYM8,SYM9,SYM10,SYM1,SYM11,SYM6,SYM8,SYM7,SYM11,SYM9,SYM8,SYM10,SYM6,SYM9,SYM11,SYM8,SYM6,SYM7,SYM11,SYM9,SYM8,SYM3,SYM3,SYM3,SYM11,SYM9,SYM7,SYM11,SYM3,SYM3,SYM3,SYM8,SYM7,SYM11,SYM6,SYM7,SYM9,SYM11,SYM8,SYM6,SYM7,SYM11,SYM10,SYM9,SYM7,SYM11,SYM6,SYM9,SYM5,SYM5,SYM5,SYM6,SYM8,SYM7,SYM6,SYM9,SYM11,SYM5,SYM5,SYM5,SYM7,SYM8,SYM6,SYM11,SYM8,SYM10,SYM11,SYM9,SYM8,SYM7,SYM4,SYM4,SYM4,SYM11,SYM7,SYM5,SYM5,SYM5,SYM7,SYM9,SYM11,SYM8,SYM7,SYM4,SYM4,SYM4,SYM9,SYM11,SYM6,SYM9,SYM8,SYM11,SYM10,SYM8,SYM11,SYM7,SYM9,SYM6,SYM11,SYM8,SYM9,SYM7,SYM11,SYM10,SYM7,SYM8,SYM1,SYM11,SYM7,SYM8,SYM5,SYM5,SYM5,SYM9,SYM6,SYM11,SYM7,SYM8,SYM11,SYM3,SYM3,SYM3,SYM10,SYM9,SYM7,SYM11,SYM8,SYM6,SYM10,SYM8,SYM11,SYM7,SYM9,SYM11,SYM10,SYM5,SYM5,SYM5,SYM11,SYM9,SYM8,SYM10,SYM11,SYM7,SYM8,SYM9,SYM5,SYM5,SYM5,SYM9,SYM7,SYM11","SYM7,SYM6,SYM10,SYM9,SYM6,SYM4,SYM4,SYM4,SYM6,SYM7,SYM9,SYM11,SYM7,SYM6,SYM9,SYM10,SYM8,SYM7,SYM6,SYM9,SYM5,SYM5,SYM5,SYM9,SYM8,SYM6,SYM9,SYM7,SYM8,SYM3,SYM3,SYM3,SYM9,SYM7,SYM8,SYM6,SYM9,SYM11,SYM7,SYM9,SYM6,SYM7,SYM8,SYM9,SYM6,SYM7,SYM4,SYM4,SYM4,SYM9,SYM6,SYM11,SYM8,SYM7,SYM9,SYM8,SYM6,SYM7,SYM5,SYM5,SYM5,SYM6,SYM9,SYM7,SYM8,SYM9,SYM6,SYM11,SYM7,SYM6,SYM9,SYM5,SYM5,SYM5,SYM9,SYM6,SYM7,SYM9,SYM6,SYM1,SYM7,SYM10,SYM6,SYM9,SYM3,SYM3,SYM3,SYM6,SYM9,SYM7,SYM8,SYM11,SYM9,SYM7,SYM6,SYM5,SYM5,SYM5,SYM6,SYM7,SYM10,SYM6,SYM1,SYM7,SYM6,SYM9,SYM8,SYM10,SYM6,SYM9,SYM3,SYM3,SYM3,SYM10,SYM6,SYM11,SYM7,SYM8,SYM9,SYM6,SYM8,SYM7,SYM6,SYM5,SYM5,SYM5,SYM6,SYM9,SYM4,SYM4,SYM4,SYM6,SYM7,SYM9,SYM8,SYM10,SYM6,SYM9,SYM5,SYM5,SYM5,SYM6,SYM8,SYM7,SYM10,SYM3,SYM3,SYM3,SYM7,SYM9,SYM6,SYM8,SYM7,SYM11,SYM9,SYM6,SYM7,SYM11,SYM4,SYM4,SYM4,SYM7,SYM6,SYM9,SYM8,SYM7,SYM9,SYM6,SYM3,SYM3,SYM3,SYM6,SYM7,SYM8,SYM9,SYM6,SYM8,SYM11,SYM9,SYM7,SYM6,SYM9,SYM4,SYM4,SYM4,SYM6,SYM9,SYM7,SYM6,SYM9,SYM7,SYM3,SYM3,SYM3,SYM9,SYM6,SYM7,SYM9,SYM6,SYM7,SYM8,SYM9,SYM6,SYM7,SYM9,SYM6,SYM7,SYM4,SYM4,SYM4,SYM7,SYM9,SYM6,SYM7,SYM9,SYM10,SYM11,SYM7,SYM8,SYM6,SYM10,SYM9,SYM6,SYM7,SYM9,SYM5,SYM5,SYM5,SYM6,SYM9","SYM7,SYM10,SYM8,SYM11,SYM10,SYM6,SYM1,SYM10,SYM8,SYM6,SYM9,SYM11,SYM10,SYM4,SYM4,SYM4,SYM10,SYM11,SYM8,SYM6,SYM7,SYM10,SYM8,SYM6,SYM10,SYM8,SYM5,SYM5,SYM5,SYM11,SYM10,SYM8,SYM6,SYM10,SYM11,SYM5,SYM5,SYM5,SYM10,SYM11,SYM6,SYM8,SYM10,SYM11,SYM7,SYM10,SYM8,SYM9,SYM10,SYM8,SYM6,SYM7,SYM10,SYM11,SYM8,SYM10,SYM6,SYM4,SYM4,SYM4,SYM11,SYM6,SYM10,SYM8,SYM11,SYM6,SYM7,SYM10,SYM6,SYM8,SYM7,SYM3,SYM3,SYM3,SYM10,SYM8,SYM11,SYM7,SYM6,SYM10,SYM8,SYM9,SYM10,SYM11,SYM3,SYM3,SYM3,SYM11,SYM6,SYM10,SYM7,SYM11,SYM6,SYM8,SYM10,SYM11,SYM6,SYM10,SYM8,SYM6,SYM5,SYM5,SYM5,SYM8,SYM10,SYM7,SYM6,SYM10,SYM8,SYM9,SYM10,SYM7,SYM8,SYM6,SYM10,SYM8,SYM4,SYM4,SYM4,SYM10,SYM11,SYM8,SYM6,SYM11,SYM8,SYM10,SYM7,SYM8,SYM11,SYM7,SYM10,SYM8,SYM5,SYM5,SYM5,SYM10,SYM11,SYM6,SYM8,SYM10,SYM7,SYM6,SYM8,SYM10,SYM11,SYM8,SYM9,SYM10,SYM8,SYM6,SYM10,SYM9,SYM11,SYM8,SYM4,SYM4,SYM4,SYM6,SYM10,SYM8,SYM1,SYM10,SYM8,SYM6,SYM5,SYM5,SYM5,SYM6,SYM11,SYM8,SYM10,SYM11,SYM9,SYM8,SYM5,SYM5,SYM5,SYM10,SYM11,SYM7,SYM10,SYM5,SYM5,SYM5,SYM10,SYM7,SYM11,SYM6,SYM10,SYM8,SYM7,SYM10,SYM8,SYM6,SYM10,SYM11,SYM8,SYM10,SYM6,SYM11,SYM10,SYM8,SYM9,SYM10,SYM6,SYM5,SYM5,SYM5,SYM7,SYM10,SYM3,SYM3,SYM3,SYM10,SYM8,SYM6,SYM10,SYM11,SYM9,SYM6,SYM10,SYM3,SYM3,SYM3,SYM11,SYM10,SYM8,SYM6,SYM10,SYM8,SYM4,SYM4,SYM4,SYM10,SYM7,SYM6,SYM8,SYM10,SYM5,SYM5,SYM5,SYM8,SYM6,SYM10,SYM8,SYM11,SYM6,SYM10,SYM4,SYM4,SYM4,SYM7,SYM6,SYM8,SYM10,SYM11,SYM6,SYM10,SYM3,SYM3,SYM3,SYM11,SYM10,SYM6,SYM11,SYM8,SYM6,SYM10,SYM5,SYM5,SYM5,SYM11,SYM8,SYM6,SYM10,SYM9,SYM8,SYM7,SYM10,SYM6,SYM11,SYM10,SYM8,SYM4,SYM4,SYM4,SYM10,SYM8,SYM11,SYM6,SYM7,SYM10,SYM6,SYM11,SYM8,SYM7,SYM6,SYM10,SYM11,SYM8,SYM10,SYM3,SYM3,SYM3","SYM7,SYM8,SYM11,SYM10,SYM6,SYM7,SYM9,SYM8,SYM10,SYM7,SYM11,SYM5,SYM5,SYM5,SYM11,SYM7,SYM6,SYM8,SYM9,SYM11,SYM7,SYM10,SYM9,SYM8,SYM11,SYM6,SYM7,SYM9,SYM4,SYM4,SYM4,SYM6,SYM11,SYM8,SYM9,SYM10,SYM7,SYM11,SYM9,SYM10,SYM8,SYM11,SYM10,SYM7,SYM6,SYM3,SYM3,SYM3,SYM11,SYM6,SYM10,SYM9,SYM11,SYM7,SYM8,SYM10,SYM11,SYM9,SYM8,SYM7,SYM10,SYM6,SYM11,SYM9,SYM7,SYM11,SYM8,SYM9,SYM4,SYM4,SYM4,SYM10,SYM7,SYM6,SYM11,SYM9,SYM7,SYM1,SYM8,SYM11,SYM10,SYM8,SYM6,SYM7,SYM9,SYM11,SYM10,SYM6,SYM9,SYM10,SYM8,SYM9,SYM7,SYM6,SYM9,SYM8,SYM7,SYM10,SYM9,SYM5,SYM5,SYM5,SYM6,SYM11,SYM10,SYM7,SYM11,SYM9,SYM8,SYM11,SYM6,SYM10,SYM7,SYM6,SYM11,SYM9,SYM10,SYM8,SYM6,SYM7,SYM10,SYM8,SYM11,SYM4,SYM4,SYM4,SYM10,SYM8,SYM9,SYM6,SYM11,SYM7,SYM8,SYM3,SYM3,SYM3,SYM11,SYM6,SYM8,SYM7,SYM10,SYM9,SYM7,SYM11,SYM5,SYM5,SYM5,SYM10,SYM6,SYM11,SYM8,SYM9,SYM6,SYM11,SYM7,SYM8,SYM10,SYM7,SYM9,SYM8,SYM11,SYM6,SYM10,SYM11,SYM8,SYM10,SYM7,SYM9,SYM10,SYM8,SYM9,SYM6,SYM10,SYM1,SYM11,SYM9,SYM6,SYM8,SYM11,SYM5,SYM5,SYM5,SYM7,SYM9,SYM8,SYM10,SYM9,SYM11,SYM6,SYM9,SYM8,SYM10,SYM7,SYM9,SYM4,SYM4,SYM4,SYM10,SYM8,SYM11,SYM9,SYM10,SYM7,SYM6,SYM11,SYM8,SYM6,SYM9,SYM11,SYM7,SYM6,SYM10,SYM11,SYM6,SYM7,SYM9,SYM8,SYM11,SYM6,SYM8,SYM4,SYM4,SYM4,SYM9,SYM11,SYM8,SYM10,SYM9,SYM7,SYM5,SYM5,SYM5,SYM6,SYM9,SYM7,SYM11,SYM8,SYM10,SYM9,SYM8,SYM4,SYM4,SYM4,SYM9,SYM6,SYM11,SYM7,SYM8,SYM11,SYM10,SYM3,SYM3,SYM3,SYM11,SYM9,SYM6,SYM10,SYM9,SYM8,SYM6,SYM11,SYM4,SYM4,SYM4,SYM9,SYM11,SYM7,SYM8,SYM5,SYM5,SYM5,SYM10,SYM6,SYM9,SYM10,SYM7,SYM8,SYM9,SYM11,SYM7,SYM9,SYM10,SYM6,SYM9,SYM10,SYM11,SYM8,SYM7,SYM9,SYM10,SYM6,SYM11,SYM8,SYM9,SYM3,SYM3,SYM3,SYM9,SYM11,SYM7,SYM10,SYM8,SYM9,SYM7,SYM6,SYM10","SYM4,SYM4,SYM4,SYM6,SYM10,SYM7,SYM6,SYM8,SYM10,SYM4,SYM4,SYM4,SYM8,SYM10,SYM7,SYM11,SYM9,SYM6,SYM10,SYM8,SYM7,SYM3,SYM3,SYM3,SYM7,SYM11,SYM8,SYM7,SYM9,SYM6,SYM11,SYM5,SYM5,SYM5,SYM11,SYM10,SYM7,SYM11,SYM8,SYM10,SYM9,SYM6,SYM7,SYM5,SYM5,SYM5,SYM8,SYM9,SYM10,SYM4,SYM4,SYM4,SYM8,SYM11,SYM7,SYM10,SYM9,SYM6,SYM11,SYM7,SYM10,SYM5,SYM5,SYM5,SYM10,SYM11,SYM6,SYM9,SYM10,SYM7,SYM3,SYM3,SYM3,SYM6,SYM10,SYM8,SYM7,SYM9,SYM11,SYM10,SYM3,SYM3,SYM3,SYM8,SYM9,SYM10,SYM6,SYM11,SYM8,SYM10,SYM11,SYM7,SYM8,SYM6,SYM11,SYM10,SYM9,SYM8,SYM7,SYM6,SYM8,SYM10,SYM3,SYM3,SYM3,SYM6,SYM9,SYM8,SYM3,SYM3,SYM3,SYM10,SYM6,SYM11,SYM10,SYM8,SYM7,SYM11,SYM6,SYM5,SYM5,SYM5,SYM9,SYM10,SYM7,SYM8,SYM1,SYM10,SYM11,SYM7,SYM6,SYM10,SYM7,SYM6,SYM11,SYM7,SYM10,SYM9,SYM6,SYM7,SYM4,SYM4,SYM4,SYM10,SYM9,SYM11,SYM8,SYM6,SYM7,SYM10,SYM5,SYM5,SYM5,SYM7,SYM10,SYM9,SYM11,SYM10,SYM3,SYM3,SYM3,SYM8,SYM7,SYM10,SYM11,SYM6,SYM7,SYM10,SYM11,SYM5,SYM5,SYM5,SYM6,SYM10,SYM11,SYM4,SYM4,SYM4,SYM9,SYM8,SYM11,SYM7,SYM10,SYM9,SYM8,SYM7,SYM11,SYM10,SYM6,SYM11,SYM7,SYM10,SYM9,SYM6,SYM11,SYM8,SYM6,SYM11,SYM7,SYM4,SYM4,SYM4,SYM9,SYM7,SYM6,SYM10,SYM11,SYM5,SYM5,SYM5,SYM9,SYM10,SYM7,SYM11,SYM10,SYM6,SYM7,SYM10,SYM1,SYM9,SYM8,SYM7,SYM10,SYM9,SYM8,SYM11,SYM9,SYM5,SYM5,SYM5,SYM7,SYM11,SYM6,SYM8"],respinReels_13:["SYM13,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM13,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM13,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM13,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM13,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM13,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM13,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16"],respinReels_14:["SYM14,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM14,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM14,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM14,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM14,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM14,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM14,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16"],respinReels_15:["SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM15,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM15,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM15,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM15,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM15,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM15,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16","SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM15,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16,SYM16"],fsOne_Barbarian:["SYM7,SYM5,SYM5,SYM5,SYM6,SYM8,SYM3,SYM3,SYM3,SYM6,SYM7,SYM5,SYM5,SYM5,SYM8,SYM1,SYM7,SYM4,SYM4,SYM4,SYM13,SYM8,SYM7,SYM1,SYM8,SYM4,SYM4,SYM4,SYM7,SYM8,SYM7,SYM8,SYM6,SYM7,SYM1,SYM6,SYM7,SYM8,SYM4,SYM4,SYM4,SYM7,SYM6,SYM8,SYM7,SYM8,SYM4,SYM4,SYM4,SYM8,SYM7,SYM6,SYM8,SYM7,SYM4,SYM4,SYM4,SYM7,SYM6,SYM8,SYM7,SYM8,SYM7,SYM4,SYM4,SYM4,SYM7,SYM8,SYM5,SYM5,SYM5,SYM6,SYM8","SYM6,SYM7,SYM6,SYM3,SYM3,SYM3,SYM7,SYM6,SYM7,SYM6,SYM3,SYM3,SYM3,SYM6,SYM7,SYM6,SYM7,SYM6,SYM8,SYM6,SYM7,SYM6,SYM7,SYM6,SYM3,SYM3,SYM3,SYM7,SYM6,SYM13,SYM5,SYM5,SYM5,SYM7,SYM6,SYM4,SYM4,SYM4,SYM8,SYM7,SYM6,SYM8,SYM7,SYM5,SYM5,SYM5,SYM7,SYM6,SYM7,SYM6,SYM1,SYM6,SYM7,SYM6,SYM7,SYM3,SYM3,SYM3,SYM7,SYM6,SYM7,SYM1,SYM6,SYM7,SYM3,SYM3,SYM3,SYM6,SYM8,SYM7,SYM6,SYM7,SYM3,SYM3,SYM3,SYM7,SYM6,SYM8,SYM7,SYM6,SYM7,SYM1,SYM8,SYM4,SYM4,SYM4,SYM7,SYM6,SYM7,SYM6,SYM8","SYM8,SYM6,SYM1,SYM8,SYM5,SYM5,SYM5,SYM8,SYM7,SYM4,SYM4,SYM4,SYM8,SYM6,SYM8,SYM5,SYM5,SYM5,SYM8,SYM7,SYM6,SYM8,SYM4,SYM4,SYM4,SYM8,SYM7,SYM8,SYM1,SYM6,SYM8,SYM3,SYM3,SYM3,SYM8,SYM6,SYM8,SYM1,SYM8,SYM5,SYM5,SYM5,SYM8,SYM7,SYM8,SYM5,SYM5,SYM5,SYM6,SYM8,SYM5,SYM5,SYM5,SYM8,SYM6,SYM8,SYM5,SYM5,SYM5,SYM8,SYM1,SYM7,SYM8,SYM6,SYM8,SYM3,SYM3,SYM3,SYM7,SYM8,SYM7,SYM13,SYM8,SYM6,SYM4,SYM4,SYM4,SYM8,SYM6","SYM7,SYM6,SYM8,SYM1,SYM7,SYM3,SYM3,SYM3,SYM8,SYM6,SYM13,SYM7,SYM8,SYM7,SYM1,SYM6,SYM5,SYM5,SYM5,SYM6,SYM7,SYM8,SYM6,SYM1,SYM8,SYM7,SYM4,SYM4,SYM4,SYM6,SYM8,SYM6,SYM5,SYM5,SYM5,SYM1,SYM8,SYM4,SYM4,SYM4,SYM7,SYM6,SYM8,SYM6,SYM7,SYM8,SYM6,SYM4,SYM4,SYM4,SYM7,SYM6,SYM5,SYM5,SYM5,SYM7,SYM8,SYM6,SYM4,SYM4,SYM4,SYM8,SYM6,SYM8,SYM7,SYM8,SYM6,SYM8,SYM6,SYM7,SYM8,SYM6,SYM7,SYM6,SYM8,SYM7,SYM8,SYM6","SYM3,SYM3,SYM3,SYM6,SYM8,SYM1,SYM5,SYM5,SYM5,SYM6,SYM8,SYM7,SYM5,SYM5,SYM5,SYM6,SYM7,SYM4,SYM4,SYM4,SYM8,SYM1,SYM3,SYM3,SYM3,SYM7,SYM8,SYM6,SYM4,SYM4,SYM4,SYM6,SYM7,SYM1,SYM3,SYM3,SYM3,SYM7,SYM8,SYM6,SYM5,SYM5,SYM5,SYM8,SYM7,SYM8,SYM4,SYM4,SYM4,SYM8,SYM7,SYM8,SYM4,SYM4,SYM4,SYM6,SYM8,SYM5,SYM5,SYM5,SYM7,SYM6,SYM8,SYM5,SYM5,SYM5,SYM7,SYM6,SYM3,SYM3,SYM3,SYM8,SYM13,SYM7"],fsTwo_Priestess:["SYM1,SYM6,SYM7,SYM9,SYM5,SYM5,SYM5,SYM7,SYM9,SYM11,SYM6,SYM8,SYM1,SYM9,SYM11,SYM10,SYM7,SYM8,SYM4,SYM4,SYM4,SYM8,SYM9,SYM6,SYM10,SYM1,SYM4,SYM4,SYM4,SYM10,SYM6,SYM7,SYM14,SYM11,SYM10,SYM9,SYM6,SYM11,SYM7,SYM1,SYM3,SYM3,SYM3,SYM10,SYM7,SYM1,SYM6,SYM10,SYM11,SYM5,SYM5,SYM5,SYM6,SYM10,SYM1,SYM9,SYM8,SYM6,SYM9,SYM7,SYM1,SYM8,SYM11,SYM9,SYM8,SYM4,SYM4,SYM4,SYM7,SYM14,SYM10,SYM6,SYM11,SYM8,SYM10,SYM9,SYM11,SYM1,SYM7,SYM5,SYM5,SYM5,SYM1,SYM7,SYM6,SYM9,SYM3,SYM3,SYM3,SYM11,SYM10,SYM8,SYM6,SYM9,SYM8,SYM1,SYM7,SYM8,SYM10,SYM6,SYM4,SYM4,SYM4,SYM11,SYM9,SYM8,SYM7,SYM11,SYM14,SYM8,SYM11,SYM7,SYM6,SYM8,SYM11,SYM7,SYM3,SYM3,SYM3,SYM1,SYM6,SYM8,SYM10,SYM9","SYM10,SYM1,SYM11,SYM8,SYM6,SYM1,SYM9,SYM10,SYM8,SYM5,SYM5,SYM5,SYM8,SYM9,SYM7,SYM14,SYM11,SYM8,SYM4,SYM4,SYM4,SYM1,SYM9,SYM6,SYM10,SYM8,SYM9,SYM4,SYM4,SYM4,SYM7,SYM6,SYM8,SYM1,SYM10,SYM7,SYM9,SYM3,SYM3,SYM3,SYM7,SYM6,SYM11,SYM10,SYM7,SYM9,SYM10,SYM11,SYM1,SYM6,SYM8,SYM7,SYM6,SYM10,SYM14,SYM8,SYM11,SYM9,SYM8,SYM7,SYM6,SYM11,SYM9,SYM7,SYM1,SYM6,SYM11,SYM10,SYM9,SYM6,SYM7,SYM11,SYM8,SYM6,SYM1,SYM7,SYM10,SYM5,SYM5,SYM5,SYM6,SYM8,SYM7,SYM9,SYM8,SYM1,SYM9,SYM6,SYM7,SYM11,SYM10,SYM7,SYM8,SYM11,SYM1,SYM6,SYM10,SYM5,SYM5,SYM5,SYM7,SYM8,SYM6,SYM7,SYM10,SYM11,SYM9,SYM3,SYM3,SYM3,SYM8,SYM7,SYM14,SYM6,SYM9,SYM3,SYM3,SYM3,SYM8,SYM6,SYM1,SYM4,SYM4,SYM4,SYM11,SYM10,SYM6,SYM3,SYM3,SYM3,SYM11,SYM9,SYM8,SYM7,SYM1,SYM6,SYM3,SYM3,SYM3,SYM7,SYM1,SYM9,SYM6,SYM8","SYM8,SYM9,SYM7,SYM11,SYM9,SYM1,SYM7,SYM11,SYM3,SYM3,SYM3,SYM6,SYM9,SYM10,SYM1,SYM8,SYM9,SYM6,SYM8,SYM7,SYM1,SYM10,SYM7,SYM8,SYM11,SYM10,SYM14,SYM9,SYM6,SYM5,SYM5,SYM5,SYM10,SYM9,SYM6,SYM7,SYM10,SYM8,SYM11,SYM6,SYM10,SYM14,SYM8,SYM11,SYM4,SYM4,SYM4,SYM10,SYM9,SYM11,SYM8,SYM5,SYM5,SYM5,SYM6,SYM11,SYM3,SYM3,SYM3,SYM1,SYM11,SYM9,SYM10,SYM8,SYM1,SYM10,SYM6,SYM7,SYM10,SYM1,SYM11,SYM8,SYM7,SYM9,SYM10,SYM11,SYM4,SYM4,SYM4,SYM6,SYM11,SYM7,SYM1,SYM10,SYM11,SYM8,SYM6,SYM10,SYM9,SYM4,SYM4,SYM4,SYM9,SYM11,SYM6,SYM1,SYM5,SYM5,SYM5,SYM7,SYM8,SYM9,SYM10,SYM11,SYM9,SYM10,SYM1,SYM7,SYM10,SYM9,SYM8,SYM11,SYM1,SYM7,SYM5,SYM5,SYM5,SYM8,SYM9,SYM11,SYM10,SYM6,SYM14,SYM7,SYM9,SYM10,SYM7,SYM6,SYM9,SYM8,SYM10,SYM11,SYM6,SYM1,SYM7,SYM6,SYM11,SYM8,SYM9,SYM7,SYM10,SYM6,SYM1,SYM11,SYM7,SYM8,SYM11,SYM6,SYM14,SYM11,SYM8,SYM9,SYM10","SYM6,SYM1,SYM9,SYM10,SYM11,SYM7,SYM10,SYM9,SYM14,SYM11,SYM10,SYM6,SYM8,SYM9,SYM6,SYM10,SYM7,SYM11,SYM9,SYM10,SYM6,SYM9,SYM7,SYM11,SYM8,SYM10,SYM1,SYM11,SYM7,SYM9,SYM11,SYM6,SYM8,SYM1,SYM11,SYM5,SYM5,SYM5,SYM10,SYM7,SYM9,SYM6,SYM8,SYM7,SYM14,SYM9,SYM8,SYM10,SYM11,SYM6,SYM1,SYM9,SYM7,SYM10,SYM8,SYM5,SYM5,SYM5,SYM6,SYM11,SYM7,SYM6,SYM8,SYM11,SYM7,SYM8,SYM10,SYM7,SYM9,SYM1,SYM8,SYM11,SYM7,SYM8,SYM3,SYM3,SYM3,SYM11,SYM6,SYM7,SYM9,SYM10,SYM8,SYM9,SYM11,SYM7,SYM1,SYM6,SYM8,SYM7,SYM10,SYM9,SYM11,SYM10,SYM1,SYM9,SYM8,SYM4,SYM4,SYM4,SYM1,SYM7,SYM6,SYM8,SYM9,SYM1,SYM11,SYM10,SYM7,SYM8,SYM11,SYM7,SYM10,SYM6,SYM9,SYM8,SYM11,SYM10,SYM8,SYM9,SYM1,SYM7,SYM11,SYM6,SYM7,SYM8,SYM9,SYM11,SYM10,SYM1,SYM9,SYM11,SYM10,SYM7,SYM9,SYM11,SYM7,SYM9,SYM6,SYM10,SYM4,SYM4,SYM4,SYM10,SYM11,SYM7,SYM8","SYM6,SYM10,SYM11,SYM9,SYM7,SYM10,SYM9,SYM6,SYM8,SYM7,SYM10,SYM14,SYM9,SYM6,SYM11,SYM5,SYM5,SYM5,SYM8,SYM10,SYM11,SYM9,SYM10,SYM7,SYM11,SYM8,SYM1,SYM6,SYM9,SYM10,SYM3,SYM3,SYM3,SYM8,SYM10,SYM9,SYM11,SYM5,SYM5,SYM5,SYM6,SYM10,SYM1,SYM7,SYM8,SYM9,SYM11,SYM10,SYM9,SYM6,SYM11,SYM10,SYM7,SYM11,SYM8,SYM10,SYM11,SYM9,SYM10,SYM7,SYM3,SYM3,SYM3,SYM8,SYM11,SYM6,SYM8,SYM10,SYM7,SYM6,SYM11,SYM9,SYM10,SYM7,SYM8,SYM10,SYM11,SYM6,SYM9,SYM3,SYM3,SYM3,SYM8,SYM9,SYM11,SYM7,SYM10,SYM5,SYM5,SYM5,SYM11,SYM14,SYM9,SYM7,SYM10,SYM4,SYM4,SYM4,SYM10,SYM1,SYM11,SYM10,SYM9,SYM7,SYM10,SYM9,SYM8,SYM11,SYM4,SYM4,SYM4,SYM6,SYM10,SYM9,SYM8,SYM11,SYM10,SYM7,SYM4,SYM4,SYM4"],fsThree_Samurai:["SYM8,SYM11,SYM7,SYM8,SYM11,SYM6,SYM10,SYM9,SYM11,SYM7,SYM10,SYM8,SYM4,SYM4,SYM4,SYM7,SYM11,SYM9,SYM1,SYM11,SYM8,SYM6,SYM9,SYM7,SYM11,SYM9,SYM10,SYM11,SYM7,SYM8,SYM6,SYM11,SYM9,SYM5,SYM5,SYM5,SYM9,SYM15,SYM11,SYM8,SYM7,SYM10,SYM11,SYM5,SYM5,SYM5,SYM11,SYM9,SYM7,SYM8,SYM11,SYM9,SYM6,SYM7,SYM11,SYM9,SYM10,SYM11,SYM6,SYM8,SYM7,SYM11,SYM8,SYM7,SYM9,SYM11,SYM6,SYM10,SYM9,SYM11,SYM7,SYM6,SYM11,SYM8,SYM9,SYM11,SYM7,SYM10,SYM6,SYM11,SYM8,SYM7,SYM10,SYM9,SYM11,SYM8,SYM6,SYM9,SYM11,SYM7,SYM8,SYM11,SYM9,SYM3,SYM3,SYM3,SYM10,SYM11,SYM7,SYM10","SYM9,SYM6,SYM10,SYM7,SYM9,SYM11,SYM6,SYM7,SYM9,SYM6,SYM3,SYM3,SYM3,SYM9,SYM10,SYM7,SYM6,SYM11,SYM9,SYM10,SYM11,SYM9,SYM7,SYM6,SYM9,SYM10,SYM6,SYM7,SYM9,SYM6,SYM7,SYM9,SYM11,SYM10,SYM9,SYM8,SYM6,SYM7,SYM9,SYM6,SYM5,SYM5,SYM5,SYM6,SYM9,SYM7,SYM6,SYM11,SYM7,SYM9,SYM6,SYM10,SYM9,SYM7,SYM8,SYM9,SYM6,SYM11,SYM7,SYM6,SYM9,SYM8,SYM6,SYM10,SYM7,SYM9,SYM11,SYM10,SYM4,SYM4,SYM4,SYM10,SYM6,SYM9,SYM4,SYM4,SYM4,SYM6,SYM7,SYM10,SYM9,SYM8,SYM11,SYM10,SYM6,SYM8,SYM10,SYM9,SYM6,SYM7,SYM15,SYM11,SYM9,SYM5,SYM5,SYM5,SYM6,SYM9,SYM10,SYM11,SYM7,SYM9,SYM6,SYM1,SYM9,SYM6,SYM5,SYM5,SYM5,SYM9,SYM7,SYM6,SYM9,SYM10,SYM5,SYM5,SYM5,SYM7,SYM10,SYM9,SYM11,SYM10,SYM7,SYM9,SYM6,SYM7,SYM9,SYM10,SYM7,SYM3,SYM3,SYM3,SYM9,SYM6,SYM10","SYM10,SYM9,SYM11,SYM10,SYM6,SYM8,SYM10,SYM3,SYM3,SYM3,SYM8,SYM10,SYM11,SYM8,SYM10,SYM11,SYM8,SYM9,SYM11,SYM10,SYM8,SYM6,SYM10,SYM7,SYM8,SYM10,SYM4,SYM4,SYM4,SYM11,SYM10,SYM8,SYM1,SYM10,SYM8,SYM7,SYM10,SYM8,SYM11,SYM10,SYM6,SYM8,SYM10,SYM9,SYM7,SYM10,SYM6,SYM8,SYM10,SYM6,SYM7,SYM10,SYM11,SYM8,SYM9,SYM15,SYM8,SYM10,SYM11,SYM8,SYM10,SYM11,SYM8,SYM3,SYM3,SYM3,SYM10,SYM8,SYM9,SYM10,SYM8,SYM6,SYM10,SYM11,SYM8,SYM10,SYM9,SYM8,SYM10,SYM11,SYM7,SYM8,SYM10,SYM5,SYM5,SYM5,SYM11,SYM10,SYM8,SYM6,SYM9,SYM10,SYM11,SYM8,SYM10,SYM9,SYM8,SYM6,SYM11,SYM10,SYM8,SYM9,SYM11,SYM7,SYM8,SYM10,SYM7,SYM9,SYM8,SYM10,SYM4,SYM4,SYM4,SYM11,SYM10,SYM4,SYM4,SYM4,SYM10,SYM8,SYM11,SYM9,SYM10,SYM11,SYM8,SYM9,SYM10,SYM8,SYM11,SYM6,SYM10,SYM8,SYM11,SYM10,SYM8,SYM7","SYM6,SYM10,SYM8,SYM9,SYM6,SYM11,SYM7,SYM10,SYM9,SYM11,SYM8,SYM9,SYM10,SYM7,SYM6,SYM9,SYM11,SYM7,SYM10,SYM11,SYM6,SYM9,SYM7,SYM3,SYM3,SYM3,SYM9,SYM11,SYM8,SYM6,SYM9,SYM7,SYM10,SYM11,SYM9,SYM6,SYM10,SYM9,SYM7,SYM8,SYM6,SYM10,SYM4,SYM4,SYM4,SYM11,SYM15,SYM9,SYM11,SYM4,SYM4,SYM4,SYM9,SYM8,SYM7,SYM6,SYM9,SYM11,SYM10,SYM5,SYM5,SYM5,SYM11,SYM6,SYM10,SYM8,SYM11,SYM10,SYM9,SYM7,SYM6,SYM9,SYM7,SYM11,SYM8,SYM6,SYM9,SYM8,SYM11,SYM10,SYM9,SYM8,SYM10,SYM11,SYM6,SYM7,SYM9,SYM10,SYM1,SYM9,SYM8,SYM11,SYM10,SYM6,SYM11,SYM10,SYM8,SYM9,SYM11,SYM10,SYM7,SYM6,SYM8,SYM10,SYM6,SYM11,SYM9,SYM8,SYM7,SYM5,SYM5,SYM5,SYM6,SYM9,SYM11,SYM8,SYM9,SYM6,SYM11,SYM7,SYM6,SYM8,SYM10,SYM11,SYM7,SYM10,SYM6,SYM11,SYM9,SYM7,SYM8,SYM11,SYM6,SYM10,SYM11","SYM11,SYM6,SYM7,SYM8,SYM10,SYM7,SYM11,SYM10,SYM6,SYM11,SYM7,SYM9,SYM10,SYM8,SYM7,SYM10,SYM9,SYM8,SYM11,SYM4,SYM4,SYM4,SYM7,SYM8,SYM6,SYM7,SYM10,SYM9,SYM11,SYM6,SYM10,SYM7,SYM11,SYM6,SYM7,SYM10,SYM4,SYM4,SYM4,SYM9,SYM10,SYM8,SYM7,SYM9,SYM6,SYM10,SYM11,SYM5,SYM5,SYM5,SYM7,SYM9,SYM10,SYM8,SYM5,SYM5,SYM5,SYM10,SYM11,SYM6,SYM15,SYM8,SYM7,SYM10,SYM8,SYM11,SYM10,SYM8,SYM6,SYM11,SYM9,SYM10,SYM11,SYM6,SYM7,SYM8,SYM11,SYM9,SYM10,SYM1,SYM6,SYM7,SYM8,SYM6,SYM10,SYM11,SYM9,SYM7,SYM10,SYM11,SYM8,SYM6,SYM10,SYM7,SYM3,SYM3,SYM3,SYM9,SYM10,SYM11,SYM8,SYM10,SYM9,SYM7,SYM6,SYM8,SYM10,SYM11,SYM7,SYM10,SYM9,SYM11,SYM7,SYM6,SYM10"]}},view:{SYMBOL_DISPLAY_SIZE_HEIGHT:141,SYMBOL_DISPLAY_SIZE_WIDTH:150,REEL_SETUP:[[3],[3],[3],[3],[3]]}};Sys.override(Animation.PixiAnimationManager,{createLayers:function(){var a=this;a.layers={preload:new PIXI.Container(),background:new PIXI.Container(),bigWinBackground:new PIXI.Container(),soldiers:new PIXI.Container(),bgEffect:new PIXI.Container(),darkenedOutcome:new PIXI.Container(),reel:new PIXI.Container(),stackedIdle:new PIXI.Container(),stackedBlur:new PIXI.Container(),wildSymbol:new PIXI.Container(),finalChance:new PIXI.Container(),noWinScatterOverlay:new PIXI.Container(),noWinSymbols:new PIXI.Container(),scatterOverlay:new PIXI.Container(),scatterAnimation:new PIXI.Container(),scatterUnveil:new PIXI.Container(),scatterSmoke:new PIXI.Container(),finalChanceTop:new PIXI.Container(),betLineIndicators:new PIXI.Container(),betLines:new PIXI.Container(),whiteOutLayer:new PIXI.Container(),winSymbolFrames:new PIXI.Container(),winSymbols:new PIXI.Container(),winCoinNumbers:new PIXI.Container(),countUp:new PIXI.Container(),bigWin:new PIXI.Container(),spinButtonAnimation:new PIXI.Container(),tickerTape:new PIXI.Container(),paytable:new PIXI.Container(),keypadBackground:new PIXI.Container(),userInterface:new PIXI.Container(),userInterfaceTop:new PIXI.Container(),countDownFreeSpins:new PIXI.Container(),splashScreens:new PIXI.Container(),fade:new PIXI.Container(),scatterBattle:new PIXI.Container(),logo:new PIXI.Container(),introMovie:new PIXI.Container(),quickStopper:new PIXI.Container(),paytableMobile:new PIXI.Container()};Sys.iterate(a.layers,function(b,c){c.name=b;c.originalPosition=new PIXI.Point(c.position.x,c.position.y);c.originalScale=new PIXI.Point(c.scale.x,c.scale.y);a.rootDisplayObject.addChild(c)});a.reelLayers=[a.layers.darkenedOutcome,a.layers.reel,a.layers.stackedBlur,a.layers.wildSymbol,a.layers.noWinScatterOverlay,a.layers.noWinSymbols,a.layers.scatterOverlay,a.layers.scatterAnimation,a.layers.scatterUnveil,a.layers.winSymbolFrames,a.layers.winSymbols,a.layers.betLines,a.layers.betLineIndicators,a.layers.finalChance,a.layers.stackedIdle];a.winAnimationLayers=[a.layers.finalChanceTop,a.layers.scatterSmoke,a.layers.finalChance,a.layers.winCoinNumbers,a.layers.countUp,a.layers.bigWin,a.layers.countDownFreeSpins];a.userInterfaceLayers=[a.layers.userInterface,a.layers.userInterfaceTop];a.backgroundLayers=[a.layers.background,a.layers.tickerTape];a.logoLayers=[a.layers.logo]},getLayers:function(){return this.rootDisplayObject.children},getReelLayers:function(){return this.reelLayers},getwinAnimationLayers:function(){return this.winAnimationLayers},getInterfaceLayers:function(){return this.userInterfaceLayers},getBackgroundLayers:function(){return this.backgroundLayers},getLogoLayers:function(){return this.logoLayers}});Sys.override(Animation.BufferedReel,{replaceAllSymbolsWith:function(a){this.model.replaceAllSymbolsWith(a)}});Sys.override(Core.Slots.ReelGroup,{addReelMask:function(a){var b=new PIXI.Graphics();b.beginFill(16711680,0.8);b.drawRect(0+a.reelMaskXOffset,a.top+a.reelMaskYOffset,1280,a.visibleLength);b.endFill();this.reels.addChild(b);this.reels.mask=b},replaceAllSymbolsWith:function(c){for(var b=0;b<this.reelLists.length;b++){var a=this.reelLists[b];a.replaceAllSymbolsWith(c)}},calculateSymbolsBeforeOutcome:function(){var s=this,t=s.getReelCount(),c=s.spinTimes[s.spinType],q=s.gameModeSpinTimes[s.activeReelSet]||{},l=q[s.spinType]||{},h=c.minimumSpinTime,d=Sys.isNumber(c.nearWinDelay)?c.nearWinDelay:0,m=Sys.isNumber(c.nearWinDelayExtra)?c.nearWinDelayExtra:0,b=[],k,n=c.reelStopDelays.concat(),r,f=s.symbolBuffer.getIndexOfLastStoppingReel(),e=s.nearWinList,g,a,o=0;if(Sys.isNumber(l.minimumSpinTime)){h=l.minimumSpinTime}if(Sys.isNumber(l.nearWinDelay)){d=l.nearWinDelay}if(Sys.isArray(l.reelStopDelays)){n=l.reelStopDelays}k=(h-(Date.now()-s.startSpinCompleteTime));for(r=-1;++r<=f;){b[r]=0}for(r=f;++r<t;){if(s.stopSequencePausers[r].length===0){g=k+n[r];if(s.nearWinEnabled&&Sys.isArray(e)){if(e.indexOf(r)>=0){g+=d;for(var p=r+1;p<n.length;p++){if(this.nearWinState===Core.Slots.ReelGroup.NEAR_WIN_EXTRA&&p===3){n[p]+=m}else{n[p]+=d}}}}a=Math.round(g/s.reelLists[r].getTimeToMoveOneSlot())+o;if(a<0){o=-a;a=0}b[r]=a}else{b[r]=Infinity;break}}for(;++r<t;){b[r]=Infinity}return b},setNearWinState:function(a){this.nearWinState=a}});Core.Slots.ReelGroup.NEAR_WIN_REGULAR=0;Core.Slots.ReelGroup.NEAR_WIN_EXTRA=1;Sys.ns("Warlords");Warlords.StandardWin={constructor:function(){Warlords.StandardWin.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={standardWinPresentation:{state:{name:"StandardWinPresentation",execute:function(){},waitEvents:{"notify:standardWin.presentationComplete":false}}},noWinPresentation:{state:{name:"NoWinPresentation",execute:function(){},waitEvents:{"notify:standardWin.presentationComplete":false}}},bigWin:{state:{name:"BigWin",execute:function(){},waitEvents:{"notify:bigWin.presentationFinished":false}}},stopped:{queue:[function(c){if(a.readData("isStandardWin")&&a.readData("currentGameState")!=="respin"){c.stateHandler.pushState(c.states.standardWinPresentation)}else{if(a.readData("isStandardWin")&&a.readData("currentGameState")!=="respin"||a.readData("isPriestessWin")){c.stateHandler.pushState(c.states.bigWin);c.stateHandler.pushState(c.states.standardWinPresentation)}else{if(a.readData("isNoWin")){c.stateHandler.pushState(c.states.noWinPresentation)}}}}]}};return b}};Warlords.StandardWin=Sys.extend(Core.Slots.StandardWin,Warlords.StandardWin,"Warlords.StandardWin");Sys.ns("Warlords");Warlords.StandardWinController={constructor:function(){Warlords.StandardWinController.superclass.constructor.apply(this,arguments)},setupEvents:function(){Warlords.StandardWinController.superclass.setupEvents.apply(this,arguments);this.on({"notify:progressiveWinBanner.countUpComplete":this.onShowingTotal,"notify:progressiveWinBanner.countUpMultiplierComplete":this.onShowingTotal})},startPresentation:function(){var b=this,a=b.model.readData("winClip"),c=b.model.readData("countUpDuration"),d=b.model.readData("totalWinDisplayDuration");b.fireEvent("request:settingsWindow.close");b.startListeningToUserInput();b.model.setState("countingUp");b.initializeWaitSequence("request:winSituationsDisplay.showAllWins",{showDuration:c+d,"standardWin:countUpDuration":c,"standardWin:showTotalDuration":d});if(b.model.readData("countUpDisplay")==="winBanner"){b.fireEvent("request:winBanner.animate",c)}else{b.fireEvent("request:coinsField.countUp",c)}b.fireEvent("notify:standardWin.startPresentation",a)},onShowingTotal:function(){var a=this;if(a.model.isState("countingUp")){a.model.setState("showingTotal");a.fireEvent("notify:standardWin.showingWinTotal");a.fireEvent("request:coinsField.showWin");if(a.model.readData("clientAction")!=="freespin"||a.model.readData("winningScatter")!=="SYM14"||a.model.readData("winType")!=="bigWin"){a.fireEvent("request:cashField.showWin")}if(a.eventsToWaitFor.indexOf("notify:winSituationsDisplay.finishedShowingAllWins")===-1){a.showWinTimeout=setTimeout(a.endPresentation.bind(a,false),a.model.readData("totalWinDisplayDuration"))}}},handleUserInput:function(){var a=this;if(a.model.readData("inNoWinPresentation")){a.abortNoWinPresentation()}else{if(a.model.isState("countingUp")){if(a.model.readData("countUpDisplay")==="winBanner"){a.fireEvent("request:winBanner.showTotal",{showUntilStopped:true})}else{a.fireEvent("request:coinsField.showWin")}a.onShowingTotal();a.fireEvent("notify:standardWin.countupAborted")}else{if(a.model.isState("showingTotal")){a.endPresentation(true)}}}},endPresentation:function(c){var b=this,a=b.model.readData("winType");if(!b.model.isState("showingTotal")&&!b.model.readData("inNoWinPresentation")){return}b.stopListeningToUserInput();b.model.setState("complete");clearTimeout(b.showWinTimeout);b.fireEvent("request:winSituationsDisplay.abort");if(b.model.readData("countUpDisplay")==="winBanner"){b.fireEvent("request:winBanner.hide")}if(b.model.shouldToggleWins()){b.fireEvent("request:winSituationsDisplay.toggleWins")}if(!Warlords.Utils.isBigWin(a)){b.fireEvent("notify:standardWin.presentationComplete",c)}}};Warlords.StandardWinController=Sys.extend(Core.Slots.StandardWinController,Warlords.StandardWinController,"Warlords.StandardWinController");Sys.ns("Warlords");Warlords.StandardWinModel={STANDARD_WIN_TYPES:["smallWin","mediumWin","largeWin"],COUNT_UP_DURATIONS:{smallWin:1000,mediumWin:1000,largeWin:1000,bigWin:1000},NO_WIN_DISPLAY_DURATION:500,NO_WIN_DISPLAY_DESKTOP_DURATION:0,TOTAL_WIN_DISPLAY_DURATION:50,constructor:function(){Warlords.StandardWinModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(b){Warlords.StandardWinModel.superclass.processServerResponse.apply(this,arguments);var c=this,a;if(Sys.isDefined(b.wins)){this.storeData("winType",b.wins.winType)}this.storeData("countUpDisplay","winBanner");this.storeData("currentGameState",b.currentGameState);this.storeData("clientAction",b.clientaction);this.storeData("isPriestessWin",false);if(b.clientaction==="freespin"&&b.winning.scatter==="SYM14"&&Sys.isDefined(b.wins)&&Sys.isDefined(b.wins.winType)){c.storeData("isPriestessWin",true)}if(Sys.isDefined(b.wins)&&Sys.isDefined(b.wins.coins)){a=b.wins.coins}c.storeData("coinWin",a);c.multiplier=b.multiplier;c.storeData("betLevel",Services.settingsManager.getSetting("betLevel"));if(Sys.isDefined(c.multiplier)){c.storeData("coinWinBeforeMultiplier",a/c.multiplier);c.storeData("multiplier",c.multiplier)}else{c.storeData("coinWinBeforeMultiplier",a)}c.storeData("clientAction",b.clientaction);if(Sys.isDefined(b.winning)){c.storeData("winningScatter",b.winning.scatter)}if(Sys.isDefined(b.wins)){c.storeData("winType",b.wins.winType)}}};Warlords.StandardWinModel=Sys.extend(Core.Slots.StandardWinModel,Warlords.StandardWinModel,"Warlords.StandardWinModel");Sys.ns("Warlords");Warlords.ResourceLoaderView={init:function(a){this.model=a.model;this.MODULE_NAME=a.name;this.setupEvents()}};Warlords.ResourceLoaderView=Sys.extend(Core.ResourceLoaderView,Warlords.ResourceLoaderView,"Warlords.ResourceLoaderView");Sys.ns("Core.Slots");Warlords.SpinTypeRespinModel={constructor:function(){Warlords.SpinTypeRespinModel.superclass.constructor.apply(this,arguments)},storeServerResponse:function(c){var b=this,a;b.storeData("serverResponse",c);b.storeData("clientAction",c.clientaction);if(c.nextaction==="respin"||c.nextaction==="drop"){b.storeData("spinRequested",true);b.storeData("basicRestoreState",c.restore);if(c.next){a=c.next.rs}else{a="respin"}if(a==="respin"&&c.winning){a+="_"+c.winning.scatter}b.storeData("requestedReelset",a)}else{b.storeData("spinRequested",false)}},initData:function(){this.storeData("active",Resources.readData("gameServerInitResponseObject").nextaction==="respin");Core.Slots.SpinTypeRespinModel.superclass.initData.apply(this,arguments)}};Warlords.SpinTypeRespinModel=Sys.extend(Core.Slots.SpinTypeRespinModel,Warlords.SpinTypeRespinModel,"Warlords.SpinTypeRespinModel");Sys.ns("Core.Slots");Warlords.BufferedSpinController={constructor:function(){Warlords.BufferedSpinController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Warlords.BufferedSpinController.superclass.setupEvents.apply(this,arguments);a.on({"request:spin.activateReelSetWithoutUpdatingSymbols":a.activateReelSetWithoutUpdatingSymbols,"request:bufferedSpin.setSymbols":a.setSymbols,"request:bufferedSpin.setNearWinState":a.setNearWinState,"view:nearWinEnded":a.announceNearWinEnded})},setNearWinState:function(a){this.view.setNearWinState(a)},replaceSymbolsInBufferWithEmptySymbol:function(){this.view.replaceSymbolsInBufferWithEmptySymbol()},wantStartSpin:function(){var c=this,d=c.model.readData("serverResponse"),b=d.nextaction,a=d.wins?d.wins.coins:undefined;if(Services.settingsManager.getSetting("quickSpin")){c.view.setTimeToMoveOneSlot(30)}else{c.view.setTimeToMoveOneSlot(50)}if(b==="freespin"&&!Sys.isDefined(a)||Services.settingsManager.getSetting("autoPlayNrSpins")>0&&!Sys.isDefined(a)){setTimeout(function(){c.fireEvent("request:spin.child.wantStartSpin");c.fireEvent("request:serverManager.sendAction","nextAction")},300)}else{c.fireEvent("request:spin.child.wantStartSpin");c.fireEvent("request:serverManager.sendAction","nextAction")}},startSpin:function(c,e){var d=this,b=d.getHeldReels();d.aborted=false;d.dialogClosed=false;d.allReelsHaveStopped=false;d.model.storeData("isValidServerResponse",false);d.announceSpinStarted(c);var a=d.model.readData("currentReelSet");if(a!==c){if(c.indexOf("respin")!==-1){d.replaceSymbolsInBufferWithEmptySymbol();d.activateReelSetWithoutUpdatingSymbols(c,e)}else{if(a==="randomWild"&&c==="basic"){d.activateReelSetWithoutUpdatingSymbols(c,e)}else{d.activateReelSet(c,e)}}}d.view.startSpin(b)},activateReelSetWithoutUpdatingSymbols:function(a,b){this.view.activateReelSetWithoutUpdatingSymbols(a,b);this.fireEvent("notify:spin.reelSetActivated",a)},announceNearWinEnded:function(){this.fireEvent("notify:spin.nearWinEnded")}};Warlords.BufferedSpinController=Sys.extend(Core.Slots.BufferedSpinController,Warlords.BufferedSpinController,"Warlords.BufferedSpinController");Sys.ns("Warlords");Warlords.BufferedSpinView={constructor:function(){Warlords.BufferedSpinView.superclass.constructor.apply(this,arguments)},initAnimations:function(){Warlords.BufferedSpinView.superclass.initAnimations.apply(this,arguments);this.stackedBlurLayer=Game.stage.view.animationManager.getLayer("stackedBlur");this.updateStackedBlurGraphics()},activateReelSetWithoutUpdatingSymbols:function(b,d){var c=this,a;if(Sys.isDefined(c.reelSetToGroupMapping)){a=c.reelSetToGroupMapping[b];if(Sys.isDefined(a)){a.activate(b,d);c.model.storeData("currentReelSet",b)}}else{c.model.storeData("currentReelSet",b);c.model.storeData("startScene",d)}},updateStackedBlurGraphics:function(){var d=this;if(Sys.isDefined(d.reelSetToGroupMapping)){var c=d.model.readData("currentReelSet");var a=d.reelSetToGroupMapping[c];for(var b=0;b<a.reelLists.length;b++){var e=a.reelLists[b];d.addStackedBlur(e,b)}}},activateReelSet:function(a,b){Warlords.BufferedSpinView.superclass.activateReelSet.apply(this,arguments);this.updateStackedBlurGraphics()},replaceSymbolsInBufferWithEmptySymbol:function(){var c=this;for(var b=0;b<c.reelGroups.length;b++){var a=c.reelGroups[b];a.replaceAllSymbolsWith("SYM16")}},setNearWinState:function(c){var b=this,a;if(Sys.isDefined(b.reelSetToGroupMapping)){a=b.reelSetToGroupMapping.basic}a.setNearWinState(c)},onReelStopped:function(b,e){var d=this,c=d.groupNameToGroupMapping[b].reelLists[e],a=d.currentReelGroup();d.playReelSpecificSound("reelStop",e);d.updateSymbolLayout(c,e);d.fireEvent("view:reelStoppedSpinning",e);if(e===d.lastReelToStop){d.fireEvent("view:stopAudio",d.getSoundConfig("reelSpin").id);d.fireEvent("view:allReelsStoppedSpinning")}if(a.nearWinEnabled===true&&Sys.isDefined(a.nearWinList)&&a.nearWinList.length>0){if(a.nearWinList.indexOf(e+1)===0){if(a.isQuickStopped===false){d.fireEvent("view:nearWinStarted",e+1);d.nearWinStartHasFired=true}}if(a.nearWinList[a.nearWinList.length-1]===e){if(d.nearWinStartHasFired===true){d.fireEvent("view:nearWinEnded");d.nearWinStartHasFired=false}}}d.addStackedBlur(c,e)},addStackedBlur:function(c,g){if(Sys.isDefined(this.stackedBlurLayer)){var e=this;var a=c.model.symbolBuffer;var b=[];for(var d=0;d<a.length;d++){var f=a[d];if(f.isOutcomeSymbol){b.push(f)}}e.addStackedBlurGraphicsOnFirstSymbol(b[0],g);e.addStackedBlurGraphicsOnLastSymbol(b[2],g)}},addStackedBlurGraphicsOnFirstSymbol:function(f,e){var b=Warlords.Utils.getStackedIndex(f.symbol);if(b!==-1&&b!==1){var c=Game.PIXIFactory.createAndAddSprite("stackedBlur",this.stackedBlurLayer);var d=Game.stage.model.getSymbolConfiguration(e,0);var a=d.left;var g=d.top;c.position=new PIXI.Point(a,g)}},addStackedBlurGraphicsOnLastSymbol:function(f,e){var h=Resources.readData("symbolLayout");var b=Warlords.Utils.getStackedIndex(f.symbol);if(b!==-1&&b!==3){var c=Game.PIXIFactory.createAndAddSprite("stackedBlur",this.stackedBlurLayer);var d=Game.stage.model.getSymbolConfiguration(e,2);var a=d.left;var g=d.top+d.height;c.position=new PIXI.Point(a,g);c.scale.y=-1}},startSpin:function(a){this.stackedBlurLayer.removeChildren();Warlords.BufferedSpinView.superclass.startSpin.apply(this,arguments)}};Warlords.BufferedSpinView=Sys.extend(Core.Slots.BufferedSpinView,Warlords.BufferedSpinView,"Warlords.BufferedSpinView");Sys.ns("Warlords");Warlords.SpinTypeFreespinModel={DEFAULT_NEXT_REELSET:"freespin",constructor:function(){Warlords.SpinTypeFreespinModel.superclass.constructor.apply(this,arguments)},storeServerResponse:function(e){var c=this,a,d=e.freespins,b;c.storeData("serverResponse",e);if(c.isNextFreespin(e)){c.storeData("spinRequested",true);if(e.clientaction==="init"){b=(d.left===d.initial&&d.left===d.total);c.storeData("showRestoreStateDialog",!b)}if(e.next){a=e.next.rs}else{a=c.DEFAULT_NEXT_REELSET}if(a==="freespin"&&e.winning){a+="_"+e.winning.scatter}Services.storage.storeData("freespin.freespinsLeft",d.left);c.storeData("requestedReelset",a)}else{if(Sys.isObj(d)&&Sys.isNumber(d.left)){Services.storage.storeData("freespin.freespinsLeft",d.left)}else{Services.storage.storeData("freespin.freespinsLeft",null)}c.storeData("spinRequested",false)}},isNextFreespin:function(a){return a.nextaction==="freespin"},initData:function(){var d=this,b=Resources.readData("config"),c=Resources.readData("gameServerInitResponse"),e=false,a=false;Core.Slots.SpinTypeFreespinModel.superclass.initData.apply(d,arguments);if(d.isNextFreespin(c)){e=true;a=true}d.storeData("active",e);d.storeData("spinRequested",a);Services.storage.storeData("freespin.freespinsLeft",null)}};Warlords.SpinTypeFreespinModel=Sys.extend(Core.Slots.SpinTypeFreespinModel,Warlords.SpinTypeFreespinModel,"Warlords.SpinTypeFreespinModel");Sys.ns("Language");(function(b){for(var a in b){if(b.hasOwnProperty(a)){Language.Keys[a]=b[a]}}}({freespinNoWin:"outroFreeSpinsNoWin",ifReSpinsIsStarted:"ifreSpinsIsStarted",ifBarbarianFreeSpinsIsWon:"ifBarbarianIsWon",ifPriestessFreeSpinsIsWon:"ifPriestessIsWon",ifSamuraiFreeSpinsIsWon:"ifSamuraiIsWon",youWonUCVarRev:"youWonUCVarRev",freeSpinsWonBarbarian:"freeSpinsWonBarbarian",freeSpinsWonPriestess:"freeSpinsWonPriestess",freeSpinsWonSamurai:"freeSpinsWonSamurai",freeSpinsLeftBarbarian:"freeSpinsLeftBarbarian",freeSpinsLeftPriestess:"freeSpinsLeftPriestess",freeSpinsLeftSamurai:"freeSpinsLeftSamurai",freespinFeature:"freespinFeature",dontShowNextTime:"dontShowNextTime",multiplierColonVar:"multiplierLCcolonVar",multiplier:"multiplierUC",multiplierColon:"multiplierUCcolon",freeSpinsLeftUC:"freeSpinsLeftUC",freeSpinsLeft:"freeSpinsLeftNoCol",lastFreeSpin:"lastFreeSpin",freeSpinLeft:"freeSpinLeftNoCol",randomWild:"randomWildHeadingPaytable",respin:"reSpinUC",finalChance:"finalChance",barbarianFreespin:"barbarianFreespin",priestessFreespin:"priestessFreespin",samuraiFreespin:"samuraiFreespin",winWorks:"OCTwin",freeSpinsIntroFeatureBarbarian:"freeSpinsIntroWarlords1",freeSpinsIntroFeaturePriestess:"freeSpinsIntroWarlords2",freeSpinsIntroFeatureSamurai:"freeSpinsIntroWarlords3",withMultiplier:"VarMultiplierWar",withStickyWilds:"stickyWilds",withBarbarianSpins:"BarbarianspinsPlayed",tickerTapeWarlords1:"tickerTapeWarlords1",tickerTapeWarlords2:"tickerTapeWarlords2",tickerTapeWarlords3:"tickerTapeWarlords3",tickerTapeWarlords4:"tickerTapeWarlords4",tickerTapeWarlords5:"tickerTapeWarlords5",tickerTapeWarlords6:"tickerTapeWarlords6",capDialogTitle:"capDialogTitle",capDialogText:"capDialogText",capDialogButtonText:"capDialogButtonText"}));Sys.ns("Warlords");Warlords.BufferedSpinModel={constructor:function(){Warlords.BufferedSpinModel.superclass.constructor.apply(this,arguments)},parseInitialOutcomes:function(){var f=this,e=Resources.readData("gameServerInitResponseObject"),g=e.rs,c={};Sys.iterate(g,function(i,h){c[h.id]=Sys.utils.parseReelInfo(e,h.id)});var d=Resources.readData("config").reelSets.basic;if(e.nextaction==="spin"&&Sys.isDefined(d.initial)&&Sys.isDefined(d.initial.symbols)){var a=d.initial.symbols;for(var b=0;b<5;++b){c.basic[b].symbols=a[b]}}return c},processServerResponse:function(a){}};Warlords.BufferedSpinModel=Sys.extend(Core.Slots.BufferedSpinModel,Warlords.BufferedSpinModel,"Warlords.BufferedSpinModel");Sys.ns("Warlords");Warlords.AutoPlayerController={constructor:function(){Warlords.AutoPlayerController.superclass.constructor.apply(this,arguments)},play:function(){var a=this;if(!a.model.isState("PLAYING")&&a.model.readData("nrRounds")>0){a.model.setState("PLAYING");a.fireEvent("request:spinButton.removeDisplayType","autoPlay");a.fireEvent("request:spinButton.addDisplayType","autoPlayStop");a.fireEvent("request:spinButton.disable",a.MODULE_NAME);a.fireEvent("request:betSettings.disable",a.MODULE_NAME);a.fireEvent("request:maxBetButton.disable",a.MODULE_NAME);a.fireEvent("notify:autoPlayer.starting");a.fireEvent("request:playModeManager.addMode","autoplay");a.reduceNumberOfRounds()}}};Warlords.AutoPlayerController=Sys.extend(Core.AutoPlayerController,Warlords.AutoPlayerController,"Warlords.AutoPlayerController");Sys.ns("Warlords");Warlords.FreeSpinIntro={constructor:function(){Warlords.FreeSpinIntro.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["serverResponse","animation","userInput","trigger","orientation"]}};Warlords.FreeSpinIntro=Sys.extend(Game.Slots.FreeSpinIntro,Warlords.FreeSpinIntro,"Warlords.FreeSpinIntro");Sys.ns("Warlords");Warlords.TickerTape={constructor:function(){Warlords.TickerTape.superclass.constructor.apply(this,arguments)},getDefaultMVCClasses:function(){return{model:Warlords.TickerTapeModel,controller:Warlords.TickerTapeController,view:Warlords.TickerTapeView}},getMixinDependencies:function(){return["animation"]}};Warlords.TickerTape=Sys.extend(Core.Module,Warlords.TickerTape,"Warlords.TickerTape");Sys.ns("Warlords");Warlords.TickerTapeController={constructor:function(){Warlords.TickerTapeController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.leavingFeatureSplashState":a.enableTickerTape,"notify:stateHandler.leavingFreeSpinOutroState":a.enableTickerTape,"notify:stateHandler.enteringRespinTextAnimationState":a.disableTickerTape,"request:tickerTape.enable":a.enableTickerTape,"request:tickerTape.disable":a.disableTickerTape})},updateDisplay:function(a){var b=this;if(b.model.readData("enabled")===false){return}b.view["display"+a]()},enableTickerTape:function(){this.model.storeData("enabled",true);this.view.enableTickerTape()},disableTickerTape:function(){this.model.storeData("enabled",false);this.view.disableTickerTape()}};Warlords.TickerTapeController=Sys.extend(Core.Controller,Warlords.TickerTapeController,"Warlords.TickerTapeController");Sys.ns("Warlords");Warlords.TickerTapeModel={constructor:function(){Warlords.TickerTapeModel.superclass.constructor.apply(this,arguments)}};Warlords.TickerTapeModel=Sys.extend(Core.Model,Warlords.TickerTapeModel,"Warlords.TickerTapeModel");Sys.ns("Warlords");Warlords.TickerTapeView={TICKER_TAPE_TEXT:{imageToCoverEdges:"",keys:[Language.Keys.winUpTo,Language.Keys.tickerTapeWarlords1,Language.Keys.tickerTapeWarlords2,Language.Keys.tickerTapeWarlords3,Language.Keys.tickerTapeWarlords4,Language.Keys.tickerTapeWarlords5,Language.Keys.tickerTapeWarlords6],values:["WIN_UP_TO"],area:{width:1280,height:30},pixelsPerSecond:120},constructor:function(){Warlords.TickerTapeView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this;var a=Game.stage.view.animationManager.getLayer("tickerTape");b.rootContainer=new PIXI.Container();b.rootContainer.name="rootContainer";b.textContainer=new PIXI.Container();b.messages=b.createTickerTapeTexts(b.textContainer);b.rootContainer.addChild(b.textContainer);b.fadeInTickerTape=new Animation.Holder({target:b.textContainer,onStart:b.fadeInStart.bind(b),animate:{0:{alpha:0},300:{alpha:1}}});Game.stage.view.animationManager.addToAnimationLoop(b.fadeInTickerTape);b.fadeOutTickerTape=new Animation.Holder({target:b.textContainer,onEnd:b.fadeOutComplete.bind(b),animate:{0:{alpha:1},300:{alpha:0}}});Game.stage.view.animationManager.addToAnimationLoop(b.fadeOutTickerTape);a.addChild(b.rootContainer);b.rootContainer.visible=true},createTickerTapeTexts:function(b){var j=this,d=[],c;for(var f=0;f<j.TICKER_TAPE_TEXT.keys.length;f++){var h=Warlords.Positions.TICKER_TAPE.position.x+j.TICKER_TAPE_TEXT.area.width;var l;if(Sys.isDefined(j.TICKER_TAPE_TEXT.values[f])){c=j.TICKER_TAPE_TEXT.values[f];if(c==="WIN_UP_TO"){c=Services.storage.readData("WIN_UP_TO")}l=Services.languageManager.getText(j.TICKER_TAPE_TEXT.keys[f],[c])}else{l=Services.languageManager.getText(j.TICKER_TAPE_TEXT.keys[f])}var k=Game.PIXIFactory.createAndAddText(l,Game.TextStyles.TICKER_TAPE_TEXT,b,new PIXI.Point(h,Warlords.Positions.TICKER_TAPE.position.y),Warlords.Positions.TICKER_TAPE.anchorPoint);k.visible=false;var a=(h+k.width)/j.TICKER_TAPE_TEXT.pixelsPerSecond*1000;var e=new Animation.Holder({target:k.position,onEnd:j.nextMessage.bind(j),animate:[{time:0,value:{x:h}},{time:a,value:{x:Warlords.Positions.TICKER_TAPE.position.x-k.width}}]});Game.stage.view.animationManager.addToAnimationLoop(e);k.style=Game.TextStyles.TICKER_TAPE_TEXT;var g={sprite:k,animation:e};d.push(g)}return d},fadeIn:function(){this.fadeInTickerTape.restore();this.fadeInTickerTape.play()},fadeInStart:function(){},fadeOut:function(){this.fadeOutTickerTape.restore();this.fadeOutTickerTape.play()},fadeOutComplete:function(){if(this.activeMessage){this.stopActiveMessage()}},startMessage:function(a){this.stopActiveMessage();this.activeMessage=a;this.activeMessage.animation.play()},stopActiveMessage:function(){this.activeMessage.animation.pause()},enableTickerTape:function(){if(Sys.isDefined(this.activeMessage)!==true){this.activeMessage=this.messages[0];this.activeMessage.sprite.visible=true}this.startMessage(this.activeMessage);this.fadeIn()},disableTickerTape:function(){this.fadeOut()},nextMessage:function(){var b=this;var c=b.messages.indexOf(b.activeMessage);var a=c+1;a%=b.messages.length;b.messages[c].sprite.visible=false;b.messages[a].sprite.visible=true;b.startMessage(b.messages[a])}};Warlords.TickerTapeView=Sys.extend(Core.View,Warlords.TickerTapeView,"Warlords.TickerTapeView");Sys.ns("Game");Game.TextStyles={SKIP_INTRO_STYLE:{font:"24px FuturaCom-MediumCondensed",align:"center",fill:"#FFFFFF"},ACTIVE_TEXT_STYLE:{font:"22px FuturaCom-ExtraBoldCond",align:"center",fill:"#f7c109",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:3},INACTIVE_TEXT_STYLE:{font:"22px FuturaCom-ExtraBoldCond",align:"center",fill:"#ffffff",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:3},CONTINUE_BUTTON_UP:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#292929"},CONTINUE_BUTTON_OVER:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#000000"},CONTINUE_BUTTON_DOWN:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#000000"},CONTINUE_BUTTON_DISABLED:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#656565"},CONTINUE_BUTTON_UP_MOBILE:{font:"38px FuturaCom-ExtraBoldCond",align:"center",fill:"#292929"},CONTINUE_BUTTON_OVER_MOBILE:{font:"38px FuturaCom-ExtraBoldCond",align:"center",fill:"#000000"},CONTINUE_BUTTON_DOWN_MOBILE:{font:"38px FuturaCom-ExtraBoldCond",align:"center",fill:"#000000"},CONTINUE_BUTTON_DISABLED_MOBILE:{font:"38px FuturaCom-ExtraBoldCond",align:"center",fill:"#656565"},SKIP_CHECK_BOX:{font:"22px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:3},MAX_BET_BUTTON_UP:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#292929"},MAX_BET_BUTTON_OVER:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#000000"},MAX_BET_BUTTON_DOWN:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#000000"},MAX_BET_BUTTON_DISABLED:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#656565"},AUTOPLAY_BUTTON_UP:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#292929"},AUTOPLAY_BUTTON_OVER:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#000000"},AUTOPLAY_BUTTON_DOWN:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#000000"},AUTOPLAY_BUTTON_DISABLED:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#656565"},GENERIC_LABEL_STYLE:{font:"14px FuturaCom-ExtraBoldCond",align:"center",fill:"#d1d2d4"},GENERIC_VALUE_STYLE:{font:"24px FuturaCom-ExtraBoldCond",align:"center",fill:"#d1d2d4"},TOTAL_WIN_LABEL:{font:"25px FuturaCom-ExtraBoldCond",align:"center",fill:"#d1d2d4"},FREESPINS_GENERIC_LABEL:{font:"25px FuturaCom-ExtraBoldCond",align:"center",fill:"#d1d2d4"},FREESPINS_GENERIC_VALUE:{font:"25px FuturaCom-ExtraBoldCond",align:"center",fill:"#d1d2d4"},FREESPINS_ANIMATED_VALUE:{font:"80px FuturaCom-ExtraBoldCond",align:"center",fill:"#f7c109",padding:4},FS_LEFT_TEXT_STYLE:{font:"80px FuturaCom-ExtraBoldCond",align:"center",fill:"#f7c109",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:5},FREE_SPINS_TEXT_STYLE:{font:"80px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:5},FINAL_CHANCE_TEXT_STYLE:{font:"80px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:5},RESPIN_TEXT_STYLE:{font:"80px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:5},SCATTER_BATTLE_TEXT_STYLE:{font:"120px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:5},TICKER_TAPE_TEXT:{font:"20px FuturaCom-ExtraBoldCond",align:"center",fill:"#d1d2d4",dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.5708,dropShadowDistance:2},WIN_BANNER_WIN_TEXT:{font:"46px FuturaCom-ExtraBoldCond",fill:"#ffffff"},WIN_BANNER_MULTIPLIER_TEXT:{font:"40px FuturaCom-ExtraBoldCond",fill:"#d1d2d4"},WIN_BANNER_COUNT_UP_TEXT:{font:"46px WinBannerNumbers"},WIN_BANNER_PROGRESSIVE_WIN_TEXT:{font:"23px FuturaCom-ExtraBoldCond",fill:"#ffffff"},WIN_BANNER_PROGRESSIVE_VALUE:{font:"23px WinBannerNumbers"},FINAL_CHANCE_COIN_WIN_TEXT:{font:"80px FuturaCom-ExtraBoldCond",align:"center",fill:"#f7c109",padding:4},BETLINE_BUTTON_LABEL:{font:"20px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF"},INTRO_OUTRO_CONGRATULATIONS:{font:"75px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:5},INTRO_OUTRO_CONGRATULATIONS_MOBILE:{font:"80px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:5},INTRO_FEATURE_TEXT:{font:"25px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:3},INTRO_FEATURE_TEXT_MOBILE:{font:"40px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:3,wordWrap:true,wordWrapWidth:1055},INTRO_OUTRO_TEXT:{font:"25px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,wordWrap:true,wordWrapWidth:900,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:3},INTRO_OUTRO_TEXT_MOBILE:{font:"40px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,wordWrap:true,wordWrapWidth:900,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:3},WIN_UP_TO_TEXT:{font:"25px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,wordWrap:true,wordWrapWidth:900,dropShadow:false,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:3.5},OUTRO_COINS_TEXT:{font:"40px FuturaCom-ExtraBoldCond",align:"center",fill:"#FFFFFF",padding:4,wordWrap:true,wordWrapWidth:900,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:3},BIG_WIN_TEXT:{font:"170px FuturaCom-ExtraBoldCond",align:"center",fill:"#ffffff",padding:10,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:10.5},MEGA_WIN_TEXT:{font:"170px FuturaCom-ExtraBoldCond",align:"center",fill:"#ffffff",padding:10,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:10.5},SUPER_MEGA_WIN_TEXT:{font:"170px FuturaCom-ExtraBoldCond",align:"center",fill:"#ffffff",padding:10,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:10.5},BIG_WIN_TEXT_MOBILE:{font:"165px FuturaCom-ExtraBoldCond",align:"center",fill:"#ffffff",padding:10,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:10.5},MEGA_WIN_TEXT_MOBILE:{font:"165px FuturaCom-ExtraBoldCond",align:"center",fill:"#ffffff",padding:10,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:10.5},SUPER_MEGA_WIN_TEXT_MOBILE:{font:"165px FuturaCom-ExtraBoldCond",align:"center",fill:"#ffffff",padding:10,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:10.5},PAYTABLE_LABEL:{font:"30px FuturaCom-ExtraBoldCond",align:"center",fill:"#ffffff"},PAYTABLE_PAYOUT_LABEL:{font:"30px FuturaCom-MediumCondensed",align:"center",fill:"#eecc33"},PAYTABLE_PAYOUT_VALUE:{font:"30px FuturaCom-MediumCondensed",align:"center",fill:"#ffffff"},PAYTABLE_TEXT:{font:"38px FuturaCom-MediumCondensed",align:"left",fill:"#ffffff",lineHeight:46},PAYTABLE_VOID_PAYS:{font:"14px FuturaCom-MediumCondensed",align:"left",fill:"#ffffff"},PAYTABLE_TEXT_MOBILE:{font:"26px FuturaCom-MediumCondensed",align:"left",fill:"#ffffff",lineHeight:32},COIN_WIN_TEXT:{font:"80px FuturaCom-ExtraBoldCond",align:"center",fill:"#f7c109",padding:4,dropShadow:true,dropShadowColor:"#000000",dropShadowAngle:1.0472,dropShadowDistance:5}};Sys.ns("Warlords");Warlords.Positions={SKIP_BUTTON:{position:new PIXI.Point(640,700),anchorPoint:new PIXI.Point(0.5,0.5)},CONTINUE_BUTTON:{position:new PIXI.Point(640,630),anchorPoint:new PIXI.Point(0.5,0.5)},CONTINUE_BUTTON_MOBILE:{position:new PIXI.Point(640,580),anchorPoint:new PIXI.Point(0.5,0.5)},CONTINUE_BUTTON_MOBILE_PORTRAIT:{position:new PIXI.Point(640,610),anchorPoint:new PIXI.Point(0.5,0.5)},SPIN_BUTTON:{position:new PIXI.Point(640,720-22),anchorPoint:new PIXI.Point(0.5,1)},PAYTABLE_BUTTON:{position:new PIXI.Point(75,720-24-32+3),anchorPoint:new PIXI.Point(0,0.5)},PAYTABLE_CLOSE_BUTTON:{position:new PIXI.Point(1240,30+3),anchorPoint:new PIXI.Point(0,0.5)},MAX_BET_BUTTON:{position:new PIXI.Point(1280/2+10,720-24),anchorPoint:new PIXI.Point(0,1)},MAX_BET_BUTTON_LABEL:{position:new PIXI.Point(182-20,65/2),anchorPoint:new PIXI.Point(1,0.5)},AUTOPLAY_BUTTON:{position:new PIXI.Point(1280/2-10,720-24),anchorPoint:new PIXI.Point(1,1)},AUTOPLAY_BUTTON_LABEL:{position:new PIXI.Point(20,65/2),anchorPoint:new PIXI.Point(0,0.5)},FS_KEYPAD_FS_LEFT_MULTI:{position:new PIXI.Point(640,720-24-65+4),anchorPoint:new PIXI.Point(0.5,0)},FS_KEYPAD_TOTAL_WIN:{position:new PIXI.Point(640,720-24-28),anchorPoint:new PIXI.Point(0.5,0)},BET_LEVEL_LABEL:{position:new PIXI.Point(1280/2-310,720-24-65+4+6),anchorPoint:new PIXI.Point(0.5,0)},BET_LEVEL_SELECTOR:{position:new PIXI.Point(1280/2-310,720-24-28+6),anchorPoint:new PIXI.Point(0.5,0.5)},COIN_VALUE_LABEL:{position:new PIXI.Point(1280/2+320,720-24-65+4+6),anchorPoint:new PIXI.Point(0.5,0)},COIN_VALUE_SELECTOR:{position:new PIXI.Point(1280/2+320,720-24-28+6),anchorPoint:new PIXI.Point(0.5,0.5)},FREESPIN_BETLEVEL_LABEL:{position:new PIXI.Point(1280/2-310,720-24-65+4+6),anchorPoint:new PIXI.Point(0.5,0)},FREESPIN_BETLEVEL_VALUE:{position:new PIXI.Point(1280/2-310,720-24-28+6),anchorPoint:new PIXI.Point(0.5,0.5)},FREESPIN_COINVALUE_LABEL:{position:new PIXI.Point(1280/2+320,720-24-65+4+6),anchorPoint:new PIXI.Point(0.5,0)},FREESPIN_COINVALUE_VALUE:{position:new PIXI.Point(1280/2+320,720-24-28+6),anchorPoint:new PIXI.Point(0.5,0.5)},BASIC_BET_LABEL:{position:new PIXI.Point(1280/2-435,720-24-65+4+6),anchorPoint:new PIXI.Point(0.5,0)},BASIC_BET_VALUE:{position:new PIXI.Point(1280/2-435,720-24-28+6),anchorPoint:new PIXI.Point(0.5,0.5)},BASIC_BALANCE_LABEL:{position:new PIXI.Point(1280/2+500,720-24-65+4+6),anchorPoint:new PIXI.Point(0.5,0)},BASIC_BALANCE_VALUE:{position:new PIXI.Point(1280/2+500,720-24-28+6),anchorPoint:new PIXI.Point(0.5,0.5)},BIG_WIN_TEXT:{position:new PIXI.Point(640,-70),anchorPoint:new PIXI.Point(0.5,0)},LOGO:{position:new PIXI.Point(0,0),anchorPoint:new PIXI.Point(0,0)},TICKER_TAPE:{position:new PIXI.Point(0,720-24-65-4),anchorPoint:new PIXI.Point(0,1)}};Sys.ns("Warlords");Warlords.Utils={STACKED_SYMBOLS:["SYM3","SYM4","SYM5"],SCATTER_SYMBOLS:["SYM13","SYM14","SYM15"],MULTIPLIER_DEFAULT_VALUE:" ",isScatterSymbol:function(a){return this.SCATTER_SYMBOLS.contains(a)},isWildSymbol:function(a){return(a==="SYM1")},renameStackedSymbolNamesOnReelSet:function(a){for(var c=0;c<a.length;c++){var e=a[c];for(var b=0;b<e.length;b++){var d=e[b];if(this.STACKED_SYMBOLS.contains(d)){e[b]=d+"_3";e[b+1]=d+"_2";e[b+2]=d+"_1"}}}},renameStackedSymbolsOnPipeBuffer:function(e){for(var c=0;c<e.length;c++){var f=e[c];if(this.STACKED_SYMBOLS.contains(f.symbol)){for(var b=c;b<c+3;b++){var d=e[b];if(d&&this.STACKED_SYMBOLS.contains(d.symbol)){var a=3-(b-c);d.symbol+="_"+(a)}else{}}}}},isSymbolTypeOfSecondOrThirdStackedType:function(a){return a.indexOf("_2")!==-1||a.indexOf("_3")!==-1},isStackedSymbol:function(b){if(b){var a;if(typeof b==="string"||b instanceof String){a=b}else{if(typeof b==="object"||b instanceof Object){a=b.symbol}else{return false}}if(a.indexOf("_")!==-1){a=a.split("_")[0]}if(Warlords.Utils.STACKED_SYMBOLS.contains(a)){return true}}return false},getStackedIndex:function(d){if(d){var c;var a=-1;if(typeof d==="string"||d instanceof String){c=d}else{if(typeof d==="object"||d instanceof Object){c=d.symbol}else{return -1}}if(c.indexOf("_")!==-1){var b=c.split("_");c=b[0];a=b[1]}if(Warlords.Utils.STACKED_SYMBOLS.contains(c)){return parseInt(a,10)}}return -1},renameIfStackedSymbol:function(a,b){if(Warlords.Utils.isStackedSymbol(a[b])){if(a[b].contains("_")){return}if(Warlords.Utils.isStackedSymbol(a[b+1])&&Warlords.Utils.isStackedSymbol(a[b-1])){a[b]+="_2"}else{if(Sys.isDefined(a[b+1])){if(Warlords.Utils.isStackedSymbol(a[b+1])){if(Sys.isDefined(a[b+2])){if(Warlords.Utils.isStackedSymbol(a[b+2])){a[b]+="_1"}else{a[b]+="_2"}}else{a[b]+="_1"}}else{a[b]+="_3"}}else{if(Sys.isDefined(a[b-1])){if(Warlords.Utils.isStackedSymbol(a[b-1])){if(Sys.isDefined(a[b-2])){if(Warlords.Utils.isStackedSymbol(a[b-2])){a[b]+="_3"}else{a[b]+="_2"}}else{a[b]+="_3"}}else{a[b]+="_1"}}}}}},clearContainer:function(a){a.removeChildren(0,a.children.length)},randomInt:function(a,b){return Math.floor(Math.random()*(b+1-a)+a)},shuffleArray:function(d){var c=d.length,b,a;while(0!==c){a=Math.floor(Math.random()*c);c-=1;b=d[c];d[c]=d[a];d[a]=b}},createCoveringTexture:function(){var a=new PIXI.Graphics();a.beginFill(4127,1);a.drawRect(0,0,16,16);a.endFill();return a.generateTexture(Game.stage.view.animationManager.renderer,1,PIXI.SCALE_MODES.DEFAULT)},createReelMask:function(g,f){if(!Sys.isDefined(g)){g=0}if(!Sys.isDefined(f)){f=0}var d=Game.stage.model.getSymbolConfiguration(0,0),c=Game.stage.model.getSymbolConfiguration(4,2),b=Resources.readData("config"),a=new PIXI.Graphics();var e=b.reelGroups["default"].reelLayout.standard;a.beginFill(0,0);a.drawRect((d.left+e.reelMaskXOffset),(d.top+e.reelMaskYOffset-g),(c.left+c.width-d.left-e.reelMaskXOffset*2),e.visibleLength+g+f);a.endFill();return a},createWideReelMask:function(){var e=Game.stage.model.getSymbolConfiguration(0,0),d=Game.stage.model.getSymbolConfiguration(4,2),b=Resources.readData("config"),c=Environment.getStageResolution(),a=new PIXI.Graphics();var f=b.reelGroups["default"].reelLayout.standard;a.beginFill(0,0);a.drawRect(0,(e.top+f.reelMaskYOffset),c.width,f.visibleLength);a.endFill();return a},createFireScaleAnimation:function(a){var c,b={};b[0]=a.scale;b[333]={x:0.5,y:0.5};b[334]={X:0,y:0};c=new Animation.Holder({target:a,prop:"scale",animate:b});Game.stage.view.animationManager.addToAnimationLoop(c);return c},show:function(a){a.visible=true;a.updateTransform()},hide:function(a){a.visible=false},calculateSymbolProperties:function(g,f,h,e){var a=new PIXI.Point();a.x=g.left+e;var d=h.symbolWidths.standard-(e*2);var c=h.symbolHeights.standard;if(Warlords.Utils.isStackedSymbol(f)){var b=Warlords.Utils.getStackedIndex(f);if(b===1){a.y=g.top+e;c-=e}else{if(b===2){a.y=g.top}else{if(b===3){c-=e;a.y=g.top}}}}else{a.y=g.top+e;c-=e*2}return{symbolPosition:a,symbolWidth:d,symbolHeight:c}},extractMultiplierFromServerResponse:function(g,b){var f,e;if(Sys.isDefined(g.freespin)){var c=g.freespin.two.multiplier.won;var a=g.freespin.two.multiplier.total;f=a-c;e=a}else{if(Sys.isDefined(g.freespins)){if(Sys.isDefined(g.freespins.multiplier)){var d=g.freespins.multiplier;f=b;e=d}}else{f=Warlords.Utils.MULTIPLIER_DEFAULT_VALUE;e=Warlords.Utils.MULTIPLIER_DEFAULT_VALUE}}return{from:f,to:e}},hasRunFreespin:function(d){var c=d.gamestate.history;if(c){for(var a=0;a<c.length;a++){var b=c[a];if(b==="freespin"){return true}}}return false},hasRunRespin:function(d){var c=d.gamestate.history;if(c){for(var a=0;a<c.length;a++){var b=c[a];if(b==="respin"){return true}}}return false},isOverlaySymbolAddedThisSpin:function(g,f,c,j){var h;if(Sys.isDefined(f)){Sys.iterate(g.rs,function(i,k){if(Sys.isObj(k)&&k.id===f){h=k.r}})}if(!Sys.isDefined(h)){return true}var d=h["i"+c];if(Sys.isDefined(d)){var a=d.overlay;if(Sys.isDefined(a)){for(var e=0;Sys.isDefined(a["i"+e]);e++){var b=a["i"+e];if(b.row===j&&b.info==="new"){return true}}}}return false},preloadAnimation:function(c,d){var a=Game.stage.view.animationManager.getLayer("preload");a.animation=Game.PIXIFactory.createAndAddSpineAnimation(c,a);for(var b=0;b<d.length;++b){a.animation.state.setAnimationByName(0,d[b],false)}},framesToTime:function(a){return Math.round(a*1000/30)},timeToFrames:function(a){return Math.round((a/1000)*30)},createShakeAnimation:function(a,e,g,f,p,b){var k,n,o,l=1+g*2*0.00078,h=1+g*2*0.00139,r,m=g,q=g;if(!Sys.isDefined(b)){b=false}else{m=0;q=0;g*=2}n={};o={};n[0]={x:0,y:0};o[0]={x:l,y:h};for(var c=1;c<f;c++){n[c*p]={x:Sys.Math.randomBetween(-g,m),y:Sys.Math.randomBetween(-g,q)}}n[f*p]={x:0,y:0};o[f*p-1*p]={x:l,y:h};o[f*p]={x:1,y:1};r=[{prop:"position",animate:n},{prop:"scale",animate:o}];for(var d=0;d<a.length;d++){if(!b){k=new Animation.Holder({target:a[d].position,animate:n})}else{k=new Animation.Holder({target:a[d],children:r})}Game.stage.view.animationManager.addToAnimationLoop(k);e.push(k)}},createShakeAnimationWithDuration:function(o,d,a,s,w){var t,c,l,k=1+d*2*0.00078,g=1+d*2*0.00139,h,b=d,u=d;if(!Sys.isDefined(w)){w=false}else{b=0;u=0;d*=2}c={};l={};c[0]={x:0,y:0};l[0]={x:k,y:g};var n=Math.round(a/s);for(var q=1;q<n;q++){c[q*s]={x:Sys.Math.randomBetween(-d,b),y:Sys.Math.randomBetween(-d,u)}}var e=n*s;if(e<a){c[e]={x:Sys.Math.randomBetween(-d,b),y:Sys.Math.randomBetween(-d,u)}}c[a]={x:0,y:0};l[n*s-1*s]={x:k,y:g};l[a]={x:1,y:1};h=[{prop:"position",animate:c},{prop:"scale",animate:l}];var v={position:{x:0,y:0},scale:{x:1,y:1},containers:o};for(var r=0;r<o.length;r++){var m=o[r];m.originalPosition=new PIXI.Point(m.position.x,m.position.y);m.originalScale=new PIXI.Point(m.scale.x,m.scale.y)}var p=function(){for(var x=0;x<o.length;x++){var j=o[x];j.position.x=j.originalPosition.x+v.position.x;j.position.y=j.originalPosition.y+v.position.y;j.scale.x=j.originalScale.x*v.scale.x;j.scale.y=j.originalScale.y*v.scale.y}};if(!w){t=new Animation.Holder({target:v.position,animate:c,onUpdate:p})}else{t=new Animation.Holder({target:v,children:h,onUpdate:p})}var f=function(){for(var x=0;x<o.length;x++){var j=o[x];j.position.x=j.originalPosition.x;j.position.y=j.originalPosition.y;j.scale.x=j.originalScale.x;j.scale.y=j.originalScale.y}Game.stage.view.animationManager.removeFromAnimationLoop(t)};t.onEnd=f;Game.stage.view.animationManager.addToAnimationLoop(t);return t},isBigWin:function(a){return a==="bigWin"},Animation:{setCurrentTime:function(a,b,c){if(!Sys.isDefined(c)){c=0}a.state.tracks[c].time=b;a.state.update(c)}},createFadeInAnimation:function(a,f,d,c){var e,b={};if(!Sys.isDefined(c)){c=function(){}}if(!Sys.isDefined(d)){d=0}b[d]={alpha:0};b[f+d]={alpha:1};e=new Animation.Holder({target:a,animate:b,onEnd:c});Game.stage.view.animationManager.addToAnimationLoop(e);return e},createFadeOutAnimation:function(a,f,d,c){var e,b={};if(!Sys.isDefined(c)){c=function(){}}if(!Sys.isDefined(d)){d=0}b[d]={alpha:1};b[f+d]={alpha:0};e=new Animation.Holder({target:a,animate:b,onEnd:c});Game.stage.view.animationManager.addToAnimationLoop(e);return e},createAnimation:function(f,i,g,h,c,e,a){var d,b={};if(!Sys.isDefined(a)){a=function(){}}if(!Sys.isDefined(e)){e=0}b[e]=g;b[c+e]=h;d=new Animation.Holder({target:f,prop:i,animate:b,onEnd:a});Game.stage.view.animationManager.addToAnimationLoop(d);return d},usingWebGL:function(){return Game.stage.view.animationManager.renderDisplay.contains("WebGL")},Layer:{swap:function(h,b){var g=Game.stage.view.animationManager.getLayers(),d,c,f,e;if(!Sys.isDefined(Game.stage.view.animationManager.getLayer(h))||!Sys.isDefined(Game.stage.view.animationManager.getLayer(b))){return}for(var a=0;a<g.length;++a){if(h===g[a].name){d=a;f=g[a]}if(b===g[a].name){c=a;e=g[a]}if(Sys.isDefined(f)&&Sys.isDefined(e)){break}}g[d]=e;g[c]=f},moveAfter:function(f,b){var e=Game.stage.view.animationManager.getLayers(),c,d;if(!Sys.isDefined(Game.stage.view.animationManager.getLayer(f))||!Sys.isDefined(Game.stage.view.animationManager.getLayer(b))){return}for(var a=0;a<e.length;++a){if(f===e[a].name){d=e[a];e.splice(a,1)}if(b===e[a].name){c=a}if(Sys.isDefined(d)&&Sys.isDefined(c)){break}}e.splice(c+1,0,d)}},extending:function(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;a.prototype.$super=b}};Sys.ns("Warlords");Warlords.IntroMovie={constructor:function(){Warlords.IntroMovie.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model;return{showingIntroMovie:{state:{name:"ShowingIntroMovie",execute:function(){},waitEvents:{"notify:introMovie.closed":false}}},beforeLoaderClose:{queue:[function(b){if(a.shouldShowIntroMovie()){b.stateHandler.pushState(b.states.showingIntroMovie)}}]},setupGame:{waitEvents:["notify:introMovie.buffered"]}}},getMixinDependencies:function(){return["animation"]},getDefaultMVCClasses:function(){return{model:Warlords.IntroMovieModel,controller:Warlords.IntroMovieController,view:Warlords.IntroMovieView}}};Warlords.IntroMovie=Sys.extend(Core.Module,Warlords.IntroMovie,"Warlords.IntroMovie");Sys.ns("Warlords");Warlords.IntroMovieController={constructor:function(){Warlords.IntroMovieController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Warlords.IntroMovieController.superclass.setupEvents.apply(this,arguments);a.on({"notify:stateHandler.enteringShowingIntroMovieState":a.show,"view:animationComplete":a.close,"view:introMovieBuffered":a.onIntroMovieBuffered,"notify:moduleLoader.finishedLoadingModules":a.onModulesFinishedLoading,"notify:stateHandler.enteringFeatureSplashState":a.enteringFeatureSplashStateHandler,"request:introMovie.close":a.close.bind(a)})},onIntroMovieBuffered:function(){var a=this;a.fireEvent("notify:introMovie.buffered")},close:function(){var a=this;a.fireEvent("request:ambienceManager.ambiencePauseSwitch",false);a.fireEvent("request:stage.lower");a.fireEvent("notify:introMovie.closed");Services.storage.storeData("IntroMovie.showing",false);a.fireEvent("request:userInputManager.deactivateExclusivity",a.MODULE_NAME);a.fireEvent("request:enableBasicGamePanel",a.MODULE_NAME);a.view.stop();if(a.model.readData("showFeatureSplash")===false){a.view.hide()}},show:function(){var a=this;if(a.model.shouldShowIntroMovie()){a.fireEvent("request:ambienceManager.ambiencePauseSwitch",true);a.fireEvent("request:stage.elevate");Services.storage.storeData("IntroMovie.showing",true);a.fireEvent("request:userInputManager.activateExclusivity",a.MODULE_NAME);a.fireEvent("request:disableBasicGamePanel",a.MODULE_NAME);a.view.play()}},enteringFeatureSplashStateHandler:function(){var a=this;if(a.model.readData("showFeatureSplash")){a.view.hide()}},onModulesFinishedLoading:function(){var a=this;Services.storage.storeData("shouldShowIntroMovie",a.model.shouldShowIntroMovie())}};Warlords.IntroMovieController=Sys.extend(Core.Controller,Warlords.IntroMovieController,"Warlords.IntroMovieController");Sys.ns("Warlords");Warlords.IntroMovieModel={constructor:function(){Warlords.IntroMovieModel.superclass.constructor.apply(this,arguments)},shouldShowIntroMovie:function(){return this.readData("initNotRestore")&&Services.settingsManager.getSetting("showIntroMovie")},setupData:function(){var b=Resources.readData("gameServerInitResponse"),a=(Services.localStorageManager.hasData("showFeatureSplash")&&Services.localStorageManager.readData("showFeatureSplash")==="true");this.storeData("initNotRestore",b.clientaction==="init"&&b.restore!==true);Services.storage.storeData("IntroMovie.showing",false);this.storeData("showFeatureSplash",a)}};Warlords.IntroMovieModel=Sys.extend(Core.Model,Warlords.IntroMovieModel,"Warlords.IntroMovieModel");Sys.ns("Warlords");Warlords.IntroMovieView={SRC:"introMovie",constructor:function(){Warlords.IntroMovieView.superclass.constructor.apply(this,arguments)},onSkipButtonClick:function(c,a){var b=this;b.close()},initAnimations:function(){var b=this;b.rootContainer=new PIXI.Container();b.rootContainer.interactive=true;b.introMovieElement=Game.PIXIFactory.createVideoElement(b.SRC,false,false);b.introMovieSprite=Game.PIXIFactory.createAndAddVideo(b.introMovieElement,b.rootContainer,new PIXI.Point(0,0),new PIXI.Point(0,0));b.introMovieElement.addEventListener("canplaythrough",b.onCanPlayThrough.bind(b));b.introMovieElement.addEventListener("ended",b.onVideoEnded.bind(b));b.skipButton=b.createSkipButton("FeatureSplashContinue");b.rootContainer.addChild(b.skipButton);var a=Game.stage.view.animationManager.getLayer("introMovie");a.addChild(b.rootContainer);b.rootContainer.visible=false},createSkipButton:function(d){var c=this,b,a=Services.languageManager.getText(Language.Keys.skipIntro);b=new Interface.utils.PIXILabel(a,Game.TextStyles.SKIP_INTRO_STYLE);b.id=d;b.clickCallback=c.onSkipButtonClick.bind(c);b.moveToPosition(Warlords.Positions.SKIP_BUTTON);return b},onVideoEnded:function(){this.close()},close:function(){this.fireEvent("view:animationComplete")},onCanPlayThrough:function(){this.fireEvent("view:introMovieBuffered")},stop:function(){var a=this;a.introMovieElement.pause();if(Platform.isEdgeBrowser){Game.PIXIFactory.resetMSEdgeVideo("introMovie")}a.skipButton.visible=false;a.introMovieElement=undefined},hide:function(){var a=this;a.rootContainer.removeChild(a.introMovieSprite);a.introMovieSprite=undefined;a.rootContainer.visible=false},play:function(){var a=this;a.rootContainer.visible=true;a.introMovieElement.currentTime=0;a.introMovieElement.play();if(Platform.isEdgeBrowser){Game.PIXIFactory.playMSEdgeVideo("introMovie")}}};Warlords.IntroMovieView=Sys.extend(Core.View,Warlords.IntroMovieView,"Warlords.IntroMovieView");var Feature={};Feature.Feature=function(b,d,a){var c=this;c.SYMBOL_WIDTH=200;c.SYMBOL_HEIGHT=188;c.FEATURE_CENTER={x:0,y:0};c.REELS_SCALE=d;c.SUSTAIN=a;c.REELS_ORIGIN={x:c.FEATURE_CENTER.x-c.SYMBOL_WIDTH*2.5*c.REELS_SCALE,y:c.FEATURE_CENTER.y-c.SYMBOL_HEIGHT*1.5*c.REELS_SCALE};c.animationTimeouts=[];c.animationIntervals=[];c.container=new PIXI.Container();c.container.position=b};Feature.Feature.prototype.addTo=function(a){a.addChild(this.container);this.init()};Feature.Feature.prototype.init=function(){};Feature.Feature.prototype.play=function(){Warlords.Utils.show(this.container)};Feature.Feature.prototype.reset=function(){var b=this,a;Warlords.Utils.hide(b.container);for(a=0;a<b.animationIntervals.length;++a){clearInterval(b.animationIntervals[a])}for(a=0;a<b.animationTimeouts.length;++a){clearTimeout(b.animationTimeouts[a])}b.animationIntervals.length=0;b.animationTimeouts.length=0};Object.defineProperty(Feature.Feature.prototype,"position",{get:function(){return this.container.position},set:function(a){this.container.position=a}});Object.defineProperty(Feature.Feature.prototype,"position.x",{get:function(){return this.container.position.x},set:function(a){this.container.position.x=a}});Object.defineProperty(Feature.Feature.prototype,"position.y",{get:function(){return this.container.position.y},set:function(a){this.container.position.y=a}});Feature.RandomWild=function(b,c,a){Feature.Feature.apply(this,[b,c,a]);this.RW_PATTERN_SWITCH_TIME=150};Warlords.Utils.extending(Feature.RandomWild,Feature.Feature);Feature.RandomWild.prototype.init=function(){this.$super.prototype.init.call(this);var b=this,a;b.symbols=[Game.PIXIFactory.createAndAddSprite("SYM1",b.container),Game.PIXIFactory.createAndAddSprite("SYM1",b.container),Game.PIXIFactory.createAndAddSprite("SYM1",b.container),Game.PIXIFactory.createAndAddSprite("SYM1",b.container)];b.animations=[Game.PIXIFactory.createAndAddSpineAnimation("randomWildAnimation",b.container,new PIXI.Point(b.REELS_ORIGIN.x+b.SYMBOL_WIDTH*b.REELS_SCALE,b.REELS_ORIGIN.y)),Game.PIXIFactory.createAndAddSpineAnimation("randomWildAnimation",b.container,new PIXI.Point(b.REELS_ORIGIN.x+b.SYMBOL_WIDTH*b.REELS_SCALE,b.REELS_ORIGIN.y)),Game.PIXIFactory.createAndAddSpineAnimation("randomWildAnimation",b.container,new PIXI.Point(b.REELS_ORIGIN.x,b.REELS_ORIGIN.y)),Game.PIXIFactory.createAndAddSpineAnimation("randomWildAnimation",b.container,new PIXI.Point(b.REELS_ORIGIN.x+b.SYMBOL_WIDTH*3*b.REELS_SCALE,b.REELS_ORIGIN.y)),Game.PIXIFactory.createAndAddSpineAnimation("randomWildAnimation",b.container,new PIXI.Point(b.REELS_ORIGIN.x+b.SYMBOL_WIDTH*2*b.REELS_SCALE,b.REELS_ORIGIN.y+b.SYMBOL_HEIGHT*2*b.REELS_SCALE))];for(a=0;a<b.animations.length;++a){b.animations[a].scale=new PIXI.Point(b.REELS_SCALE,b.REELS_SCALE)}b.fadeInAnimations=[];for(a=0;a<b.symbols.length;++a){b.symbols[a].scale=new PIXI.Point(b.REELS_SCALE,b.REELS_SCALE);b.symbols[a].alpha=0;b.fadeInAnimations.push(Warlords.Utils.createFadeInAnimation(b.symbols[a],Warlords.Utils.framesToTime(5)))}};Feature.RandomWild.prototype.play=function(){this.$super.prototype.play.call(this);for(var a=0;a<this.symbols.length;++a){this.symbols[a].alpha=0}this.playRandomWildAnimations()};Feature.RandomWild.prototype.reset=function(){this.$super.prototype.reset.call(this);var b=this,a;for(a=0;a<b.symbols.length;++a){b.symbols[a].alpha=0}for(a=0;a<b.animations.length;++a){Game.PIXIUtils.resetSpineAnimation(b.animations[a])}};Feature.RandomWild.prototype.fadeInWildSymbols=function(c,b){for(var a=c;a<b+1;++a){this.fadeInAnimations[a].play()}};Feature.RandomWild.prototype.fadeOutWildSymbols=function(c,b){for(var a=c;a<b+1;++a){this.symbols[a].alpha=0}};Feature.RandomWild.prototype.playRandomWildAnimations=function(){this.playHammerAnimation(this.animations[0],this.animations[1],[this.animations[2],this.animations[3],this.animations[4]])};Feature.RandomWild.prototype.playHammerAnimation=function(b,a,c){var d=this;b.state.setAnimationByName(0,"hammer_1",false);b.state.onEvent=function(g,f){if(f.data.name==="fadein"){d.fadeInWildSymbols(0,3);d.symbols[0].position=new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*d.REELS_SCALE,d.REELS_ORIGIN.y);d.symbols[1].position=new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*2*d.REELS_SCALE,d.REELS_ORIGIN.y);d.symbols[2].position=new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*d.REELS_SCALE,d.REELS_ORIGIN.y+d.SYMBOL_HEIGHT*d.REELS_SCALE);d.symbols[3].position=new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*2*d.REELS_SCALE,d.REELS_ORIGIN.y+d.SYMBOL_HEIGHT*d.REELS_SCALE)}};b.state.onComplete=function(){d.animationTimeouts.push(setTimeout(function(){d.fadeOutWildSymbols(0,3);d.playSwordAnimation(a,c,b)},d.RW_PATTERN_SWITCH_TIME))}};Feature.RandomWild.prototype.playSwordAnimation=function(b,c,a){var d=this;b.state.setAnimationByName(0,"sword_1",false);b.state.onEvent=function(g,f){if(f.data.name==="fadein"){d.fadeInWildSymbols(0,0);d.symbols[0].position=new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*d.REELS_SCALE,d.REELS_ORIGIN.y);d.animationTimeouts.push(setTimeout(function(){d.fadeInWildSymbols(1,1);d.symbols[1].position=new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*2*d.REELS_SCALE,d.REELS_ORIGIN.y+d.SYMBOL_HEIGHT*d.REELS_SCALE);d.animationTimeouts.push(setTimeout(function(){d.fadeInWildSymbols(2,2);d.symbols[2].position=new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*3*d.REELS_SCALE,d.REELS_ORIGIN.y+d.SYMBOL_HEIGHT*2*d.REELS_SCALE)},Warlords.Utils.framesToTime(3)))},Warlords.Utils.framesToTime(3)))}};b.state.onComplete=function(){d.animationTimeouts.push(setTimeout(function(){d.fadeOutWildSymbols(0,2);d.playArrowAnimation(c,a,b)},d.RW_PATTERN_SWITCH_TIME))}};Feature.RandomWild.prototype.playArrowAnimation=function(c,b,a){var d=this;c[0].state.setAnimationByName(0,"arrows_1",false);d.animationTimeouts.push(setTimeout(function(){c[1].state.setAnimationByName(0,"arrows_2",false);d.animationTimeouts.push(setTimeout(function(){c[2].state.setAnimationByName(0,"arrows_1",false)},Warlords.Utils.framesToTime(8)))},Warlords.Utils.framesToTime(8)));c[0].state.onEvent=function(g,f){if(f.data.name==="fadein"){d.fadeInWildSymbols(0,0);d.symbols[0].position=new PIXI.Point(d.REELS_ORIGIN.x,d.REELS_ORIGIN.y)}};c[1].state.onEvent=function(g,f){if(f.data.name==="fadein"){d.fadeInWildSymbols(1,1);d.symbols[1].position=new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*3*d.REELS_SCALE,d.REELS_ORIGIN.y)}};c[2].state.onEvent=function(g,f){if(f.data.name==="fadein"){d.fadeInWildSymbols(2,2);d.symbols[2].position=new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*2*d.REELS_SCALE,d.REELS_ORIGIN.y+d.SYMBOL_HEIGHT*2*d.REELS_SCALE)}};c[2].state.onComplete=function(){d.animationTimeouts.push(setTimeout(function(){d.fadeOutWildSymbols(0,2);d.playHammerAnimation(b,a,c)},d.SUSTAIN))}};Feature.Respin=function(b,c,a){Feature.Feature.apply(this,[b,c,a]);this.RESPIN_SCATTER_DELAY=750;this.RESPIN_SECOND_SCATTER_DELAY=250;this.RESPIN_SECOND_SCATTER_DELAY_VARIANCE=150};Warlords.Utils.extending(Feature.Respin,Feature.Feature);Feature.Respin.prototype.init=function(){this.$super.prototype.init.call(this);var c=this,a,b;c.symbols=[Game.PIXIFactory.createAndAddSpineAnimation("SYM15",c.container,new PIXI.Point(c.REELS_ORIGIN.x+c.SYMBOL_WIDTH*c.REELS_SCALE,c.REELS_ORIGIN.y+c.SYMBOL_HEIGHT*c.REELS_SCALE)),Game.PIXIFactory.createAndAddSpineAnimation("SYM15",c.container,new PIXI.Point(c.REELS_ORIGIN.x+c.SYMBOL_WIDTH*2*c.REELS_SCALE,c.REELS_ORIGIN.y)),Game.PIXIFactory.createAndAddSprite("SYM15",c.container,new PIXI.Point(0,-500)),Game.PIXIFactory.createAndAddSprite("SYM15",c.container,new PIXI.Point(0,-500))];c.animations=[Game.PIXIFactory.createAndAddSpineAnimation("attentionTrail",c.container),Game.PIXIFactory.createAndAddSpineAnimation("attentionTrail",c.container)];c.symbolFalls=[c.createFallAnimation(c.symbols[2]),c.createFallAnimation(c.symbols[3])];a=new PIXI.Graphics();a.beginFill();a.drawRect(-640,c.REELS_ORIGIN.y+4*c.REELS_SCALE,1280,c.SYMBOL_HEIGHT*c.REELS_SCALE*3-8*c.REELS_SCALE);a.endFill();c.container.addChild(a);for(b=0;b<c.animations.length;++b){c.animations[b].scale=new PIXI.Point(c.REELS_SCALE,c.REELS_SCALE);c.animations[b].mask=a}for(b=0;b<c.symbols.length;++b){c.symbols[b].scale=new PIXI.Point(c.REELS_SCALE,c.REELS_SCALE);c.symbols[b].mask=a}};Feature.Respin.prototype.play=function(){this.$super.prototype.play.call(this);this.playRespinAnimations()};Feature.Respin.prototype.reset=function(){this.$super.prototype.reset.call(this);this.stopRespinAnimations=false;for(var a=0;a<this.animations.length;++a){Game.PIXIUtils.resetSpineAnimation(this.animations[a])}};Feature.Respin.prototype.createFallAnimation=function(b){var c=this,d,a={};a[0]={y:c.REELS_ORIGIN.y-c.SYMBOL_HEIGHT*c.REELS_SCALE};a[300]={y:c.REELS_ORIGIN.y+c.SYMBOL_HEIGHT*3*c.REELS_SCALE};d=new Animation.Holder({prop:"position",target:b,animate:a});Game.stage.view.animationManager.addToAnimationLoop(d);return d};Feature.Respin.prototype.playRespinAnimations=function(){var b=this,a;b.symbols[0].state.setAnimationByName(0,"sym15_idle",true);b.symbols[1].state.setAnimationByName(0,"sym15_idle",true);b.animationTimeouts.push(setTimeout(function(){if(b.SUSTAIN!==0){b.stopRespinAnimations=true}},b.SUSTAIN));a=b.configureAndPlayRespinAnimations();b.animationIntervals.push(setInterval(function(){if(!b.stopRespinAnimations){a=b.configureAndPlayRespinAnimations(a)}},b.RESPIN_SCATTER_DELAY))};Feature.Respin.prototype.configureAndPlayRespinAnimations=function(d){var c=this,e;do{e=Warlords.Utils.randomInt(0,4)}while(e===d);d=e;c.playRespinAnimation(c.animations[0],c.symbols[2],c.symbolFalls[0],c.REELS_ORIGIN.x+c.SYMBOL_WIDTH*c.REELS_SCALE*d,c.REELS_ORIGIN.y,0);var b=Warlords.Utils.randomInt(0,1);if(b===0){do{e=Warlords.Utils.randomInt(0,4)}while(e===d);d=e;var a=Warlords.Utils.randomInt(c.RESPIN_SECOND_SCATTER_DELAY-c.RESPIN_SECOND_SCATTER_DELAY_VARIANCE,c.RESPIN_SECOND_SCATTER_DELAY+c.RESPIN_SECOND_SCATTER_DELAY_VARIANCE);c.playRespinAnimation(c.animations[1],c.symbols[3],c.symbolFalls[1],c.REELS_ORIGIN.x+c.SYMBOL_WIDTH*c.REELS_SCALE*d,c.REELS_ORIGIN.y,a)}return d};Feature.Respin.prototype.playRespinAnimation=function(e,d,b,a,f,c){this.animationTimeouts.push(setTimeout(function(){e.position=new PIXI.Point(a,f);e.state.setAnimationByName(0,"animation",false);d.position=new PIXI.Point(a,f);b.play()},c))};Feature.FinalChance=function(b,c,a){Feature.Feature.apply(this,[b,c,a]);this.FINAL_CHANCE_FG_FADE_OUT_TIME=500;this.FINAL_CHANCE_BG_FADE_OUT_TIME=a-500;this.FINAL_CHANCE_START_DELAY=700};Warlords.Utils.extending(Feature.FinalChance,Feature.Feature);Feature.FinalChance.prototype.init=function(){this.$super.prototype.init.call(this);var d=this,c;d.animations=[];d.animations.push(Game.PIXIFactory.createAndAddSpineAnimation("finalChanceAnimationBg",d.container,new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*3*d.REELS_SCALE,d.REELS_ORIGIN.y+d.SYMBOL_HEIGHT*d.REELS_SCALE)));d.symbols=[Game.PIXIFactory.createAndAddSpineAnimation("SYM15",d.container,new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*d.REELS_SCALE,d.REELS_ORIGIN.y+d.SYMBOL_HEIGHT*d.REELS_SCALE)),Game.PIXIFactory.createAndAddSpineAnimation("SYM15",d.container,new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*2*d.REELS_SCALE,d.REELS_ORIGIN.y)),Game.PIXIFactory.createAndAddSpineAnimation("SYM15",d.container,new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*3*d.REELS_SCALE,d.REELS_ORIGIN.y+d.SYMBOL_HEIGHT*d.REELS_SCALE))];d.animations.push(Game.PIXIFactory.createAndAddSpineAnimation("finalChanceAnimationFg",d.container,new PIXI.Point(d.REELS_ORIGIN.x+d.SYMBOL_WIDTH*3*d.REELS_SCALE,d.REELS_ORIGIN.y+d.SYMBOL_HEIGHT*d.REELS_SCALE)));d.fadeOutFinalChanceList=[];for(c=0;c<d.animations.length;++c){d.animations[c].scale=new PIXI.Point(d.REELS_SCALE,d.REELS_SCALE);d.fadeOutFinalChanceList.push(Warlords.Utils.createFadeOutAnimation(d.animations[c],Warlords.Utils.framesToTime(5)))}for(c=0;c<d.symbols.length;++c){d.symbols[c].scale=new PIXI.Point(d.REELS_SCALE,d.REELS_SCALE)}Warlords.Utils.hide(d.symbols[2]);var a=new PIXI.Graphics();a.beginFill(16711680,1);for(c=0;c<3;++c){for(var b=0;b<3;++b){a.drawRect(d.REELS_ORIGIN.x+(d.SYMBOL_WIDTH*(b+2)+4)*d.REELS_SCALE,d.REELS_ORIGIN.y+(d.SYMBOL_HEIGHT*c+4)*d.REELS_SCALE,(d.SYMBOL_WIDTH-8)*d.REELS_SCALE,(d.SYMBOL_HEIGHT-8)*d.REELS_SCALE)}}a.endFill();d.container.addChild(a);d.animations[0].mask=a};Feature.FinalChance.prototype.play=function(){this.$super.prototype.play.call(this);this.playFinalChanceAnimations()};Feature.FinalChance.prototype.reset=function(){this.$super.prototype.reset.call(this);Warlords.Utils.hide(this.symbols[2]);for(var a=0;a<this.animations.length;++a){Game.PIXIUtils.resetSpineAnimation(this.animations[a])}};Feature.FinalChance.prototype.playFinalChanceAnimations=function(){var b=this;for(var a=0;a<b.symbols.length;++a){b.symbols[a].state.setAnimationByName(0,"sym15_idle",true)}b.animationTimeouts.push(setTimeout(function(){b.configureAndPlayFinalChanceAnimations();b.animationIntervals.push(setInterval(function(){b.configureAndPlayFinalChanceAnimations()},b.SUSTAIN))},b.FINAL_CHANCE_START_DELAY))};Feature.FinalChance.prototype.configureAndPlayFinalChanceAnimations=function(){var b=this,a=b.animations[0],d=b.animations[1],c=b.symbols[2];a.alpha=1;d.alpha=1;Game.PIXIUtils.resetSpineAnimation(a);a.state.setAnimationByName(0,"animation",false);d.state.setAnimationByName(0,"animation",false);d.state.onEvent=function(f,g){if(g.data.name==="impact"){Warlords.Utils.show(c)}};b.animationTimeouts.push(setTimeout(function(){b.fadeOutFinalChanceList[1].play()},b.FINAL_CHANCE_FG_FADE_OUT_TIME));b.animationTimeouts.push(setTimeout(function(){a.alpha=0;Warlords.Utils.hide(c)},b.FINAL_CHANCE_BG_FADE_OUT_TIME))};Feature.Freespins=function(b,d,a){var c=this;Feature.Feature.apply(this,[b,d,a]);c.REELS_ORIGIN={x:c.FEATURE_CENTER.x-c.SYMBOL_WIDTH*0.5*c.REELS_SCALE,y:c.FEATURE_CENTER.y-c.SYMBOL_HEIGHT*0.5*c.REELS_SCALE}};Warlords.Utils.extending(Feature.Freespins,Feature.Feature);Feature.Freespins.prototype.reset=function(){var a=this.$super.prototype;a.$super.prototype.reset.call(this);Game.PIXIUtils.resetSpineAnimation(this.animation)};Feature.Freespins.prototype.fireEnd=function(b,a){b.state.onEvent=function(d,c){if(c.data.name==="fire end"){a.alpha=0}}};Feature.Freespins.prototype.playFreespinAnim=function(b){var a=this;a.animation.state.setAnimationByName(0,b,false);a.animationIntervals.push(setInterval(function(){a.symbol.alpha=1;a.animation.state.setAnimationByName(0,b,false);a.fireEnd(a.animation,a.symbol)},a.SUSTAIN))};Feature.BarbarianFreespin=function(b,c,a){Feature.Freespins.apply(this,[b,c,a])};Warlords.Utils.extending(Feature.BarbarianFreespin,Feature.Freespins);Feature.BarbarianFreespin.prototype.init=function(){this.$super.prototype.init.call(this);var a=this;a.symbol=Game.PIXIFactory.createAndAddSprite("SYM13",a.container,new PIXI.Point(a.REELS_ORIGIN.x,a.REELS_ORIGIN.y));a.animation=Game.PIXIFactory.createAndAddSpineAnimation("SYM13",a.container,new PIXI.Point(a.REELS_ORIGIN.x,a.REELS_ORIGIN.y));a.symbol.scale=new PIXI.Point(a.REELS_SCALE,a.REELS_SCALE);a.animation.scale=new PIXI.Point(a.REELS_SCALE,a.REELS_SCALE)};Feature.BarbarianFreespin.prototype.play=function(){this.$super.prototype.play.call(this);this.$super.prototype.playFreespinAnim.apply(this,["sym13_win"])};Feature.PriestessFreespin=function(b,c,a){Feature.Freespins.apply(this,[b,c,a])};Warlords.Utils.extending(Feature.PriestessFreespin,Feature.Freespins);Feature.PriestessFreespin.prototype.init=function(){this.$super.prototype.init.call(this);var a=this;a.symbol=Game.PIXIFactory.createAndAddSprite("SYM14",a.container,new PIXI.Point(a.REELS_ORIGIN.x,a.REELS_ORIGIN.y));a.animation=Game.PIXIFactory.createAndAddSpineAnimation("SYM14",a.container,new PIXI.Point(a.REELS_ORIGIN.x,a.REELS_ORIGIN.y));a.symbol.scale=new PIXI.Point(a.REELS_SCALE,a.REELS_SCALE);a.animation.scale=new PIXI.Point(a.REELS_SCALE,a.REELS_SCALE)};Feature.PriestessFreespin.prototype.play=function(){this.$super.prototype.play.call(this);this.$super.prototype.playFreespinAnim.apply(this,["sym14_win"])};Feature.SamuraiFreespin=function(b,c,a){Feature.Freespins.apply(this,[b,c,a])};Warlords.Utils.extending(Feature.SamuraiFreespin,Feature.Freespins);Feature.SamuraiFreespin.prototype.init=function(){this.$super.prototype.init.call(this);var a=this;a.symbol=Game.PIXIFactory.createAndAddSprite("SYM15",a.container,new PIXI.Point(a.REELS_ORIGIN.x,a.REELS_ORIGIN.y));a.animation=Game.PIXIFactory.createAndAddSpineAnimation("SYM15",a.container,new PIXI.Point(a.REELS_ORIGIN.x,a.REELS_ORIGIN.y));a.symbol.scale=new PIXI.Point(a.REELS_SCALE,a.REELS_SCALE);a.animation.scale=new PIXI.Point(a.REELS_SCALE,a.REELS_SCALE)};Feature.SamuraiFreespin.prototype.play=function(){this.$super.prototype.play.call(this);this.$super.prototype.playFreespinAnim.apply(this,["sym15_win"])};Sys.ns("Warlords");Warlords.FeatureSplash={constructor:function(){Warlords.FeatureSplash.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["serverResponse","animation","userInput"]},getStateChanges:function(){var a=this.model;return{featureSplash:{state:{name:"FeatureSplash",execute:function(){},waitEvents:{"notify:featureSplash.closed":false}}},beforeLoaderClose:{queue:[function(b){if(a.readData("animationRequested")){b.stateHandler.pushState(b.states.featureSplash)}}]}}},getDefaultMVCClasses:function(){return{model:Warlords.FeatureSplashModel,controller:Warlords.FeatureSplashController,view:Warlords.FeatureSplashView}}};Warlords.FeatureSplash=Sys.extend(Core.Module,Warlords.FeatureSplash,"Warlords.FeatureSplash");Sys.ns("Warlords");Warlords.FeatureSplashController={TOTAL_NUMBER_OF_FEATURES:6,FEATURE_DURATION:3450,constructor:function(){Warlords.FeatureSplashController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringFeatureSplashState":a.start,"request:featureSplash.close":a.close,"notify:stateHandler.leavingBeforeLoaderCloseState":a.onBeforeLoaderClose,"view:slideComplete":a.checkForNextSlide.bind(a),"view:closed":a.onClosed,"view:checkboxClicked":a.onCheckboxClicked,"view:changeFeature":a.changeFeature,"view:close":a.close})},onBeforeLoaderClose:function(){},start:function(){var a=this;if(a.model.readData("animationRequested")&&a.model.getShowNextTime()===true){a.model.storeData("currentSlideIndex",0);a.view.showFeature(0);a.view.setActiveLabel(0);a.startSlideShow();a.show()}else{a.onClosed()}},changeFeature:function(){this.lastLoop=false;this.startSlideShow()},clearFeatureChangeTimer:function(){var a=this;if(Sys.isDefined(a.featureChangeTimer)){clearTimeout(a.featureChangeTimer)}},startSlideShow:function(){var b=this,a;b.clearFeatureChangeTimer();a=b.checkForNextSlide();b.featureChangeTimer=setTimeout(function(){if(a!==null){b.view.showFeature(a);b.view.setActiveLabel(a);b.model.storeData("currentSlideIndex",a);b.startSlideShow()}else{if(!b.lastLoop){b.lastLoop=true;b.view.showFeature(0);b.view.setActiveLabel(0);b.model.storeData("currentSlideIndex",0);b.startSlideShow()}else{b.close()}}},b.FEATURE_DURATION)},show:function(){var a=this;a.view.show();a.fireEvent("request:disableBasicGamePanel",a.MODULE_NAME);a.fireEvent("request:spinButton.hide",a.MODULE_NAME);a.fireEvent("request:maxBetButton.hide");a.fireEvent("request:autoplayButton.hide");a.fireEvent("request:betSelectors.hide");a.fireEvent("request:coinsField.hide");a.fireEvent("request:keypadBackground.hide");a.fireEvent("request:betlineIndicators.hide");a.fireEvent("request:logo.hide");a.fireEvent("notify:featureSplash.showing");a.toggleReelsLayerVisibility(false)},checkForNextSlide:function(){var b=this,a=b.model.readData("currentSlideIndex")+1;if(a<b.TOTAL_NUMBER_OF_FEATURES){return a}return null},toggleReelsLayerVisibility:function(b){var a=Game.stage.view.animationManager.getLayer("reel");a.visible=b},close:function(){var a=this;a.view.close();a.clearFeatureChangeTimer();if(Sys.isDefined(this.autoCloseTimeOut)){clearTimeout(this.autoCloseTimeOut)}},onClosed:function(){var a=this;a.stopListeningToUserInput();a.fireEvent("request:enableBasicGamePanel",a.MODULE_NAME);a.fireEvent("request:spinButton.show",a.MODULE_NAME);a.fireEvent("request:maxBetButton.show");a.fireEvent("request:autoplayButton.show");a.fireEvent("request:betSelectors.show");a.fireEvent("request:coinsField.show");a.fireEvent("request:keypadBackground.show");a.fireEvent("request:betlineIndicators.show");a.fireEvent("notify:featureSplash.closed");a.fireEvent("request:logo.show");a.toggleReelsLayerVisibility(true)},onCheckboxClicked:function(){var a=this,b=a.model.getShowNextTime();a.model.setShowNextTime(!b);a.view.updateCheckBox();a.fireEvent("request:settingsManager.storeData","showFeatureSplash",!b,true)}};Warlords.FeatureSplashController=Sys.extend(Core.Controller,Warlords.FeatureSplashController,"Warlords.FeatureSplashController");Sys.ns("Warlords");Warlords.FeatureSplashModel={constructor:function(){Warlords.FeatureSplashModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(b){var a=this;if(b.gamestate.current==="basic"&&b.clientaction==="init"&&b.restore===false){a.storeData("animationRequested",true)}else{a.storeData("animationRequested",false)}},setupData:function(){var a=this,b=(Services.localStorageManager.hasData("showFeatureSplash")&&Services.localStorageManager.readData("showFeatureSplash")==="true");a.setShowNextTime(b);a.setAutoClose(true)},setAutoClose:function(a){this.storeData("autoClose",a)},getAutoClose:function(){return this.readData("autoClose")},setShowNextTime:function(a){this.storeData("showNextTime",a)},getShowNextTime:function(){return this.readData("showNextTime")}};Warlords.FeatureSplashModel=Sys.extend(Core.Model,Warlords.FeatureSplashModel,"Warlords.FeatureSplashModel");Sys.ns("Warlords");Warlords.FeatureSplashView={LOGO:"featureLogo",VIGNETTE:"featureVignette",BACKGROUND_IMAGE:"featureSplashScreenBG",TOTAL_NUMBER_OF_FEATURES:6,SYMBOL_WIDTH:200,SYMBOL_HEIGHT:188,FEATURE_CENTER:{x:640,y:320},REELS_SCALE:0.6,FREESPIN_SCALE:1.2,NON_LATIN_LANGUAGE:["bg","cn","cs","el","et","hr","pl","ro","ru"],constructor:function(a){Warlords.FeatureSplashView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var r=this,m=Environment.getStageResolution(),g=new PIXI.Point(0,0),n;r.REELS_ORIGIN={x:r.FEATURE_CENTER.x-r.SYMBOL_WIDTH*2.5*r.REELS_SCALE,y:r.FEATURE_CENTER.y-r.SYMBOL_HEIGHT*1.5*r.REELS_SCALE};r.currentIndex=0;r.rootContainer=new PIXI.Container();r.rootContainer.name="FeatureSplash";this.activeTextStyle=Game.TextStyles.ACTIVE_TEXT_STYLE;this.inactiveTextStyle=Game.TextStyles.INACTIVE_TEXT_STYLE;var k=Game.PIXIFactory.createAndAddSprite(r.VIGNETTE,r.rootContainer);k.scale.x=2;k.scale.y=2;var d=Game.PIXIFactory.createAndAddSprite(r.LOGO,r.rootContainer);d.x=m.width/2-d.width/2;d.y=5;r.continueButton=new Interface.utils.PIXIButton("continueButtonUp","continueButtonDown","continueButtonOver","continueButtonDisabled");r.continueButton.id="featureSplashView.ContinueButton";r.continueButton.setLabel(Services.languageManager.getText(Language.Keys.continue_uc));r.continueButton.setLabelUpStyle(Game.TextStyles.CONTINUE_BUTTON_UP);r.continueButton.setLabelDownStyle(Game.TextStyles.CONTINUE_BUTTON_DOWN);r.continueButton.setLabelOverStyle(Game.TextStyles.CONTINUE_BUTTON_OVER);r.continueButton.setLabelDisabledStyle(Game.TextStyles.CONTINUE_BUTTON_DISABLED);r.continueButton.clickCallback=r.callbackContinueClick.bind(r);var h=[new PIXI.Point(9,9),new PIXI.Point(163,9),new PIXI.Point(168,13),new PIXI.Point(170,18),new PIXI.Point(170,49),new PIXI.Point(163,56),new PIXI.Point(9,56),new PIXI.Point(2,49),new PIXI.Point(2,18),new PIXI.Point(4,13)];r.continueButton.setLabelMaxWidth(150);r.continueButton.setCustomHitArea(new PIXI.Polygon(h));r.showAgainCheckbox=new Interface.utils.PIXICheckBox("checkboxUpInactive","checkboxOverActive","checkboxOverInactive","checkboxUpInactive","checkboxUpActive","checkboxOverInactive","checkboxOverActive","checkboxUpActive");r.showAgainCheckbox.check=Game.PIXIFactory.createAndAddSprite("featureCheckboxCheck",r.showAgainCheckbox,g,g);r.showAgainCheckbox.id="featureSplashView.Checkbox";r.showAgainCheckbox.setLabel(Services.languageManager.getText(Language.Keys.dontShowNextTime));r.showAgainCheckbox.setLabelStyle(Game.TextStyles.SKIP_CHECK_BOX);r.showAgainCheckbox.setLabelPosition(new PIXI.Point(35,-2));r.showAgainCheckbox.clickCallback=r.callbackCheckboxClick.bind(r);r.showAgainCheckbox.position=new PIXI.Point(745,618);r.continueBox=new Interface.utils.PIXIHBox();r.continueButton.id="continueBox";r.continueBox.setHorizontalAlign("center");r.continueBox.setVerticalAlign("middle");r.continueBox.setGap(20);r.continueBox.y=630-r.continueButton.height*0.5;r.continueBox.x=(m.width-r.continueButton.width)*0.5;r.continueBox.addChild(r.continueButton);r.features=[new Feature.RandomWild(r.FEATURE_CENTER,r.REELS_SCALE,4000),new Feature.Respin(r.FEATURE_CENTER,r.REELS_SCALE,2750),new Feature.FinalChance(r.FEATURE_CENTER,r.REELS_SCALE,4000),new Feature.BarbarianFreespin(r.FEATURE_CENTER,r.FREESPIN_SCALE,4000),new Feature.PriestessFreespin(r.FEATURE_CENTER,r.FREESPIN_SCALE,4000),new Feature.SamuraiFreespin(r.FEATURE_CENTER,r.FREESPIN_SCALE,4000)];r.featureLabels=r.setupLabels();var p=Services.languageManager.getText(Language.Keys.winUpTo);var l=Services.storage.readData("WIN_UP_TO");p=p.replace("{0}",l);r.maxWinText=new Interface.utils.PIXILabel(p,Game.TextStyles.WIN_UP_TO_TEXT);r.maxWinText.position=new PIXI.Point(640-r.maxWinText.width/2,560);r.labelBox=new Interface.utils.PIXIHBox();r.labelBox.id="featureLabelBox";r.labelBox.setHorizontalAlign("center");r.labelBox.setVerticalAlign("bottom");r.labelBox.setExplicitWidth(m.width);r.labelBox.y=520;var t=document.documentElement.lang;var j=28;if(Platform.isSafariBrowser&&r.NON_LATIN_LANGUAGE.contains(t)){j=20}r.labelBox.setGap(j);r.reelContainer=new PIXI.Container();Game.PIXIFactory.createAndAddSprite("featureReelsBG",r.reelContainer);r.reelContainer.scale=new PIXI.Point(r.REELS_SCALE,r.REELS_SCALE);r.reelContainer.position=new PIXI.Point(r.REELS_ORIGIN.x,r.REELS_ORIGIN.y);r.reelContainer.alpha=0.8;r.reelContainer.visible=false;for(n=0;n<r.featureLabels.length;++n){r.featureLabels[n].id=n;r.featureLabels[n].clickCallback=r.labelClick.bind(r);r.labelBox.addChild(r.featureLabels[n])}r.rootContainer.addChild(r.reelContainer);for(n=0;n<r.features.length;++n){r.features[n].addTo(r.rootContainer)}r.fadeScreenContainer=new PIXI.Container();var a=new PIXI.Graphics();a.beginFill(0,1);a.drawRect(0,0,1280,720);a.endFill();r.fadeScreenContainer.addChild(a);r.fadeScreenContainer.alpha=0;r.fadeInScreenAnimation=Warlords.Utils.createFadeInAnimation(r.fadeScreenContainer,500,0,r.startGame.bind(r));r.fadeOutScreenAnimation=Warlords.Utils.createFadeOutAnimation(r.fadeScreenContainer,500);r.rootContainer.addChild(r.labelBox);r.rootContainer.addChild(r.continueBox);r.rootContainer.addChild(r.maxWinText);r.rootContainer.addChild(r.showAgainCheckbox);r.labelBox.updateTransform();if(r.labelBox.width>m.width){var q=(m.width-20)/r.labelBox.width;for(n=0;n<r.featureLabels.length;++n){var f=r.featureLabels[n];var c=f.labelText.style.font.split(" ");var b=c[0].split("px")[0];b=parseInt(b,10);b=Math.round(b*q);var e=b+"px "+c[1];var o=Sys.clone(f.labelText.style);o.font=e;f.labelText.style=o}this.activeTextStyle=this.updateTextStyleWithScale(q,this.activeTextStyle);this.inactiveTextStyle=this.updateTextStyleWithScale(q,this.inactiveTextStyle);r.labelBox.updateLayout()}var s=Game.stage.view.animationManager.getLayer("splashScreens");s.addChild(r.rootContainer);s.addChild(r.fadeScreenContainer);r.rootContainer.visible=false;r.animationIntervals=[];r.animationTimeouts=[]},setActiveLabel:function(a){var c=this;for(var b=0;b<c.featureLabels.length;b++){c.featureLabels[b].setEnabled(true);c.featureLabels[b].setLabelStyle(this.inactiveTextStyle)}c.featureLabels[a].setEnabled(false);c.featureLabels[a].setLabelStyle(this.activeTextStyle)},updateTextStyleWithScale:function(f,a){var d=a.font.split(" ");var c=d[0].split("px")[0];c=parseInt(c,10);c=Math.round(c*f);var e=c+"px "+d[1];var b=Sys.clone(a);b.font=e;return b},showFeature:function(a){var b=this;b.showOrHideReels(a);if(b.features.length>a){b.resetFeatures();if(a<4){b.features[a].play();b.currentIndex=a}else{Warlords.Utils.show(b.features[a].container);b.features[a].play();b.currentIndex=a}}},showOrHideReels:function(a){if(a<3){Warlords.Utils.show(this.reelContainer)}else{Warlords.Utils.hide(this.reelContainer)}},resetFeatures:function(){var b=this;for(var a=0;a<b.features.length;++a){b.features[a].reset()}},setupLabels:function(){return[new Interface.utils.PIXILabel(Services.languageManager.getText(Language.Keys.randomWild),this.activeTextStyle),new Interface.utils.PIXILabel(Services.languageManager.getText(Language.Keys.respin),this.inactiveTextStyle),new Interface.utils.PIXILabel(Services.languageManager.getText(Language.Keys.finalChance),this.inactiveTextStyle),new Interface.utils.PIXILabel(Services.languageManager.getText(Language.Keys.barbarianFreespin),this.inactiveTextStyle),new Interface.utils.PIXILabel(Services.languageManager.getText(Language.Keys.priestessFreespin),this.inactiveTextStyle),new Interface.utils.PIXILabel(Services.languageManager.getText(Language.Keys.samuraiFreespin),this.inactiveTextStyle)]},labelClick:function(b){var a=this,c=b.target.id;a.showFeature(c);a.setActiveLabel(c);a.model.storeData("currentSlideIndex",c);a.fireEvent("view:changeFeature")},callbackCheckboxClick:function(c,a){var b=this;b.fireEvent("view:checkboxClicked")},updateCheckBox:function(){var a=this;a.showAgainCheckbox.selected=!a.model.getShowNextTime()},callbackContinueClick:function(c,a){var b=this;b.fireEvent("view:close")},show:function(){var a=this;a.updateCheckBox();a.rootContainer.visible=true},close:function(){this.fadeInScreenAnimation.play()},startGame:function(){var a=this;a.rootContainer.visible=false;a.resetFeatures();a.fireEvent("view:closed");a.fadeOutScreenAnimation.play()}};Warlords.FeatureSplashView=Sys.extend(Core.View,Warlords.FeatureSplashView,"Warlords.FeatureSplashView");Sys.ns("Warlords");Warlords.SpinButtonController={constructor:function(){Warlords.SpinButtonController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Warlords.SpinButtonController.superclass.setupEvents.apply(this,arguments);a.on({"notify:stateHandler.enteringScatterBattleAnimationState":a.disable,"notify:stateHandler.leavingScatterBattleAnimationState":a.enable,"notify:stateHandler.enteringFinalChanceAnimationState":a.disable,"notify:stateHandler.leavingFinalChanceAnimationState":a.enable})},onClick:function(){var b=this,a=b.model;if(a.hasProperty("hidden")){if(b.view.canInteractWhileHidden()){b.fireEvent("notify:spinButton.clickedWhileHidden")}}else{b.fireEvent("request:audioPlayer.play",{name:"spinButtonClick"});b.fireEvent("notify:spinButton.clicked",{skip:a.readData("noStopOnSpin")});if(a.readData("inIdleState")){b.fireEvent(b.ROUND_START_EVENT);if(Sys.isFunc(b.view.startSpinButtonAnimation)){b.view.startSpinButtonAnimation()}}}}};Warlords.SpinButtonController=Sys.extend(Interface.Slots.SpinButtonController,Warlords.SpinButtonController,"Warlords.SpinButtonController");Sys.ns("Warlords");Warlords.SpinButtonDesktopView={constructor:function(){Warlords.SpinButtonDesktopView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var d=this,b=Environment.getStageResolution(),f=Game.stage.view.animationManager.getLayer("spinButtonAnimation");layer=Game.stage.view.animationManager.getLayer("userInterface");var c=new PIXI.Container();var e=Game.PIXIFactory.createAndAddSpineAnimation("spinButtonClickAnimation",c);e.position.x=Warlords.Positions.SPIN_BUTTON.position.x-200;e.position.y=Warlords.Positions.SPIN_BUTTON.position.y-275;f.addChild(c);d.spinButtonClickAnimation=e;d.animationContainer=c;d.spinButton=new Interface.utils.PIXIButton("spinButtonIdle","spinButtonDown","spinButtonOver","spinButtonDisabled");d.spinButton.SOUND_CLICK=undefined;d.spinButton.id=d.MODULE_NAME+".spinButton";d.spinButton.moveToPosition(Warlords.Positions.SPIN_BUTTON);d.spinButton.clickCallback=d.callbackMouseClick.bind(d);var a=d.spinButton.width/2;d.spinButton.setCustomHitArea(new PIXI.Circle(a,d.spinButton.height/2,a));layer.addChild(d.spinButton)},startSpinButtonAnimation:function(){var a=this,d=Warlords.Utils.randomInt(-25,25),c=d*Math.PI/180;Game.PIXIUtils.resetSpineAnimation(a.spinButtonClickAnimation);a.spinButtonClickAnimation.visible=true;var b=a.spinButtonClickAnimation.state.setAnimationByName(0,"animation",false);b.onComplete=function(){a.spinButtonClickAnimation.visible=false}},callbackMouseClick:function(b){var a=this;a.fireEvent("view:clicked")},hide:function(){var a=this;if(a.model.hasProperty("hidden")||!a.model.hasProperty("visibleDuringRound")){a.spinButton.visible=false;a.fireEvent("view:hidden")}},hidden:function(){return this.spinButton.visible},show:function(){var a=this;a.spinButton.visible=true;this.fireEvent("view:shown")},enable:function(){this.spinButton.setEnabled(true)},disable:function(){var a=this;a.spinButton.setEnabled(false)},press:function(){var a=this;a.fireEvent("view:playSound",a.SOUND_DOWN);a.fireEvent("view:notify","notify:spinButton.down");if(a.buttonItem){a.buttonItem.prop.image=a.IMAGE_DOWN}},release:function(){if(this.buttonItem){this.buttonItem.prop.image=this.isHighlighted?this.IMAGE_OVER:this.IMAGE_UP}},enableSpinningAnimations:function(){},disableSpinningAnimations:function(){},userInputStart:function(a){},userInputMove:function(a){},userInputHover:function(a){},userInputEnd:function(a){}};Warlords.SpinButtonDesktopView=Sys.extend(Interface.Slots.SpinButtonDesktopView,Warlords.SpinButtonDesktopView,"Warlords.SpinButtonDesktopView");Sys.ns("Warlords");Warlords.MaxBetButton={constructor:function(){Warlords.MaxBetButton.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation","trigger","properties"]}};Warlords.MaxBetButton=Sys.extend(Interface.Slots.MaxBetButton,Warlords.MaxBetButton,"Warlords.MaxBetButton");Sys.ns("Warlords");Warlords.MaxBetButtonDesktopView={constructor:function(){Warlords.MaxBetButtonDesktopView.superclass.constructor.apply(this,arguments)},setUpKeypadButton:function(){var b=this,a=Game.stage.view.animationManager.getLayer("userInterface");b.keypadButton=new Interface.utils.PIXIButton("maxBetButtonUp","maxBetButtonDown","maxBetButtonOver","maxBetButtonDisabled");b.keypadButton.id="maxBetButton";b.keypadButton.setLabel(Services.languageManager.getText(Language.Keys.btn_maxbet));b.keypadButton.setLabelUpStyle(Game.TextStyles.MAX_BET_BUTTON_UP);b.keypadButton.setLabelDownStyle(Game.TextStyles.MAX_BET_BUTTON_DOWN);b.keypadButton.setLabelOverStyle(Game.TextStyles.MAX_BET_BUTTON_OVER);b.keypadButton.setLabelDisabledStyle(Game.TextStyles.MAX_BET_BUTTON_DISABLED);b.keypadButton.setLabelPosition(Warlords.Positions.MAX_BET_BUTTON_LABEL.position);b.keypadButton.setLabelAnchorPoint(Warlords.Positions.MAX_BET_BUTTON_LABEL.anchorPoint);b.keypadButton.moveToPosition(Warlords.Positions.MAX_BET_BUTTON);b.keypadButton.clickCallback=b.onButtonClick.bind(b);b.keypadButton.setLabelMaxWidth(115);a.addChild(b.keypadButton);var c=[new PIXI.Point(31,0),new PIXI.Point(163,0),new PIXI.Point(167,2),new PIXI.Point(176,11),new PIXI.Point(182,25),new PIXI.Point(181,46),new PIXI.Point(175,57),new PIXI.Point(166,65),new PIXI.Point(0,65),new PIXI.Point(2,61),new PIXI.Point(11,59),new PIXI.Point(20,54),new PIXI.Point(28,46),new PIXI.Point(34,35),new PIXI.Point(36,28),new PIXI.Point(36,12)];b.keypadButton.setCustomHitArea(new PIXI.Polygon(c))},updateKeypadButtonEnabledState:function(){var a=this.model.hasProperty("keypadButtonDisabled")===false;this.keypadButton.setEnabled(a)},updateKeypadButtonVisibility:function(){var a=this.model.hasProperty("keypadButtonHidden")===false;this.keypadButton.visible=a},enable:function(a){this.model.removeProperty("keypadButtonDisabled",a);this.updateKeypadButtonEnabledState()},disable:function(a){this.model.addProperty("keypadButtonDisabled",a);this.updateKeypadButtonEnabledState()},show:function(b){var a=this;a.model.removeProperty("keypadButtonHidden",b);a.updateKeypadButtonVisibility()},hide:function(b){var a=this;a.model.addProperty("keypadButtonHidden",b);a.updateKeypadButtonVisibility()}};Warlords.MaxBetButtonDesktopView=Sys.extend(Interface.Slots.MaxBetButtonBaseView,Warlords.MaxBetButtonDesktopView,"Warlords.MaxBetButtonDesktopView");Sys.ns("Warlords");Warlords.MaxBetButtonController={constructor:function(){Warlords.MaxBetButtonController.superclass.constructor.apply(this,arguments)},setupEvents:function(){Warlords.MaxBetButtonController.superclass.setupEvents.apply(this,arguments);var a=this;a.on({"request:maxBetButton.hide":a.view.hide.bind(a.view),"request:maxBetButton.show":a.view.show.bind(a.view)})}};Warlords.MaxBetButtonController=Sys.extend(Interface.Slots.MaxBetButtonController,Warlords.MaxBetButtonController,"Warlords.MaxBetButtonController");Sys.ns("Warlords");Warlords.AutoplaySettings={constructor:function(){Warlords.AutoplaySettings.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["userInput","animation","properties"]}};Warlords.AutoplaySettings=Sys.extend(Interface.AutoplaySettings,Warlords.AutoplaySettings,"Warlords.AutoplaySettings");Sys.ns("Warlords");Warlords.AutoplaySettingsView={ADVANCED_CONFIG_CONTROLS:[{id:"stopAutoplayOnAnyWin",label:Language.Keys.autoplay_setting_onAnyWin,type:"checkbox"},{id:"stopAutoplayIfRespinWon",label:Language.Keys.ifReSpinsIsStarted,type:"checkbox"},{id:"stopAutoplayIfFreeSpin1Won",label:Language.Keys.ifBarbarianFreeSpinsIsWon,type:"checkbox"},{id:"stopAutoplayIfFreeSpin2Won",label:Language.Keys.ifPriestessFreeSpinsIsWon,type:"checkbox"},{id:"stopAutoplayIfFreeSpin3Won",label:Language.Keys.ifSamuraiFreeSpinsIsWon,type:"checkbox"},{id:"stopAutoplayIfAutoplayingBonusGameWon",label:Language.Keys.autoplay_setting_ifFBonusIsStarted,type:"checkbox",disabled:true},{id:"stopAutoplayIfWinExceeds",label:Language.Keys.autoplay_setting_ifWinExeeds,type:"checkbox",withInput:{label:undefined}},{id:"stopAutoplayIfBalanceIncreasedBy",label:Language.Keys.autoplay_setting_ifCashIncreasesBy,type:"checkbox",withInput:{label:undefined}},{id:"stopAutoplayIfBalanceDecreasedBy",label:Language.Keys.autoplay_setting_ifCashDecreasesBy,type:"checkbox",withInput:{label:undefined}}],constructor:function(){Warlords.AutoplaySettingsView.superclass.constructor.apply(this,arguments)},setUpKeypadButton:function(){var b=this,a=Game.stage.view.animationManager.getLayer("userInterface");b.keypadButton=new Interface.utils.PIXIButton("autoPlayButtonUp","autoPlayButtonDown","autoPlayButtonOver","autoPlayButtonDisabled");b.keypadButton.id="autoPlayButton";b.keypadButton.setLabel(Services.languageManager.getText(Language.Keys.btn_autoplay));b.keypadButton.setLabelUpStyle(Game.TextStyles.AUTOPLAY_BUTTON_UP);b.keypadButton.setLabelDownStyle(Game.TextStyles.AUTOPLAY_BUTTON_DOWN);b.keypadButton.setLabelOverStyle(Game.TextStyles.AUTOPLAY_BUTTON_OVER);b.keypadButton.setLabelDisabledStyle(Game.TextStyles.AUTOPLAY_BUTTON_DISABLED);b.keypadButton.setLabelPosition(Warlords.Positions.AUTOPLAY_BUTTON_LABEL.position);b.keypadButton.setLabelAnchorPoint(Warlords.Positions.AUTOPLAY_BUTTON_LABEL.anchorPoint);b.keypadButton.moveToPosition(Warlords.Positions.AUTOPLAY_BUTTON);b.keypadButton.clickCallback=b.onButtonClick.bind(b);b.keypadButton.setLabelMaxWidth(115);a.addChild(b.keypadButton);var c=[new PIXI.Point(19,0),new PIXI.Point(151,0),new PIXI.Point(146,12),new PIXI.Point(146,28),new PIXI.Point(148,35),new PIXI.Point(154,46),new PIXI.Point(162,54),new PIXI.Point(171,59),new PIXI.Point(180,61),new PIXI.Point(182,65),new PIXI.Point(16,65),new PIXI.Point(7,57),new PIXI.Point(1,46),new PIXI.Point(0,25),new PIXI.Point(6,11),new PIXI.Point(15,2)];b.keypadButton.setCustomHitArea(new PIXI.Polygon(c))},updateKeypadButtonEnabledState:function(){var a=this.model.hasProperty("keypadButtonDisabled")===false;this.keypadButton.setEnabled(a)},updateKeypadButtonVisibility:function(){var a=this.model.hasProperty("keypadButtonHidden")===false;this.keypadButton.visible=a},showKeypadButton:function(b){var a=this;a.model.removeProperty("keypadButtonHidden",b);a.updateKeypadButtonVisibility()},hideKeypadButton:function(b){var a=this;a.model.addProperty("keypadButtonHidden",b);a.updateKeypadButtonVisibility()},enableKeypadButton:function(c){var b=this,a;if(Sys.isDefined(b.keypadButton)){b.enable(c)}else{a=b.keypadPendingDisable.indexOf(c);if(a>=0){b.keypadPendingDisable.splice(a,1)}}},disableKeypadButton:function(b){var a=this;if(Sys.isDefined(a.keypadButton)){a.disable(b)}else{if(!a.keypadPendingDisable.contains(b)){a.keypadPendingDisable.push(b)}}},enable:function(a){this.model.removeProperty("keypadButtonDisabled",a);this.updateKeypadButtonEnabledState()},disable:function(a){this.model.addProperty("keypadButtonDisabled",a);this.updateKeypadButtonEnabledState()}};Warlords.AutoplaySettingsView=Sys.extend(Interface.AutoplaySettingsView,Warlords.AutoplaySettingsView,"Warlords.AutoplaySettingsView");Sys.ns("Warlords");Warlords.AutoplaySettingsController={constructor:function(){Warlords.AutoplaySettingsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){Warlords.AutoplaySettingsController.superclass.setupEvents.apply(this,arguments);var a=this;a.on({"request:autoplayButton.hide":a.view.hideKeypadButton.bind(a.view),"request:autoplayButton.show":a.view.showKeypadButton.bind(a.view)})}};Warlords.AutoplaySettingsController=Sys.extend(Interface.AutoplaySettingsController,Warlords.AutoplaySettingsController,"Warlords.AutoplaySettingsController");Sys.ns("Warlords");Warlords.CashFieldController={constructor:function(){Warlords.CashFieldController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringIdleState":a.updateAllAndStartToggling.bind(a,"idle"),"notify:stateHandler.enteringSpinningState":a.onSpinningState,"notify:stateHandler.enteringBeforeLoaderCloseState":a.updateAllAndStartToggling.bind(a,"beforeLoaderClose"),"notify:settingsWindow.open":a.onSettingsWindowOpened,"notify:settingsWindow.closed":a.startToggling,"notify:serverManager.serverErrorReceived":a.onServerErrorReceived,"notify:moneyManager.betChanged":a.onBetChanged,"notify:moneyManager.balanceChanged":a.onBalanceChanged,"request:cashField.showWin":a.updateCreditAndWin.bind(a,"winPresentation")})}};Warlords.CashFieldController=Sys.extend(Interface.CashFieldController,Warlords.CashFieldController,"Warlords.CashFieldController");Sys.ns("Warlords");Warlords.CoinsField={constructor:function(){Warlords.CoinsField.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["serverResponse","orientation","userInput"],desktop:["serverResponse","animation","userInput"]}}};Warlords.CoinsField=Sys.extend(Interface.Slots.CoinsField,Warlords.CoinsField,"Warlords.CoinsField");Sys.ns("Warlords");Warlords.CoinsFieldBaseView={constructor:function(){Warlords.CoinsFieldBaseView.superclass.constructor.apply(this,arguments)},showWinOrProgressiveWin:function(){var a=this;if(a.model.readData("showProgressiveWinDisplay")){a.showProgressiveWin()}else{a.showWin()}},countUpMultiplier:function(){},countUpFreespinsTotal:function(){},abortActiveCountUp:function(){},hideCoinsField:function(){},showCoinsField:function(){}};Warlords.CoinsFieldBaseView=Sys.extend(Interface.Slots.CoinsFieldBaseView,Warlords.CoinsFieldBaseView,"Warlords.CoinsFieldBaseView");Sys.ns("Warlords");Warlords.CoinsFieldDesktopView={constructor:function(){Warlords.CoinsFieldDesktopView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var d=this,c=Game.stage.view.animationManager.getLayer("userInterface"),e=new PIXI.Container(),b,a;e.position.x=0;e.position.y=0;e.id=d.MODULE_NAME+".rootContainer";b=new PIXI.Container();b.x=0;b.y=0;b.visible=true;e.addChild(b);a=new PIXI.Container();a.x=0;a.y=0;a.visible=false;e.addChild(a);d.basicStateContainer=b;d.totalWinFieldContainer=a;d.rootContainer=e;d.setupTextFields();c.addChild(e);d.onGameModeChanged("BASIC")},setupTextFields:function(){var b=this;b.betLableTextFieldBasic=Game.PIXIFactory.createAndAddText(Services.languageManager.getText(Language.Keys.machinetext_bet),Game.TextStyles.GENERIC_LABEL_STYLE,b.basicStateContainer,Warlords.Positions.BASIC_BET_LABEL.position,Warlords.Positions.BASIC_BET_LABEL.anchorPoint);b.betValueTextFieldBasic=Game.PIXIFactory.createAndAddText(b.model.getBetText(),Game.TextStyles.GENERIC_VALUE_STYLE,b.basicStateContainer,Warlords.Positions.BASIC_BET_VALUE.position,Warlords.Positions.BASIC_BET_VALUE.anchorPoint);b.balanceLableTextFieldBasic=Game.PIXIFactory.createAndAddText(Services.languageManager.getText(Language.Keys.machinetext_coins),Game.TextStyles.GENERIC_LABEL_STYLE,b.basicStateContainer,Warlords.Positions.BASIC_BALANCE_LABEL.position,Warlords.Positions.BASIC_BALANCE_LABEL.anchorPoint);b.coinsValueTextFieldBasic=Game.PIXIFactory.createAndAddText(b.model.getBalanceText(),Game.TextStyles.GENERIC_VALUE_STYLE,b.basicStateContainer,Warlords.Positions.BASIC_BALANCE_VALUE.position,Warlords.Positions.BASIC_BALANCE_VALUE.anchorPoint);var a=Services.languageManager.getText(Language.Keys.totalWinColonVar_uc,[0]);b.totalWinLabelTextField=Game.PIXIFactory.createAndAddText(a,Game.TextStyles.TOTAL_WIN_LABEL,b.totalWinFieldContainer,Warlords.Positions.FS_KEYPAD_TOTAL_WIN.position,Warlords.Positions.FS_KEYPAD_TOTAL_WIN.anchorPoint)},updateBetValueField:function(){if(this.betValueTextFieldBasic){var a=this.model.getBetText();this.betValueTextFieldBasic.text=a}},updateCoinsValueField:function(){if(this.coinsValueTextFieldBasic){var a=this.model.getBalanceText();this.coinsValueTextFieldBasic.text=a}},updateTotalWinValueField:function(){if(this.totalWinLabelTextField){var a=Services.languageManager.getText(Language.Keys.totalWinColonVar_uc,[this.model.getTotalWinText()]);this.totalWinLabelTextField.text=a}},updateFreespinsLeftField:function(){},showBalanceAndBet:function(){this.updateBetValueField();this.updateCoinsValueField()},showWin:function(){},showProgressiveWin:function(){this.updateTotalWinValueField()},countUpProgressiveWin:function(a){this.updateTotalWinValueField();this.fireEvent("view:countUpComplete")},showFreeSpinsLeft:function(){this.updateFreespinsLeftField()},showAdditionalFreeSpinsWon:function(){},showWinUpTo:function(){},show:function(){},setupView:function(){},countUpFreespinsTotal:function(){this.fireEvent("view:freespinsCountUpAnimationComplete")},countUpMultiplier:function(){this.fireEvent("view:multiplierCountUpAnimationComplete")},hideCoinsField:function(){this.basicStateContainer.visible=false},showCoinsField:function(){this.basicStateContainer.visible=true},onGameModeChanged:function(b){var a=this;if(b==="BASIC"){a.totalWinFieldContainer.visible=false;a.basicStateContainer.alpha=1}else{a.totalWinFieldContainer.visible=true;a.basicStateContainer.alpha=0.5}}};Warlords.CoinsFieldDesktopView=Sys.extend(Warlords.CoinsFieldBaseView,Warlords.CoinsFieldDesktopView,"Warlords.CoinsFieldDesktopView");Sys.ns("Warlords");Warlords.CoinsFieldMobileView={BASE_CSS:"interface-coinsField_base interface-coinsField_mobile",PORTRAIT_CSS:"interface-coinsField_portrait_mobile",LANDSCAPE_CSS:"interface-coinsField_landscape_mobile",MULTIPLIER_LANGUAGE_KEY:Language.Keys.multiplierColonVar,FS_ANIMATION_TIMES:{START:0,COUNT_UP_STEP:100,DISPLAY_VALUE:1000},MULTI_ANIMATION_TIMES:{START:0,COUNT_UP_STEP:150,DISPLAY_VALUE:1000},constructor:function(){Warlords.CoinsFieldMobileView.superclass.constructor.apply(this,arguments)},setupView:function(){Warlords.CoinsFieldMobileView.superclass.setupView.apply(this,arguments);var c=this,d="<span class='number'></span>",e=7,b="margin-right:2%;",a="margin-left:2%;";c.fsTwoMultiplierAndFS=c.container.add(new Sys.Element({id:"coinsField_fsTwoMultiplierAndFS",tag:"div",cls:c.SUB_COMPONENT_CSS,style:"visibility:hidden; z-index:"+(e++)+";"}));c.fsTwoMultiplier=c.fsTwoMultiplierAndFS.add(new Sys.Element({id:"coinsField_fsTwoMultiplier",tag:"span",innerHTML:Services.languageManager.getText(c.MULTIPLIER_LANGUAGE_KEY).replace("{0}",d),style:b}));c.fsTwoMultiplierNumberElement=c.fsTwoMultiplier.el.getElementsByTagName("span")[0]||document.createElement("span");c.fsTwoFreeSpinLeft=c.fsTwoMultiplierAndFS.add(new Sys.Element({id:"coinsField_fsTwoFreeSpinLeft",tag:"span",innerHTML:Services.languageManager.getText(Language.Keys.freeSpinsLeftColonVar).replace("{0}",d),style:a}));c.fsTwoFreeSpinsLeftNumberElement=c.fsTwoFreeSpinLeft.el.getElementsByTagName("span")[0]||document.createElement("span");c.freespinsCountUpAnimation=new Animation.Holder({target:c.model,prop:"freespinsLeftValue",onUpdate:c.updateFreespinsLeftValue.bind(c),onEnd:c.dispatchFreespinAnimationCompleteEvent.bind(c)});c.multiplierCountUpAnimation=new Animation.Holder({target:c.model,prop:"multiplierValue",onUpdate:c.updateMultiplierValue.bind(c),onEnd:c.dispatchMultiplierAnimationCompleteEvent.bind(c)});Game.stage.view.animationManager.addToAnimationLoop(c.freespinsCountUpAnimation);Game.stage.view.animationManager.addToAnimationLoop(c.multiplierCountUpAnimation)},showFreeSpinsLeft:function(){var b=this;var a=b.model.readData("winningScatter");if(a==="SYM14"){b.fsTwoFreeSpinsLeftNumberElement.textContent=b.model.getFreeSpinsLeftText();b.show(b.fsTwoMultiplierAndFS)}else{Warlords.CoinsFieldMobileView.superclass.showFreeSpinsLeft.apply(this,arguments)}},countUpFreespinsTotal:function(){var a=this;var e=a.model.getFreeSpinsLeftText();var d=a.model.getFreeSpinsTotalText();a.model.freespinsLeftValue=e;var c=(d-e)*a.FS_ANIMATION_TIMES.COUNT_UP_STEP;var b=c+a.FS_ANIMATION_TIMES.DISPLAY_VALUE;a.freespinsCountUpAnimation.restore();a.freespinsCountUpAnimation.animate([{time:a.FS_ANIMATION_TIMES.START,value:e},{time:c,value:d},{time:b,value:d}],true);a.show(a.freeSpinsLeft)},dispatchFreespinAnimationCompleteEvent:function(){this.fireEvent("view:freespinsCountUpAnimationComplete")},updateFreespinsLeftValue:function(){var a=this;var b=Math.floor(a.model.freespinsLeftValue);a.freeSpinsLeftNumberElement.textContent=b},countUpMultiplier:function(){var a=this;a.fsTwoFreeSpinsLeftNumberElement.textContent=a.model.getFreeSpinsLeftText();var e=a.model.readData("freeSpinsMultiplierFrom");var d=a.model.readData("freeSpinsMultiplierTo");a.model.multiplierValue=e;var c=(d-e)*a.MULTI_ANIMATION_TIMES.COUNT_UP_STEP;var b=c+a.MULTI_ANIMATION_TIMES.DISPLAY_VALUE;a.multiplierCountUpAnimation.restore();a.multiplierCountUpAnimation.animate([{time:a.MULTI_ANIMATION_TIMES.START,value:e},{time:c,value:d},{time:b,value:d}],true);a.show(a.fsTwoMultiplierAndFS)},updateMultiplierValue:function(){var a=this;var b=Math.floor(a.model.multiplierValue);a.fsTwoMultiplierNumberElement.textContent=b},showMultiplierValue:function(){var a=this;a.fsTwoFreeSpinsLeftNumberElement.textContent=a.model.getFreeSpinsLeftText();a.fsTwoMultiplierNumberElement.textContent=a.model.readData("freeSpinsMultiplierTo");a.show(a.fsTwoMultiplierAndFS)},dispatchMultiplierAnimationCompleteEvent:function(){this.fireEvent("view:multiplierCountUpAnimationComplete")},abortActiveCountUp:function(){var a=this;if(a.multiplierCountUpAnimation.running){a.multiplierCountUpAnimation.stop();a.showMultiplierValue();a.dispatchMultiplierAnimationCompleteEvent()}if(a.freespinsCountUpAnimation.running){a.freespinsCountUpAnimation.stop();a.showFreeSpinsLeft();a.dispatchFreespinAnimationCompleteEvent()}},onEnteringFreeSpinIntroState:function(){var c=this;var a=c.model.readData("hasRunFreespin");if(a){var b=c.model.readData("winningScatter");if(b==="SYM14"){c.fsTwoFreeSpinsLeftNumberElement.textContent=c.model.getFreeSpinsLeftText();c.fsTwoMultiplierNumberElement.textContent=c.model.readData("freeSpinsMultiplierTo")}}}};Warlords.CoinsFieldMobileView=Sys.extend(Warlords.CoinsFieldBaseView,Warlords.CoinsFieldMobileView,"Warlords.CoinsFieldMobileView");Sys.ns("Warlords");Warlords.CoinsFieldController={TOGGLE_SEQUENCE:[{action:"showWinOrProgressiveWin",displayDuration:3000},{action:"showBalanceAndBet",displayDuration:3000},{action:"showWinUpTo",displayDuration:3000},{action:"showBalanceAndBet",displayDuration:3000}],constructor:function(){Warlords.CoinsFieldController.superclass.constructor.apply(this,arguments)},setupEvents:function(){Warlords.CoinsFieldController.superclass.setupEvents.apply(this,arguments);var a=this;a.on({"notify:responseParser.freeSpinInitResponseParsed":a.onFreespinInitResponseParsed,"request:coinsField.showWin":a.onShowWinRequest,"request:coinsField.countUpFreespinsTotal":a.onCountUpFreespinsTotal,"request:coinsField.countUpMultiplier":a.onCountUpMultiplier,"request:coinsField.hide":a.view.hideCoinsField.bind(a.view),"request:coinsField.show":a.view.showCoinsField.bind(a.view),"view:freespinsCountUpAnimationComplete":a.onFreespinsCountUpAnimationComplete,"view:multiplierCountUpAnimationComplete":a.onMultiplierCountUpAnimationComplete})},onShowWinRequest:function(){this.showBalanceAndBet();Warlords.CoinsFieldController.superclass.onShowWinRequest.apply(this,arguments)},onUserInputEnd:function(){this.stopListeningToUserInput();this.view.abortActiveCountUp()},onFreespinInitResponseParsed:function(a){this.model.parseInitFreespinResponse(a)},onCountUpFreespinsTotal:function(){if(!Platform.isDesktopDevice){this.fireEvent("request:audioPlayer.play",{name:"multiplierAndFreespinsLeftCountUp"})}this.view.countUpFreespinsTotal();this.startListeningToUserInput()},onCountUpMultiplier:function(){if(!Platform.isDesktopDevice){this.fireEvent("request:audioPlayer.play",{name:"multiplierAndFreespinsLeftCountUp"})}this.view.countUpMultiplier();this.startListeningToUserInput()},onEnteringIdleState:function(){var a=this;var b=a.model.readData("showProgressiveWinDisplay");var c=a.model.readData("clientAction");if(b&&c!=="respin"){a.model.storeData("showProgressiveWinDisplay",false);a.model.setWinToTotalWin()}if(a.model.readData("hasPlayedInitialRound")){a.startToggling()}else{a.showBalanceAndBet()}},onEnteringSpinningState:function(){var b=this;var c=b.model.readData("clientAction");var a=b.model.readData("nextAction");if(a==="respin"){this.model.storeData("showProgressiveWinDisplay",true)}else{if(a==="spin"){this.model.storeData("showProgressiveWinDisplay",false)}}clearTimeout(b.toggleTimeout);b.model.storeData("hasPlayedInitialRound",true);b.model.storeData("win","");if(b.model.readData("showProgressiveWinDisplay")){b.showProgressiveWin()}else{b.showBalanceAndBet()}},onFreespinsCountUpAnimationComplete:function(){this.stopListeningToUserInput();this.fireEvent("notify:coinsField.countUpFreespinsTotalComplete")},onMultiplierCountUpAnimationComplete:function(){this.stopListeningToUserInput();this.fireEvent("notify:coinsField.countUpMultiplierComplete")}};Warlords.CoinsFieldController=Sys.extend(Interface.Slots.CoinsFieldController,Warlords.CoinsFieldController,"Warlords.CoinsFieldController");Sys.ns("Warlords");Warlords.CoinsFieldModel={MULTIPLIER_DEFAULT_VALUE:" ",WIN_UP_TO:"1 000 000",constructor:function(){Warlords.CoinsFieldModel.superclass.constructor.apply(this,arguments);this.freespinsLeftValue=0;this.multiplierValue=this.MULTIPLIER_DEFAULT_VALUE},setupData:function(){Warlords.CoinsFieldModel.superclass.setupData.apply(this,arguments);this.storeData("showProgressiveWinDisplay",false);this.storeData("freeSpinsMultiplierFrom",this.MULTIPLIER_DEFAULT_VALUE);this.storeData("freeSpinsMultiplierTo",this.MULTIPLIER_DEFAULT_VALUE);var b=Resources.readData("gameServerInitResponseObject");var a=Warlords.Utils.hasRunFreespin(b);this.storeData("hasRunFreespin",a);this.extractWinningScatter(b);Services.storage.storeData("WIN_UP_TO",this.WIN_UP_TO)},extractMultiplier:function(d){var c=this,b=c.readData("freeSpinsMultiplierTo");var a=Warlords.Utils.extractMultiplierFromServerResponse(d,b);c.storeData("freeSpinsMultiplierFrom",a.from);c.storeData("freeSpinsMultiplierTo",a.to)},extractWinningScatter:function(b){var a="";if(b.winning){a=b.winning.scatter}this.storeData("winningScatter",a)},extractFreeSpinsLeft:function(f){var e=this;var b=Warlords.Utils.hasRunFreespin(f);var d=0;var a=0;if(Sys.isDefined(f.freespins)){if(Sys.isDefined(f.freespins.left)){d=f.freespins.left;a=f.freespins.left}if(Sys.isDefined(f.wins)&&Sys.isDefined(f.wins.freespins)&&f.restore!==true){var c=f.wins.freespins;d=d-c}}if(f.clientaction==="initfreespin"&&b===false){if(f.winning&&f.winning.scatter==="SYM13"){d=0}}e.storeData("freeSpinsLeft",d);e.storeData("freeSpinsTotal",a)},processServerResponse:function(c){var b=this;if(Sys.isDefined(c.wins)){if(Sys.isDefined(c.wins.coinsTotal)){b.storeData("totalWin",c.wins.coinsTotal)}else{b.storeData("totalWin","")}if(Sys.isDefined(c.wins.coins)){b.storeData("win",c.wins.coins)}else{b.storeData("win",0)}}b.extractFreeSpinsLeft(c);b.storeData("nextAction",c.nextaction);b.storeData("clientAction",c.clientaction);b.extractMultiplier(c);b.extractWinningScatter(c);var a=Warlords.Utils.hasRunFreespin(c);b.storeData("hasRunFreespin",a);b.extractWinningScatter(c)},parseInitFreespinResponse:function(b){this.extractMultiplier(b);var a=Warlords.Utils.hasRunFreespin(b);this.storeData("hasRunFreespin",a);this.extractWinningScatter(b);this.extractFreeSpinsLeft(b)},getProgressiveWinText:function(){var a=this.readData("win");return a===0?"":a},getFreeSpinsTotalText:function(){return this.readData("freeSpinsTotal")}};Warlords.CoinsFieldModel=Sys.extend(Interface.Slots.CoinsFieldModel,Warlords.CoinsFieldModel,"Warlords.CoinsFieldModel");Sys.ns("Warlords");Warlords.BetSettings={constructor:function(){Warlords.BetSettings.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["userInput","properties"],desktop:["userInput","animation","properties"]}}};Warlords.BetSettings=Sys.extend(Interface.BetSettings,Warlords.BetSettings,"Warlords.BetSettings");Sys.ns("Warlords");Warlords.BetSettingsDesktopView={constructor:function(){Warlords.BetSettingsDesktopView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this,a=Game.stage.view.animationManager.getLayer("userInterface"),c=new PIXI.Container();b.rootContainer=c;b.betLevelLabelText=Services.languageManager.getText(Language.Keys.level);b.coinValueLabelText=Services.languageManager.getText(Language.Keys.machinetext_coinvalue);a.addChild(c);b.enabled=true;b.initSelectors();b.initFreespinItems();b.update()},initSelectors:function(){var h=this,g,e=h.model.readData("updatableBetLevels"),d=h.model.readData("updatableCoinValues"),f=h.model.readData("coinValues"),c=h.model.readData("betLevels");h.selectorContainer=new PIXI.Container();h.rootContainer.addChild(h.selectorContainer);g=f.map(function(m){return Sys.utils.numberToFixedDigits(m,3)});var j=new Interface.utils.PIXIValueStepper("selectorMinusUp","selectorMinusDown","selectorMinusOver","selectorMinusDisabled","selectorPlusUp","selectorPlusDown","selectorPlusOver","selectorPlusDisabled");j.id="betLevelSelector";j.setValues(h.model.readData("betLevels"));j.on("valueChanged",this.betLevelChangeHandler,this);j.setEnabled(e);j.setValueFieldStyle(Game.TextStyles.GENERIC_VALUE_STYLE);j.moveToPosition(Warlords.Positions.BET_LEVEL_SELECTOR);var a=j.plusButton.width/2;j.plusButton.setCustomHitArea(new PIXI.Circle(a,j.plusButton.height/2,a));var l=j.minusButton.width/2;j.minusButton.setCustomHitArea(new PIXI.Circle(l,j.minusButton.height/2,l));h.betLevelLabel=Game.PIXIFactory.createAndAddText(h.betLevelLabelText,Game.TextStyles.GENERIC_LABEL_STYLE,h.selectorContainer,Warlords.Positions.BET_LEVEL_LABEL.position,Warlords.Positions.BET_LEVEL_LABEL.anchorPoint);var k=new Interface.utils.PIXIValueStepper("selectorMinusUp","selectorMinusDown","selectorMinusOver","selectorMinusDisabled","selectorPlusUp","selectorPlusDown","selectorPlusOver","selectorPlusDisabled");k.id="coinValueSelector";k.setValues(g);k.on("valueChanged",this.coinValueChangeHandler,this);k.setEnabled(d);k.setValueFieldStyle(Game.TextStyles.GENERIC_VALUE_STYLE);k.moveToPosition(Warlords.Positions.COIN_VALUE_SELECTOR);var i=k.plusButton.width/2;k.plusButton.setCustomHitArea(new PIXI.Circle(i,k.plusButton.height/2,i));var b=k.minusButton.width/2;k.minusButton.setCustomHitArea(new PIXI.Circle(b,k.minusButton.height/2,b));h.coinValueLabel=Game.PIXIFactory.createAndAddText(h.coinValueLabelText,Game.TextStyles.GENERIC_LABEL_STYLE,h.selectorContainer,Warlords.Positions.COIN_VALUE_LABEL.position,Warlords.Positions.COIN_VALUE_LABEL.anchorPoint);j.setValue(h.model.readData("betLevel"));k.setValue(h.model.readData("coinValue"));h.selectorContainer.addChild(j);h.selectorContainer.addChild(k);h.betLevelSelector=j;h.coinValueSelector=k},initFreespinItems:function(){var a=this;a.freespinsContainer=new PIXI.Container();a.freespinsContainer.alpha=0.5;a.rootContainer.addChild(a.freespinsContainer);a.betLevelLabelItem=Game.PIXIFactory.createAndAddText(a.betLevelLabelText,Game.TextStyles.GENERIC_LABEL_STYLE,a.freespinsContainer,Warlords.Positions.FREESPIN_BETLEVEL_LABEL.position,Warlords.Positions.FREESPIN_BETLEVEL_LABEL.anchorPoint);a.betLevelValueItem=Game.PIXIFactory.createAndAddText(a.model.readData("betLevel"),Game.TextStyles.GENERIC_VALUE_STYLE,a.freespinsContainer,Warlords.Positions.FREESPIN_BETLEVEL_VALUE.position,Warlords.Positions.FREESPIN_BETLEVEL_VALUE.anchorPoint);a.coinValueLabelItem=Game.PIXIFactory.createAndAddText(a.coinValueLabelText,Game.TextStyles.GENERIC_LABEL_STYLE,a.freespinsContainer,Warlords.Positions.FREESPIN_COINVALUE_LABEL.position,Warlords.Positions.FREESPIN_COINVALUE_LABEL.anchorPoint);a.coinValueValueItem=Game.PIXIFactory.createAndAddText(a.model.readData("coinValue"),Game.TextStyles.GENERIC_VALUE_STYLE,a.freespinsContainer,Warlords.Positions.FREESPIN_COINVALUE_VALUE.position,Warlords.Positions.FREESPIN_COINVALUE_VALUE.anchorPoint);a.hideFreespinLabels()},betLevelChangeHandler:function(a){this.onValueChange("betLevelChanged",a.value)},coinValueChangeHandler:function(a){this.onValueChange("coinValueChanged",a.value)},updateValueItem:function(a,b){a.text=Sys.utils.numberToFixedDigits(b,3)},isBetSettingsEnabled:function(){return this.model.hasProperty("betSettingsDisabled")===false},enable:function(d){var c=this,b=c.model.readData("updatableBetLevels"),a=c.model.readData("updatableCoinValues");c.enabled=true;c.model.removeProperty("betSettingsDisabled",d);if(b){c.betLevelSelector.setEnabled(c.isBetSettingsEnabled())}if(a){c.coinValueSelector.setEnabled(c.isBetSettingsEnabled())}c.update()},disable:function(b){var a=this;a.enabled=false;a.model.addProperty("betSettingsDisabled",b);a.betLevelSelector.setEnabled(a.isBetSettingsEnabled());a.coinValueSelector.setEnabled(a.isBetSettingsEnabled())},hideSelectors:function(){this.disable("BetSettings");this.selectorContainer.visible=false},showSelectors:function(){this.enable("BetSettings");this.selectorContainer.visible=true},update:function(){var e=this,b=e.model,d=b.readData("updatableBetLevels"),a=b.readData("updatableCoinValues");if(this.enabled){if(d){var f=e.model.readData("betLevel");e.betLevelSelector.setValue(f)}if(a){var c=e.model.readData("coinValue");c=Sys.utils.numberToFixedDigits(c,3);e.coinValueSelector.setValue(c.toString())}}if(Sys.isDefined(e.coinValueValueItem&&e.betLevelValueItem)){if(b.readData("updatableBetLevels")){e.betLevelValueItem.text=e.model.readData("betLevel")}if(b.readData("updatableCoinValues")){e.updateValueItem(e.coinValueValueItem,e.model.readData("coinValue"))}e.fireEvent("view:updateBetAndCoinsValue")}},showFreespinLabels:function(){this.freespinsContainer.visible=true},hideFreespinLabels:function(){this.freespinsContainer.visible=false}};Warlords.BetSettingsDesktopView=Sys.extend(Interface.BetSettingsDesktopView,Warlords.BetSettingsDesktopView,"Warlords.BetSettingsDesktopView");Sys.ns("Warlords");Warlords.BetSettingsController={constructor:function(){Warlords.BetSettingsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){Warlords.BetSettingsController.superclass.setupEvents.apply(this,arguments);var a=this;a.on({"request:betSelectors.hide":a.view.hideSelectors.bind(a.view),"request:betSelectors.show":a.view.showSelectors.bind(a.view)})},onSettingChanged:function(b,c){if(b==="betLevel"||b==="denomination"){var a=this.model.readData(b);this.model.storeData(b,c);if(a!==c){this.view.update()}}}};Warlords.BetSettingsController=Sys.extend(Interface.BetSettingsController,Warlords.BetSettingsController,"Warlords.BetSettingsController");Sys.ns("Warlords");Warlords.FreeSpinIntroView={SPLASH_CONGRATULATIONS:{key:Language.Keys.congratulations_uc,x:640,y:110},SPLASH_YOU_WON:{key:Language.Keys.youWonUCVarRev,x:640,y:180},FEATURE_INFO_SYMBOL:{x:640,y:270},FEATURE_INFO_TEXT:{key:Language.Keys.freespinFeature,x:640,y:480},SPLASH_BUTTON_CONTINUE:{key:Language.Keys.continue_uc,loadingKey:Language.Keys.loadingDots,restoreKey:Language.Keys.continue_uc},constructor:function(){var a=this;Warlords.FreeSpinIntroView.superclass.constructor.apply(a,arguments)},onPortrait:function(){},onLandscape:function(){},show:function(){var b=this;b.rootContainer.visible=true;Warlords.FreeSpinIntroView.superclass.show.apply(b,arguments);if(b.model.readData("winningScatter")==="SYM15"){Warlords.Utils.Layer.moveAfter("noWinSymbols","scatterAnimation")}for(var a=0;a<b.hiddenLayers.length;++a){Warlords.Utils.hide(b.hiddenLayers[a])}},close:function(){this.rootContainer.visible=false;for(var a=0;a<this.hiddenLayers.length;++a){Warlords.Utils.show(this.hiddenLayers[a])}this.fireEvent("view:closed")},showSplash:function(){var b=this,c=b.splashItems.animation,a,d;b.winningScatter=b.model.readData("winningScatter");b.playing="splash";b.splashScreenContainer.visible=true;switch(b.winningScatter){case"SYM13":a="1";d=Language.Keys.freeSpinsIntroFeatureBarbarian;break;case"SYM14":a="2";d=Language.Keys.freeSpinsIntroFeaturePriestess;break;case"SYM15":a="3";d=Language.Keys.freeSpinsIntroFeatureSamurai;break}b.splashItems.featureInfo.text=Services.languageManager.getText(d);b.splashItems.featureInfoSymbol=Game.PIXIFactory.createAndAddSprite(b.winningScatter,b.splashScreenContainer,new PIXI.Point(b.FEATURE_INFO_SYMBOL.x,b.FEATURE_INFO_SYMBOL.y),new PIXI.Point(0.5,0));b.splashItems.featureInfoAnimation=Game.PIXIFactory.createAndAddSpineAnimation(b.winningScatter,b.splashScreenContainer,new PIXI.Point(b.FEATURE_INFO_SYMBOL.x,b.FEATURE_INFO_SYMBOL.y));b.fadeAnimation=new Animation.Holder({target:b.splashItems.featureInfoAnimation});Game.stage.view.animationManager.addToAnimationLoop(b.fadeAnimation);b.splashItems.featureInfoAnimation.position.x=b.FEATURE_INFO_SYMBOL.x-b.splashItems.featureInfoAnimation.width*0.5-4;b.playFeatureInfoAnimation(b.winningScatter.toLowerCase())},playFeatureInfoAnimation:function(a){var b=this;b.splashItems.featureInfoAnimation.state.setAnimationByName(0,a+"_idle",false);b.splashItems.featureInfoAnimation.state.addAnimationByName(0,a+"_idle",false,0);b.splashItems.featureInfoAnimation.state.addAnimationByName(0,a+"_idle",false,0);b.splashItems.featureInfoAnimation.alpha=1;var c=b.splashItems.featureInfoAnimation.state.addAnimationByName(0,a+"_win",false,0);c.onComplete=function(){var d={};d[0]={alpha:1};d[250]={alpha:0};b.fadeAnimation.onEnd=b.playFeatureInfoAnimation.bind(b,a);b.fadeAnimation.animate(d,true)}},stopFeatureInfoAnimation:function(){var a=this;if(a.fadeAnimation){a.fadeAnimation.stop();Game.stage.view.animationManager.removeFromAnimationLoop(a.fadeAnimation);a.fadeAnimation=undefined}if(a.splashItems.featureInfoAnimation){a.splashScreenContainer.removeChild(a.splashItems.featureInfoAnimation);Game.PIXIUtils.resetSpineAnimation(a.splashItems.featureInfoAnimation);a.splashItems.featureInfoAnimation=undefined}},hideSplash:function(){this.stopFeatureInfoAnimation();this.splashScreenContainer.visible=false;this.playing="";this.fireEvent("view:splashClosed")},createSplashAnimation:function(){var e=this,b=new PIXI.Container(),a={},d=new PIXI.Point(0.5,0.5);a.congratulations=Game.PIXIFactory.createAndAddText(Services.languageManager.getText(e.SPLASH_CONGRATULATIONS.key),Game.TextStyles.INTRO_OUTRO_CONGRATULATIONS,b,new PIXI.Point(e.SPLASH_CONGRATULATIONS.x,e.SPLASH_CONGRATULATIONS.y),d);var c=Services.languageManager.getText(e.SPLASH_YOU_WON.key,[0]);a.youWonX=Game.PIXIFactory.createAndAddText(c,Game.TextStyles.INTRO_OUTRO_TEXT,b,new PIXI.Point(e.SPLASH_YOU_WON.x,e.SPLASH_YOU_WON.y),d);a.featureInfo=Game.PIXIFactory.createAndAddText("Freespin Feature",Game.TextStyles.INTRO_FEATURE_TEXT,b,new PIXI.Point(e.FEATURE_INFO_TEXT.x,e.FEATURE_INFO_TEXT.y),d);a.button=e.createContinueButton();b.addChild(a.button);e.splashItems=a;return b},createContinueButton:function(){var f=this,e,a=this.SPLASH_BUTTON_CONTINUE,l=this.model.readData("isRestoreState"),j=l?a.restoreKey:a.key,b=Services.languageManager.getText(j);e=new Interface.utils.PIXIButton("continueButtonUp","continueButtonDown","continueButtonOver","continueButtonDisabled");e.setLabel(b);e.setLabelUpStyle(Game.TextStyles.CONTINUE_BUTTON_UP);e.setLabelDownStyle(Game.TextStyles.CONTINUE_BUTTON_DOWN);e.setLabelOverStyle(Game.TextStyles.CONTINUE_BUTTON_OVER);e.setLabelDisabledStyle(Game.TextStyles.CONTINUE_BUTTON_DISABLED);e.clickCallback=f.onSplashContinueClicked.bind(f);e.moveToPosition(Warlords.Positions.CONTINUE_BUTTON);e.setLabelMaxWidth(160);var k=[new PIXI.Point(9,9),new PIXI.Point(163,9),new PIXI.Point(168,13),new PIXI.Point(170,18),new PIXI.Point(170,49),new PIXI.Point(163,56),new PIXI.Point(9,56),new PIXI.Point(2,49),new PIXI.Point(2,18),new PIXI.Point(4,13)];var c=1/f.scale;for(var d=0;d<k.length;d++){var h=k[d];h.x*=c;h.y*=c}f.path=k;var g=new PIXI.Polygon(k);e.setCustomHitArea(g);return e},onSplashContinueClicked:function(b){var a=this;a.continueRequest()},initAnimations:function(){var b=this;b.rootContainer=new PIXI.Container();b.rootContainer.name="FreeSpinIntroView";b.splashScreenContainer=b.createSplashAnimation();b.splashScreenContainer.visible=false;b.rootContainer.addChild(b.splashScreenContainer);b.hiddenLayers=[Game.stage.view.animationManager.getLayer("reel"),Game.stage.view.animationManager.getLayer("wildSymbol"),Game.stage.view.animationManager.getLayer("scatterOverlay"),Game.stage.view.animationManager.getLayer("keypadBackground"),Game.stage.view.animationManager.getLayer("userInterface"),Game.stage.view.animationManager.getLayer("userInterfaceTop"),Game.stage.view.animationManager.getLayer("betLines"),Game.stage.view.animationManager.getLayer("betLineIndicators"),Game.stage.view.animationManager.getLayer("scatterAnimation")];var a=Game.stage.view.animationManager.getLayer("splashScreens");a.addChild(b.rootContainer)},continueRequest:function(){this.hideSplash();this.stopFeatureInfoAnimation();this.close()},inputTargetsButton:function(a){return false},setNumberOfFreespinsWon:function(d){var c=this.model.readData("winningScatter");var a=this.model.readData("hasRunFreespin");var b=this.SPLASH_YOU_WON.key;if(c==="SYM13"){b=a?Language.Keys.freeSpinsLeftBarbarian:Language.Keys.freeSpinsWonBarbarian}else{if(c==="SYM14"){b=a?Language.Keys.freeSpinsLeftPriestess:Language.Keys.freeSpinsWonPriestess}else{if(c==="SYM15"){b=a?Language.Keys.freeSpinsLeftSamurai:Language.Keys.freeSpinsWonSamurai}}}var e=Services.languageManager.getText(b,[d]);this.splashItems.youWonX.text=e},setButtonContinueText:function(){}};Warlords.FreeSpinIntroView=Sys.extend(Game.Slots.FreeSpinIntroView,Warlords.FreeSpinIntroView,"Warlords.FreeSpinIntroView");Sys.ns("Warlords");Warlords.FreeSpinIntroMobileView={constructor:function(){var a=this;Warlords.FreeSpinIntroMobileView.superclass.constructor.apply(a,arguments)},onPortrait:function(){var a=this;a.splashItems.congratulations.visible=false;a.splashItems.youWonX.visible=false;a.splashItems.featureInfo.visible=false;a.splashItems.button.visible=false;a.splashItems.congratulationsPortrait.visible=true;a.splashItems.youWonXPortrait.visible=true;a.splashItems.featureInfoPortrait.visible=true;a.splashItems.buttonPortrait.visible=true;a.plate.visible=true},onLandscape:function(){var a=this;a.splashItems.congratulations.visible=true;a.splashItems.youWonX.visible=true;a.splashItems.featureInfo.visible=true;a.splashItems.button.visible=true;a.splashItems.congratulationsPortrait.visible=false;a.splashItems.youWonXPortrait.visible=false;a.splashItems.featureInfoPortrait.visible=false;a.splashItems.buttonPortrait.visible=false;a.plate.visible=false},createMovieAnimations:function(){return new PIXI.Container()},createSplashAnimation:function(){var d=this,b=new PIXI.Container(),a={},c=new PIXI.Point(0.5,0.5);d.plate=new PIXI.Graphics();d.plate.beginFill(26,1);d.plate.drawRect(110,20,1055,680);d.plate.endFill();d.plate.alpha=0.4;b.addChild(d.plate);a.congratulations=Game.PIXIFactory.createAndAddText(Services.languageManager.getText(d.SPLASH_CONGRATULATIONS.key),Game.TextStyles.INTRO_OUTRO_CONGRATULATIONS,b,new PIXI.Point(d.SPLASH_CONGRATULATIONS.x,d.SPLASH_CONGRATULATIONS.y),c);a.congratulationsPortrait=Game.PIXIFactory.createAndAddText(Services.languageManager.getText(d.SPLASH_CONGRATULATIONS.key),Game.TextStyles.INTRO_OUTRO_CONGRATULATIONS_MOBILE,b,new PIXI.Point(d.SPLASH_CONGRATULATIONS.x,d.SPLASH_CONGRATULATIONS.y),c);a.youWonX=Game.PIXIFactory.createAndAddText(Services.languageManager.getText(d.SPLASH_YOU_WON.key,[0]),Game.TextStyles.INTRO_OUTRO_TEXT,b,new PIXI.Point(d.SPLASH_YOU_WON.x,d.SPLASH_YOU_WON.y),c);a.youWonXPortrait=Game.PIXIFactory.createAndAddText(Services.languageManager.getText(d.SPLASH_YOU_WON.key,[0]),Game.TextStyles.INTRO_OUTRO_TEXT_MOBILE,b,new PIXI.Point(d.SPLASH_YOU_WON.x,d.SPLASH_YOU_WON.y),c);a.featureInfo=Game.PIXIFactory.createAndAddText(Services.languageManager.getText(d.FEATURE_INFO_TEXT.key),Game.TextStyles.INTRO_FEATURE_TEXT,b,new PIXI.Point(d.FEATURE_INFO_TEXT.x,d.FEATURE_INFO_TEXT.y),c);a.featureInfoPortrait=Game.PIXIFactory.createAndAddText(Services.languageManager.getText(d.FEATURE_INFO_TEXT.key),Game.TextStyles.INTRO_FEATURE_TEXT_MOBILE,b,new PIXI.Point(d.FEATURE_INFO_TEXT.x,d.FEATURE_INFO_TEXT.y),c);a.featureInfoPortrait.position.y=500;a.button=d.createContinueButton();a.button.moveToPosition(Warlords.Positions.CONTINUE_BUTTON_MOBILE);b.addChild(a.button);a.buttonPortrait=d.createContinueButtonMobile();a.buttonPortrait.moveToPosition(Warlords.Positions.CONTINUE_BUTTON_MOBILE_PORTRAIT);b.addChild(a.buttonPortrait);d.splashItems=a;return b},createContinueButtonMobile:function(){var h=this,g,a=this.SPLASH_BUTTON_CONTINUE,n=this.model.readData("isRestoreState"),l=n?a.restoreKey:a.key,b=Services.languageManager.getText(l);g=new Interface.utils.PIXIButton("continueButtonUp","continueButtonDown","continueButtonOver","continueButtonDisabled");g.scale.x=1.5;g.scale.y=1.5;var e=g.width*(1/g.scale.x)/2;var c=g.height*(1/g.scale.y)/2;g.setLabel(b);g.setLabelMaxWidth(g.width*(1/g.scale.x)-25);g.setLabelAnchorPoint(new PIXI.Point(0.5,0.5));g.setLabelPosition(new PIXI.Point(e,c));g.setLabelUpStyle(Game.TextStyles.CONTINUE_BUTTON_UP_MOBILE);g.setLabelDownStyle(Game.TextStyles.CONTINUE_BUTTON_DOWN_MOBILE);g.setLabelOverStyle(Game.TextStyles.CONTINUE_BUTTON_OVER_MOBILE);g.setLabelDisabledStyle(Game.TextStyles.CONTINUE_BUTTON_DISABLED_MOBILE);g.clickCallback=h.onSplashContinueClicked.bind(h);g.moveToPosition(Warlords.Positions.CONTINUE_BUTTON_MOBILE);var m=[new PIXI.Point(9,9),new PIXI.Point(163,9),new PIXI.Point(168,13),new PIXI.Point(170,18),new PIXI.Point(170,49),new PIXI.Point(163,56),new PIXI.Point(9,56),new PIXI.Point(2,49),new PIXI.Point(2,18),new PIXI.Point(4,13)];var d=1/h.scale;for(var f=0;f<m.length;f++){var k=m[f];k.x*=d;k.y*=d}h.path=m;var j=new PIXI.Polygon(m);g.setCustomHitArea(j);return g},setContinueBtnState:function(){var a=this;a.splashItems.button.enable()},createIntroMovie:function(a){var b=this;b.introMovieSpine=Game.PIXIFactory.createAndAddSpineAnimation("freespinIntroMovieMobile",a,new PIXI.Point(0,0))},playIntroMovie:function(){var b=this,c,a;c=b.introMovieSpine.state.addAnimationByName(0,"anim",false);a=b.introMovieSpine.state.addAnimationByName(0,"end",false);a.onComplete=b.onIntroMovieDone.bind(b)},stopIntroMovie:function(){var a=this;Game.PIXIUtils.resetSpineAnimation(a.introMovieSpine)},show:function(){var b=this;b.setNumberOfFreespinsWon(b.model.readData("freeSpinsWon"));if(b.model.readData("winningScatter")==="SYM15"){Warlords.Utils.Layer.moveAfter("noWinSymbols","scatterAnimation")}for(var a=0;a<b.hiddenLayers.length;++a){Warlords.Utils.hide(b.hiddenLayers[a])}b.showSplash();b.rootContainer.visible=true},setNumberOfFreespinsWon:function(a){Warlords.FreeSpinIntroMobileView.superclass.setNumberOfFreespinsWon.apply(this,[a]);this.splashItems.youWonXPortrait.text=this.splashItems.youWonX.text},showSplash:function(){var a=this;Warlords.FreeSpinIntroMobileView.superclass.showSplash.apply(this);switch(a.winningScatter){case"SYM13":a.plate.beginFill(26,1);break;case"SYM14":a.plate.beginFill(6656,1);break;case"SYM15":a.plate.beginFill(3342336,1);break}a.splashItems.featureInfoPortrait.text=a.splashItems.featureInfo.text}};Warlords.FreeSpinIntroMobileView=Sys.extend(Warlords.FreeSpinIntroView,Warlords.FreeSpinIntroMobileView,"Warlords.FreeSpinIntroMobileView");Sys.ns("Warlords");Warlords.FreeSpinIntroModel={constructor:function(){Warlords.FreeSpinIntroModel.superclass.constructor.apply(this,arguments)},DEFAULT_REELSET:"freespin",processServerResponse:function(e){var b=this,d=(e.restore===true)&&e.currentGameState==="freespin",c=e.currentGameState!=="freespin"&&e.nextaction==="freespin",a=Sys.isDefined(e.freespins)?e.freespins.left:0;b.storeData("freeSpinsWon",a);b.storeData("showFreeSpinIntro",d||c);b.storeData("isRestoreState",d);b.storeData("hasRunFreespin",Warlords.Utils.hasRunFreespin(e));if(Sys.isDefined(e.winning)){b.storeData("winningScatter",e.winning.scatter)}b.storeData("clientAction",e.clientaction)}};Warlords.FreeSpinIntroModel=Sys.extend(Game.Slots.FreeSpinIntroModel,Warlords.FreeSpinIntroModel,"Warlords.FreeSpinIntroModel");Sys.ns("Warlords");Warlords.FreeSpinOutroView={CONGRATULATION_TEXT:{key:Language.Keys.congratulations_uc,x:640,y:240},COINS_WON_TEXT:{key:Language.Keys.youWonCoins,x:640,y:340},WITH_MULTIPLIER:{key:Language.Keys.withMultiplier,x:640,y:400},WITH_STICKY_WILDS:{key:Language.Keys.withStickyWilds,x:640,y:400},WITH_BARBARIAN_SPINS:{key:Language.Keys.withBarbarianSpins,x:640,y:400},FOG_IMAGE:"fsOutroFog",COIN_ANIMATION:"freespinOutroSplashCoinAnimation",COIN_PX_SPEED:4,COIN_SIZE_OFFSET:100,OUTRO_FADE_IN_TIME:1000,OUTRO_FADE_IN_TIME_COINS:1500,OUTRO_FADE_IN_DELAY:0,OUTRO_FADE_IN_DELAY_COINS:500,constructor:function(){Warlords.FreeSpinOutroView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var d=this;d.rootContainer=new PIXI.Container();d.rootContainer.name="FreeSpinOutroView";d.backgroundAnimationContainer=new PIXI.Container();d.createBackgroundAnimation(d.backgroundAnimationContainer);d.textContainer=new PIXI.Container();d.createTexts(d.textContainer);d.userInterfaceLayer=Game.stage.view.animationManager.getLayer("userInterface");d.userInterfaceLayerTop=Game.stage.view.animationManager.getLayer("userInterfaceTop");d.keypadBackgroundLayer=Game.stage.view.animationManager.getLayer("keypadBackground");d.tickerTapeLayer=Game.stage.view.animationManager.getLayer("tickerTape");d.betlineIndicatorLayer=Game.stage.view.animationManager.getLayer("betLineIndicators");d.fadeList=[Game.stage.view.animationManager.getLayer("reel"),Game.stage.view.animationManager.getLayer("stackedBlur"),Game.stage.view.animationManager.getLayer("scatterAnimation"),Game.stage.view.animationManager.getLayer("wildSymbol")];d.fadeAnimationList=[];for(var c=0;c<d.fadeList.length;++c){d.fadeAnimationList.push(Warlords.Utils.createFadeOutAnimation(d.fadeList[c],d.OUTRO_FADE_IN_TIME,d.OUTRO_FADE_IN_DELAY))}var a=new PIXI.Graphics();a.beginFill(0,1);a.drawRect(0,0,1280,720);a.endFill();a.alpha=0;d.rootContainer.addChild(d.backgroundAnimationContainer);d.rootContainer.addChild(d.textContainer);d.plateFadeInAnimation=Warlords.Utils.createFadeInAnimation(a,500);d.plateFadeOutAnimation=Warlords.Utils.createFadeOutAnimation(a,500);d.rootFadeInAnimation=Warlords.Utils.createFadeInAnimation(d.rootContainer,d.OUTRO_FADE_IN_TIME_COINS,d.OUTRO_FADE_IN_DELAY_COINS);d.fadeContainer=new PIXI.Container();d.fadeContainer.addChild(a);var b=Game.stage.view.animationManager.getLayer("splashScreens");b.addChild(d.rootContainer);b.addChild(d.fadeContainer);d.interactable=false;d.rootContainer.visible=false},createCoinRainAnimations:function(a,c,d,b,f){var h=this;var k=[];for(var e=0;e<f;e++){var g=Sys.Math.randomBetween(c-d,c+d);var j={};j.container=new PIXI.Container();a.addChild(j.container);j.animation=Game.PIXIFactory.createAndAddSpineAnimation(h.COIN_ANIMATION,j.container);j.container.scale=new PIXI.Point(g,g);j.offset=h.COIN_SIZE_OFFSET*g;j.container.rotation=Math.random()*(Math.PI*2);j.container.position.x=Sys.Math.randomBetween(-j.offset*0.5,1280+j.offset*0.5);j.container.position.y=Sys.Math.randomBetween(-j.offset,720+j.offset*0.5);j.speedScale=g;k.push(j)}return k},createFogAnimation:function(a,d){var c=this;var b=Game.PIXIFactory.createAndAddSprite(c.FOG_IMAGE,a);b.scale=new PIXI.Point(2,2);b.alpha=d},createBackgroundAnimation:function(a){var d=this;var b=[new PIXI.Container(),new PIXI.Container(),new PIXI.Container(),new PIXI.Container(),new PIXI.Container(),new PIXI.Container()];d.bgAnimation={};d.bgAnimation.layers=b;d.bgAnimation.coinAnimations=[];d.bgAnimation.time=0;d.bgAnimation.coinAnimations=d.bgAnimation.coinAnimations.concat(d.createCoinRainAnimations(b[1],0.75,0.25,0.75,32));d.createFogAnimation(b[2],0.6);d.bgAnimation.coinAnimations=d.bgAnimation.coinAnimations.concat(d.createCoinRainAnimations(b[3],1.7,0.3,1.7,16));d.createFogAnimation(b[4],0.6);d.bgAnimation.coinAnimations=d.bgAnimation.coinAnimations.concat(d.createCoinRainAnimations(b[5],3,0.3,3,6));for(var c=0;c<b.length;c++){a.addChild(b[c])}var g={target:d.bgAnimation,onStart:d.onBackgroundAnimationStart.bind(d),onEnd:d.onBackgroundAnimationEnd.bind(d),onUpdate:d.onBackgroundAnimationUpdate.bind(d),animate:{0:{time:0},6000:{time:6000}}};var h={target:b[2],loop:true,animate:{0:{alpha:0},600:{alpha:0},1300:{alpha:0}}};var f={target:b[4],loop:true,animate:{0:{alpha:0},800:{alpha:0},1500:{alpha:0}}};var e={children:[g,h,f]};d.bgAnimation.animation=new Animation.Holder(e);Game.stage.view.animationManager.addToAnimationLoop(d.bgAnimation.animation)},onBackgroundAnimationStart:function(){var a=this;a.bgAnimation.coinAnimations.forEach(function(d,b){d.animation.state.setAnimationByName(0,"animation",true);var c=d.animation.state.getCurrent(0);c.time=Math.random()*c.animation.duration*0.5})},onBackgroundAnimationEnd:function(){var a=this;a.bgAnimation.animation.stop();a.bgAnimation.coinAnimations.forEach(function(c,b){c.animation.state.clearTracks()});this.fireEvent("view:closed")},onBackgroundAnimationUpdate:function(){var a=this;a.bgAnimation.coinAnimations.forEach(function(c,b){if(c.container.position.y>720+c.offset){c.container.position.x=Sys.Math.randomBetween(-c.offset*0.5,1280+c.offset*0.5);c.container.position.y=-(c.offset+Math.random()*c.offset);c.container.rotation=Math.random()*(Math.PI*2)}c.container.position.y+=a.COIN_PX_SPEED*c.speedScale})},textAnimationComplete:function(){this.plateFadeInAnimation.play()},close:function(){var b=this;this.rootContainer.visible=false;for(var a=0;a<b.fadeList.length;++a){b.fadeList[a].alpha=1}Warlords.Utils.show(this.userInterfaceLayer);Warlords.Utils.show(this.userInterfaceLayerTop);Warlords.Utils.show(this.keypadBackgroundLayer);Warlords.Utils.show(this.tickerTapeLayer);Warlords.Utils.show(this.betlineIndicatorLayer);this.plateFadeOutAnimation.play();if(b.model.readData("winningScatter")==="SYM15"){Warlords.Utils.Layer.moveAfter("noWinSymbols","noWinScatterOverlay")}},hideTickerTape:function(){Warlords.Utils.hide(this.tickerTapeLayer)},hideBetlineIndicators:function(){Warlords.Utils.hide(this.betlineIndicatorLayer)},show:function(){var e=this,f=this.model.readData("coinsWon"),d,a=this.model.readData("barbarianSpins"),g=this.model.readData("multiplier"),b=this.model.readData("stickyWilds");e.congratulationsText.visible=f>0;if(f>0){e.coinsWon.text=Services.languageManager.getText(e.COINS_WON_TEXT.key).replace("{0}",f);e.withFeatureText.visible=true}else{e.coinsWon.text=Services.languageManager.getText(Language.Keys.freespinNoWin);e.withFeatureText.visible=false}e.rootContainer.visible=true;Warlords.Utils.hide(e.userInterfaceLayer);Warlords.Utils.hide(e.userInterfaceLayerTop);Warlords.Utils.hide(e.keypadBackgroundLayer);e.hideTickerTape();e.hideBetlineIndicators();e.rootFadeInAnimation.restore();e.rootFadeInAnimation.play();e.textAnimation.restore();e.textAnimation.play();for(var c=0;c<e.fadeAnimationList.length;++c){e.fadeAnimationList[c].play()}e.bgAnimation.animation.restore();e.bgAnimation.animation.play();switch(e.model.readData("winningScatter")){case"SYM13":d="fs1_outro";e.withFeatureText.text=Services.languageManager.getText(e.WITH_BARBARIAN_SPINS.key).replace("{0}",a.toString());break;case"SYM14":d="fs2_outro";e.withFeatureText.text=Services.languageManager.getText(e.WITH_MULTIPLIER.key).replace("{0}","X"+g.toString());break;case"SYM15":d="fs3_outro";e.withFeatureText.text=Services.languageManager.getText(e.WITH_STICKY_WILDS.key).replace("{0}",b.toString());break}},createTexts:function(b){var e=this;e.textContainer=new PIXI.Container();e.textContainer.pivot=new PIXI.Point(640,360);e.textContainer.position=new PIXI.Point(640,360);var d=new PIXI.Point(0.5,0.5);b.addChild(e.textContainer);var a=Services.languageManager.getText(e.CONGRATULATION_TEXT.key);e.congratulationsText=Game.PIXIFactory.createAndAddText(a,Game.TextStyles.INTRO_OUTRO_CONGRATULATIONS,e.textContainer,new PIXI.Point(e.CONGRATULATION_TEXT.x,e.CONGRATULATION_TEXT.y),d);var g=Services.languageManager.getText(e.COINS_WON_TEXT.key);e.coinsWon=Game.PIXIFactory.createAndAddText(g,Game.TextStyles.OUTRO_COINS_TEXT,e.textContainer,new PIXI.Point(e.COINS_WON_TEXT.x,e.COINS_WON_TEXT.y),d);e.withFeatureText=Game.PIXIFactory.createAndAddText("",Game.TextStyles.OUTRO_COINS_TEXT,e.textContainer,new PIXI.Point(e.WITH_MULTIPLIER.x,e.WITH_MULTIPLIER.y),d);var c={target:e.textContainer.scale,onEnd:e.textAnimationComplete.bind(e),animate:{0:{x:0.9,y:0.9},5490:{x:1.2,y:1.2}}};var f={children:[c]};e.textAnimation=new Animation.Holder(f);Game.stage.view.animationManager.addToAnimationLoop(e.textAnimation)},inputTargetsButton:function(a){return false}};Warlords.FreeSpinOutroView=Sys.extend(Game.Slots.FreeSpinOutroView,Warlords.FreeSpinOutroView,"Warlords.FreeSpinOutroView");Sys.ns("Warlords");Warlords.FreeSpinOutroMobileView={constructor:function(){Warlords.FreeSpinOutroMobileView.superclass.constructor.apply(this,arguments)},close:function(){this.rootContainer.visible=false;for(var a=0;a<this.fadeList.length;++a){this.fadeList[a].alpha=1}Warlords.Utils.show(this.userInterfaceLayer);Warlords.Utils.show(this.keypadBackgroundLayer);if(Services.orientation.isLandscape()){this.plateFadeOutAnimation.play()}if(this.model.readData("winningScatter")==="SYM15"){Warlords.Utils.Layer.moveAfter("noWinSymbols","noWinScatterOverlay")}},hideTickerTape:function(){},textAnimationComplete:function(){if(Services.orientation.isLandscape()){this.plateFadeInAnimation.play()}}};Warlords.FreeSpinOutroMobileView=Sys.extend(Warlords.FreeSpinOutroView,Warlords.FreeSpinOutroMobileView,"Warlords.FreeSpinOutroMobileView");Sys.ns("Warlords");Warlords.FreeSpinOutroController={AUTO_CLOSE_TIME:6000,DEFAULT_AFTER_REELSET:"basic",LISTEN_TO_USER_INPUT_WHEN_START:true,UPDATE_COINS_FIELD_WHEN_START:true,constructor:function(){Warlords.FreeSpinOutroController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"view:closed":a.onClosed,"notify:stateHandler.enteringFreeSpinOutroState":a.show,"request:freeSpinOutro.close":a.close,"notify:viewport.PORTRAIT":a.onPortrait,"notify:viewport.LANDSCAPE":a.onLandscape})},onPortrait:function(){},onLandscape:function(){},show:function(){var a=this;if(a.LISTEN_TO_USER_INPUT_WHEN_START){a.startListeningToUserInput()}a.view.show();switch(a.model.readData("winningScatter")){case"SYM13":a.fireEvent("request:ambienceManager.ambienceChangeActive",{name:"outroFreeSpin1",id:"outroFreeSpin1",buffer:Platform.isDesktopDevice?"main":"freespin",loop:false});break;case"SYM14":a.fireEvent("request:ambienceManager.ambienceChangeActive",{name:"outroFreeSpin2",id:"outroFreeSpin2",buffer:Platform.isDesktopDevice?"main":"freespin",loop:false});break;case"SYM15":a.fireEvent("request:ambienceManager.ambienceChangeActive",{name:"outroFreeSpin3",id:"outroFreeSpin3",buffer:Platform.isDesktopDevice?"main":"freespin",loop:false});break}if(a.UPDATE_COINS_FIELD_WHEN_START){a.fireEvent("request:coinsField.showNormalWin")}a.fireEvent("request:playModeManager.removeMode","freespin");a.fireEvent("request:playModeManager.addMode","basic");a.fireEvent("request:closeOpenWindows");if(Services.settingsManager.getSetting("autoPlayNrSpins")>0){a.autoCloseTimeOut=setTimeout(function(){a.close()},a.AUTO_CLOSE_TIME)}a.fireEvent("request:scatter.removeScatters");a.fireEvent("notify:freeSpinIntro.showing")},close:function(){var a=this;clearTimeout(a.autoCloseTimeOut);a.fireEvent("request:spin.activateReelset",a.DEFAULT_AFTER_REELSET,"base");a.view.close();a.stopListeningToUserInput();a.fireEvent("notify:gameModeChanged","BASIC");a.fireEvent("request:enableBasicGamePanel","freespinSplash");a.fireEvent("request:portraitBackgroundManager.changeBackground",Warlords.PortraitBackgroundManager.BACKGROUND_MG)},onClosed:function(){var a=this;a.fireEvent("request:background.restoreImage");a.fireEvent("request:ambienceManager.ambienceChangeActive",{name:"ambienceGeneral",id:"ambienceGeneral",loop:true});a.fireEvent("notify:freeSpinOutro.closed");a.close()},playOutroSound:function(){switch(this.model.readData("winningScatter")){case"SYM13":this.fireEvent("request:audioPlayer.play",{name:"outroFreeSpin1"});break;case"SYM14":this.fireEvent("request:audioPlayer.play",{name:"outroFreeSpin2"});break;case"SYM15":this.fireEvent("request:audioPlayer.play",{name:"outroFreeSpin3"});break}}};Warlords.FreeSpinOutroController=Sys.extend(Game.Slots.FreeSpinOutroController,Warlords.FreeSpinOutroController,"Warlords.FreeSpinOutroController");Sys.ns("Game.Slots");Warlords.FreeSpinOutroModel={constructor:function(){Warlords.FreeSpinOutroModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(c){var a=Sys.isDefined(c.wins)?c.wins.coinsTotal:0;if(c.currentGameState==="freespin"&&c.gamestate.current==="basic"){this.setState("animationRequested");this.storeData("coinsWon",a);this.storeData("previousReelset",c.rs.i0.id);if(Sys.isDefined(c.winning)){this.storeData("winningScatter",c.winning.scatter)}if(Sys.isDefined(c.freespins.total)){this.storeData("barbarianSpins",c.freespins.total)}if(Sys.isDefined(c.freespins.multiplier)){this.storeData("multiplier",c.freespins.multiplier)}if(Sys.isDefined(c.freespins.multiplier)){var b=this.getNumberOfOverlaySymbols(c,"freespin");this.storeData("stickyWilds",b)}}else{this.setState("idle")}},getNumberOfOverlaySymbols:function(f,g){var a=Sys.utils.parseReelInfo(f,g);var b=Sys.isDefined(a)?a.length:0;var c=[];var j=[];for(var e=0;e<b;++e){c=a[e].overlaySymbols;for(var h in c){if(c.hasOwnProperty(h)){var d=c[h];j.push(d)}}}return j.length}};Warlords.FreeSpinOutroModel=Sys.extend(Game.Slots.FreeSpinOutroModel,Warlords.FreeSpinOutroModel,"Warlords.FreeSpinOutroModel");Sys.ns("Warlords");Warlords.WinningSymbolsView={BETLINE_STEPTIME:1/15*1000,BETLINE_TOGGLE_TIME:Warlords.Utils.framesToTime(47),INITIAL_WIN_DURATION:Warlords.Utils.framesToTime(85),constructor:function(){Warlords.WinningSymbolsView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var c=this;c.config=Resources.readData("config");var d=c.config.reelGroups["default"];c.numberOfReels=d.numberOfReels;c.reelLayout=d.reelLayout;c.standard=c.reelLayout.standard;c.numberOfOutcomeSymbols=c.standard.numberOfOutcomeSymbols;c.rootContainer=new PIXI.Container();c.rootContainer.name="WinningSymbolsView";c.rootNoWinAnimationsContainer=new PIXI.Container();c.rootNoWinAnimationsContainer.name="rootNoWinAnimationsContainer";c.allNoWinAnimationContainers=c.createSymbolAnimationContainers(c.rootNoWinAnimationsContainer);c.rootWinAnimationsContainer=new PIXI.Container();c.rootWinAnimationsContainer.name="rootWinAnimationsContainer";c.allWinAnimationContainers=c.createSymbolAnimationContainers(c.rootWinAnimationsContainer);c.frameContainer=new PIXI.Container();c.frameContainer.name="frameContainer";c.frameScaleContainers=[];c.frameContainers=c.createBetlineFrameContainers(c.frameContainer,c.frameScaleContainers);c.shineContainer=new PIXI.Container();c.shineContainer.name="shineContainer";c.shineContainers=c.createShineContainers(c.shineContainer);c.rootContainer.addChild(c.frameContainer);c.rootContainer.addChild(c.rootWinAnimationsContainer);c.rootContainer.addChild(c.shineContainer);c.toggleTimeouts=[];c.frameAnimations=[];c.symbolContainers=[];var a=Game.stage.view.animationManager.getLayer("winSymbols");a.addChild(c.rootContainer);var b=Game.stage.view.animationManager.getLayer("noWinSymbols");b.addChild(c.rootNoWinAnimationsContainer);Warlords.Utils.hide(c.rootContainer);Warlords.Utils.hide(c.rootNoWinAnimationsContainer);Warlords.Utils.preloadAnimation("betlineFrameAnim",["betlineframe_initial","betlineframe_loop"])},getLayersToShake:function(){return[Game.stage.view.animationManager.getLayer("background")]},createBetlineFrameContainers:function(b,g){var d=this,f=[];for(var a=0;a<d.numberOfReels;a++){f[a]=[];for(var h=0;h<d.numberOfOutcomeSymbols;h++){var c=new PIXI.Container();c.name="frameContainer_"+a+"_"+h;var e=Game.stage.model.getSymbolConfiguration(a,h);c.position.x=e.left+98;c.position.y=e.top+97;c.frameAnimation=d.createAnimation("betlineFrameAnim",c);c.frameAnimation.pivot.x=98;c.frameAnimation.pivot.y=97;g.push(Warlords.Utils.createFireScaleAnimation(c.frameAnimation));b.addChild(c);f[a].push(c)}}return f},createShineContainers:function(b){var c=this,d=[];for(var a=0;a<c.numberOfReels;a++){d[a]=[];for(var f=0;f<c.numberOfOutcomeSymbols;f++){var e=new PIXI.Container();e.name="symbol_"+a+"_"+f;e.position.x=c.reelLayout[a].left;e.position.y=c.standard.top+(f*c.standard.symbolCenterToCenter);e.genericWinAnimation=c.createAnimation("genericWinAnimation",e);e.genericWinAnimation.name="genericWinAnimation";b.addChild(e);d[a].push(e)}}return d},createSymbolContainersWithReelIndex:function(d,a,e){var c=this;e[d]=[];for(var f=0;f<c.numberOfOutcomeSymbols;f++){var b=new PIXI.Container();b.name="symbol_"+d+"_"+f;b.position.x=c.reelLayout[d].left;b.position.y=c.standard.top+(f*c.standard.symbolCenterToCenter);Warlords.Utils.hide(b);a.addChild(b);e[d].push(b)}},createSymbolAnimationContainers:function(a){var b=this,c=[];b.createSymbolContainersWithReelIndex(4,a,c);b.createSymbolContainersWithReelIndex(3,a,c);b.createSymbolContainersWithReelIndex(2,a,c);b.createSymbolContainersWithReelIndex(1,a,c);b.createSymbolContainersWithReelIndex(0,a,c);return c},animateAllWinningSymbols:function(d){var c=this,a=c.model.readData("allSymbolsToAnimate"),b=c.model.readData("winType");c.shakeScreen(c.model.readData("coinWinBeforeMultiplier"));c.alreadyPlayedStackedSound=d.stackedSound===false?true:false;c.initWin=true;c.createAndPlayWinAndNoWinAnimationsForSymbols(a,b)},animateWinSituationSymbolsWithWinType:function(a,b,d){var c=this;c.hideBetlineFrames();c.createAndPlayWinAndNoWinAnimationsForSymbols(a,b)},shakeScreen:function(c){var d=this,b=Resources.readData("config").winTypes,f=d.model.readData("betLevel"),a=b.mediumWin.from*15*f,g=b.largeWin.from*15*f;var e=this.getLayersToShake();if(c>=g){d.shakeAnim=Warlords.Utils.createShakeAnimationWithDuration(e,5,500,65,true)}else{if(c>=a){d.shakeAnim=Warlords.Utils.createShakeAnimationWithDuration(e,2,500,65,true)}}if(d.shakeAnim){d.shakeAnim.play()}},stopShake:function(){var a=this;if(a.shakeAnim){a.shakeAnim.stop();a.shakeAnim.onEnd();Game.stage.view.animationManager.addToAnimationLoop(a.shakeAnim);a.shakeAnim=undefined}},createAndPlayWinAndNoWinAnimationsForSymbols:function(a,b){var d=this;d.symbolsAnimatingCounter=0;d.resetToggleTimeouts();var e=d.BETLINE_TOGGLE_TIME;if(d.initWin){e=d.INITIAL_WIN_DURATION}var c;if(d.model.readData("clientAction")!=="freespin"||d.model.readData("winningScatter")!=="SYM14"||Warlords.Utils.isBigWin(b)){c=setTimeout(function(){d.stop()},e)}d.toggleTimeouts.push(c);Sys.each(a,function(g){if(!Warlords.Utils.isScatterSymbol(g.symbol)){var f=setTimeout(function(){if(g.symbol!=="SYM1"){d.playGenericWinAnimation(g.x,g.y,g.isInWinSituation)}if(g.isInWinSituation){d.playFrameAnimation(g.x,g.y,b)}var h=d.getAnimationNameFromSymbolObject(g);d.createAndPlayAnimationFromSymbol(g,h);++d.symbolsAnimatingCounter},d.BETLINE_STEPTIME*(g.x));d.toggleTimeouts.push(f)}});d.initWin=false;Warlords.Utils.show(d.rootContainer);Warlords.Utils.show(d.rootNoWinAnimationsContainer)},resetToggleTimeouts:function(){var b=this;for(var a=0;a<b.toggleTimeouts.length;++a){clearTimeout(b.toggleTimeouts[a])}b.toggleTimeouts.length=0},createAndPlayAnimationFromSymbol:function(d,b){var c=this;var a;if(d.isInWinSituation){a=c.allWinAnimationContainers[d.x][d.y]}else{a=c.allNoWinAnimationContainers[d.x][d.y]}if(a.symbolAnimation===undefined){a.symbolAnimation=Game.PIXIFactory.createAndAddSpineAnimation(d.symbol,a)}var e=a.symbolAnimation;c.symbolContainers.push(a);Game.PIXIUtils.resetSpineAnimation(e);e.filters=undefined;e.state.setAnimationByName(0,b,false);Warlords.Utils.show(a);e.state.onComplete=function(){--c.symbolsAnimatingCounter};if(Warlords.Utils.isStackedSymbol(d.symbol)){if(!c.alreadyPlayedStackedSound){c.fireEvent("view:stackedWin",d.symbol);c.alreadyPlayedStackedSound=true}}},getAnimationNameFromSymbolObject:function(d){var a="animation",c=this.model.readData("clientAction"),b=this.model.readData("winningScatter");if(Warlords.Utils.isStackedSymbol(d.symbol)){a=d.isInWinSituation?"win":"nowin"}if(d.symbol==="SYM1"){if(d.isOverlay&&c==="freespin"&&b==="SYM15"){a="sym1_sticky_win"}else{a="sym1_win"}}return a},playFrameAnimation:function(f,b,c){var e=this,a=e.frameContainers[f][b],d=a.frameAnimation;e.frameAnimations.push(d);Game.PIXIUtils.resetSpineAnimation(d);Warlords.Utils.show(d);d.state.setAnimationByName(0,"betlineframe_initial",false);d.state.addAnimationByName(0,"betlineframe_loop",true,0);e.scaleFrame(d,false,c);Warlords.Utils.show(a)},scaleFrame:function(d,c,a){if(!Sys.isDefined(c)){c=false}a=Sys.isDefined(a)?a:this.model.readData("winType");var h=this,i=Resources.readData("config").winTypes,f=h.model.readData("betLevel"),g=i.mediumWin.from*15*f,e=i.largeWin.from*15*f,k=!c&&!Warlords.Utils.isBigWin(a)?h.model.readData("coinWinBeforeMultiplier"):h.model.readData("coinWin"),b,j=h.model.readData("clientAction"),l=h.model.readData("winningScatter");if(j==="freespin"&&l==="SYM14"){if(k>=e){b=h.scaleByWinType(d,"largeWin")}else{if(k>=g){b=h.scaleByWinType(d,"mediumWin")}else{b=h.scaleByWinType(d,"smallWin")}}}else{h.scaleByWinType(d,a)}return b},scaleByWinType:function(a,b){var c;switch(b){case"smallWin":c=0.9;break;case"mediumWin":c=0.97;break;default:c=1.03;break}if(Sys.isDefined(a)){a.scale.x=c;a.scale.y=c}return c},playGenericWinAnimation:function(d,a,f){var c=this;var g=c.shineContainers[d][a];var e=g.genericWinAnimation;Game.PIXIUtils.resetSpineAnimation(e);Warlords.Utils.show(e);var b=f?"win":"nowin";e.state.setAnimationByName(0,b,false);Warlords.Utils.show(g);e.state.onComplete=function(){Game.PIXIUtils.resetSpineAnimation(e);Warlords.Utils.hide(e)}},createAnimation:function(b,c,a){var d=Game.PIXIFactory.createAndAddSpineAnimation(b,c,a);Warlords.Utils.hide(d);return d},hideBetlineFrames:function(){var e=this,d=e.frameContainers.length,c,b,a,f;for(a=0;a<d;a++){c=e.frameContainers[a].length;for(f=0;f<c;f++){b=e.frameContainers[a][f];Game.PIXIUtils.resetSpineAnimation(b.frameAnimation);Warlords.Utils.hide(b)}}},hideShine:function(){var c=this,b=c.shineContainers.length,f,e,a,d;for(a=0;a<b;a++){f=c.shineContainers[a].length;for(d=0;d<f;d++){e=c.shineContainers[a][d];Game.PIXIUtils.resetSpineAnimation(e.genericWinAnimation);Warlords.Utils.hide(e)}}},hideSymbols:function(){var b=this;for(var a=0;a<b.symbolContainers.length;++a){Warlords.Utils.hide(b.symbolContainers[a])}b.symbolContainers.length=0},stop:function(){var a=this;a.hideShine();a.hideSymbols();a.stopShake();a.showingAllWins=false;a.symbolsAnimatingCounter=0;a.fireEvent("view:animationComplete");a.frameAnimations.length=0},clearSymbolWinAnimationContainers:function(c){for(var a=0;a<c.length;a++){var e=c[a].length;for(var d=0;d<e;d++){var b=c[a][d];if(b.symbolAnimation){b.removeChild(b.symbolAnimation);b.symbolAnimation=undefined}}}},resetSymbols:function(){var a=this;a.hideShine();a.hideBetlineFrames();a.clearSymbolWinAnimationContainers(a.allNoWinAnimationContainers);a.clearSymbolWinAnimationContainers(a.allWinAnimationContainers);Warlords.Utils.hide(a.rootContainer);Warlords.Utils.hide(a.rootNoWinAnimationsContainer);a.resetToggleTimeouts()},changeFrameScaleToAfterMultiplier:function(){var d=this;for(var c=0;c<d.frameAnimations.length;++c){var b=d.frameAnimations[c].scale.x;var f=d.scaleFrame(undefined,true);if(f===b&&Sys.isDefined(b)){continue}var a={};a[0]={x:d.frameAnimations[c].scale.x,y:d.frameAnimations[c].scale.y};a[150]={x:f,y:f};var e=new Animation.Holder({id:c,target:d.frameAnimations[c],prop:"scale",animate:a,onEnd:Game.stage.view.animationManager.removeFromAnimationLoop.bind(Game.stage.view.animationManager,d.frameAnimations[c])});Game.stage.view.animationManager.addToAnimationLoop(e);e.play()}}};Warlords.WinningSymbolsView=Sys.extend(Game.Slots.WinningSymbolsView,Warlords.WinningSymbolsView,"Warlords.WinningSymbolsView");Sys.ns("Warlords");Warlords.WinningSymbolsMobileView={constructor:function(){Warlords.WinningSymbolsMobileView.superclass.constructor.apply(this,arguments)},getLayersToShake:function(){return Game.stage.view.animationManager.getReelLayers()}};Warlords.WinningSymbolsMobileView=Sys.extend(Warlords.WinningSymbolsView,Warlords.WinningSymbolsMobileView,"Warlords.WinningSymbolsMobileView");Sys.ns("Warlords");Warlords.WinningSymbolsModel={constructor:function(){Warlords.WinningSymbolsModel.superclass.constructor.apply(this,arguments)},renameStackedSymbolsWithProperIndex:function(a){for(var c=0;c<a.length;c++){var d=a[c];for(var b=0;b<d.symbols.length;b++){Warlords.Utils.renameIfStackedSymbol(d.symbols,b)}}},checkReelForStackedSymbolsAndAddThemToArray:function(d,h,j,e,b){for(var g=0;g<d.length;g++){var k=b.indexOf(g);if(k===-1){var c=d[g];var f=e[g];var a=Warlords.Utils.isStackedSymbol(c);if(a&&f===undefined){h.push({x:j,y:g,symbol:c,isInWinSituation:false})}}}},addStackedSymbolsThatAreNotInAWinSituation:function(k,q,n){var p=[];for(var l=0;l<n.length;l++){var m=n[l];if(Warlords.Utils.isStackedSymbol(m.symbol)){var h=k[m.x];var b=h.symbols;var c=h.overlaySymbols;for(var g=0;g<b.length;g++){var e=b[g];var f=c[g];var o=(m.x+":"+g);var d=q[o];var a=Warlords.Utils.isStackedSymbol(e);if(d===undefined&&a&&f===undefined){var r={x:m.x,y:g,symbol:e,isInWinSituation:false};p.push(r);q[o]=r}}}}return n.concat(p)},processServerResponse:function(g){var u=this,h=g.reelInfo,t,n,l,m,k=[],i,q,s=[],o={},p,w=g.wins.winType,c=[],e=Services.settingsManager.getSetting("betLevel"),d=Resources.readData("config").winTypes,r=d.mediumWin.from,j=d.largeWin.from,a=15,f;u.storeData("clientAction",g.clientaction);if(Sys.isDefined(g.wins)&&Sys.isDefined(g.wins.coins)){f=g.wins.coins}u.storeData("coinWin",f);u.multiplier=g.multiplier;u.storeData("betLevel",e);if(Sys.isDefined(u.multiplier)){u.storeData("coinWinBeforeMultiplier",f/u.multiplier)}else{u.storeData("coinWinBeforeMultiplier",f)}var v=Sys.clone(h);u.renameStackedSymbolsWithProperIndex(v);var b=[];if(g.wins&&Sys.isArray(g.wins.winSituations)){Sys.each(g.wins.winSituations,function(y){i=[];if(Sys.isDefined(y.betline)){b.push(y.betline)}Sys.each(y.positions,function(A){t=A.reelIndex;n=A.symbolIndex;l=v[t].symbols;m=v[t].overlaySymbols;var C=false;if(m[n]){p=m[n];C=true}else{p=l[n]}q={x:t,y:n,symbol:p,isInWinSituation:true,isOverlay:C};var B=t+":"+n;if(o[B]===undefined){o[B]=q;s.push(q)}i.push(q);if(Warlords.Utils.isStackedSymbol(p)){u.checkReelForStackedSymbolsAndAddThemToArray(l,i,t,m,[n])}});k.push(i);var x=null;var z=y.wins.coins;if(z<r*a*e){x="smallWin"}else{if(z<j*a*e){x="mediumWin"}else{x="largeWin"}}c.push(x)});s=u.addStackedSymbolsThatAreNotInAWinSituation(v,o,s)}u.storeData("betlines",b);u.storeData("allSymbolsToAnimate",s);u.storeData("symbolsToAnimatePerWinSituations",k);u.storeData("winType",w);u.storeData("winSituationCoinWins",c);u.storeData("clientAction",g.clientaction);if(g.winning){u.storeData("winningScatter",g.winning.scatter)}}};Warlords.WinningSymbolsModel=Sys.extend(Game.Slots.WinningSymbolsModel,Warlords.WinningSymbolsModel,"Warlords.WinningSymbolsModel");Sys.ns("Warlords");Warlords.WinningSymbolsController={constructor:function(){Warlords.WinningSymbolsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:responseParser.responseParsed":a.model.processServerResponse.bind(a.model),"notify:winSituationsDisplay.showingAllWins":a.animateAllWinningSymbols,"notify:winSituationsDisplay.togglingWinSituation":a.animateWinSituationSymbols,"notify:winSituationsDisplay.abort":a.abort,"notify:spin.spinAnimationStarted":a.onSpinAnimationStarted,"notify:settingsManager.settingChanged":a.onSettingsChanged,"notify:bigWin.winPresentationStart":a.hide,"notify:stateHandler.enteringFreeSpinOutroState":a.onEnteringFreeSpinOutroState,"notify:stateHandler.enteringFreeSpinIntroState":a.onEnteringFreeSpinIntroState,"notify:winBanner.finishedForFreeSpin":a.onWinBannerFinished,"view:animationComplete":a.onAnimationComplete,"view:hideSymbol":a.hideSymbol,"view:showSymbol":a.showSymbol,"view:playSound":a.playSound,"view:stopSound":a.stopSound,"view:stackedWin":a.playStackedWinSound,"request:winningSymbols.checkForShake":a.onCheckForShake,"request:winningSymbols.changeFrameScaleToAfterMultiplier":a.onchangeFrameScaleToAfterMultiplier,"request:winningSymbols.runEnvironmentAnimationsAfterMultiplier":a.onRunEnvironmentAnimationsAfterMultiplier,"request:winningSymbols.runSoundAfterMultiplier":a.onRunSoundAfterMultiplier})},initAnimations:function(){this.view.initAnimations();this.initialized=true;this.winTypeBeforeMultiplier="smallWin"},onchangeFrameScaleToAfterMultiplier:function(a){this.view.changeFrameScaleToAfterMultiplier()},onCheckForShake:function(a){var c=this,b=c.model.readData("winType");if(b===c.winTypeBeforeMultiplier){return}c.view.shakeScreen(a)},onWinBannerFinished:function(){this.onAnimationComplete()},playStackedWinSound:function(a){if(a.contains("SYM3")){this.fireEvent("request:audioPlayer.play",{name:"sym3Win"})}else{if(a.contains("SYM4")){this.fireEvent("request:audioPlayer.play",{name:"sym4Win"})}else{if(a.contains("SYM5")){this.fireEvent("request:audioPlayer.play",{name:"sym5Win"})}}}},animateAllWinningSymbols:function(b){var g=this,c=g.model.readData("winType"),i=g.model.readData("coinWinBeforeMultiplier");if(g.model.readData("allSymbolsToAnimate").length>0){g.model.setState("animating");g.fireEvent("request:winSituationsDisplay.waitFor","notify:winningSymbols.animationComplete");g.view.animateAllWinningSymbols(b);var h=Resources.readData("config").winTypes,e=g.model.readData("betLevel"),f=h.mediumWin.from*15*e,d=h.largeWin.from*15*e,a=h.bigWin.from*15*e;if(g.winSoundPlayed){return}if(i>=d){if(i<a||(g.model.readData("winningScatter")==="SYM14"&&g.model.readData("clientAction")==="freespin")){g.fireEvent("request:audioPlayer.play",{name:"largeWin",id:"winClip"});g.fireEvent("request:environmentAnimations.runLargeWinPresentation");g.winTypeBeforeMultiplier="largeWin"}}else{if(i>=f){g.fireEvent("request:audioPlayer.play",{name:"mediumWin",id:"winClip"});g.fireEvent("request:environmentAnimations.runMediumWinPresentation");g.winTypeBeforeMultiplier="mediumWin"}else{g.fireEvent("request:audioPlayer.play",{name:"smallWin",id:"winClip"});g.fireEvent("request:environmentAnimations.runSmallWinPresentation");g.winTypeBeforeMultiplier="smallWin"}}g.winSoundPlayed=true;g.fireEvent("request:betlineIndicators.showBetlineIndicator",g.model.readData("betlines"))}},onRunEnvironmentAnimationsAfterMultiplier:function(){var b=this,a=b.model.readData("winType");if(a===b.winTypeBeforeMultiplier){return}switch(a){case"smallWin":b.fireEvent("request:environmentAnimations.runSmallWinPresentation");break;case"mediumWin":b.fireEvent("request:environmentAnimations.runMediumWinPresentation");break;default:b.fireEvent("request:environmentAnimations.runLargeWinPresentation");break}},onRunSoundAfterMultiplier:function(){var b=this,a=b.model.readData("winType");if(a===b.winTypeBeforeMultiplier){return}switch(a){case"smallWin":b.fireEvent("request:audioPlayer.play",{name:"smallWin",id:"winClip"});break;case"mediumWin":b.fireEvent("request:audioPlayer.play",{name:"mediumWin",id:"winClip"});break;case"largeWin":b.fireEvent("request:audioPlayer.play",{name:"largeWin",id:"winClip"});break}},animateWinSituationSymbols:function(b,f){var d=this,a=d.model.readData("symbolsToAnimatePerWinSituations")[b];if(Sys.isArray(a)&&a.length>0){d.model.setState("animating");d.fireEvent("request:winSituationsDisplay.waitFor","notify:winningSymbols.animationComplete");var e=d.model.readData("winSituationCoinWins");var c=e[b];d.view.animateWinSituationSymbolsWithWinType(a,c,f)}},onSettingsChanged:function(a){if(["betLevel","denomination"].contains(a)&&this.initialized){this.view.resetSymbols()}},onEnteringFreeSpinOutroState:function(){this.view.resetSymbols()},onEnteringFreeSpinIntroState:function(){this.view.resetSymbols()},onSpinAnimationStarted:function(){this.winSoundPlayed=false;this.view.resetSymbols()},abort:function(){this.view.stop();this.view.resetSymbols()},hide:function(){this.view.stop();this.view.resetSymbols()}};Warlords.WinningSymbolsController=Sys.extend(Game.Slots.WinningSymbolsController,Warlords.WinningSymbolsController,"Warlords.WinningSymbolsController");Sys.ns("Warlords");Warlords.BigWinCountUpController={constructor:function(){Warlords.BigWinCountUpController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;Warlords.BigWinCountUpController.superclass.setupEvents.apply(this,arguments);a.on({"request:bigWinCountUp.startFireBallAnimation":a.onStartFireBallAnimation})},onStartFireBallAnimation:function(){this.view.startFireBallAnimation()}};Warlords.BigWinCountUpController=Sys.extend(Core.CountUpController,Warlords.BigWinCountUpController,"Warlords.BigWinCountUpController");Sys.ns("Warlords");Warlords.BigWinCountUpView={SHOW_TOTAL_DURATION:1000,COUNT_UP_TEXT:{style:{font:"BigWinCountFont"},key:"0123456789"},constructor:function(){Warlords.BigWinCountUpView.superclass.constructor.apply(this,arguments)},mapValue:function(a,b,d,e,c){return(a-b)*(c-e)/(d-b)+e},updateCount:function(){var d=this,e=Math.round(d.currentCoinCount)||0,b,c,a,f=d.mapValue(e,0,d.totalCoinWin,d.startScale,d.endScale);d.countUpItem.text=e.toString();d.textContainer.scale.x=f;d.textContainer.scale.y=f;d.countUpItem.updateTransform();d.countUpItem.position.x=-d.countUpItem.textWidth*0.5-5;d.countUpItem.position.y=-d.countUpItem.textHeight*0.5;if(Sys.isDefined(d.fireOnValue)){b=d.fireOnValue.length;for(a=-1;++a<b;){c=d.fireOnValue[a];if(!c.fired&&e>=c.value){c.scope.fireEvent(c.event,c.argument);c.fired=true}}}if(d.fireBallAnimation){d.fireBallAnimation.scale.x=f*1.2;d.fireBallAnimation.scale.y=f*1.2}},initAnimations:function(){var d=this,b=Game.stage.view.animationManager.getLayer("bigWin"),c=Game.stage.model.getSymbolConfiguration(0,0),a=Game.stage.model.getSymbolConfiguration(4,2);d.resolution=Environment.getStageResolution();d.reelArea=new PIXI.Rectangle(c.left,c.top,a.left+a.width-c.left,a.top+a.height-c.top);d.centerOfReelAreaInScreenSpace=new PIXI.Point(d.reelArea.width*0.5+d.reelArea.x,d.reelArea.height*0.5+d.reelArea.y);d.rootContainer=new PIXI.Container();d.textContainer=new PIXI.Container();d.fireBallContainer=new PIXI.Container();d.countUpItem=Game.PIXIFactory.createAndAddBitmapText(d.COUNT_UP_TEXT.key,d.COUNT_UP_TEXT.style,d.textContainer);d.startScale=0.4;d.endScale=1.2;d.startPosition=new PIXI.Point(d.centerOfReelAreaInScreenSpace.x-5,d.centerOfReelAreaInScreenSpace.y+60);d.endPosition=new PIXI.Point(d.centerOfReelAreaInScreenSpace.x-5,d.centerOfReelAreaInScreenSpace.y+d.countUpItem.textHeight*0.5-30);d.countAnimation=d.createCountAnimation();d.endAnimations=d.createEndAnimation();d.rootContainer.addChild(d.fireBallContainer);d.rootContainer.addChild(d.textContainer);b.addChild(d.rootContainer);d.rootContainer.visible=false;d.restoreValues()},createCountAnimation:function(){var b=this,a;a=new Animation.Holder({target:b,prop:"currentCoinCount",onUpdate:b.updateCount.bind(b)});b.currentCoinCount=0;b.fireOnValue=undefined;Game.stage.view.animationManager.addToAnimationLoop(a);return a},createEndAnimation:function(){var b=this,c;var a=new Animation.Holder({target:b.textContainer,prop:"scale"});c={scaleAnim:a};Game.stage.view.animationManager.addToAnimationLoop(a);return c},playEndAnimation:function(){var a=this;a.endAnimations.scaleAnim.animate([{time:0,value:{x:a.textContainer.scale.x,y:a.textContainer.scale.y}},{time:80,value:{x:a.endScale+0.2,y:a.endScale+0.2}},{time:250,value:{x:a.endScale-0.07,y:a.endScale-0.07}},{time:320,value:{x:a.endScale,y:a.endScale}}],true)},setCountUpValues:function(a){var b=this;b.totalCoinWin=a.to;b.updateCount()},startCountAnimation:function(a){var b=this;b.countAnimation.animate([{time:0,value:a.from,support:b.model.readData("easingMethods")[b.COUNT_UP_EASING_TYPE]*a.to,numDecimals:0},{time:a.duration,value:a.to,callback:{func:"view:countUpComplete",scope:b}},{time:a.duration+1,value:a.to},{time:a.duration+2,value:a.to,goTo:2}],true)},startFireBallAnimation:function(){var a=this;if(a.fireBallAnimation===undefined){a.fireBallSpine=Game.PIXIFactory.createAndAddSpineAnimation("fireBallBigWin",a.fireBallContainer);a.fireBallSpine.pivot=new PIXI.Point(a.resolution.width/2,a.resolution.height/2);a.fireBallSpine.position=new PIXI.Point(a.resolution.width/2,a.resolution.height/2);a.fireBallSpine.state.setAnimationByName(0,"FireBall_Start",false);a.fireBallSpine.state.addAnimationByName(0,"FireBall_Loop",true,0);a.fireBallAnimation=a.fireBallSpine}},start:function(a){var b=this;this.setCountUpValues(a);b.rootContainer.visible=true;b.fireOnValue=a.fireEventsOnValue;b.startCountAnimation(a)},restoreValues:function(){var a=this;a.textContainer.scale.x=a.startScale;a.textContainer.scale.y=a.startScale;a.textContainer.position.x=a.startPosition.x;a.textContainer.position.y=a.startPosition.y;a.currentCoinCount=0;a.fireOnValue=undefined},restoreFireBallAnimation:function(){var a=this;if(a.fireBallAnimation){Game.PIXIUtils.resetSpineAnimation(a.fireBallAnimation);a.fireBallAnimation=undefined}var b=a.fireBallContainer.children.length;if(b>0){a.fireBallContainer.removeChildren(0,b)}},stop:function(){var a=this;a.countAnimation.stop();a.rootContainer.visible=false;a.restoreValues();a.restoreFireBallAnimation()},pause:function(){this.countAnimation.pause()},resume:function(){this.countAnimation.play()},showTotal:function(e){var c=this,b,d=[],a;e=e||{};c.countAnimation.stop();c.playEndAnimation();b=c.totalCoinWin;Game.PIXIUtils.resetSpineAnimation(c.fireBallSpine);c.fireBallSpine.state.setAnimationByName(0,"FireBall_Loop",false);Warlords.Utils.Animation.setCurrentTime(c.fireBallSpine,2.85);c.fireOnValue.length=0;c.countAnimation.restore();if(e.showUntilStopped){c.currentCoinCount=c.totalCoinWin;c.updateCount()}else{a=Sys.isDefined(e.showDuration)?e.showDuration:c.SHOW_TOTAL_DURATION;c.countAnimation.animate([{time:0,value:b},{time:a,value:b,callback:{func:"view:showTotalDurationPassed",scope:c}}],true)}}};Warlords.BigWinCountUpView=Sys.extend(Game.Slots.BigWinCountUpView,Warlords.BigWinCountUpView,"Warlords.BigWinCountUpView");Sys.ns("Warlords");Warlords.BigWinModel={SUPPORTED_SUB_TYPES:["bigWin","megaWin","superMegaWin"],SUB_TYPE_LIMITS:{bigWin:{from:0,to:30},megaWin:{from:30,to:60},superMegaWin:{from:60}},COUNT_UP_DURATIONS:{bigWin:8000,megaWin:16000,superMegaWin:24000},SHOW_TOTAL_DURATION:3000,SHOW_ALL_WINS_DURATION:1000,constructor:function(){Warlords.BigWinModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(g){var e=this,b,f=g.clientaction,c=g.currentGameState==="freespin"||g.nextaction==="freespin"||f==="respin";e.storeData("serverResponse",g);e.storeData("clientAction",f);var a=true;if(g.winning){if(g.winning.scatter==="SYM14"&&g.clientaction==="freespin"){a=false}}if(Sys.isDefined(g.wins)&&g.wins.winType==="bigWin"){b=g.wins.coins;e.storeData("coinWin",b);e.determineWinType(b);if(a){e.setState("animationRequested")}e.storeData("togglePreventedByFreeSpins",c);e.storeData("showAllWins",e.shouldShowAllWins(g))}else{e.storeData("coinWin",0);e.storeData("winType",undefined);e.setState("idle")}var d;if(g.winning){d=g.winning.scatter}this.storeData("winningScatter",d);e.multiplier=g.multiplier;e.storeData("betLevel",Services.settingsManager.getSetting("betLevel"));if(Sys.isDefined(e.multiplier)){e.storeData("coinWinBeforeMultiplier",b/e.multiplier);e.storeData("multiplier",e.multiplier)}else{e.storeData("coinWinBeforeMultiplier",b)}},getWinCountUpDuration:function(){var b=this,a=b.readData("winType");return b.COUNT_UP_DURATIONS[a]},shouldShowAllWins:function(a){return a.clientaction!=="respin"}};Warlords.BigWinModel=Sys.extend(Game.Slots.BigWinModel,Warlords.BigWinModel,"Warlords.BigWinModel");Sys.ns("Warlords");Warlords.BigWinView={TEXT_STYLES:{bigWin:Game.TextStyles.BIG_WIN_TEXT,megaWin:Game.TextStyles.MEGA_WIN_TEXT,superMegaWin:Game.TextStyles.SUPER_MEGA_WIN_TEXT},WIN_TEXTS:{bigWin:Language.Keys.bigWin,megaWin:Language.Keys.megaWin,superMegaWin:Language.Keys.superMegaWin},ARROW_TIME_STEPS:{"default":{min:25,max:450},bigWin:{min:15,max:150},megaWin:{min:15,max:125},superMegaWin:{min:15,max:100}},ARROW_MAX_TIME_STEP:200,ARROW_MIN_TIME_STEP:50,ARROW_ANGLES:[0,Math.PI/12,Math.PI/6,5*Math.PI/6,11*Math.PI/12,Math.PI,13*Math.PI/12,7*Math.PI/6,11*Math.PI/6,23*Math.PI/12],ARROW_ANGLES_OFFSET:15,constructor:function(){Warlords.BigWinView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var i=this,o={},d,f,j,e={},n=Game.stage.model.getSymbolConfiguration(0,0),k=Game.stage.model.getSymbolConfiguration(4,2),b=Environment.getStageResolution();i.resolution=b;i.screenCenter=new PIXI.Point(b.width/2,b.height/2);i.reelAreaTopLeft=new PIXI.Point(n.left,n.top);i.reelAreaBottomRight=new PIXI.Point(k.left+k.width,k.top+k.height);i.realArea=new PIXI.Rectangle(i.reelAreaTopLeft.x,i.reelAreaTopLeft.y,i.reelAreaBottomRight.x-i.reelAreaTopLeft.x,i.reelAreaBottomRight.y-i.reelAreaTopLeft.y);i.rootContainer=new PIXI.Container();i.rootContainer.name="BigWinView";i.animationContainer=new PIXI.Container();i.textContainer=new PIXI.Container();i.arrowContainer=new PIXI.Container();i.rootContainer.addChild(i.textContainer);i.rootContainer.addChild(i.arrowContainer);Sys.each(i.model.getSupportedSubTypes(),function(p){f=Services.languageManager.getText(i.WIN_TEXTS[p]);j=Game.PIXIFactory.createAndAddText(f,i.TEXT_STYLES[p],i.textContainer,Warlords.Positions.BIG_WIN_TEXT.position,Warlords.Positions.BIG_WIN_TEXT.anchorPoint);e[p]=j;d=i.createTextWinAnimation(j);d.name="textWinAnimation_"+p;o[p]=d;Game.stage.view.animationManager.addToAnimationLoop(d);d=i.createTextSwitchAnimation(j);d.name="textSwitchAnimation_"+p;o[p+"Switch"]=d;Game.stage.view.animationManager.addToAnimationLoop(d);d=i.createTextEndAnimation(j);d.name="textEndAnimation_"+p;o[p+"End"]=d;Game.stage.view.animationManager.addToAnimationLoop(d)});i.animations=o;i.textSprites=e;var c=20;var m=i.realArea.width-c;var h=i.textSprites.superMegaWin.width;var l=m/h;l=Math.min(1,l);i.textContainer.pivot=i.screenCenter;i.textContainer.position=i.screenCenter;i.textContainer.scale=new PIXI.Point(l,0.7);i.createBigWinAnimation(i.animationContainer);i.restoreAnimations();var g=Game.stage.view.animationManager.getLayer("bigWin");var a=Game.stage.view.animationManager.getLayer("bigWinBackground");g.addChildAt(i.rootContainer,0);a.addChildAt(i.animationContainer,0);i.rootContainer.visible=false;i.animationContainer.visible=false},createBackground:function(a){},createBigWinAnimation:function(a){var h=this;h.bigWinAnimation=Game.PIXIFactory.createAndAddSpineAnimation("bigWin",a);var g=[];var d=[];var c=[];var b=[];var f=h.bigWinAnimation.skeleton.slots;for(var e=0;e<f.length;e++){var j=f[e];if(j.currentSpriteName==="big_win-assets/backLight"){g.push(j)}else{if(j.currentSpriteName==="big_win-assets/backLight_fs1"){d.push(j)}else{if(j.currentSpriteName==="big_win-assets/backLight_fs2"){c.push(j)}else{if(j.currentSpriteName==="big_win-assets/backLight_fs3"){b.push(j)}}}}}h.bigWinAnimation.backLight=g;h.bigWinAnimation.backLight_fs1=d;h.bigWinAnimation.backLight_fs2=c;h.bigWinAnimation.backLight_fs3=b},toggleAnimationSlotsVisibility:function(b,c){for(var a=0;a<b.length;a++){var d=b[a];d.currentSprite.visible=c}},playBigWinAnimation:function(e){var b=this;var a=b.model.readData("winningScatter"),f=b.model.readData("clientAction");b.toggleAnimationSlotsVisibility(b.bigWinAnimation.backLight,(a===undefined||f!=="freespin"));b.toggleAnimationSlotsVisibility(b.bigWinAnimation.backLight_fs1,(a==="SYM13"&&f==="freespin"));b.toggleAnimationSlotsVisibility(b.bigWinAnimation.backLight_fs2,(a==="SYM14"&&f==="freespin"));b.toggleAnimationSlotsVisibility(b.bigWinAnimation.backLight_fs3,(a==="SYM15"&&f==="freespin"));var d=b.model.readData("winType").toLowerCase();var c=b.bigWinAnimation.state.setAnimationByName(0,d,false);b.animationContainer.visible=true;return c},finishBigWinAnimation:function(){var a=this;a.bigWinAnimation.state.setAnimationByName(0,"end",false)},restoreBigWinAnimation:function(){var a=this;Game.PIXIUtils.resetSpineAnimation(a.bigWinAnimation)},stopArrowTriggerAnimation:function(){var a=this;if(a.arrowTriggerAnimation){a.arrowTriggerAnimation.stop();Game.stage.view.animationManager.removeFromAnimationLoop(a.arrowTriggerAnimation);a.arrowTriggerAnimation=undefined}},restoreArrowAnimations:function(){var c=this;this.stopArrowTriggerAnimation();var a=c.arrowContainer.children.length;for(var b=0;b<a;b++){var d=c.arrowContainer.children[b];Game.PIXIUtils.resetSpineAnimation(d)}if(a>0){c.arrowContainer.removeChildren(0,a)}},restoreAnimations:function(){var a=this;Sys.iterate(a.textSprites,function(b,c){c.alpha=0;c.scale.x=0;c.scale.y=0},a);Sys.iterate(a.animations,function(b,c){c.stop();c.restore()},a);a.restoreBigWinAnimation();a.restoreArrowAnimations()},createTextWinAnimation:function(b){var c={target:b.scale,animate:{0:{x:2,y:2},200:{x:1,y:1},250:{x:1.1,y:1.1},300:{x:1,y:1}}};var a={target:b,prop:"alpha",animate:{0:0,100:1,2000:1,3000:1}};var d={children:[c,a]};return new Animation.Holder(d)},createTextSwitchAnimation:function(b){var c={target:b.scale,animate:{0:{x:1,y:1},300:{x:0,y:0}}};var a={target:b,prop:"alpha",animate:[{time:0,value:b.alpha},{time:100,value:0}]};var d={children:[a]};return new Animation.Holder(d)},createTextEndAnimation:function(b){var c={target:b.scale,animate:[{time:0,value:{x:1,y:1}},{time:100,value:{x:2,y:2}},{time:250,value:{x:1,y:1}},{time:this.model.readData("showTotalDuration")-200,value:{x:1,y:1}},{time:this.model.readData("showTotalDuration"),value:{x:0,y:0}}]};var a={target:b,prop:"alpha",animate:[{time:0,value:1},{time:this.model.readData("showTotalDuration")-300,value:1},{time:this.model.readData("showTotalDuration"),value:0}]};var d={children:[c,a]};return new Animation.Holder(d)},createArrowAnimation:function(){var b=this;var c=Game.PIXIFactory.createAndAddSpineAnimation("arrowBigWin",b.arrowContainer);c.pivot=new PIXI.Point(b.resolution.width/2,b.resolution.height/2);c.position=new PIXI.Point(b.resolution.width/2,b.resolution.height/2);var a=Sys.Math.randomIntBetween(0,b.ARROW_ANGLES.length-1);c.rotation=Sys.Math.randomIntBetween(-b.ARROW_ANGLES_OFFSET,b.ARROW_ANGLES_OFFSET)/100+b.ARROW_ANGLES[a];return c},playArrowAnimation:function(){var b=this.createArrowAnimation();var a=b.state.setAnimationByName(0,"animation",false)},playArrowAnimationThatEndsInAFireBall:function(){var c=this;var a=this.createArrowAnimation();var d=a.state.setAnimationByName(0,"animation",false);var b=a.state.getCurrent(0);b.time=b.animation.duration*0.99;d.onEnd=function(){c.fireEvent("view:playFireBallAnimation")}},playArrowsAnimation:function(g){var j=this,d=0,c=j.model.readData("winType");j.increaseArrows(j.ARROW_TIME_STEPS[c]);var f=new Animation.Holder({target:j});var h=[];while(d<g){var e=(d===0)?j.playArrowAnimationThatEndsInAFireBall:j.playArrowAnimation;var b={time:d,callback:{func:e,scope:j}};h.push(b);var a=(d/g);var i=j.ARROW_MAX_TIME_STEP-(j.ARROW_MAX_TIME_STEP-j.ARROW_MIN_TIME_STEP)*a;d+=Math.round(Sys.Math.randomBetween(j.ARROW_MIN_TIME_STEP,i))}f.animate(h,true);Game.stage.view.animationManager.addToAnimationLoop(f);j.arrowTriggerAnimation=f},show:function(a){var b=this,c=b.model.readData("coinWin"),d=b.model.getWinCountUpDuration();a=a||0;b.rootContainer.visible=true;b.doCountUpAnimation(a,c,d);b.playBigWinAnimation(d);if(!Platform.isEdgeBrowser&&!Platform.isIEBrowser){b.playArrowsAnimation(d)}},doCountUpAnimation:function(e,d,c){var b=this,a={from:e,to:d,duration:c,fireEventsOnValue:[]};b.remainingWinTypes=[];Sys.iterate(b.model.readData("winTypeCoinLimits"),function(f,g){a.fireEventsOnValue.push({value:g,event:"view:showWinText",argument:f,scope:b});if(g<=d){b.remainingWinTypes.push(f)}});b.currentlyShowingWin=undefined;b.fireEvent("view:startCountUp",a)},finish:function(){var a=this;a.finishBigWinAnimation();a.stopArrowTriggerAnimation();a.fireEvent("view:playFireBallAnimation");a.fireEvent("view:showTotalInCountUp")},close:function(){var a=this;a.restoreAnimations();a.rootContainer.visible=false;a.animationContainer.visible=false;this.fireEvent("view:hideCountUp")},showWinText:function(d){var f=this,e=f.currentlyShowingWin,g=f.animations[e],a=f.animations[e+"Switch"],b=Sys.isArray(f.animations[d])?f.animations[d]:[f.animations[d]],c;if(e===d){return}if(Sys.isDefined(g)){g.stop()}if(Sys.isDefined(e)&&Sys.isDefined(a)){a=Sys.isArray(a)?a:[a];b=b.concat(a)}f.currentlyShowingWin=d;for(c=0;c<b.length;c++){b[c].play()}f.remainingWinTypes.splice(f.remainingWinTypes.indexOf(d),1);f.fireEvent("view:winLevelChange",d)},increaseArrows:function(a){this.ARROW_MIN_TIME_STEP=a.min;this.ARROW_MAX_TIME_STEP=a.max}};Warlords.BigWinView=Sys.extend(Game.Slots.BigWinView,Warlords.BigWinView,"Warlords.BigWinView");Sys.ns("Warlords");Warlords.BigWinMobileView={TEXT_STYLES:{bigWin:Game.TextStyles.BIG_WIN_TEXT_MOBILE,megaWin:Game.TextStyles.MEGA_WIN_TEXT_MOBILE,superMegaWin:Game.TextStyles.SUPER_MEGA_WIN_TEXT_MOBILE},constructor:function(){Warlords.BigWinMobileView.superclass.constructor.apply(this,arguments)},createOverlay:function(b,a){},initAnimations:function(){var h=this,n={},c,e,i,d={},m=Game.stage.model.getSymbolConfiguration(0,0),j=Game.stage.model.getSymbolConfiguration(4,2),a=Environment.getStageResolution();h.resolution=a;h.screenCenter=new PIXI.Point(a.width/2,a.height/2);h.reelAreaTopLeft=new PIXI.Point(m.left,m.top);h.reelAreaBottomRight=new PIXI.Point(j.left+j.width,j.top+j.height);h.realArea=new PIXI.Rectangle(h.reelAreaTopLeft.x,h.reelAreaTopLeft.y,h.reelAreaBottomRight.x-h.reelAreaTopLeft.x,h.reelAreaBottomRight.y-h.reelAreaTopLeft.y);h.rootContainer=new PIXI.Container();h.rootContainer.name="BigWinView";h.textContainer=new PIXI.Container();h.arrowContainer=new PIXI.Container();h.rootContainer.addChild(h.textContainer);h.rootContainer.addChild(h.arrowContainer);Sys.each(h.model.getSupportedSubTypes(),function(o){e=Services.languageManager.getText(h.WIN_TEXTS[o]);i=Game.PIXIFactory.createAndAddText(e,h.TEXT_STYLES[o],h.textContainer,Warlords.Positions.BIG_WIN_TEXT.position,Warlords.Positions.BIG_WIN_TEXT.anchorPoint);d[o]=i;c=h.createTextWinAnimation(i);c.name="textWinAnimation_"+o;n[o]=c;Game.stage.view.animationManager.addToAnimationLoop(c);c=h.createTextSwitchAnimation(i);c.name="textSwitchAnimation_"+o;n[o+"Switch"]=c;Game.stage.view.animationManager.addToAnimationLoop(c);c=h.createTextEndAnimation(i);c.name="textEndAnimation_"+o;n[o+"End"]=c;Game.stage.view.animationManager.addToAnimationLoop(c)});h.animations=n;h.textSprites=d;var b=20;var l=h.realArea.width-b;var g=h.textSprites.superMegaWin.width;var k=l/g;k=Math.min(1,k);h.textContainer.pivot=h.screenCenter;h.textContainer.position=h.screenCenter;h.textContainer.scale=new PIXI.Point(k,0.7);h.restoreAnimations();var f=Game.stage.view.animationManager.getLayer("bigWin");f.addChildAt(h.rootContainer,0);h.rootContainer.visible=false},show:function(a){var b=this,c=b.model.readData("coinWin"),d=b.model.getWinCountUpDuration();a=a||0;b.rootContainer.visible=true;b.doCountUpAnimation(a,c,d);b.playArrowsAnimation(d)},restoreAnimations:function(){var a=this;Sys.iterate(a.textSprites,function(b,c){c.alpha=0;c.scale.x=0;c.scale.y=0},a);Sys.iterate(a.animations,function(b,c){c.stop();c.restore()},a);a.restoreArrowAnimations()},finish:function(){var a=this;a.fireEvent("view:showTotalInCountUp");a.stopArrowTriggerAnimation();a.fireEvent("view:playFireBallAnimation")},close:function(){var a=this;a.restoreAnimations();a.rootContainer.visible=false;this.fireEvent("view:hideCountUp")}};Warlords.BigWinMobileView=Sys.extend(Warlords.BigWinView,Warlords.BigWinMobileView,"Warlords.BigWinMobileView");Sys.ns("Warlords");Warlords.BigWinController={constructor:function(){Warlords.BigWinController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"view:startCountUp":a.onCountUpStart,"view:showTotalInCountUp":a.onShowTotalRequest,"view:hideCountUp":a.fireEvent.bind(a,"request:bigWinCountUp.stop"),"view:showWinText":a.showWinText,"view:playAudio":a.fireEvent.bind(a,"request:audioPlayer.play"),"view:stopAudio":a.fireEvent.bind(a,"request:audioPlayer.stop"),"view:winLevelChange":a.onWinLevelChange,"view:playFireBallAnimation":a.onPlayFireBallAnimation,"notify:stateHandler.enteringBigWinState":a.onEnteringBigWinState,"notify:bigWinCountUp.countUpComplete":a.finish,"notify:bigWinCountUp.hidden":a.close,"notify:winSituationsDisplay.showingAllWins":a.waitForWinSituationsDisplay,"request:abortPresentation":a.handleUserInput})},onWinLevelChange:function(a){if(a!=="bigWin"){this.fireEvent("request:audioPlayer.play",{name:"bigWinTextChange",loop:false})}if(a==="bigWin"){this.fireEvent("request:environmentAnimations.runBigWinSkyColor")}if(a==="megaWin"){this.fireEvent("request:environmentAnimations.runMegaWinSkyColor")}if(a==="superMegaWin"){this.fireEvent("request:environmentAnimations.runSuperMegaWinSkyColor")}},onUserInputEnd:function(a){if(Sys.UserInputUtils.isCoordinateTarget(Game.stage.getGameContainer(),a)){this.handleUserInput()}},onUserInputStart:function(a){},handleUserInput:function(){var a=this;a.model.storeData("wasAborted",true);if(a.model.isState("showing")){a.finish()}else{if(a.model.isState("finished")){a.close()}else{if(a.model.isState("showingAllWins")){a.fireEvent("request:winSituationsDisplay.abort")}}}},onEnteringBigWinState:function(){var c=this.model.readData("winningScatter"),d=this.model.readData("clientAction"),b=this.model.readData("coinWinBeforeMultiplier"),a=d==="freespin"&&c==="SYM14"?b:undefined;this.show(a)},show:function(c){var g=this,d=g.model.readData("winType"),i=g.model.readData("waitingForExpandingWilds")||0;g.model.storeData("wasAborted",false);g.fireEvent("request:audioPlayer.stop","winBannerCountUp");g.fireEvent("request:settingsWindow.close");g.startListeningToUserInput();g.model.setState("showing");g.fireEvent("notify:bigWin.winPresentationStart",d);if(d==="bigWin"){g.fireEvent("request:environmentAnimations.runBigWinPresentation")}else{if(d==="megaWin"){g.fireEvent("request:environmentAnimations.runMegaWinPresentation")}else{if(d==="superMegaWin"){g.fireEvent("request:environmentAnimations.runSuperMegaWinPresentation")}}}if(Platform.hasWebAudioContext===false){var f=g.model.readData("serverResponse");var a="bigWinLoop";if(f.currentGameState==="freespin"){a="freeSpinBigWinLoop"}g.fireEvent("request:audioPlayer.play",{name:"bigWinStart",id:"bigWinStart",loop:false});g.fireEvent("request:audioPlayer.play",{name:a,id:"bigWinLoop",loop:true})}g.fireEvent("request:audioPlayer.play",{name:"bigWinStart",id:"bigWinStart",loop:false});g.fireEvent("request:audioPlayer.play",{name:"bigWinLoop",id:"bigWinLoop",loop:true});var h=g.model.readData("clientAction");if(h!=="respin"){var b={0:[0,1,2],1:[0,1,2],2:[0,1,2],3:[0,1,2],4:[0,1,2]};g.fireEvent("request:darkenOutcome.start",false,"win")}g.view.show(c);var e=g.model.getWinCountUpDuration();this.fireEvent("request:environmentAnimations.startBackgroundShake",e)},onCountUpStart:function(a){this.fireEvent("request:bigWinCountUp.start",a)},onPlayFireBallAnimation:function(){this.fireEvent("request:bigWinCountUp.startFireBallAnimation")},onShowTotalRequest:function(){var a=this;a.fireEvent("notify:bigWin.showTotalInCountUp");a.fireEvent("request:bigWinCountUp.showTotal",{showDuration:a.model.readData("showTotalDuration")});a.fireEvent("request:coinsField.showWin");a.fireEvent("request:cashField.showWin");a.fireEvent("request:audioPlayer.stop","bigWinLoop");if(Platform.hasWebAudioContext===false){a.fireEvent("request:audioPlayer.play",{name:"bigWinEnd"})}a.fireEvent("request:audioPlayer.play",{name:"bigWinEnd"})},showWinText:function(a){this.view.showWinText(a);this.fireEvent("notify:bigWin.showingWinType",a)},finish:function(){var a=this;a.view.showWinText(a.model.readData("winType"));a.model.setState("finished");a.view.finish();a.fireEvent("request:environmentAnimations.runBigWinEnd");a.fireEvent("request:environmentAnimations.stopBackgroundShake")},close:function(){var b=this;if(b.model.isState("closed")===false){b.model.setState("closed");b.view.close();var c=b.model.readData("clientAction");if(c!=="respin"){var a={0:[0,1,2],1:[0,1,2],2:[0,1,2],3:[0,1,2],4:[0,1,2]};b.fireEvent("request:darkenOutcome.stop",false);b.fireEvent("request:spin.showSymbols",a)}b.fireEvent("request:environmentAnimations.setIdle");if(b.model.readData("showAllWins")){b.model.setState("showingAllWins");b.fireEvent("request:winBanner.animate",0);b.fireEvent("request:winBanner.hide");b.initializeWaitSequence("request:winSituationsDisplay.showAllWins",{showDuration:b.model.readData("showAllWinsDuration")})}else{b.onWaitIsComplete()}}},waitForWinSituationsDisplay:function(){this.onWaitRequested("notify:winSituationsDisplay.finishedShowingAllWins")},onWaitIsComplete:function(){var a=this;a.stopListeningToUserInput();if(a.model.readData("clientAction")==="respin"){a.model.storeData("showAllWins",false)}else{a.model.storeData("showAllWins",true)}a.fireEvent("notify:bigWin.presentationFinished");a.toggleWins()}};Warlords.BigWinController=Sys.extend(Game.Slots.BigWinController,Warlords.BigWinController,"Warlords.BigWinController");var RandomWildFeature={};RandomWildFeature.RandomWildFeature=function(d,c,a){var b=this;b.animations=[];b.sprites=[];b.activeSprites=[];b.mode=d;b.patternDelay=0;b.patternOrder=[];b.container;b.positions=[];b.patternIndex=0;b.fadeInAnimations=[];b.numberOfAnimations=c;b.numberOfSprites=a;b.numberOfActiveAnimations=0;b.FADE_IN_TIME=Warlords.Utils.framesToTime(5);b.onAnimationStart=function(){};b.onAnimationComplete=function(){}};RandomWildFeature.RandomWildFeature.prototype.constructor=RandomWildFeature.RandomWildFeature;RandomWildFeature.RandomWildFeature.prototype.init=function(){this.container=new PIXI.Container()};RandomWildFeature.RandomWildFeature.prototype.addTo=function(a){a.addChild(this.container)};RandomWildFeature.RandomWildFeature.prototype.hide=function(){Warlords.Utils.hide(this.container)};RandomWildFeature.RandomWildFeature.prototype.show=function(){Warlords.Utils.show(this.container)};RandomWildFeature.RandomWildFeature.prototype.addMask=function(a){this.container.mask=a};RandomWildFeature.RandomWildFeature.prototype.reset=function(){for(var a=0;a<this.sprites.length;++a){this.sprites[a].alpha=0}this.numberOfActiveAnimations=0};RandomWildFeature.RandomWildFeature.prototype.configureOutcome=function(a,c){var d=this;d.positions.length=a.length;for(var b=0;b<a.length;++b){var e=Game.stage.model.getSymbolConfiguration(a[b].x,a[b].y);d.positions[b]=new PIXI.Point(e.left,e.top);d.sprites[b].position=d.positions[b];if(Sys.isDefined(d.animations[b])){d.animations[b].position=d.positions[b];++d.numberOfActiveAnimations}}d.patternIndex=c};RandomWildFeature.RandomWildFeature.prototype.play=function(){for(var b=0;b<this.numberOfActiveAnimations;++b){var a=b*this.patternDelay;this.playWildAnimation(this.animations[b],this.mode,a,this.getAnimationNumber,b===this.numberOfActiveAnimations-1,this.sprites,b,this.patternOrder,this.patternIndex)}};RandomWildFeature.RandomWildFeature.prototype.playWildAnimation=function(c,e,d,a,i,g,f,j,b){var h=this;setTimeout(function(){c.state.setAnimationByName(0,e+"_"+a([b,i]),false);h.onAnimationStart()},d);c.state.onEvent=function(l,k){if(k.data.name==="fadein"){if(j.length<4||!i){h.showWildSprites(f)}}};c.state.onComplete=function(){if(i){for(var k=0;k<g.length;++k){g[k].animation=Game.PIXIFactory.createAndAddSpineAnimation("SYM1",g[k]);var l=g[k].animation;l.state.setAnimationByName(0,"sym1_attention",false)}h.onAnimationComplete()}}};RandomWildFeature.RandomWildFeature.prototype.getAnimationNumber=function(a){};RandomWildFeature.RandomWildFeature.prototype.showWildSprites=function(a){};RandomWildFeature.RandomWildFeature.prototype.setup=function(){this.createWildSprites(this.container,this.numberOfSprites,this.sprites,this.fadeInAnimations);this.createWildAnimations(this.container,this.numberOfAnimations,this.animations)};RandomWildFeature.RandomWildFeature.prototype.createWildAnimations=function(a,c,d){for(var b=0;b<c;++b){d.push(Game.PIXIFactory.createAndAddSpineAnimation("randomWildAnimation",a))}};RandomWildFeature.RandomWildFeature.prototype.createWildSprites=function(b,e,f,a){for(var d=0;d<e;++d){var c=Game.PIXIFactory.createAndAddSprite("SYM1",b);c.alpha=0;a.push(Warlords.Utils.createFadeInAnimation(c,this.FADE_IN_TIME,0));f.push(c)}};RandomWildFeature.Hammer=function(){RandomWildFeature.RandomWildFeature.apply(this,["hammer",1,4])};Warlords.Utils.extending(RandomWildFeature.Hammer,RandomWildFeature.RandomWildFeature);RandomWildFeature.Hammer.prototype.init=function(){this.$super.prototype.init.call(this);this.setup()};RandomWildFeature.Hammer.prototype.getAnimationNumber=function(a){return Warlords.Utils.randomInt(1,2)};RandomWildFeature.Hammer.prototype.showWildSprites=function(a){for(var b=0;b<this.sprites.length;++b){this.fadeInAnimations[b].play()}};RandomWildFeature.Arrow=function(){RandomWildFeature.RandomWildFeature.apply(this,["arrows",5,5])};Warlords.Utils.extending(RandomWildFeature.Arrow,RandomWildFeature.RandomWildFeature);RandomWildFeature.Arrow.prototype.init=function(){this.$super.prototype.init.call(this);this.patternDelay=Warlords.Utils.framesToTime(8);this.setup()};RandomWildFeature.Arrow.prototype.getAnimationNumber=function(a){return Warlords.Utils.randomInt(1,2)};RandomWildFeature.Arrow.prototype.configureOutcome=function(a,b){Warlords.Utils.shuffleArray(a);this.$super.prototype.configureOutcome.apply(this,[a,b])};RandomWildFeature.Arrow.prototype.showWildSprites=function(a){this.fadeInAnimations[a].play()};RandomWildFeature.Sword=function(){RandomWildFeature.RandomWildFeature.apply(this,["sword",2,5])};Warlords.Utils.extending(RandomWildFeature.Sword,RandomWildFeature.RandomWildFeature);RandomWildFeature.Sword.prototype.init=function(){this.$super.prototype.init.call(this);this.patternDelay=Warlords.Utils.framesToTime(10);this.setup()};RandomWildFeature.Sword.prototype.getAnimationNumber=function(b){if(b[0]!==8&&b[0]!==9){var a;switch(b[0]){case 0:case 2:a=1;break;case 1:case 3:a=2;break;case 4:case 6:a=3;break;case 5:case 7:a=4;break;case 10:case 11:case 12:a=5;break}return a}else{if(!b[1]){return 1}return 2}};RandomWildFeature.Sword.prototype.configureOutcome=function(a,b){a.sort(function(d,c){return d.y-c.y});this.$super.prototype.configureOutcome.apply(this,[a,b]);if(b<4||b>9){this.patternOrder=[0,1,2];this.numberOfActiveAnimations=1}else{if(b>3&&b<8){this.patternOrder=[0,1];this.numberOfActiveAnimations=1}else{this.patternOrder=[0,2,4,1,2,3];this.numberOfActiveAnimations=2}}};RandomWildFeature.Sword.prototype.showWildSprites=function(a){var d=this,c={};for(var b=0;b<d.patternOrder.length;++b){if(!Sys.isDefined(d.fadeInAnimations[d.patternOrder[b]])){break}if(c[d.patternOrder[b]]){continue}this.showSwordSymbols(b,d.patternOrder);c[d.patternOrder[b]]=true}};RandomWildFeature.Sword.prototype.showSwordSymbols=function(b,a){var d=this,c=b<3?0:d.patternDelay-Warlords.Utils.framesToTime(3);setTimeout(function(){d.fadeInAnimations[a[b]].play()},Warlords.Utils.framesToTime(3)*b+c)};Sys.ns("Warlords");Warlords.RandomWild={constructor:function(){Warlords.RandomWild.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={randomWildAnimation:{state:{name:"RandomWildAnimation",execute:function(c){},waitEvents:{"notify:randomWild.animationCompleted":false}}},validateSpin:{queue:[function(c){if(a.isState("executeRandomWildAnimation")){c.stateHandler.pushState(c.states.randomWildAnimation)}}]}};return b},getMixinDependencies:function(){return["serverResponse","animation"]},getDefaultMVCClasses:function(){return{model:Warlords.RandomWildModel,view:Warlords.RandomWildView,controller:Warlords.RandomWildController}}};Warlords.RandomWild=Sys.extend(Core.Module,Warlords.RandomWild,"Warlords.RandomWild");Sys.ns("Warlords");Warlords.RandomWildModel={constructor:function(){Warlords.RandomWildModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(g){var h=this,a=g.reelInfo,m=[],b=Sys.isDefined(a)?a.length:0,k=g.basefeature,l=g.pattern;for(var f=0;f<b;++f){var c=a[f].overlaySymbols;for(var e=0;e<c.length;++e){var d=c[e];if(d!=="SYM1"){continue}m.push({x:f,y:e})}}if(k){h.storeData("randomWildPositions",m);h.storeData("randomWildMode",k.mode);h.storeData("randomWildPatternIndex",l.index);h.storeData("numReels",b);h.setState("executeRandomWildAnimation")}else{h.setState("idle")}}};Warlords.RandomWildModel=Sys.extend(Core.Model,Warlords.RandomWildModel,"Warlords.RandomWildModel");Sys.ns("Warlords");Warlords.RandomWildView={TIME_BETWEEN_ARROWS:Warlords.Utils.framesToTime(8),TIME_BETWEEN_SWORDS:Warlords.Utils.framesToTime(10),constructor:function(){Warlords.RandomWildView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var c=this,b=Game.stage.view.animationManager.getLayer("wildSymbol"),a=Warlords.Utils.createReelMask();c.wildAnimations=new PIXI.Container();c.wildSymbols=new PIXI.Container();c.wildSymbols.mask=a;c.fadeInAnimations=[];c.arrow=new RandomWildFeature.Arrow();c.sword=new RandomWildFeature.Sword();c.hammer=new RandomWildFeature.Hammer();c.arrow.init();c.sword.init();c.hammer.init();c.arrow.addTo(c.wildAnimations);c.sword.addTo(c.wildAnimations);c.hammer.addTo(c.wildAnimations);c.arrow.addMask(a);c.sword.addMask(a);c.hammer.addMask(a);c.arrow.hide();c.sword.hide();c.hammer.hide();b.addChild(a);b.addChild(c.wildSymbols);b.addChild(c.wildAnimations)},createAndShowWildAnimation:function(b,a,d){var c=this;switch(b){case"ARROW":c.randomFeature=c.arrow;break;case"HAMMER":c.randomFeature=c.hammer;break;case"SWORD":c.randomFeature=c.sword;break}c.randomFeature.show();c.randomFeature.configureOutcome(a,d);c.randomFeature.onAnimationStart=function(){c.fireEvent("view:wildHit",b)};c.randomFeature.onAnimationComplete=function(){c.fireEvent("view:wildAnimationComplete")};c.randomFeature.play();c.fireEvent("view:showingWildSymbols")},removeRandomWilds:function(){this.randomFeature.reset();this.randomFeature.hide()},rollOut:function(c){var d=this,b=d.randomFeature.container.children;if(b.length===0){d.fireEvent("view:rollOutComplete");return}for(var a=0;a<b.length;++a){b[a].y+=c}if(b[0].y>600){d.fireEvent("view:rollOutComplete")}}};Warlords.RandomWildView=Sys.extend(Core.View,Warlords.RandomWildView,"Warlords.RandomWildView");Sys.ns("Warlords");Warlords.RandomWildController={constructor:function(){var a=this;Warlords.RandomWildController.superclass.constructor.apply(this,arguments);a.rollOutReady=false},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringRandomWildAnimationState":a.onEnteringRandomWildAnimationState,"notify:reelList.reelMovedInStartingState":a.onReelMovedInStartingState,"request:spin.startSpin":a.onStartSpin,"view:wildAnimationComplete":a.onWildAnimationComplete,"view:wildHit":a.playWildHitSound,"view:rollOutComplete":a.onRollOutComplete})},playWildHitSound:function(a){var c=this;switch(a){case"SWORD":c.fireEvent("request:audioPlayer.play",{name:"randomWildSword"});break;case"HAMMER":c.fireEvent("request:audioPlayer.play",{name:"randomWildHammer"});break;case"ARROW":var b=Warlords.Utils.randomInt(0,2);if(b===0){c.fireEvent("request:audioPlayer.play",{name:"randomWildArrows1"})}else{if(b===1){c.fireEvent("request:audioPlayer.play",{name:"randomWildArrows2"})}else{c.fireEvent("request:audioPlayer.play",{name:"randomWildArrows3"})}}break}},onEnteringRandomWildAnimationState:function(){var a=this;a.fireEvent("request:spin.activateReelSetWithoutUpdatingSymbols","randomWild","base");setTimeout(function(){a.fireEvent("request:environment.startDarkenBackground")},750);setTimeout(function(){switch(a.model.readData("randomWildMode")){case"ARROW":a.fireEvent("request:audioPlayer.play",{name:"randomWildArrowStart"});break;case"HAMMER":a.fireEvent("request:audioPlayer.play",{name:"randomWildHammerStart"});break;case"SWORD":a.fireEvent("request:audioPlayer.play",{name:"randomWildSwordStart"});break}},2000);setTimeout(function(){a.view.createAndShowWildAnimation(a.model.readData("randomWildMode"),a.model.readData("randomWildPositions"),a.model.readData("randomWildPatternIndex"))},3800);setTimeout(function(){a.fireEvent("request:environment.endDarkenBackground")},4300)},onWildAnimationComplete:function(){var a=this;a.fireEvent("notify:randomWild.animationCompleted");a.model.storeData("randomWildMode",false)},onStartSpin:function(){if(this.model.isState("executeRandomWildAnimation")){this.rollOutReady=true}},onReelMovedInStartingState:function(b,a){var c=this;if(c.rollOutReady&&a==="default_0"){c.view.rollOut(b)}},onRollOutComplete:function(){this.view.removeRandomWilds();this.rollOutReady=false}};Warlords.RandomWildController=Sys.extend(Core.Controller,Warlords.RandomWildController,"Warlords.RandomWildController");Sys.ns("Warlords");Warlords.StickyWild={constructor:function(){Warlords.StickyWild.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["serverResponse","animation"]},getDefaultMVCClasses:function(){return{model:Warlords.StickyWildModel,view:Warlords.StickyWildView,controller:Warlords.StickyWildController}}};Warlords.StickyWild=Sys.extend(Core.Module,Warlords.StickyWild,"Warlords.StickyWild");Warlords.StickyWildModel={constructor:function(){Warlords.StickyWildModel.superclass.constructor.apply(this,arguments)},setupData:function(){this.stickyWildsAdded={};this.storeData("wildOverlaysToAdd",[])},getOverlaysByTypeNotAddedFromReelSet:function(g,k,e){var l=[];var a=Sys.utils.parseReelInfo(g,k);var b=Sys.isDefined(a)?a.length:0;for(var f=0;f<b;++f){var c=a[f].overlaySymbols;for(var j in c){if(c.hasOwnProperty(j)){var d=c[j];if(d===e&&!this.isWildAlreadyAddedAtPosition(f,j)){var h={symbol:d,x:f,y:parseInt(j,10)};l.push(h);this.stickyWildsAdded[f+":"+j]=h}}}}return l},processServerResponse:function(d){var c=[];if(d.currentGameState==="freespin"){var a=[];var b=Warlords.Utils.hasRunFreespin(d);if(b){c=this.getOverlaysByTypeNotAddedFromReelSet(d,"freespin","SYM1")}else{c=this.getOverlaysByTypeNotAddedFromReelSet(d,"respin","SYM15")}}this.storeData("wildOverlaysToAdd",c)},clearStickyWilds:function(){this.stickyWildsAdded={};this.storeData("wildOverlaysToAdd",[])},isWildAlreadyAddedAtPosition:function(b,a){var c=this.stickyWildsAdded[b+":"+a];return(c!==undefined)},parseInitFreespinResponse:function(a){this.processServerResponse(a)}};Warlords.StickyWildModel=Sys.extend(Core.Model,Warlords.StickyWildModel,"Warlords.StickyWildModel");Warlords.StickyWildView={constructor:function(){Warlords.StickyWildView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this,a=Game.stage.view.animationManager.getLayer("scatterAnimation");b.stickyWildOverlayContainer=new PIXI.Container();b.stickyWildOverlayContainer.name="stickyWildOverlayContainer";b.stickyWilds=[];a.addChild(b.stickyWildOverlayContainer)},addStickyWilds:function(k){var g=this,b=Resources.readData("animationImages"),e;for(e=0;e<k.length;++e){var h=k[e];var c=Game.stage.model.getSymbolConfiguration(h.x,h.y);var j=new PIXI.Point(c.left,c.top);var d=new PIXI.Point(0,0);var f=b.SYM1_STICKY;var a=Game.PIXIFactory.createSprite(f,j,d);a.position.x=c.left;a.position.y=c.top;Warlords.StickyWild.stickyWilds[h.x.toString()+h.y.toString()]=true;g.stickyWildOverlayContainer.addChild(a);a.updateTransform()}g.stickyWildOverlayContainer.children.sort(function(l,i){return i.position.x-l.position.x})},removeWilds:function(a){var b=this,c=b.stickyWildOverlayContainer.children.length;a=Sys.isDefined(a)?a:true;if(c>0){b.stickyWildOverlayContainer.removeChildren(0,c)}if(a){b.stickyWilds.length=0}}};Warlords.StickyWild.stickyWilds={};Warlords.StickyWildView=Sys.extend(Core.View,Warlords.StickyWildView,"Warlords.StickyWildView");Warlords.StickyWildController={constructor:function(){var a=this;Warlords.StickyWildController.superclass.constructor.apply(this,arguments);a.rollOutReady=false},setupEvents:function(){var a=this;a.on({"notify:responseParser.freeSpinInitResponseParsed":a.onFreespinInitResponseParsed,"notify:stateHandler.enteringFreeSpinIntroState":a.onEnteringFreeSpinIntroState,"notify:stateHandler.enteringFreeSpinOutroState":a.onEnteringFreeSpinOutroState,"request:stickyWild.addStickyWilds":a.onAddStickyWilds})},clearStickyWilds:function(){this.model.clearStickyWilds();this.view.removeWilds()},onAddStickyWilds:function(){var a=this.model.readData("wildOverlaysToAdd");this.view.addStickyWilds(a)},onEnteringFreeSpinIntroState:function(){var a=this.model.readData("wildOverlaysToAdd");this.view.addStickyWilds(a)},onEnteringFreeSpinOutroState:function(){setTimeout(function(){this.clearStickyWilds()}.bind(this),1100);Warlords.StickyWild.stickyWilds={}},onFreespinInitResponseParsed:function(a){this.model.parseInitFreespinResponse(a)}};Warlords.StickyWildController=Sys.extend(Core.Controller,Warlords.StickyWildController,"Warlords.StickyWildController");Sys.ns("Warlords");Warlords.Scatter={constructor:function(a){Warlords.Scatter.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={scatterInitialWinAnimation:{state:{name:"ScatterInitialWinAnimation",execute:function(c){},waitEvents:{"notify:scatter.scatterInitialWinAnimationComplete":false}}},stopped:{queue:[function(c){if(a.readData("nextAction")==="freespin"&&a.readData("clientAction")!=="freespin"){c.stateHandler.pushState(c.states.scatterInitialWinAnimation)}}]}};return b},getMixinDependencies:function(){return["serverResponse","animation"]},getDefaultMVCClasses:function(){return{model:Warlords.ScatterModel,view:Warlords.ScatterView,controller:Warlords.ScatterController}}};Warlords.Scatter=Sys.extend(Core.Module,Warlords.Scatter,"Warlords.Scatter");Sys.ns("Warlords");Warlords.ScatterModel={constructor:function(){Warlords.ScatterModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(f){var d=this,c,a=f.nextaction,e=f.clientaction;c=d.getScatters(f);if(Sys.isDefined(f.winning)){d.storeData("winningScatter",f.winning.scatter)}if(a==="respin"&&e==="spin"){d.storeData("mainGameScatters",c)}else{if(e==="init"&&a!=="spin"){d.storeData("mainGameScatters",d.getScattersFromBasicReelOnInit(f))}else{if(e==="init"){d.storeData("mainGameScatters",d.getScattersFromInitialReelConfig())}}}if(e==="init"&&a==="freespin"){var b=Warlords.Utils.hasRunFreespin(f);if(b===false){d.storeData("freespinsScatters",d.getScattersFromActiveReel(f))}}d.storeData("scatters",c);d.storeData("nextAction",a);d.storeData("clientAction",e)},getScattersFromInitialReelConfig:function(){var b=Resources.readData("config").reelSets.basic.initial,d=[];if(Sys.isDefined(b)&&Sys.isDefined(b.symbols)){var c=b.symbols;for(var a=0;a<c.length;++a){for(var e=0;e<c[a].length;++e){if(Warlords.Utils.isScatterSymbol(c[a][e])){d.push({symbol:c[a][e],x:a,y:e})}}}}return d},getScattersFromActiveReel:function(h){var f=[],a=Sys.utils.parseReelInfo(h,"respin"),b=Sys.isDefined(a)?a.length:0;for(var d=0;d<b;++d){var g=a[d].overlaySymbols;for(var c=0;c<g.length;++c){var e=g[c];if(e!==undefined){f.push({symbol:e,x:d,y:c})}}}return f},getScattersFromBasicReelOnInit:function(k){var c=k.reelInfo,m=k.rs,d=Sys.isDefined(c)?c.length:0,a=m.i0.r,h,f,b,e,g=[];for(h=0;h<d;++h){var l=a["i"+h];b=l.syms;for(f=0;f<b.length;++f){e=b[f];if(Warlords.Utils.isScatterSymbol(e)){g.push({symbol:e,x:h,y:f})}}}return g},getScatters:function(f){var b=f.nextaction,e=f.clientaction,c=[],h=f.reelInfo,m=f.rs,g=Sys.isDefined(h)?h.length:0,a,o,n,r,q,p;if(e==="init"&&b==="respin"&&Sys.isDefined(m.i2)){var d=m.i2.r;for(q=0;q<g;++q){var s=d["i"+q];var l=Warlords.Utils.hasRunRespin(f);if(l){a=s.syms;for(p=0;p<a.length;++p){o=a[p];if(Warlords.Utils.isScatterSymbol(o)){c.push({symbol:o,x:q,y:p})}}}if(Sys.isDefined(s.overlay)){n=s.overlay;for(var t in n){if(n.hasOwnProperty(t)){r=n[t];if(Warlords.Utils.isScatterSymbol(r["with"])){c.push({symbol:r["with"],x:q,y:r.row})}}}}}}for(q=0;q<g;++q){a=h[q].symbols;n=h[q].overlaySymbols;for(p=0;p<a.length;++p){o=a[p];r=n[p];if(Warlords.Utils.isScatterSymbol(o)){if(e==="init"&&Sys.isDefined(f.winning)&&o!==f.winning.scatter){if(Warlords.Utils.isScatterSymbol(r)){c.push({symbol:r,x:q,y:p})}continue}if(f.currentGameState==="freespin"){if(f.winning.scatter==="SYM15"){var k="freespin";if(Sys.isDefined(f.rs.i0)){k=f.rs.i0.id}if(Warlords.Utils.isOverlaySymbolAddedThisSpin(f,k,q,p)){c.push({symbol:o,x:q,y:p})}}else{c.push({symbol:o,x:q,y:p})}}else{if(!Sys.isDefined(r)||e!=="respin"){c.push({symbol:o,x:q,y:p})}}}}}this.addActiveScatters(c);return c},addActiveScatters:function(c){var b;for(var a=0;a<c.length;++a){b=c[a].x.toString()+c[a].y.toString();if(!Warlords.ScatterModel.activeScatters[b]){Warlords.ScatterModel.activeScatters[b]=true;++Warlords.ScatterModel.activeScatterCount}}},isSameScatter:function(c){var b=c[0].symbol;for(var a=1;a<c.length;++a){if(c[a].symbol!==b){return false}}return true},removeScatters:function(){Warlords.ScatterModel.activeScatterCount=0;Warlords.ScatterModel.activeScatters={}},getScatterCount:function(){return Warlords.ScatterModel.activeScatterCount},reelHasScatter:function(b){var a=Warlords.ScatterModel.activeScatters;return a[b.toString()+"0"]||a[b.toString()+"1"]||a[b.toString()+"2"]}};Warlords.ScatterModel=Sys.extend(Core.Model,Warlords.ScatterModel,"Warlords.ScatterModel");Warlords.ScatterModel.activeScatterCount=0;Warlords.ScatterModel.activeScatters={};Sys.ns("Warlords");Warlords.ScatterView={BETLINE_STEPTIME:60,SCATTER_START_OFFSET:3,constructor:function(a){Warlords.ScatterView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var e=this,c=Game.stage.view.animationManager.getLayer("scatterOverlay"),b=Game.stage.view.animationManager.getLayer("noWinScatterOverlay"),g=Game.stage.view.animationManager.getLayer("fade"),a=Warlords.Utils.createReelMask(),f=Game.stage.model.getSymbolConfiguration(0,0);e.maskExtended=Warlords.Utils.createReelMask(f.top+4,0);e.scatterFrameOverlayContainer=new PIXI.Container();e.scatterFrameOverlayContainer.name="scatterFrameOverlayContainer";e.scatterFrameOverlayContainer.visible=true;e.noWinScatterFrameOverlayContainer=new PIXI.Container();e.noWinScatterFrameOverlayContainer.name="noWinScatterFrameOverlayContainer";e.noWinScatterFrameOverlayContainer.visible=true;b.addChild(e.noWinScatterFrameOverlayContainer);e.scatterOverlayContainer=new PIXI.Container();e.scatterOverlayContainer.name="scatterOverlayContainer";e.scatterOverlayContainer.visible=true;c.addChild(a);c.addChild(e.maskExtended);e.scatterOverlayContainer.mask=a;e.noWinScatterFrameOverlayContainer.mask=a;c.addChild(e.scatterFrameOverlayContainer);c.addChild(e.scatterOverlayContainer);Warlords.Utils.preloadAnimation("SYM13",["sym13_win","sym13_idle","sym13_attention"]);Warlords.Utils.preloadAnimation("SYM14",["sym14_win","sym14_idle","sym14_attention"]);Warlords.Utils.preloadAnimation("SYM15",["sym15_win","sym15_idle","sym15_attention"]);e.scatterOverlays=[];var d=new PIXI.Graphics();d.beginFill(0,1);d.drawRect(0,0,1280,720);d.endFill();d.alpha=0;e.plateFadeInAnimation=Warlords.Utils.createFadeInAnimation(d,500,0,e.fadeIn.bind(e));e.plateFadeOutAnimation=Warlords.Utils.createFadeOutAnimation(d,500);e.fadeContainer=new PIXI.Container();e.fadeContainer.addChild(d);g.addChild(e.fadeContainer)},fadeOut:function(){this.plateFadeInAnimation.play()},fadeIn:function(){var a=this;a.fireEvent("view:fadeOutComplete");a.plateFadeOutAnimation.play()},createSymbolOverlay:function(a){var d=this;var b=Resources.readData("config");var e=b.reelGroups["default"];var f=e.reelLayout;var c={};c.symbolInfo=a;c.symbolContainer=new PIXI.Container();c.symbolAnimation=Game.PIXIFactory.createAndAddSpineAnimation(c.symbolInfo.symbol,c.symbolContainer);c.symbolContainer.position=new PIXI.Point(f[c.symbolInfo.x].left,f.standard.top+(c.symbolInfo.y*f.standard.symbolCenterToCenter));c.genericWinAnimation=Game.PIXIFactory.createAndAddSpineAnimation("genericWinAnimation",c.symbolContainer);c.genericWinAnimation.visible=false;Game.PIXIUtils.resetSpineAnimation(c.symbolAnimation);c.symbolContainer.visible=true;d.scatterOverlayContainer.addChild(c.symbolContainer);c.frameContainer=new PIXI.Container();c.frameContainer.position.x=c.symbolContainer.position.x+98;c.frameContainer.position.y=c.symbolContainer.position.y+97;c.frameAnimation=Game.PIXIFactory.createAndAddSpineAnimation("betlineFrameAnim",c.frameContainer);c.frameAnimation.pivot.x=98;c.frameAnimation.pivot.y=97;c.frameAnimation.scale.x=0.7;c.frameAnimation.scale.y=0.7;Game.PIXIUtils.resetSpineAnimation(c.frameAnimation);c.frameContainer.visible=false;d.scatterFrameOverlayContainer.addChild(c.frameContainer);return c},addScatterOverlay:function(e,b){var d=this;for(var a=0;a<e.length;++a){var c=d.createSymbolOverlay(e[a]);d.scatterOverlays.push(c);if(b===true){d.playScatterAttentionAnimation(c);d.playFrameAnimation(c);d.playFrameScaleUpAnimation(c);c.frameContainer.updateTransform();c.symbolContainer.updateTransform()}else{d.playScatterIdleAnimation(c)}}},endFrameAnimations:function(){var a=this;a.scatterOverlays.forEach(function(c){if(c.frameAnimation.state.tracks.length>0&&c.frameAnimation.state.tracks[0]!==null){var b=c.frameAnimation.state.tracks[0].animation.name;if(b!=="betlineframe_scatter_win"){c.frameAnimation.state.setAnimationByName(0,"betlineframe_scatter_win",false)}}a.noWinScatterFrameOverlayContainer.addChild(c.frameContainer);a.noWinScatterFrameOverlayContainer.addChild(c.symbolContainer)})},playFrameAnimation:function(a){a.frameContainer.visible=true;a.frameAnimation.state.setAnimationByName(0,"betlineframe_initial",false);a.frameAnimation.state.addAnimationByName(0,"betlineframe_loop",true,0)},playFrameScaleUpAnimation:function(b){var c,a={};a[0]={x:0.7,y:0.7};a[150]={x:0.8,y:0.8};c=new Animation.Holder({target:b.frameAnimation,prop:"scale",animate:a});Game.stage.view.animationManager.addToAnimationLoop(c);c.play();b.frameAnimation.visible=true;return c},playFrameScaleUpInitialWinAnimation:function(e,b){var d=this;var f,a={};var c=-(d.BETLINE_STEPTIME*e.symbolInfo.x);a[0]={x:0.8,y:0.8};a[50]={x:0.5,y:0.5};a[200]={x:0.97,y:0.97};a[3000+c]={x:0.97,y:0.97};if(b===true){f=new Animation.Holder({target:e.frameAnimation,prop:"scale",animate:a,onEnd:function(){d.onScatterInitialWinComplete()}})}else{f=new Animation.Holder({target:e.frameAnimation,prop:"scale",animate:a})}Game.stage.view.animationManager.addToAnimationLoop(f);f.play();e.frameContainer.visible=true;return f},onScatterInitialWinComplete:function(){var a=this;a.scatterInitialWinTimers.forEach(function(b){clearTimeout(b)});a.scatterInitialWinTimers=[];a.fireEvent("view:scatterInitialWinComplete")},playScatterAttentionAnimation:function(a){var b=a.symbolInfo.symbol.toLowerCase();a.symbolAnimation.state.setAnimationByName(0,b+"_attention",false);a.symbolAnimation.state.addAnimationByName(0,b+"_idle",true,0)},playScatterIdleAnimation:function(b){var c=b.symbolInfo.symbol.toLowerCase();b.symbolAnimation.state.setAnimationByName(0,c+"_idle",true);var a=Math.random()*this.SCATTER_START_OFFSET;Warlords.Utils.Animation.setCurrentTime(b.symbolAnimation,a)},playGenericWinAnimation:function(a){a.genericWinAnimation.visible=true;var b=a.genericWinAnimation.state.setAnimationByName(0,"win",false);b.onComplete=function(){a.genericWinAnimation.visible=false}},playScatterInitialWinAnimation:function(){var b=this;var a=b.scatterOverlays[0].symbolInfo.symbol;b.scatterInitialWinTimers=[];b.scatterOverlays.forEach(function(d,c){var e=setTimeout(function(){var f=(b.scatterOverlays.length===c+1);b.playScatterAttentionAnimation(d);b.playGenericWinAnimation(d);b.playFrameAnimation(d);b.playFrameScaleUpInitialWinAnimation(d,f)},b.BETLINE_STEPTIME*d.symbolInfo.x);b.scatterInitialWinTimers.push(e)});b.fireEvent("view:playWinSound",a)},convertScatters:function(d){var c=this;var f=[];for(var a=c.scatterOverlays.length-1;a>=0;a--){var b=c.scatterOverlays[a];if(b.symbolInfo.symbol!==d){var e=b.symbolInfo;e.symbol=d;f.push(e);c.scatterOverlayContainer.removeChild(b.symbolContainer);c.scatterFrameOverlayContainer.removeChild(b.frameContainer);c.scatterOverlays.splice(a,1)}}c.addScatterOverlay(f,true)},rollOut:function(a){var b=this;if(b.scatterOverlays.length<1){b.fireEvent("view:rollOutComplete")}else{b.scatterOverlays.forEach(function(d,c){d.symbolContainer.y+=a;d.frameContainer.y+=a;if(c===0&&d.symbolContainer.y>600){b.fireEvent("view:rollOutComplete")}})}},removeScatters:function(){var a=this;a.scatterOverlays.forEach(function(b){b.symbolContainer.parent.removeChild(b.symbolContainer);b.frameContainer.parent.removeChild(b.frameContainer)});a.scatterOverlays=[]},addFrameMask:function(){this.scatterFrameOverlayContainer.mask=this.maskExtended;this.noWinScatterFrameOverlayContainer.mask=this.maskExtended},removeFrameMask:function(){this.scatterFrameOverlayContainer.mask=undefined;this.noWinScatterFrameOverlayContainer.mask=undefined}};Warlords.ScatterView=Sys.extend(Core.View,Warlords.ScatterView,"Warlords.ScatterView");Sys.ns("Warlords");Warlords.ScatterController={constructor:function(a){Warlords.ScatterController.superclass.constructor.apply(this,arguments);this.rollOutReady=false},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringScatterInitialWinAnimationState":a.onEnteringScatterInitialWinAnimationState,"notify:spin.spinAnimationComplete":a.onSpinAnimationComplete,"request:spin.startSpin":a.onStartSpin,"request:scatter.removeScatters":a.onRemoveScatters,"notify:scatter.battleCompleted":a.onBattleCompleted,"notify:reelList.reelMovedInStartingState":a.onReelMovedInStartingState,"view:rollOutComplete":a.onRollOutComplete,"notify:spin.reelStoppedSpinning":a.onReelStopped,"notify:spin.AllIsStopped":a.onAllReelsStopped,"notify:stateHandler.enteringIdleState":a.onIdle,"notify:stateHandler.enteringFreeSpinIntroState":a.onEnteringFreeSpinIntroState,"notify:spin.nearWinEnded":a.nearWinEnded,"request:scatter:endFrameAnimations":a.endFrameAnimations,"request:scatter.addFinalChanceScatter":a.addFinalChanceScatter,"notify:quickStopper.quickStop":a.onQuickStop,"view:scatterInitialWinComplete":a.scatterInitialWinAnimationComplete,"view:playWinSound":a.onPlayWinSound,"view:fadeOutComplete":a.fadeOutComplete})},onPlayWinSound:function(b){var c=this;var a;switch(b){case"SYM13":a="scatterWinPresentation1";break;case"SYM14":a="scatterWinPresentation2";break;case"SYM15":a="scatterWinPresentation3";break;default:a=undefined;break}if(a){c.fireEvent("request:audioPlayer.play",{name:a,id:a})}},onEnteringScatterInitialWinAnimationState:function(){this.view.playScatterInitialWinAnimation();this.fireEvent("request:audioPlayer.stop","respinWin",{from:0.7,to:0.01,time:4});this.fireEvent("request:audioPlayer.stop","respinLoop",{from:0.7,to:0.01,time:4})},scatterInitialWinAnimationComplete:function(){var a=this;if(!Services.orientation.isPortrait()){a.view.fadeOut()}else{this.fireEvent("notify:scatter.scatterInitialWinAnimationComplete")}},fadeOutComplete:function(){this.fireEvent("notify:scatter.scatterInitialWinAnimationComplete")},nearWinEnded:function(){this.endFrameAnimations()},onQuickStop:function(){this.hasQuickstopped=true},addFinalChanceScatter:function(a){this.view.addScatterOverlay(a,true)},endFrameAnimations:function(){var a=this.model.readData("nextAction");if(a!=="respin"){this.view.endFrameAnimations()}},onAllReelsStopped:function(a){var b=this.model.readData("clientAction");if(b!=="respin"){this.endFrameAnimations()}},onReelStopped:function(j){var d=this,f=d.model.readData("scatters"),g=[];var a=[0,1,2,3,4];for(var b=0;b<f.length;++b){if(f[b].x===j){g.push(f[b]);var e={};e[f[b].y]="SYM16";a[j]=e}}d.fireEvent("request:bufferedSpin.setSymbols",a);var h=this.model.readData("nextAction");var c=true;if(g.length>0){if(h!=="respin"){if(this.hasQuickstopped===true){c=false}if(j>2&&f.length<2){c=false}}}if(j===0){d.view.removeFrameMask()}this.view.addScatterOverlay(g,c)},onStartSpin:function(){var c=this,a=c.model.readData("nextAction"),e=c.model.readData("clientAction");this.hasQuickstopped=false;c.view.addFrameMask();if(e==="init"&&a==="respin"){var f=c.model.readData("scatters"),d=[];for(var b=0;b<f.length;++b){d.push(f[b])}c.view.addScatterOverlay(d,true)}if(a==="spin"||e==="freespin"){c.rollOutReady=true;this.model.removeScatters()}if(a==="respin"){c.rollOutReady=false}},onReelMovedInStartingState:function(b,a){var c=this;if(c.rollOutReady&&a==="default_0"){c.view.rollOut(b)}},onRollOutComplete:function(){this.rollOutReady=false;this.removeScatters()},onRemoveScatters:function(){this.removeScatters()},removeScatters:function(){this.view.removeScatters();this.model.storeData("hasMoreScatters",undefined)},onBattleCompleted:function(){this.view.convertScatters(this.model.readData("winningScatter"))},onIdle:function(){var e=this,g=e.model.readData("mainGameScatters");if(!Sys.isDefined(g)||(e.model.readData("clientAction")!=="freespin"&&e.model.readData("clientAction")!=="init")){return}e.model.storeData("mainGameScatters",undefined);var d=[0,1,2,3,4],f=[],c=e.model.readData("winningScatter");for(var b=0;b<g.length;++b){var a={};a[g[b].y]="SYM16";d[g[b].x]=a;g[b].symbol=Sys.isDefined(c)?c:g[b].symbol;f.push(g[b])}e.fireEvent("request:bufferedSpin.setSymbols",d);e.view.addScatterOverlay(f)},onEnteringFreeSpinIntroState:function(){var a=this,b=a.model.readData("freespinsScatters");if(Sys.isDefined(b)){a.model.storeData("freespinsScatters",undefined);a.view.addScatterOverlay(b,true)}}};Warlords.ScatterController=Sys.extend(Core.Controller,Warlords.ScatterController,"Warlords.ScatterController");Sys.ns("Warlords");Warlords.AttentionAnimation={constructor:function(){Warlords.AttentionAnimation.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["animation","serverResponse","trigger","userInput"]},getDefaultMVCClasses:function(){return{model:Warlords.AttentionAnimationModel,view:Warlords.AttentionAnimationView,controller:Warlords.AttentionAnimationController}}};Warlords.AttentionAnimation=Sys.extend(Game.Slots.ReelStopAnimations,Warlords.AttentionAnimation,"Warlords.AttentionAnimation");Sys.ns("Warlords");Warlords.AttentionAnimationController={constructor:function(){Warlords.AttentionAnimationController.superclass.constructor.apply(this,arguments);this.nearWinRiser1Started=false;this.nearWinRiser2Started=false},setupEvents:function(){var a=this;Warlords.AttentionAnimationController.superclass.setupEvents.apply(this,arguments);a.on({"notify:spin.spinAnimationComplete":a.onSpinAnimationComplete,"notify:quickStopper.quickStop":a.onQuickStop,"notify:spin.reelStopBouncingStarted":a.onReelBounce,"view:nearWinFlame":a.playNearWinFlameSound,"request:spin.stopSpin":a.onStopSpin})},onReelBounce:function(e){var d=this,c=d.model.readData("symbolsToAnimateInOutcome"),a=d.model.readData("nextAction"),f=d.model.readData("clientAction");if(a==="respin"&&f==="spin"&&e===3){d.fireEvent("request:audioPlayer.play",{name:"respinWin",id:"respinWin"});d.fireEvent("request:audioPlayer.play",{name:"respinLoop",id:"respinLoop",loop:true})}for(var b=0;b<c[e].length;++b){if(Warlords.Utils.isScatterSymbol(c[e][b].symbol)){if(!d.quickStopped||!d.scatterAttentionPlayed){this.fireEvent("request:audioPlayer.play",{name:"scatterAttention"});if(this.model.isState("nearWin")){this.view.shakeOnScatterLand()}if(d.quickStopped){d.scatterAttentionPlayed=true}}}else{if(c[e][b].symbol==="SYM1"){if(!d.quickStopped&&!d.wildAttentionPlayed){if(e!==4||d.model.readData("coinWin")===0){if(e!==4||Services.settingsManager.getSetting("autoPlayNrSpins")<1){this.fireEvent("request:audioPlayer.play",{name:"wildAttention"})}}if(d.quickStopped){d.wildAttentionPlayed=true}}}}}},playNearWinFlameSound:function(){var b=this,a=Warlords.Utils.randomInt(0,2);if(a===0){b.fireEvent("request:audioPlayer.play",{name:"nearWinFlame1"})}else{if(a===1){b.fireEvent("request:audioPlayer.play",{name:"nearWinFlame2"})}else{b.fireEvent("request:audioPlayer.play",{name:"nearWinFlame3"})}}},ignoreCurrentOutcome:function(d){for(var c=0;c<d.length;c++){var b=d[c];var e=b.model.symbolBuffer;for(var a=0;a<e.length;a++){var f=e[a];if(f.isOutcomeSymbol){f.trailAnimation="ignore"}}}},onUserInputEnd:function(){this.abortAnimationsOnStop=true;if(this.reelsStopped){this.view.toggleContainersVisibility(false);this.view.clearAnimatedSymbols();this.view.abortActiveAnimations()}this.view.dispatchAnimationCompleteEvent();this.stopListeningToUserInput()},onStopSpin:function(){var a=this.model.readData("symbolsToAnimateInOutcome");var d=0;for(var c=1;c<3;++c){for(var b=0;b<a[c].length;++b){if(Warlords.Utils.isScatterSymbol(a[c][b].symbol)){++d;if(d>1){this.fireEvent("request:bufferedSpin.setNearWinState",Core.Slots.ReelGroup.NEAR_WIN_EXTRA);break}}}if(d>1){break}}},onSpinStart:function(){Warlords.AttentionAnimationController.superclass.onSpinStart.apply(this,arguments);var d=this;d.view.clearContainers();d.model.storeData("reelsStopped",[]);d.model.storeData("spinComplete",false);var b=Game.spin.view.reelGroups[0];var c=b.reelLists;d.ignoreCurrentOutcome(c);var a=d.model.readData("nextAction");d.model.storeData("nextActionOnSpinStart",a);if(a==="respin"||a==="freespin"){this.view.animateAttentionTrailOnReels(b)}d.startListeningToUserInput();d.reelsStopped=false;d.abortAnimationsOnStop=false},startNearWinRiser1:function(){this.fireEvent("request:audioPlayer.play",{name:"nearWinRiser1",id:"nearWinRiser1"});this.nearWinRiser1Started=true},startNearWinRiser2:function(){this.fireEvent("request:audioPlayer.play",{name:"nearWinRiser2",id:"nearWinRiser2"});this.nearWinRiser2Started=true},onReelStopped:function(e){Warlords.AttentionAnimationController.superclass.onReelStopped.apply(this,arguments);var d=this.model;this.reelsStopped=true;var g=d.readData("reelsStopped");g.push(e);var b=d.readData("nextActionOnSpinStart");if(e===3){if(this.nearWinRiser2Started){this.stopNearWinSounds()}this.view.stopAnimatingNearWin();this.model.setState(undefined)}var f=this.model.readData("symbolsToAnimateInOutcome");if(this.nearWinStarted&&!this.quickStopped){var h=false;for(var c=0;c<f[e].length;++c){if(Warlords.Utils.isScatterSymbol(f[e][c].symbol)){h=true}}if(h){if(e<3){this.startNearWinRiser2()}this.fireEvent("request:environment.startRespinAnimation",false)}this.nearWinStarted=false}if(this.view.checkForScatterSymbolInterval===undefined&&b==="spin"&&!this.quickStopped){var a=d.readData("reelStopIndexToStartTrailAnimation");if(a===e){var j=Game.spin.view.reelGroups[0];this.startNearWinRiser1();this.nearWinStarted=true;this.model.setState("nearWin")}}if(this.model.isState("nearWin")){this.view.stopAnimatingNearWin();this.view.startAnimatingNearWin(e+1)}this.fireEvent("request:bufferedSpin.setNearWinState",Core.Slots.ReelGroup.NEAR_WIN_REGULAR)},onQuickStop:function(){this.quickStopped=true;this.stopNearWinSounds()},stopNearWinSounds:function(){if(this.nearWinRiser1Started){this.fireEvent("request:audioPlayer.stop","nearWinRiser1",{from:1,to:0.01,time:1});this.nearWinRiser1Started=false}if(this.nearWinRiser2Started){this.fireEvent("request:audioPlayer.stop","nearWinRiser2",{from:1,to:0.01,time:0.2});this.nearWinRiser2Started=false}},onSpinAnimationComplete:function(){this.model.storeData("spinComplete",true);this.view.abortCheckForScatterSymbolInterval();this.view.checkIfAllAnimationsAreComplete();if(this.quickStopped||this.abortAnimationsOnStop||this.model.readData("coinWin")>0||Services.settingsManager.getSetting("autoPlayNrSpins")>0){this.view.toggleContainersVisibility(false);this.view.clearAnimatedSymbols();this.view.dispatchAnimationCompleteEvent();this.view.abortActiveAnimations()}this.nearWinStarted=false;this.quickStopped=false;this.scatterAttentionPlayed=false;this.wildAttentionPlayed=false;this.abortAnimationsOnStop=false;this.stopNearWinSounds()}};Warlords.AttentionAnimationController=Sys.extend(Game.Slots.ReelStopAnimationsController,Warlords.AttentionAnimationController,"Warlords.AttentionAnimationController");Sys.ns("Warlords");Warlords.AttentionAnimationModel={SYMBOLS_TO_ANIMATE:["SYM13","SYM14","SYM15","SYM1"],MINIMUM_COUNT_REQUIREMENT:[0,0,0,0,0],constructor:function(){Warlords.AttentionAnimationModel.superclass.constructor.apply(this,arguments)},setupData:function(){Warlords.AttentionAnimationModel.superclass.setupData.apply(this,arguments);var a=Resources.readData("gameServerInitResponse");this.storeData("nextAction",a.nextaction)},processServerResponse:function(g){var d=this,a=d.SYMBOLS_TO_ANIMATE,c=[],b,f=g.clientaction;Sys.each(g.reelInfo,function(h,i){c.push([]);Sys.each(h.symbols,function(k,j){b=h.overlaySymbols[j];if(a.contains(k)&&!d.isBelowASymbol(k,b)&&!d.isOnlyScatterOnLastReel(k,i,c,f)){if(g.currentGameState==="freespin"&&g.winning.scatter==="SYM15"&&k==="SYM15"){if(d.isStickyWildAddedThisSpin(i,j,g)){c[i].push({symbol:k,symbolIndex:j})}}else{c[i].push({symbol:k,symbolIndex:j})}}})});this.storeData("nextAction",g.nextaction);this.storeData("clientAction",f);this.storeData("nearWinList",g.nearWinList);c=this.applyConditionsDependingOnGameState(c,g.nearWinList);this.calculateLastReelToAnimate(c);this.storeData("symbolsToAnimateInOutcome",c);if(Sys.isDefined(g.wins)&&Sys.isDefined(g.wins.coins)){this.storeData("coinWin",g.wins.coins)}else{this.storeData("coinWin",0)}this.storeData("reelStopIndexToStartTrailAnimation",-1);if(g.nearWinList){var e=g.nearWinList[0];e--;e=Math.max(e,0);this.storeData("reelStopIndexToStartTrailAnimation",e)}},isBelowASymbol:function(b,a){if(!Sys.isDefined(a)){return false}if(a===b){return true}return !Warlords.Utils.isScatterSymbol(b)},isOnlyScatterOnLastReel:function(d,c,b,e){if(c!==3||e!=="spin"||!Warlords.Utils.isScatterSymbol(d)){return false}var a;for(a=0;a<b[1].length;++a){if(Warlords.Utils.isScatterSymbol(b[1][a].symbol)){return false}}for(a=0;a<b[2].length;++a){if(Warlords.Utils.isScatterSymbol(b[2][a].symbol)){return false}}return true},isStickyWildAddedThisSpin:function(c,a,d){var b="freespin";if(Sys.isDefined(d.rs.i0)){b=d.rs.i0.id}return Warlords.Utils.isOverlaySymbolAddedThisSpin(d,b,c,a)},applyConditionsDependingOnGameState:function(d,a){var c=this,b=0;if(a){Sys.each(d,function(e,f){if(e.length>0){if(b<c.MINIMUM_COUNT_REQUIREMENT[f]){e.length=0}b++}})}return d}};Warlords.AttentionAnimationModel=Sys.extend(Game.Slots.ReelStopAnimationsModel,Warlords.AttentionAnimationModel,"Warlords.AttentionAnimationModel");Sys.ns("Warlords");Warlords.AttentionAnimationView={ANIMATION_ID:0,constructor:function(){Warlords.AttentionAnimationView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this;b.rootContainer=new PIXI.Container();b.rootContainer.name="AttentionAnimationView";b.attentionContainer=new PIXI.Container();b.attentionContainer.name="attentionContainer";b.maskedContainer=new PIXI.Container();b.maskedContainer.name="maskedContainer";b.reelMaskGraphics=Warlords.Utils.createReelMask();b.maskedContainer.mask=b.reelMaskGraphics;b.maskedContainer.addChild(b.reelMaskGraphics);b.nearWinContainer=new PIXI.Container();b.rootContainer.addChild(b.maskedContainer);b.rootContainer.addChild(b.attentionContainer);b.rootContainer.addChild(b.nearWinContainer);var a=Game.stage.view.animationManager.getLayer("scatterAnimation");a.addChild(b.rootContainer);b.attentionAnimations=[];b.trailAnimations=[];b.symbolsWithTrails=[];Warlords.Utils.preloadAnimation("attentionTrail",["animation"]);b.nearWinShake=[];Warlords.Utils.createShakeAnimation([Game.stage.view.animationManager.getLayer("background")],b.nearWinShake,2,5,30,true);Warlords.Utils.createShakeAnimation([Game.stage.view.animationManager.getLayer("background")],b.nearWinShake,5,5,30,true);Warlords.Utils.createShakeAnimation([Game.stage.view.animationManager.getLayer("reel")],b.nearWinShake,1,10,30);Warlords.Utils.createShakeAnimation([Game.stage.view.animationManager.getLayer("reel")],b.nearWinShake,1,10,30);Warlords.Utils.createShakeAnimation([Game.stage.view.animationManager.getLayer("background")],b.nearWinShake,1,240,30,true)},getAttentionAnimationName:function(a){return a},shakeOnScatterLand:function(){if(!this.backgroundShaken){this.nearWinShake[0].play();this.nearWinShake[2].play();this.nearWinShake[4].play();this.backgroundShaken=true}else{this.nearWinShake[1].play();this.nearWinShake[3].play()}},animate:function(a,c){this.attentionContainer.visible=true;for(var b=0;b<a.length;++b){this.addSymbolAttentionAnimation(a[b],c)}},addSymbolAttentionAnimation:function(h,g){var e=this,f=Game.stage.model.getSymbolConfiguration(g,h.symbolIndex),a=new PIXI.Point(f.left,f.top);if(h.symbol!=="SYM1"){return}var c=e.getAttentionAnimationName(h.symbol);var d=Game.PIXIFactory.createAndAddSpineAnimation(c,e.attentionContainer,a);d.name=h.symbol+"_"+e.ANIMATION_ID;var b=h.symbol.toLowerCase()+"_attention";e.ANIMATION_ID++;Game.PIXIUtils.resetSpineAnimation(d);d.state.setAnimationByName(0,b,false);d.state.onComplete=function(){Game.PIXIUtils.resetSpineAnimation(d);d.visible=false;e.attentionAnimations.remove(d);if(e.model.readData("spinComplete")){e.checkIfAllAnimationsAreComplete()}};e.attentionAnimations.push(d)},checkSymbolPosition:function(a){return a.position&&a.position>0&&a.position<188},checkSymbolProperties:function(a){return a.trailAnimation===undefined&&Warlords.Utils.SCATTER_SYMBOLS.contains(a.symbol)},animateAttentionTrailOnReels:function(a){var b=this;b.reelGroup=a;b.checkForScatterSymbolInterval=new Animation.Holder({id:"addAttentionTrailOnReelChecker",loop:true,onUpdate:function(){var f=b.reelGroup.reelLists;var h=b.model.readData("reelsStopped");for(var e=0;e<f.length;e++){if(h.indexOf(e)===-1){var d=f[e];var g=d.model.symbolBuffer;for(var c=0;c<g.length;c++){var k=g[c];if(b.checkSymbolPosition(k)&&b.checkSymbolProperties(k)){if(k.isOutcomeSymbol){b.startTrailAnimationOnReel(k,e,k.symbolIndex)}else{b.startTrailAnimationOnReel(k,e)}}}}}}});b.maskedContainer.visible=true;Game.stage.view.animationManager.addToAnimationLoop(b.checkForScatterSymbolInterval);b.checkForScatterSymbolInterval.play()},createTrailAnimationOnReel:function(a,f,b){var e=Game.stage.model.getSymbolConfiguration(f,0);var d=Game.PIXIFactory.createAndAddSpineAnimation("attentionTrail",a);d.name="trail_"+this.ANIMATION_ID;this.ANIMATION_ID++;Game.PIXIUtils.resetSpineAnimation(d);d.x=e.left;var c=26;if(Sys.isDefined(b)){c-=(e.height*(3-b))-8-e.height}d.y=c;this.trailAnimations.push(d);return d},startTrailAnimationOnReel:function(e,d,a){var b=this;if(e.trailAnimation==="ignore"){throw new Error("Should not add a trail animation that has ignore flag!")}b.fireEvent("view:nearWinSymbolPassBy");var c=b.createTrailAnimationOnReel(b.nearWinContainer,d,a);e.trailAnimation=c;b.symbolsWithTrails.push(e);c.state.setAnimationByName(0,"animation",false);Warlords.Utils.Animation.setCurrentTime(c,0.08);c.state.onComplete=function(){Game.PIXIUtils.resetSpineAnimation(c);c.visible=false;b.trailAnimations.remove(c);if(b.model.readData("spinComplete")){b.checkIfAllAnimationsAreComplete()}};b.fireEvent("view:nearWinFlame")},animateNearWin:function(e){var b=this,d=Game.stage.model.getSymbolConfiguration(e,0),a=d.left;var c=Game.PIXIFactory.createAndAddSpineAnimation("attentionTrail",b.nearWinContainer);c.x=a;c.y=26;c.state.setAnimationByName(0,"animation",false);c.state.onComplete=function(){Warlords.Utils.hide(c);b.trailAnimations.remove(c);if(b.model.readData("spinComplete")){b.checkIfAllAnimationsAreComplete()}};b.trailAnimations.push(c)},startAnimatingNearWin:function(b){var a=this;a.animateNearWin(b);a.fireEvent("view:nearWinFlame");a.nearWinTimeout=setTimeout(function(){a.startAnimatingNearWin(b)},1000)},stopAnimatingNearWin:function(){if(Sys.isDefined(this.nearWinTimeout)){clearTimeout(this.nearWinTimeout)}},abortAnimationsInArray:function(b){while(b.length){var a=b.pop();a.state.onComplete()}},abortAttentionAnimations:function(){this.abortAnimationsInArray(this.attentionAnimations)},abortTrailAnimations:function(){this.abortAnimationsInArray(this.trailAnimations)},abortCheckForScatterSymbolInterval:function(){var a=this;if(a.checkForScatterSymbolInterval){a.checkForScatterSymbolInterval.stop();a.checkForScatterSymbolInterval=undefined}},abortActiveAnimations:function(){var a=this;a.abortCheckForScatterSymbolInterval();a.abortTrailAnimations();a.abortAttentionAnimations()},abort:function(){var a=this;a.abortActiveAnimations()},checkIfAllAnimationsAreComplete:function(){var a=this;if(a.attentionAnimations.length===0){a.toggleContainersVisibility(false);a.clearAnimatedSymbols();a.dispatchAnimationCompleteEvent()}},clearAnimatedSymbols:function(){for(var a=0;a<this.symbolsWithTrails.length;a++){var b=this.symbolsWithTrails[a];b.trailAnimation=undefined}},toggleContainersVisibility:function(a){this.attentionContainer.visible=a;this.maskedContainer.visible=a},clearContainers:function(){this.attentionContainer.removeChildren();this.maskedContainer.removeChildren();Warlords.Utils.clearContainer(this.nearWinContainer)},dispatchAnimationCompleteEvent:function(){this.fireEvent("view:animationsComplete");this.backgroundShaken=false;this.nearWinShake[4].stop()}};Warlords.AttentionAnimationView=Sys.extend(Core.View,Warlords.AttentionAnimationView,"Warlords.AttentionAnimationView");Sys.ns("Warlords");Warlords.ScatterBattle={constructor:function(){Warlords.ScatterBattle.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={scatterBattleAnimation:{state:{name:"ScatterBattleAnimation",execute:function(c){},waitEvents:{"notify:scatter.battleAnimationCompleted":false}}},standardWinPresentation:{queue:[function(c){if(a.isState("executeScatterBattleAnimation")){c.stateHandler.pushState(c.states.scatterBattleAnimation)}}]},bigWin:{queue:[function(c){if(a.isState("executeScatterBattleAnimation")){c.stateHandler.pushState(c.states.scatterBattleAnimation)}}]},noWinPresentation:{queue:[function(c){if(a.isState("executeScatterBattleAnimation")){c.stateHandler.pushState(c.states.scatterBattleAnimation)}}]}};return b},getMixinDependencies:function(){return["serverResponse","animation"]},getDefaultMVCClasses:function(){return{model:Warlords.ScatterBattleModel,view:Warlords.ScatterBattleView,controller:Warlords.ScatterBattleController}}};Warlords.ScatterBattle=Sys.extend(Core.Module,Warlords.ScatterBattle,"Warlords.ScatterBattle");Sys.ns("Warlords");Warlords.ScatterBattleView={SCATTER_BATTLE_STRING:"BATTLE",constructor:function(){Warlords.ScatterBattleView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var d=this,b=Game.stage.view.animationManager.getLayer("scatterBattle"),c=Game.stage.view.animationManager.getLayer("scatterSmoke");d.config=Resources.readData("config");var e=d.config.reelGroups["default"];d.numberOfReels=e.numberOfReels;d.reelLayout=e.reelLayout;d.standard=d.reelLayout.standard;d.numberOfOutcomeSymbols=d.standard.numberOfOutcomeSymbols;d.scatterBattleTextContainer=new PIXI.Container();d.scatterBattleTextContainer.visible=true;d.scatterBattleTextContainer.textAnimation=Game.PIXIFactory.createAndAddSpineAnimation("soloMultiplierWinPresentation",d.scatterBattleTextContainer);var g=d.scatterBattleTextContainer.textAnimation.skeleton.findSlot("placeholder");d.shadow=d.scatterBattleTextContainer.textAnimation.skeleton.findSlot("shadowglow");g.currentSprite.texture=PIXI.Texture.EMPTY;g.currentSprite.parent.pivot=new PIXI.Point(0,0);var f=d.SCATTER_BATTLE_STRING;d.scatterBattleText=Game.PIXIFactory.createAndAddText(f,Game.TextStyles.SCATTER_BATTLE_TEXT_STYLE,g.currentSprite.parent,new PIXI.Point(0,0),new PIXI.Point(0.5,0.5));d.shadow.currentSprite.width=d.scatterBattleText.width;d.shadow.currentSprite.alpha=0;d.scatterBattleTextContainer.position.y=20;d.scatterBattleTextContainer.textAnimation.visible=false;d.battleContainer=new PIXI.Container();d.battleContainer.visible=true;d.battleContainer.battleAnimation=Game.PIXIFactory.createAndAddSpineAnimation("scatterBattleAnimation",d.battleContainer);d.battleContainer.battleAnimation.interactive=true;d.battleContainer.battleAnimation.state.setAnimationByName(0,"vs_0",false);var a=d.battleContainer.battleAnimation.state.getCurrent(0);a.time=a.endTime;d.battleContainer.battleAnimation.visible=false;d.smokeContainer=new PIXI.Container();d.smokeContainer.visible=true;d.smokeContainers=d.createSmokeAnimations(d.smokeContainer);b.addChild(d.battleContainer);b.addChild(d.scatterBattleTextContainer);c.addChild(d.smokeContainer);Warlords.Utils.preloadAnimation("scatterBattleAnimation",["vs_0","vs_1","vs_2","vs_3"])},createSmokeAnimations:function(b){var d=this,f=[];for(var a=0;a<d.numberOfReels;a++){f[a]=[];for(var h=0;h<d.numberOfOutcomeSymbols;h++){var e=Game.stage.model.getSymbolConfiguration(a,h),c=new PIXI.Point(e.left,e.top),g=new PIXI.Container();g=Game.PIXIFactory.createAndAddSpineAnimation("scatterSmokeAnimation",g,c);g.visible=false;b.addChild(g);f[a].push(g)}}return f},playFeatureTextAndBattleAnimation:function(c,d){var b=this,a=b.scatterBattleTextContainer.textAnimation;Game.PIXIUtils.resetSpineAnimation(a);a.visible=true;a.state.setAnimationByName(0,"animation",false);a.state.onComplete=function(){Game.PIXIUtils.resetSpineAnimation(a);a.visible=false;b.playBattleAnimation(c,d)}},playBattleAnimation:function(b,e){var a=this,d=a.battleContainer.battleAnimation,c=a.getBattleAnimationID(e);Game.PIXIUtils.resetSpineAnimation(d);d.state.setAnimationByName(0,c,false);d.visible=true;d.updateTransform();d.state.onEvent=function(g,f){if(f.data.name==="ending"){a.fireEvent("view:battleCompleted")}};d.state.onComplete=function(){Game.PIXIUtils.resetSpineAnimation(d);d.visible=false};a.fireEvent("view:playScatterBattleSound")},playSmokeAnimations:function(d){var c=this,b=false;for(var a=0;a<d.length;++a){if(a===d.length-1){b=true}c.playSmokeAnimation(d[a],b)}},playSmokeAnimation:function(c,a){var b=this,d;d=b.smokeContainers[c.x][c.y];d.visible=true;Game.PIXIUtils.resetSpineAnimation(d);d.state.setAnimationByName(0,"animation",false);d.state.onComplete=function(){Game.PIXIUtils.resetSpineAnimation(d);d.visible=false;if(a){b.fireEvent("view:battleAnimationCompleted")}}},getBattleAnimationID:function(c){var a=[];for(var b=0;b<c.length;++b){if(a.indexOf(c[b].symbol)===-1){a.push(c[b].symbol)}}if(a.length===3){return"vs_0"}if(a.indexOf("SYM13")!==-1){if(a.indexOf("SYM14")!==-1){return"vs_1"}else{return"vs_2"}}else{return"vs_3"}}};Warlords.ScatterBattleView=Sys.extend(Core.View,Warlords.ScatterBattleView,"Warlords.ScatterBattleView");Sys.ns("Warlords");Warlords.ScatterBattleController={constructor:function(){Warlords.ScatterBattleController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringScatterBattleAnimationState":a.onEnteringScatterBattleAnimationState,"view:battleCompleted":a.onBattleCompleted,"view:battleAnimationCompleted":a.onBattleAnimationCompleted,"view:playScatterBattleSound":a.onPlayScatterBattleSound})},onEnteringScatterBattleAnimationState:function(){var c=this,b=c.model.readData("winningScatter"),d=c.model.readData("scatters");var a=c.model.readData("gotWinSituations");if(a){c.fireEvent("notify:winSituationsDisplay.showingAllWins",{showDuration:1000,stackedSound:false})}else{c.fireEvent("request:noWinSymbols.animate",false,"win")}c.view.playFeatureTextAndBattleAnimation(b,d);this.fireEvent("request:audioPlayer.play",{name:"scatterBattleTextAnimation"})},onBattleCompleted:function(){this.view.playSmokeAnimations(this.model.readData("scatters"));this.fireEvent("request:audioPlayer.play",{name:"scatterBattleResult"});this.fireEvent("notify:scatter.battleCompleted")},onBattleAnimationCompleted:function(){this.fireEvent("notify:scatter.battleAnimationCompleted")},onPlayScatterBattleSound:function(){this.fireEvent("request:audioPlayer.play",{name:"scatterBattle"});this.fireEvent("notify:winSituationsDisplay.abort")}};Warlords.ScatterBattleController=Sys.extend(Core.Controller,Warlords.ScatterBattleController,"Warlords.ScatterBattleController");Sys.ns("Warlords");Warlords.ScatterBattleModel={constructor:function(){Warlords.ScatterBattleModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(f){var e=this,d,a=f.nextaction;d=e.getScatters(f);e.setState("idle");if(a==="respin"){var c=f.winning.scatter;e.storeData("winningScatter",c);if(!e.isSameScatter(d)){e.setState("executeScatterBattleAnimation")}}e.storeData("scatters",d);var b=false;if(f.wins&&Sys.isArray(f.wins.winSituations)){b=true}e.storeData("gotWinSituations",b)}};Warlords.ScatterBattleModel=Sys.extend(Warlords.ScatterModel,Warlords.ScatterBattleModel,"Warlords.ScatterBattleModel");Sys.ns("Warlords");Warlords.RespinEffects={constructor:function(){Warlords.RespinEffects.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={beforeStopping:{queue:[function(c){if(a.readData("showTextAnimation")){c.stateHandler.pushState(c.states.respinTextAnimation)}}]},respinTextAnimation:{state:{name:"RespinTextAnimation",execute:function(){},waitEvents:{"notify:respinTextAnimation:end":false}}}};return b},getMixinDependencies:function(){return["serverResponse","animation"]},getDefaultMVCClasses:function(){return{view:Warlords.RespinEffectsView,controller:Warlords.RespinEffectsController,model:Warlords.RespinEffectsModel}}};Warlords.RespinEffects=Sys.extend(Core.Module,Warlords.RespinEffects,"Warlords.RespinEffects");Sys.ns("Warlords");Warlords.RespinEffectsModel={constructor:function(){Warlords.RespinEffectsModel.superclass.constructor.apply(this,arguments)},setupData:function(){var d=this,e=Resources.readData("gameServerInitResponseObject");var c=e.gamestate.current;var b=(c==="respin")?"respin":"idel";d.setState(b);var a=false;if(b==="respin"){a=(Warlords.Utils.hasRunRespin(e)===false)}d.storeData("showTextAnimation",a)},processServerResponse:function(e){var c=this;c.storeData("nextAction",e.nextaction);if(e.clientaction==="init"){return}if(e.clientaction==="respin"){if(c.isState("idle")){c.storeData("showTextAnimation",true)}c.setState("respin")}else{c.setState("idle")}var b=c.getScatters(e);var d=false;if(e.nextaction==="respin"){var a=e.winning.scatter;c.storeData("winningScatter",a);if(!c.isSameScatter(b)){d=true}}c.storeData("isScatterBattle",d)},getScatters:function(k){var l=k.clientaction,m=[],b=k.reelInfo,c=Sys.isDefined(b)?b.length:0,a,f,d,e,h,g;for(h=0;h<c;++h){a=b[h].symbols;d=b[h].overlaySymbols;for(g=0;g<a.length;++g){f=a[g];e=d[g];if(Warlords.Utils.isScatterSymbol(f)){if(!Sys.isDefined(e)||l!=="respin"){m.push({symbol:f,x:h,y:g})}}}}return m},isSameScatter:function(c){var b=c[0].symbol;for(var a=1;a<c.length;++a){if(c[a].symbol!==b){return false}}return true}};Warlords.RespinEffectsModel=Sys.extend(Core.Model,Warlords.RespinEffectsModel,"Warlords.RespinEffectsModel");Sys.ns("Warlords");Warlords.RespinEffectsController={constructor:function(){Warlords.RespinEffectsController.superclass.constructor.apply(this,arguments);this.showTextReady=true},setupEvents:function(){var a=this;a.on({"request:spin.startSpin":a.onStartSpin,"notify:stateHandler.enteringRespinTextAnimationState":a.onEnteringRespinTextAnimationState,"view:textAnimationEnded":a.onTextAnimationEnded})},onEnteringRespinTextAnimationState:function(){var a=this;a.view.showRespinText();a.model.storeData("showTextAnimation",false)},onStartSpin:function(){var b=this,a=b.model.readData("nextAction");if(a==="respin"&&b.showTextReady){var c=b.model.readData("isScatterBattle");b.fireEvent("request:darkenOutcome.start",true,"respin",!c);b.showTextReady=false}else{if(a!=="respin"){b.showTextReady=true;b.fireEvent("request:darkenOutcome.stop")}}},onTextAnimationEnded:function(){this.fireEvent("notify:respinTextAnimation:end")}};Warlords.RespinEffectsController=Sys.extend(Core.Controller,Warlords.RespinEffectsController,"Warlords.RespinEffectsController");Sys.ns("Warlords");Warlords.RespinEffectsView={RESPIN_STRING:"RE-SPIN",constructor:function(){Warlords.RespinEffectsView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this,a=Game.stage.view.animationManager.getLayer("splashScreens");b.respinTextContainer=new PIXI.Container();b.respinTextContainer.visible=true;b.respinTextContainer.textAnimation=Game.PIXIFactory.createAndAddSpineAnimation("soloMultiplierWinPresentation",b.respinTextContainer);var d=b.respinTextContainer.textAnimation.skeleton.findSlot("placeholder");b.shadow=b.respinTextContainer.textAnimation.skeleton.findSlot("shadowglow");d.currentSprite.texture=PIXI.Texture.EMPTY;d.currentSprite.parent.pivot=new PIXI.Point(0,0);var c=b.RESPIN_STRING;b.finalChanceText=Game.PIXIFactory.createAndAddText(c,Game.TextStyles.RESPIN_TEXT_STYLE,d.currentSprite.parent,new PIXI.Point(0,0),new PIXI.Point(0.5,0.5));b.shadow.currentSprite.width=b.finalChanceText.width;b.shadow.currentSprite.alpha=0;b.respinTextContainer.textAnimation.visible=false;b.respinTextContainer.position.y=20;a.addChild(b.respinTextContainer)},showRespinText:function(){var b=this,a=b.respinTextContainer.textAnimation;Game.PIXIUtils.resetSpineAnimation(a);a.visible=true;a.state.setAnimationByName(0,"animation",false);a.state.onComplete=function(){Game.PIXIUtils.resetSpineAnimation(a);a.visible=false;b.fireEvent("view:textAnimationEnded")}}};Warlords.RespinEffectsView=Sys.extend(Core.View,Warlords.RespinEffectsView,"Warlords.RespinEffectsView");Sys.ns("Warlords");Warlords.DarkenOutcome={constructor:function(){Warlords.DarkenOutcome.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["serverResponse","animation"]},getDefaultMVCClasses:function(){return{view:Warlords.DarkenOutcomeView,controller:Warlords.DarkenOutcomeController,model:Warlords.DarkenOutcomeModel}}};Warlords.DarkenOutcome=Sys.extend(Core.Module,Warlords.DarkenOutcome,"Warlords.DarkenOutcome");Sys.ns("Warlords");Warlords.DarkenOutcomeModel={constructor:function(){Warlords.DarkenOutcomeModel.superclass.constructor.apply(this,arguments)},setupData:function(){Warlords.DarkenOutcomeModel.superclass.setupData.apply(this,arguments);var a=Resources.readData("gameServerInitResponse");this.storeData("nextAction",a.nextaction)},processServerResponse:function(e){var c=this,a=e.nextaction,d=e.clientaction,b=e.reelInfo;c.storeData("reels",b);c.storeData("nextAction",a);c.storeData("clientAction",d)}};Warlords.DarkenOutcomeModel=Sys.extend(Core.Model,Warlords.DarkenOutcomeModel,"Warlords.DarkenOutcomeModel");Sys.ns("Warlords");Warlords.DarkenOutcomeView={WIN:"win",RESPIN:"respin",OVERLAY_ALPHA:0.5,OVERLAY_FILTER:0.45,WIN_FADE_DURATION:0,RESPIN_FADE_DURATION:300,SYMBOL_GAP:4,constructor:function(){Warlords.DarkenOutcomeView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var c=this,a=Game.stage.view.animationManager.getLayer("darkenedOutcome"),b=Game.stage.view.animationManager.getLayer("noWinSymbols");c.coverTexture=Warlords.Utils.createCoveringTexture();c.config=Resources.readData("config");var d=c.config.reelGroups["default"];c.numberOfReels=d.numberOfReels;c.reelLayout=d.reelLayout;c.standard=c.reelLayout.standard;c.numberOfOutcomeSymbols=c.standard.numberOfOutcomeSymbols;c.darkenContainer=new PIXI.Container();c.darkenContainer.name="darkenContainer";c.noWinSymbolsContainer=new PIXI.Container();c.noWinSymbolsContainer.name="noWinSymbolsContainer";c.reelMaskGraphicsNoWin=Warlords.Utils.createWideReelMask();c.reelMaskGraphicsNoWin.name="reelMaskGraphicsNoWin";b.addChild(c.reelMaskGraphicsNoWin);c.reelMaskGraphicsOutcome=Warlords.Utils.createWideReelMask();c.reelMaskGraphicsOutcome.name="reelMaskGraphicsOutcome";a.addChild(c.reelMaskGraphicsOutcome);c.noWinSymbolsContainer.mask=c.reelMaskGraphicsNoWin;c.darkenContainer.mask=c.reelMaskGraphicsOutcome;c.coverFadeInAnimations=[];c.coverFadeOutAnimations=[];c.coverSprites=[];a.addChild(c.darkenContainer);b.addChild(c.noWinSymbolsContainer)},initSymbols:function(a,c){var b=this;if(c===b.WIN){b.createSymbols(a,b.noWinSymbolsContainer,c)}else{if(c===b.RESPIN){b.createSymbols(a,b.darkenContainer,c)}}},createSymbols:function(l,i,j){var B=this,m=Resources.readData("animationImages"),e=B.model.readData("clientAction"),a=0;if(j===B.WIN){a=B.WIN_FADE_DURATION}else{if(j===B.RESPIN){a=B.RESPIN_FADE_DURATION}}for(var g=B.numberOfReels-1;g>=0;--g){var z=l[g].symbols;var s=l[g].overlaySymbols;for(var f=0;f<B.numberOfOutcomeSymbols;f++){var w=Game.stage.model.getSymbolConfiguration(g,f),k,q,A,o,d,C,t,v,h,n,p,c=Warlords.Utils.usingWebGL();Warlords.Utils.renameIfStackedSymbol(z,f);n=z[f];v=Warlords.Utils.calculateSymbolProperties(w,n,B.standard,B.SYMBOL_GAP);if(s[f]){n=s[f];p=s[f];h=Warlords.Utils.calculateSymbolProperties(w,n,B.standard,B.SYMBOL_GAP);if(n==="SYM1"&&e==="freespin"){n="SYM1_STICKY"}}if(Sys.isDefined(h)){if(v.symbolHeight<h.symbolHeight){v=h}}if(Warlords.Utils.isScatterSymbol(n)&&B.model.readData("nextAction")==="respin"){continue}if(Warlords.Utils.isScatterSymbol(n)===false){k=m[n];q=Game.PIXIFactory.createSprite(k,new PIXI.Point(w.left,w.top));if(n!=="SYM1_STICKY"){i.addChild(q)}}if(n==="SYM1_STICKY"&&c){A=Game.PIXIFactory.createSprite(B.coverTexture,v.symbolPosition);A.width=v.symbolWidth;A.height=v.symbolHeight;A.type="sprite";i.addChild(A);B.coverSprites.push(A);i.addChild(q);o=new Warlords.TotalDarknessFilter();q.filters=[o];o.delta=0.4;o.type="filter";B.coverSprites.push(o)}else{A=Game.PIXIFactory.createSprite(B.coverTexture,v.symbolPosition);A.width=v.symbolWidth;A.height=v.symbolHeight;A.type="sprite";i.addChild(A);B.coverSprites.push(A)}if(a>0){if(g===(B.numberOfReels-1)&&f===(B.numberOfOutcomeSymbols-1)){C=B.dispatchFadeInCompleteEvent.bind(B);t=B.dispatchFadeOutCompleteEvent.bind(B)}var u=c&&n==="SYM1_STICKY"?o:A;var b=B.createCoverFadeInAnimation(u,C,a,n);var r=B.createCoverFadeOutAnimation(u,t,a,n);B.coverFadeInAnimations.push(b);B.coverFadeOutAnimations.push(r);if(n==="SYM1_STICKY"&&c){o.delta=0;A.alpha=0}else{A.alpha=0}}else{if(n==="SYM1_STICKY"&&c){o.delta=B.OVERLAY_FILTER;A.alpha=B.OVERLAY_ALPHA}else{A.alpha=B.OVERLAY_ALPHA}}}}},dispatchFadeInCompleteEvent:function(){this.fireEvent("view:fadeInComplete")},dispatchFadeOutCompleteEvent:function(){this.fireEvent("view:fadeOutComplete")},fadeOutSymbols:function(b){var c=this,a;if(typeof b==="undefined"){b=true}if(b){for(a=0;a<c.coverFadeInAnimations.length;++a){c.coverFadeInAnimations[a].play()}}else{for(a=0;a<c.coverSprites.length;++a){if(c.coverSprites[a].type==="filter"){c.coverSprites[a].delta=c.OVERLAY_FILTER}else{c.coverSprites[a].alpha=c.OVERLAY_ALPHA}}}},fadeInSymbols:function(b){var c=this,a;if(typeof b==="undefined"){b=true}if(b){for(a=0;a<this.coverFadeOutAnimations.length;++a){this.coverFadeOutAnimations[a].play()}}else{for(a=0;a<c.coverSprites.length;++a){if(c.coverSprites[a].type==="filter"){c.coverSprites[a].delta=0}else{c.coverSprites[a].alpha=0}}}},createCoverFadeInAnimation:function(h,a,f,e){var g=this,i,c={},b=Warlords.Utils.usingWebGL()&&e==="SYM1_STICKY"?"delta":"alpha",d=Warlords.Utils.usingWebGL()&&e==="SYM1_STICKY"?g.OVERLAY_FILTER:g.OVERLAY_ALPHA;c[0]=0;c[f]=d;i=new Animation.Holder({target:h,animate:c,prop:b,onEnd:a});Game.stage.view.animationManager.addToAnimationLoop(i);return i},createCoverFadeOutAnimation:function(h,a,f,e){var g=this,i,c={},b=Warlords.Utils.usingWebGL()&&e==="SYM1_STICKY"?"delta":"alpha",d=Warlords.Utils.usingWebGL()&&e==="SYM1_STICKY"?g.OVERLAY_FILTER:g.OVERLAY_ALPHA;c[0]=d;c[f]=0;i=new Animation.Holder({target:h,prop:b,animate:c,onEnd:a});Game.stage.view.animationManager.addToAnimationLoop(i);return i},removeSymbols:function(){var a=this;Warlords.Utils.clearContainer(a.darkenContainer);Warlords.Utils.clearContainer(a.noWinSymbolsContainer);a.coverFadeInAnimations.length=0;a.coverFadeOutAnimations.length=0;a.coverSprites.length=0}};Warlords.DarkenOutcomeView=Sys.extend(Core.View,Warlords.DarkenOutcomeView,"Warlords.DarkenOutcomeView");Sys.ns("Warlords");Warlords.DarkenOutcomeController={constructor:function(){Warlords.DarkenOutcomeController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:winSituationsDisplay.showingAllWins":a.onShowingAllWins,"notify:stateHandler.enteringSpinningState":a.onEnteringSpinningState,"notify:stateHandler.enteringFreeSpinOutroState":a.onEnteringFreeSpinOutroState,"notify:stateHandler.enteringFreeSpinIntroState":a.onEnteringFreeSpinIntroState,"notify:settingsManager.settingChanged":a.onSettingsChanged,"request:noWinSymbols.animate":a.onStart,"request:noWinSymbols.stopAnimate":a.onStop,"request:darkenOutcome.start":a.onStart,"request:darkenOutcome.stop":a.onStop,"request:darkenOutcome.fadeOut":a.fadeOutSymbols,"request:darkenOutcome.fadeIn":a.fadeInSymbols,"view:fadeInComplete":a.onFadeInComplete})},onShowingAllWins:function(a){var b=this,c=false;if(typeof a==="undefined"){a=false}if(b.hasStarted&&a){b.onStop();c=true}b.view.initSymbols(b.model.readData("reels"),b.view.WIN);if(c){b.fadeOutSymbols()}else{b.fadeOutSymbols()}b.fireEvent("request:symbolBuffer.hideOutcomeSymbols");b.hasStarted=true},onEnteringSpinningState:function(){if(this.model.readData("nextAction")==="spin"){this.view.removeSymbols()}},onEnteringFreeSpinOutroState:function(){this.view.removeSymbols()},onEnteringFreeSpinIntroState:function(){this.view.removeSymbols()},onStart:function(a,e,d){var b=this,c=false;if(typeof d==="undefined"){d=true}if(typeof a==="undefined"){a=false}if(b.hasStarted&&a){b.onStop();c=true}b.view.initSymbols(b.model.readData("reels"),e);if(c){b.fadeOutSymbols(d)}else{b.fadeOutSymbols(d)}b.fireEvent("request:symbolBuffer.hideOutcomeSymbols");b.hasStarted=true},onStop:function(){this.view.removeSymbols();this.hasStarted=false},onSettingsChanged:function(a){var b=this.model.readData("clientAction");if(["betLevel","denomination"].contains(a)){if(b==="respin"){this.fadeInSymbols(false)}else{this.view.removeSymbols()}}},onFadeInComplete:function(){this.fireEvent("notify:darkenOutcome.fadeInComplete");this.fireEvent("request:symbolBuffer.showOutcomeSymbols")},fadeInSymbols:function(a){this.view.fadeInSymbols(a)},fadeOutSymbols:function(a){this.view.fadeOutSymbols(a)}};Warlords.DarkenOutcomeController=Sys.extend(Core.Controller,Warlords.DarkenOutcomeController,"Warlords.DarkenOutcomeController");Sys.ns("Warlords");Warlords.FinalChance={constructor:function(){Warlords.FinalChance.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={finalChanceAnimation:{state:{name:"FinalChanceAnimation",execute:function(c){},waitEvents:{"notify:finalChance.animationCompleted":false}}},stopped:{queue:[function(c){if(a.isState("executeFinalChanceAnimation")){c.stateHandler.pushState(c.states.finalChanceAnimation)}}]}};return b},getMixinDependencies:function(){return["serverResponse","animation"]},getDefaultMVCClasses:function(){return{view:Warlords.FinalChanceView,controller:Warlords.FinalChanceController,model:Warlords.FinalChanceModel}}};Warlords.FinalChance=Sys.extend(Core.Module,Warlords.FinalChance,"Warlords.FinalChance");Sys.ns("Warlords");Warlords.FinalChanceView={SYMBOL_GAP:4,FINAL_CHANCE_STRING:"FINAL CHANCE",constructor:function(){Warlords.FinalChanceView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var h=this,g=Game.stage.view.animationManager.getLayer("finalChance"),a=Game.stage.view.animationManager.getLayer("finalChanceTop"),f;h.config=Resources.readData("config");var e=h.config.reelGroups["default"];h.numberOfReels=e.numberOfReels;h.reelLayout=e.reelLayout;h.standard=h.reelLayout.standard;h.numberOfOutcomeSymbols=h.standard.numberOfOutcomeSymbols;h.finalChanceContainerFg=new PIXI.Container();h.finalChanceContainerBg=new PIXI.Container();h.finalChanceContainerBg.animation=Game.PIXIFactory.createAndAddSpineAnimation("finalChanceAnimationBg",h.finalChanceContainerBg);h.finalChanceContainerBg.animation.visible=false;h.finalChanceContainerFg.animation=Game.PIXIFactory.createAndAddSpineAnimation("finalChanceAnimationFg",h.finalChanceContainerFg);h.finalChanceContainerFg.animation.visible=false;h.finalChanceTextContainer=new PIXI.Container();h.finalChanceTextContainer.animation=Game.PIXIFactory.createAndAddSpineAnimation("soloMultiplierWinPresentation",h.finalChanceTextContainer);h.finalChanceTextContainer.animation.visible=false;var j=h.finalChanceTextContainer.animation.skeleton.findSlot("placeholder");h.shadow=h.finalChanceTextContainer.animation.skeleton.findSlot("shadowglow");j.currentSprite.texture=PIXI.Texture.EMPTY;j.currentSprite.parent.pivot=new PIXI.Point(0,0);var l=h.FINAL_CHANCE_STRING;h.finalChanceText=Game.PIXIFactory.createAndAddText(l,Game.TextStyles.FINAL_CHANCE_TEXT_STYLE,j.currentSprite.parent,new PIXI.Point(0,0),new PIXI.Point(0.5,0.5));h.shadow.currentSprite.width=h.finalChanceText.width-100;h.shadow.currentSprite.alpha=0;h.coinWinTextContainer=new PIXI.Container();h.createCoinWinTextAnimation(h.coinWinTextContainer);h.scatterWinContainer=new PIXI.Container();h.rootContainer=new PIXI.Container();h.rootContainer.addChild(h.finalChanceContainerBg);h.rootContainer.addChild(h.coinWinTextContainer);h.rootContainer.addChild(h.scatterWinContainer);h.forgroundContainer=new PIXI.Container();h.forgroundContainer.addChild(h.finalChanceContainerFg);h.finalChanceTextContainer.position.y=20;h.forgroundContainer.addChild(h.finalChanceTextContainer);var c=[h.finalChanceContainerBg.animation],b=Game.stage.view.animationManager.getLayer("darkenedOutcome").children,k=Game.stage.view.animationManager.getLayer("scatterOverlay").children;for(f=0;f<b.length;++f){c.push(b[f])}for(f=0;f<k.length;++f){c.push(k[f])}for(f=0;f<h.coinWinTextContainer.length;++f){c.push(h.coinWinTextContainer[f])}h.shakeAnims=[];Warlords.Utils.createShakeAnimation(c,h.shakeAnims,15,10,15);var m=new PIXI.Graphics(),d=Game.stage.model.getSymbolConfiguration(0,0);m.beginFill();m.drawRect(d.left+4,d.top+4,d.width*5-8,d.height*3-8);m.endFill();g.addChild(h.rootContainer);a.addChild(h.forgroundContainer);Warlords.Utils.preloadAnimation("finalChanceAnimationBg",["animation"]);Warlords.Utils.preloadAnimation("finalChanceAnimationFg",["animation"])},createCoinWinTextAnimation:function(a){var c=this;c.coinWinText=Game.PIXIFactory.createAndAddText(" ",Game.TextStyles.FINAL_CHANCE_COIN_WIN_TEXT,a,new PIXI.Point(0,0),new PIXI.Point(0.5,0.5));var b={};b[0]={x:1,y:1};b[800]={x:1,y:1};b[880]={x:1.2,y:1.2};b[1050]={x:1,y:1};c.coinWinAnimation=new Animation.Holder({target:c.coinWinText,prop:"scale",animate:b});Game.stage.view.animationManager.addToAnimationLoop(c.coinWinAnimation)},showFinalChanceText:function(){var a=this,b=a.finalChanceTextContainer.animation;b.visible=true;Game.PIXIUtils.resetSpineAnimation(b);b.state.setAnimationByName(0,"animation",false);b.state.onComplete=function(){Game.PIXIUtils.resetSpineAnimation(b);a.fireEvent("view:finalChanceTextComplete");b.visible=false}},playFinalChanceAnimation:function(g,j){var i=this,k=i.finalChanceContainerFg.animation,f=i.finalChanceContainerBg.animation,d=i.model.readData("finalChanceScatterPosition"),e=Game.stage.model.getSymbolConfiguration(d.x,d.y),a=Resources.readData("animationImages"),l=i.model.readData("winningScatter"),h=new PIXI.Point(e.left+4,e.top+4),c=i.model.readData("winType"),b;k.visible=true;Game.PIXIUtils.resetSpineAnimation(k);f.visible=true;Game.PIXIUtils.resetSpineAnimation(f);i.finalChanceContainerFg.position=h;i.finalChanceContainerBg.position=h;i.finalChanceContainerBg.mask=i.createMask(j);i.rootContainer.addChild(i.finalChanceContainerBg.mask);if(g==="freespin"){i.scatterWinContainer.position.x=e.left;i.scatterWinContainer.position.y=e.top;k.state.setAnimationByName(0,"animation",false);f.state.setAnimationByName(0,"animation",false);k.state.onEvent=function(o,n){if(n.data.name==="impact"){k.state.onEvent=undefined;for(var m=0;m<i.shakeAnims.length;++m){i.shakeAnims[m].play()}i.fireEvent("view:finalChanceAnimationImpact",[{symbol:l,x:d.x,y:d.y}]);i.fireEvent("view:stopRespinAnimations")}}}else{if(g==="coinwin"){i.updateCoinWinText(e);k.state.setAnimationByName(0,"animation",false);f.state.setAnimationByName(0,"animation",false);k.state.onEvent=function(o,n){if(n.data.name==="impact"){if(!Warlords.Utils.isBigWin(c)){i.showCoinWin();i.coinWinAnimation.play()}else{i.fireEvent("view:finalChanceAnimationComplete")}k.state.onEvent=undefined;i.fireEvent("view:updateTotalWin");for(var m=0;m<i.shakeAnims.length;++m){i.shakeAnims[m].play()}i.fireEvent("view:finalChanceAnimationImpact");i.fireEvent("view:stopRespinAnimations")}}}}k.state.onComplete=function(){if(!Warlords.Utils.isBigWin(c)){i.fireEvent("view:finalChanceAnimationComplete")}k.state.onComplete=undefined}},showCoinWin:function(){Warlords.Utils.show(this.coinWinTextContainer)},createMask:function(c){var j=this,n=new PIXI.Graphics();for(var l=0;l<j.numberOfReels;++l){var b=c[l].symbols;for(var k=0;k<j.numberOfOutcomeSymbols;++k){var e=b[k];if(Warlords.Utils.isScatterSymbol(e)){continue}var d=Game.stage.model.getSymbolConfiguration(l,k);var i=Warlords.Utils.calculateSymbolProperties(d,e,j.standard,j.SYMBOL_GAP);var m=i.symbolHeight;var f=i.symbolWidth;var a=i.symbolPosition.y;var h=i.symbolPosition.x;var g;if(k===0){if(Warlords.Utils.isStackedSymbol(e)){g=Warlords.Utils.getStackedIndex(e);if(g===2||g===3){a+=j.SYMBOL_GAP;m-=j.SYMBOL_GAP}}}else{if(k===2){if(Warlords.Utils.isStackedSymbol(e)){g=Warlords.Utils.getStackedIndex(e);if(g===2||g===1){m-=j.SYMBOL_GAP}}}}n.beginFill(0,0);n.drawRect(h,a,f,m);n.endFill()}}return n},hideAll:function(){this.coinWinTextContainer.visible=false;this.finalChanceContainerFg.animation.visible=false;this.finalChanceContainerBg.animation.visible=false;this.finalChanceContainerBg.removeChild(this.finalChanceContainerBg.mask);this.scatterWinContainer.removeChild(this.scatterWinContainer.animation)},updateCoinWinText:function(c){var b=this,a=new PIXI.Point(c.left+c.width/2,c.top+c.height/2);b.coinWinText.text=b.model.readData("coinWinAmount");b.coinWinTextContainer.position=a}};Warlords.FinalChanceView=Sys.extend(Core.View,Warlords.FinalChanceView,"Warlords.FinalChanceView");Sys.ns("Warlords");Warlords.FinalChanceController={constructor:function(){Warlords.FinalChanceController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringFinalChanceAnimationState":a.onEnteringFinalChanceAnimationState,"view:updateTotalWin":a.onUpdateTotalWin,"view:finalChanceAnimationComplete":a.onFinalChanceAnimationComplete,"view:finalChanceTextComplete":a.onFinalChanceTextComplete,"request:spin.startSpin":a.hideAll,"notify:stateHandler.enteringFreeSpinIntroState":a.hideAll,"notify:settingsManager.settingChanged":a.onSettingsChanged,"view:stopRespinAnimations":a.stopRespinAnimations,"view:finalChanceAnimationImpact":a.onFinalChanceAnimationImpact,"notify:bigWin.presentationFinished":a.showCoinWinAfterBigWin})},showCoinWinAfterBigWin:function(){if(this.model.readData("clientAction")==="respin"){this.view.showCoinWin();this.fireEvent("request:winBanner.updateProgressiveWin")}},onFinalChanceAnimationImpact:function(a){if(Sys.isDefined(a)){this.fireEvent("request:scatter.addFinalChanceScatter",a)}this.fireEvent("request:audioPlayer.stop","respinWin",{from:0.7,to:0.01,time:2});this.fireEvent("request:audioPlayer.stop","respinLoop",{from:0.7,to:0.01,time:2})},stopRespinAnimations:function(){this.fireEvent("request:environmentAnimations.stopRespinAnimations")},onEnteringFinalChanceAnimationState:function(){var a=this;setTimeout(function(){a.fireEvent("request:audioPlayer.play",{name:"finalChanceHit"});a.view.showFinalChanceText()},800)},onUpdateTotalWin:function(){var a=this.model.readData("winType");if(!Warlords.Utils.isBigWin(a)){this.fireEvent("request:coinsField.showWin");this.fireEvent("request:winBanner.updateProgressiveWin")}},onFinalChanceTextComplete:function(){var a=this;setTimeout(function(){a.view.playFinalChanceAnimation(a.model.readData("finalChanceMode"),a.model.readData("storedOutcome"))},800)},onFinalChanceAnimationComplete:function(){var a=this.model.readData("finalChanceMode");this.fireEvent("notify:finalChance.animationCompleted");if(a!=="freespin"){this.fireEvent("request:scatter:endFrameAnimations");this.fireEvent("request:tickerTape.enable")}},hideAll:function(){this.view.hideAll()},onSettingsChanged:function(a){if(["betLevel","denomination"].contains(a)){this.hideAll()}}};Warlords.FinalChanceController=Sys.extend(Core.Controller,Warlords.FinalChanceController,"Warlords.FinalChanceController");Sys.ns("Warlords");Warlords.FinalChanceModel={constructor:function(){Warlords.FinalChanceModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(e){var f=this,j=f.getScatters(e),g=e.nextaction,i=e.clientaction,a=e.reelInfo;f.storeData("clientAction",i);f.setState("idle");if(i==="respin"&&(g==="spin"||g==="freespin"&&f.getScatterCount()===2)){var d;if(g==="spin"){d="coinwin";f.storeData("coinWinAmount",e.wins.coins)}else{if(g==="freespin"){d="freespin"}}var b=e.rs.i0.r,c,k;for(var h in b){if(b.hasOwnProperty(h)){if(Sys.isDefined(b[h].overlay)&&Sys.isDefined(b[h].overlay.i0.finalchance)){c=h.substring(1);k=b[h].overlay.i0.row;break}}}f.storeData("finalChanceScatterPosition",{x:c,y:k});f.storeData("winningScatter",e.winning.scatter);f.storeData("finalChanceMode",d);f.setState("executeFinalChanceAnimation")}if(g==="respin"&&i==="spin"||g==="respin"&&i==="init"){f.storeData("storedOutcome",a)}if(Sys.isDefined(e.wins)){f.storeData("winType",e.wins.winType)}f.storeData("scatters",j)}};Warlords.FinalChanceModel=Sys.extend(Warlords.ScatterModel,Warlords.FinalChanceModel,"Warlords.FinalChanceModel");Sys.ns("Warlords");Warlords.ScatterUnveil={constructor:function(){Warlords.ScatterUnveil.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["serverResponse","animation","userInput","trigger"]},getStateChanges:function(){var a=this.model,b={scatterUnveil:{state:{name:"ScatterUnveil",execute:function(){},waitEvents:{"notify:scatterUnveil.complete":false}}},freeSpinIntro:{queue:[function(c){c.stateHandler.pushState(c.states.scatterUnveil)}]}};return b},getDefaultMVCClasses:function(){return{model:Warlords.ScatterUnveilModel,controller:Warlords.ScatterUnveilController,view:Warlords.ScatterUnveilView}}};Warlords.ScatterUnveil=Sys.extend(Core.Module,Warlords.ScatterUnveil,"Warlords.ScatterUnveil");Sys.ns("Warlords");Warlords.ScatterUnveilController={constructor:function(){Warlords.ScatterUnveilController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringScatterUnveilState":a.onEnteringScatterUnveilState,"notify:responseParser.freeSpinInitResponseParsed":a.onFreespinInitResponseParsed,"notify:coinsField.countUpFreespinsTotalComplete":a.onCountUpFreespinsTotalComplete,"notify:coinsField.countUpMultiplierComplete":a.onCountUpMultiplierComplete,"view:unveilAnimationsComplete":a.onUnveilAnimationsComplete,"view:rollOutComplete":a.onRollOutComplete})},onEnteringScatterUnveilState:function(){var b=this,c=this.model.readData("scatters"),a=b.model.readData("winningScatter");if(c.length>0){if(a!=="SYM15"){b.addListener("notify:reelList.reelMovedInStartingState",b.onReelMovedInStartingState)}b.delayTimeOut=setTimeout(function(){b.delayTimeOut=undefined;b.startUnveilAnimations(c,a)},500);b.startListeningToUserInput()}else{b.dispatchStateCompleteEvent()}},startUnveilAnimations:function(c,b){var a=this;a.fireEvent("request:scatter.removeScatters");a.view.runUnveilAnimations(c,(b==="SYM15"));a.playUnveilSound(b)},onUserInputEnd:function(){var b=this;b.stopListeningToUserInput();var a=b.model.readData("winningScatter");if(b.delayTimeOut!==undefined){clearTimeout(b.delayTimeOut);b.delayTimeOut=undefined;var c=this.model.readData("scatters");b.startUnveilAnimations(c,a)}b.view.abortScatterWinPresentation((a==="SYM15"))},onFreespinInitResponseParsed:function(a){this.model.parseInitFreespinResponse(a)},onUnveilAnimationsComplete:function(){this.stopListeningToUserInput();var a=this.model.readData("winningScatter");if(a==="SYM15"){this.fireEvent("request:stickyWild.addStickyWilds");this.dispatchStateCompleteEvent()}else{if(a==="SYM14"){this.fireEvent("request:coinsField.countUpMultiplier")}else{if(a==="SYM13"){this.fireEvent("request:coinsField.countUpFreespinsTotal")}}}},onCountUpFreespinsTotalComplete:function(){this.dispatchStateCompleteEvent()},onCountUpMultiplierComplete:function(){this.dispatchStateCompleteEvent()},dispatchStateCompleteEvent:function(){this.fireEvent("notify:scatterUnveil.complete")},onReelMovedInStartingState:function(b,a){var c=this;if(a==="default_0"){c.view.rollOut(b)}},onRollOutComplete:function(){this.removeListener("notify:reelList.reelMovedInStartingState")},playUnveilSound:function(a){switch(a){case"SYM13":this.fireEvent("request:audioPlayer.play",{name:"scatterUnveil1"});break;case"SYM14":this.fireEvent("request:audioPlayer.play",{name:"scatterUnveil2"});break;case"SYM15":this.fireEvent("request:audioPlayer.play",{name:"scatterUnveil3"});break}}};Warlords.ScatterUnveilController=Sys.extend(Core.Controller,Warlords.ScatterUnveilController,"Warlords.ScatterUnveilController");Sys.ns("Warlords");Warlords.ScatterUnveilModel={constructor:function(){Warlords.ScatterUnveilModel.superclass.constructor.apply(this,arguments)},setupData:function(){Warlords.ScatterUnveilModel.superclass.setupData.apply(this,arguments);var c=Resources.readData("gameServerInitResponseObject");var b=[];var a=Warlords.Utils.hasRunFreespin(c);if(a===false&&c.nextaction==="freespin"){b=this.getScattersToUnveil(c)}this.storeData("scatters",b)},processServerResponse:function(b){var a="";if(b.winning){a=b.winning.scatter}this.storeData("winningScatter",a)},getScattersToUnveil:function(h){var b=[];var a=Sys.utils.parseReelInfo(h,"respin");var c=a.length;for(var e=0;e<c;++e){var g=a[e].overlaySymbols;for(var d=0;d<g.length;++d){var f=g[d];if(Warlords.Utils.isScatterSymbol(f)){b.push({symbol:f,x:e,y:d})}}}return b},parseInitFreespinResponse:function(d){var c="";if(d.winning){c=d.winning.scatter}this.storeData("winningScatter",c);var b=[];var a=Warlords.Utils.hasRunFreespin(d);if(a===false){b=this.getScattersToUnveil(d)}this.storeData("scatters",b)}};Warlords.ScatterUnveilModel=Sys.extend(Core.Model,Warlords.ScatterUnveilModel,"Warlords.ScatterUnveilModel");Sys.ns("Warlords");Warlords.ScatterUnveilView={ANIMATION_ID:0,FIRE_ANIMATION_NAME:"betlineFrameAnim",FIRE_X_OFFSET:98,FIRE_Y_OFFSET:97,constructor:function(){Warlords.ScatterUnveilView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this,a=Game.stage.view.animationManager.getLayer("scatterUnveil");b.scatterUnveilContainer=new PIXI.Container();b.scatterUnveilContainer.name="scatterUnveilContainer";b.fireAnimContainer=new PIXI.Container();b.scatterUnveilContainer.addChild(b.fireAnimContainer);b.symbolContainer=new PIXI.Container();b.scatterUnveilContainer.addChild(b.symbolContainer);b.animationContainer=new PIXI.Container();b.scatterUnveilContainer.addChild(b.animationContainer);b.mask=Warlords.Utils.createWideReelMask();b.mask.alpha=0;b.scatterUnveilContainer.addChild(b.mask);a.addChild(b.scatterUnveilContainer)},runUnveilAnimations:function(h,j){var s=this;var p=0;var d=h.length;var n=Resources.readData("animationImages");s.animationContainer.mask=undefined;var k=s.model.readData("winningScatter");for(var o=d-1;o>=0;o--){var f=h[o];var r=Game.stage.model.getSymbolConfiguration(f.x,f.y);var m=new PIXI.Point(r.left,r.top);if(f.symbol!==k){console.warn("Got different scatter type from overlay and winning scatter. overlay:"+f.symbol+" winning scatter:"+k)}var l=n[k];var a=Game.PIXIFactory.createSprite(l,new PIXI.Point(r.left,r.top));s.symbolContainer.addChild(a);var q=s.getUnveilAnimationNameFromSymbol(k);var c=Game.PIXIFactory.createAndAddSpineAnimation(q,s.animationContainer,m);c.name=k+"_unveil_"+s.ANIMATION_ID;s.ANIMATION_ID++;var b=k.toLowerCase()+"_win";Game.PIXIUtils.resetSpineAnimation(c);c.state.setAnimationByName(0,b,false);var g=(o===p);if(j){c.state.onComplete=s.resetAnimation.bind(s,c,g)}else{c.state.onComplete=s.keepAnimationForRollOut.bind(s,c,g)}var e=Game.PIXIFactory.createAndAddSpineAnimation(s.FIRE_ANIMATION_NAME,s.fireAnimContainer,m);e.pivot.x=s.FIRE_X_OFFSET;e.pivot.y=s.FIRE_Y_OFFSET;e.position.x+=s.FIRE_X_OFFSET;e.position.y+=s.FIRE_Y_OFFSET;e.state.setAnimationByName(0,"betlineframe_scatter_win",false);e.state.onComplete=s.resetFireAnimation.bind(s,e,g)}},resetAnimation:function(b,a){if(a){this.clearContainer();this.fireEvent("view:unveilAnimationsComplete")}Game.PIXIUtils.resetSpineAnimation(b);b.visible=false},abortScatterWinPresentation:function(g){var l=this;var m=l.animationContainer.children;var a=m.length;for(var h=0;h<a;h++){var d=m[h];var b=d.state.getCurrent(0);b.time=b.endTime}var e=l.fireAnimContainer.children;var k=e.length;for(var f=0;f<k;f++){var c=e[f];Game.PIXIUtils.resetSpineAnimation(c)}if(g){l.clearAllContainers();l.fireEvent("view:unveilAnimationsComplete")}else{l.clearFireContainer()}},resetFireAnimation:function(b,a){if(a){this.clearFireContainer()}Game.PIXIUtils.resetSpineAnimation(b);b.visible=false},keepAnimationForRollOut:function(b,a){if(a){this.fireEvent("view:unveilAnimationsComplete")}},rollOut:function(c){var d=this,b=d.animationContainer.children;if(b.length===0){d.fireEvent("view:rollOutComplete");return}if(d.animationContainer.mask===undefined){d.animationContainer.mask=d.mask}for(var a=0;a<b.length;++a){b[a].y+=c}if(b[0].y>600){d.fireEvent("view:rollOutComplete");d.clearContainer()}},getUnveilAnimationNameFromSymbol:function(a){return a},clearFireContainer:function(){this.fireAnimContainer.removeChildren();this.symbolContainer.removeChildren()},clearContainer:function(){this.animationContainer.removeChildren()},clearAllContainers:function(){this.fireAnimContainer.removeChildren();this.symbolContainer.removeChildren();this.animationContainer.removeChildren()}};Warlords.ScatterUnveilView=Sys.extend(Core.View,Warlords.ScatterUnveilView,"Warlords.ScatterUnveilView");Sys.ns("Warlords");Warlords.ScatterWin={constructor:function(){Warlords.ScatterWin.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return["serverResponse","animation","userInput","trigger"]},getStateChanges:function(){var a=this.model,b={scatterWin:{state:{name:"ScatterWin",execute:function(){},waitEvents:{"notify:scatterWin.complete":false}}},stopped:{queue:[function(c){if(a.readData("shouldRunScatterWin")){c.stateHandler.pushState(c.states.scatterWin)}}]}};return b},getDefaultMVCClasses:function(){return{model:Warlords.ScatterWinModel,controller:Warlords.ScatterWinController,view:Warlords.ScatterWinView}}};Warlords.ScatterWin=Sys.extend(Core.Module,Warlords.ScatterWin,"Warlords.ScatterWin");Sys.ns("Warlords");Warlords.ScatterWinController={constructor:function(){Warlords.ScatterWinController.superclass.constructor.apply(this,arguments);this.rollOutReady=false},setupEvents:function(){var a=this;a.on({"notify:gameModeChanged":a.onGameModeChanged,"notify:stateHandler.enteringScatterWinState":a.onEnteringScatterWinState,"notify:responseParser.freeSpinInitResponseParsed":a.onFreespinInitResponseParsed,"notify:stateHandler.enteringFreeSpinOutroState":a.onEnteringFreespinOutro,"notify:coinsField.countUpFreespinsTotalComplete":a.onCountUpFreespinsTotalComplete,"notify:coinsField.countUpMultiplierComplete":a.onCountUpMultiplierComplete,"notify:stateHandler.enteringSpinningState":a.onEnteringSpinningState,"view:winAnimationsComplete":a.onWinAnimaitonsComplete,"view:rollOutComplete":a.onRollOutComplete})},onGameModeChanged:function(a){this.model.storeData("gameMode",a)},onFreespinInitResponseParsed:function(a){this.model.parseInitFreespinResponse(a)},onWinAnimaitonsComplete:function(){this.stopListeningToUserInput();var a=this.model.readData("winningScatter");if(a==="SYM15"){this.fireEvent("request:stickyWild.addStickyWilds");this.checkAndDisplayWinAndTotal()}else{if(a==="SYM14"){this.fireEvent("request:coinsField.countUpMultiplier")}else{if(a==="SYM13"){this.fireEvent("request:coinsField.countUpFreespinsTotal")}}}},onCountUpFreespinsTotalComplete:function(){this.checkAndDisplayWinAndTotal()},onCountUpMultiplierComplete:function(){this.checkAndDisplayWinAndTotal()},checkAndDisplayWinAndTotal:function(){var a=this;var c=this.model.readData("hasWonCoins");if(c||Platform.isDesktopDevice){a.dispatchStateCompleteEvent()}else{a.fireEvent("request:coinsField.showWin");var b=setTimeout(function(){a.dispatchStateCompleteEvent()},1300)}},dispatchStateCompleteEvent:function(){this.fireEvent("notify:scatterWin.complete")},onEnteringScatterWinState:function(){var c=this;var b=c.model.readData("winningScatter");var a=c.model.readData("scattersWonThisRound");c.view.runScatterWinPresentation(a,(b==="SYM15"));c.playUnveilSound(b);c.fireEvent("request:scatter.removeScatters");this.startListeningToUserInput()},onUserInputEnd:function(){this.stopListeningToUserInput();var a=this.model.readData("winningScatter");this.view.abortScatterWinPresentation((a==="SYM15"));this.fireEvent("request:audioPlayer.stop","scatterUnveil")},onEnteringSpinningState:function(){var b=this;var a=b.model.readData("winningScatter");if(a!=="SYM15"){b.addListener("notify:reelList.reelMovedInStartingState",b.onReelMovedInStartingState)}},onEnteringFreespinOutro:function(){setTimeout(function(){this.view.clearAllContainers()}.bind(this),500)},onRollOutComplete:function(){this.removeListener("notify:reelList.reelMovedInStartingState")},onReelMovedInStartingState:function(b,a){var c=this;if(a==="default_0"){c.view.rollOut(b)}},playUnveilSound:function(a){switch(a){case"SYM13":this.fireEvent("request:audioPlayer.play",{name:"scatterUnveil1",id:"scatterUnveil"});break;case"SYM14":this.fireEvent("request:audioPlayer.play",{name:"scatterUnveil2",id:"scatterUnveil"});break;case"SYM15":this.fireEvent("request:audioPlayer.play",{name:"scatterUnveil3",id:"scatterUnveil"});break}}};Warlords.ScatterWinController=Sys.extend(Core.Controller,Warlords.ScatterWinController,"Warlords.ScatterWinController");Sys.ns("Warlords");Warlords.ScatterWinModel={constructor:function(){Warlords.ScatterWinModel.superclass.constructor.apply(this,arguments)},setupData:function(){Warlords.ScatterWinModel.superclass.setupData.apply(this,arguments);this.storeData("gameMode","BASIC")},processServerResponse:function(f){var c=false;var b=this.readData("gameMode");var d=[];if(b==="FREESPIN"){d=this.getNewScatters(f);c=d.length>0}this.storeData("scattersWonThisRound",d);this.storeData("shouldRunScatterWin",c);var e="";if(f.winning){e=f.winning.scatter}this.storeData("winningScatter",e);var a=0;if(Sys.isDefined(f.wins)&&Sys.isDefined(f.wins.coins)){a=f.wins.coins}this.storeData("hasWonCoins",(a>0))},parseInitFreespinResponse:function(a){this.processServerResponse(a)},getNewScatters:function(h){var a=h.reelInfo;var b=Sys.isDefined(a)?a.length:0;var f=[];for(var e=0;e<b;++e){var d=a[e].symbols;for(var c=0;c<d.length;++c){var g=d[c];if(Warlords.Utils.isScatterSymbol(g)){if(h.winning.scatter==="SYM15"){if(Warlords.Utils.isOverlaySymbolAddedThisSpin(h,"freespin",e,c)===false){continue}}f.push({symbol:g,x:e,y:c})}}}return f}};Warlords.ScatterWinModel=Sys.extend(Core.Model,Warlords.ScatterWinModel,"Warlords.ScatterWinModel");Sys.ns("Warlords");Warlords.ScatterWinView={ANIMATION_ID:0,FIRE_ANIMATION_NAME:"betlineFrameAnim",FIRE_X_OFFSET:98,FIRE_Y_OFFSET:97,constructor:function(){Warlords.ScatterWinView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this;b.rootContainer=new PIXI.Container();b.rootContainer.name="ScatterWinView";b.fireAnimContainer=new PIXI.Container();b.rootContainer.addChild(b.fireAnimContainer);b.symbolContainer=new PIXI.Container();b.rootContainer.addChild(b.symbolContainer);b.animationContainer=new PIXI.Container();b.rootContainer.addChild(b.animationContainer);b.mask=Warlords.Utils.createWideReelMask();b.mask.alpha=0;b.rootContainer.addChild(b.mask);var a=Game.stage.view.animationManager.getLayer("scatterAnimation");a.addChild(b.rootContainer)},runScatterWinPresentation:function(h,j){var s=this,p;var q=0;var c=h.length;var o=Resources.readData("animationImages");s.animationContainer.mask=undefined;var k=s.model.readData("winningScatter");for(p=c-1;p>=0;p--){var e=h[p];var r=Game.stage.model.getSymbolConfiguration(e.x,e.y);var n=new PIXI.Point(r.left,r.top);if(e.symbol!==k){console.warn("Got different scatter type from overlay and winning scatter. overlay:"+e.symbol+" winning scatter:"+k)}var m=o[k];var b=Game.PIXIFactory.createSprite(m,new PIXI.Point(r.left,r.top));s.symbolContainer.addChild(b);if(s.model.readData("winningScatter")==="SYM15"){s.applyStickyWildCover(e.x,e.y)}var l=s.getWinAnimationNameFromScatterSymbol(k);var a=Game.PIXIFactory.createAndAddSpineAnimation(l,s.animationContainer,n);a.name=k+"_win_"+s.ANIMATION_ID;s.ANIMATION_ID++;var f=k.toLowerCase()+"_win";Game.PIXIUtils.resetSpineAnimation(a);a.state.setAnimationByName(0,f,false);var g=(p===q);if(j){a.state.onComplete=s.resetAnimation.bind(s,a,g)}else{a.state.onComplete=s.keepAnimationForRollOut.bind(s,a,g)}var d=Game.PIXIFactory.createAndAddSpineAnimation(s.FIRE_ANIMATION_NAME,s.fireAnimContainer,n);d.pivot.x=s.FIRE_X_OFFSET;d.pivot.y=s.FIRE_Y_OFFSET;d.position.x+=s.FIRE_X_OFFSET;d.position.y+=s.FIRE_Y_OFFSET;d.state.setAnimationByName(0,"betlineframe_scatter_win",false);d.state.onComplete=s.resetFireAnimation.bind(s,d,g)}s.animationContainer.children.sort(function(t,i){return i.position.x-t.position.x})},applyStickyWildCover:function(e,b,d){var f=d||this;var g=e-1!==-1?Game.stage.model.getSymbolConfiguration(e-1,b):undefined;if(!Sys.isDefined(g)){return}var c=(e-1).toString()+b.toString();if(Sys.isDefined(Warlords.StickyWild.stickyWilds[c])){var a=Game.PIXIFactory.createAndAddSprite("SYM1_STICKY",f.animationContainer).position=new PIXI.Point(g.left,g.top);a.cover=true;f.applyStickyWildCover(e-1,b,f)}},abortScatterWinPresentation:function(g){var l=this;var m=l.animationContainer.children;var a=m.length;for(var h=0;h<a;h++){var d=m[h];if(Sys.isDefined(d.state)){var b=d.state.getCurrent(0);b.time=b.endTime}}var e=l.fireAnimContainer.children;var k=e.length;for(var f=0;f<k;f++){var c=e[f];Game.PIXIUtils.resetSpineAnimation(c)}if(g){l.clearAllContainers();l.fireEvent("view:winAnimationsComplete")}else{l.clearFireContainer()}},resetAnimation:function(b,a){if(a){this.clearAllContainers();this.fireEvent("view:winAnimationsComplete")}Game.PIXIUtils.resetSpineAnimation(b);b.visible=false},resetFireAnimation:function(b,a){if(a){this.clearFireContainer()}Game.PIXIUtils.resetSpineAnimation(b);b.visible=false},keepAnimationForRollOut:function(b,a){if(a){this.fireEvent("view:winAnimationsComplete")}},rollOut:function(c){var d=this,b=d.animationContainer.children;if(b.length===0){d.fireEvent("view:rollOutComplete");return}if(d.animationContainer.mask===undefined){d.animationContainer.mask=d.mask}for(var a=0;a<b.length;++a){b[a].y+=c}if(b[0].y>600){d.fireEvent("view:rollOutComplete");d.clearAllContainers()}},getWinAnimationNameFromScatterSymbol:function(a){return a},clearFireContainer:function(){this.fireAnimContainer.removeChildren();this.symbolContainer.removeChildren()},clearAllContainers:function(){this.fireAnimContainer.removeChildren();if(this.model.readData("winningScatter")==="SYM15"){setTimeout(function(){this.animationContainer.removeChildren()}.bind(this),500)}else{this.animationContainer.removeChildren()}this.symbolContainer.removeChildren()}};Warlords.ScatterWinView=Sys.extend(Core.View,Warlords.ScatterWinView,"Warlords.ScatterWinView");Sys.ns("Warlords");Warlords.CoinWinView={constructor:function(){Warlords.CoinWinView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var d=this,b=new PIXI.Point(0,0);d.rootContainer=new PIXI.Container();d.coinWinText=Game.PIXIFactory.createAndAddText(" ",Game.TextStyles.COIN_WIN_TEXT,d.rootContainer,new PIXI.Point(0,0),new PIXI.Point(0.5,0.5));var a={};a[0]={x:1,y:1};a[80]={x:1.2,y:1.2};a[250]={x:1,y:1};d.coinWinAnimation=new Animation.Holder({target:d.coinWinText,prop:"scale",animate:a});Game.stage.view.animationManager.addToAnimationLoop(d.coinWinAnimation);var c=Game.stage.view.animationManager.getLayer("winCoinNumbers");c.addChild(d.rootContainer);d.rootContainer.visible=false},updateText:function(b){var c=this,d=Game.stage.model.getSymbolConfiguration(b.x,b.y);var a=new PIXI.Point(d.left+d.width*0.5,d.top+d.height*0.5);c.coinWinText.text=b.coins.toString();c.coinWinText.position.x=a.x;c.coinWinText.position.y=a.y},animate:function(a){var b=this;b.updateText(a);b.rootContainer.visible=true;setTimeout(function(){b.coinWinAnimation.play()},1/15*1000*2);setTimeout(function(){b.fireEvent("view:animationComplete")},500)},abort:function(){this.rootContainer.visible=false;this.fireEvent("view:animationAborted")}};Warlords.CoinWinView=Sys.extend(Game.Slots.CoinWinView,Warlords.CoinWinView,"Warlords.CoinWinView");Sys.ns("Warlords");Warlords.WinSituationsDisplayModel={constructor:function(){Warlords.WinSituationsDisplayModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(c){var b=this,a=[];if(c.wins&&Sys.isArray(c.wins.winSituations)){Sys.each(c.wins.winSituations,function(e,d){if(b.shouldToggleWinSituation(e,c)){a.push(d)}})}b.storeData("winSituationsToToggle",a)},shouldToggleWinSituation:function(a,b){return a.wins.type==="coins"&&b.nextaction==="spin"}};Warlords.WinSituationsDisplayModel=Sys.extend(Game.Slots.WinSituationsDisplayModel,Warlords.WinSituationsDisplayModel,"Warlords.WinSituationsDisplayModel");Sys.ns("Warlords");Warlords.Paytable={constructor:function(){Warlords.Paytable.superclass.constructor.apply(this,arguments)},getMixinDependencies:function(){return{fallback:["userInput","orientation","animation"],desktop:["animation","userInput","properties"]}},getDefaultMVCClasses:function(){return{model:Warlords.PaytableModel,view:Warlords.PaytableBaseView,controller:Warlords.PaytableController}}};Warlords.Paytable=Sys.extend(Interface.Paytable,Warlords.Paytable,"Warlords.Paytable");Sys.ns("Warlords");Warlords.PaytableDesktopView={SYMBOL_WIDTH:150,SYMBOL_HEIGHT:150,SYMBOL_OFFSET:190,PAYOUT_OFFSET_LEFT:15,ROW_OFFSET:25,LABEL_OFFSET_BOTTOM:35,CONTENT_OFFSET:50,PAYOUT_OFFSET_TOP:4,LABEL_OFFSET_TOP:80,TEXT_2COLS_WIDTH:650,TEXT_3COLS_WIDTH:1350,WILD_SYMBOL_WIDTH:200*0.4,WILD_SYMBOL_HEIGHT:200*0.4-4,RESPIN_SYMBOL_WIDTH:50,RESPIN_SYMBOL_HEIGHT:50,PAYTABLE_TEXT_STYLE:Game.TextStyles.PAYTABLE_TEXT,PAYTABLE_PARAGRAPH_MARGIN:18,constructor:function(){Warlords.PaytableDesktopView.superclass.constructor.apply(this,arguments);this.textCounter=0},setUpContent:function(){var a=this;if(!a.model.readData("disabled")){a.enable()}a.hide()},initAnimations:function(){var d=this,c=Game.stage.view.animationManager.getLayer("userInterface");d.WILD_TEXT=[Services.languageManager.getText("wildsubstituteRev")];d.RANDOM_WILD_TEXT=[Services.languageManager.getText("randomOverlayExplanation"),Services.languageManager.getText("randomOverlay3Types"),Services.languageManager.getText("randomOverlay3TypesFunction")];d.SCATTER_TEXT=[Services.languageManager.getText("freeSpinsWarlordExplanation1"),Services.languageManager.getText("freeSpinsWarlordExplanation2"),Services.languageManager.getText("freeSpinsWarlordExplanation3"),Services.languageManager.getText("freeSpinsWarlordExplanation4")];d.BATTLE_TEXT=[Services.languageManager.getText("freeSpinsWarlordExplanation7"),Services.languageManager.getText("freeSpinsWarlordExplanation8"),Services.languageManager.getText("freeSpinsWarlordExplanation9")];d.RESPIN_TEXT=[Services.languageManager.getText("freeSpinsWarlordExplanation5"),Services.languageManager.getText("freeSpinsWarlordExplanation6"),Services.languageManager.getText("freeSpinsWarlordExplanation10"),Services.languageManager.getText("freeSpinsWarlordExplanation11"),Services.languageManager.getText("freeSpinsWarlordExplanation12"),Services.languageManager.getText("freeSpinsWarlordExplanation13"),Services.languageManager.getText("freeSpinsWarlordExplanation14")];d.FINAL_CHANCE_TEXT=[Services.languageManager.getText("freeSpinsWarlordExplanation15"),Services.languageManager.getText("freeSpinsWarlordExplanation16"),Services.languageManager.getText("freeSpinsWarlordExplanation17"),Services.languageManager.getText("freeSpinsWarlordExplanation18"),Services.languageManager.getText("freeSpinsWarlordExplanation19")];d.FREESPIN_TEXT=[Services.languageManager.getText("freeSpinsWarlordExplanation21"),Services.languageManager.getText("freeSpinsWarlordExplanation22"),Services.languageManager.getText("freeSpinsBarbarianInfo"),Services.languageManager.getText("freeSpinsPriestessInfo"),Services.languageManager.getText("freeSpinsSamuraiInfo")];d.FREESPIN1_TEXT=[Services.languageManager.getText("freeSpinsBarbarianInfo")];d.FREESPIN2_TEXT=[Services.languageManager.getText("freeSpinsPriestessInfo")];d.FREESPIN3_TEXT=[Services.languageManager.getText("freeSpinsSamuraiInfo")];d.BOTTOM_TEXT=[Services.languageManager.getText("OCTpaytableHighest")+" "+Services.languageManager.getText("OCTbetLineWinsLeftToRightOnly")+" "+Services.languageManager.getText("OCTvoidAllPays")+" "+Services.languageManager.getText("OCTextraInfo")+" "+Services.languageManager.getText("paytableInfoBetLevel1")];d.button=new Interface.utils.PIXIButton("paytableButtonUp","paytableButtonDown","paytableButtonOver","paytableButtonDisabled");d.button.id="paytableButton";d.button.clickCallback=d.onButtonClick.bind(d);d.button.moveToPosition(Warlords.Positions.PAYTABLE_BUTTON);var a=d.button.width/2;d.button.setCustomHitArea(new PIXI.Circle(a,d.button.height/2,a));c.addChild(d.button);d.closebutton=new Interface.utils.PIXIButton("paytableButtonClose","paytableButtonCloseHover","paytableButtonClosePressed");d.closebutton.id="paytableCloseButton";d.closebutton.clickCallback=d.onButtonClick.bind(d);d.closebutton.moveToPosition(Warlords.Positions.PAYTABLE_CLOSE_BUTTON);var b=d.closebutton.width/2;d.closebutton.setCustomHitArea(new PIXI.Circle(b,d.closebutton.height/2,b));d.closebutton.visible=false;c.addChild(d.closebutton);d.setupScroller();d.animationsReady=true;d.fireEvent("view:addToContainer","settingsWindow",{title:"",content:d.container})},setupScroller:function(){var l=this,e,f,d,o,b,h,n,k,g=l.setupLayer();e=l.setupScrollHolder();f=new PIXI.Container();f.position.x=185;l.setupLayoutValues();o=l.setupLabels();b=l.setupPayoutInfo();n=l.setupSymbols(f);k=l.setupBetlines(f);h=l.setupTexts(e,f,n,b,o,k);l.playScatterAnimations(n);for(d=0;d<o.length;++d){f.addChild(o[d])}for(d=0;d<h.length;++d){f.addChild(h[d])}for(d=0;d<b.length;++d){f.addChild(b[d].container)}l.setupFeatureAnimations();l.setupReelBackgrounds();e.addChild(f);for(d=0;d<o.length;++d){o[d].style=Game.TextStyles.PAYTABLE_LABEL}for(d=0;d<h.length;++d){var m=h[d];m.style=m.clonedStyle}for(d=0;d<b.length;++d){var a=b[d].children;for(var c=0;c<a.length;++c){a[c].label.style=Game.TextStyles.PAYTABLE_PAYOUT_LABEL;a[c].value.style=Game.TextStyles.PAYTABLE_PAYOUT_VALUE}}g.addChild(l.scrollHolder);Warlords.Utils.hide(l.scrollHolder);l.postScrollerSetup(e)},setupLayer:function(){return Game.stage.view.animationManager.getLayer("paytable")},postScrollerSetup:function(a){},setupScrollHolder:function(){var d=this,a,e;d.scrollHolder=new PIXI.Container();e=new PIXI.Graphics();e.beginFill(0,0.9);e.drawRect(0,0,1280,631);e.endFill();d.scrollHolder.addChild(e);a=new Interface.utils.PIXIScrollContainer(540);a.position.y=50;a.setScrollBarSize(11.5);a.setScrollBarContentMargin(97);a.forceWidth(1180.4);a.setBottomPadding(100);var c=Game.PIXIFactory.createTexture("paytableScrollBar");var b=Game.PIXIFactory.createSprite(c);a.useScrollBarSprite(b);d.scrollHolder.addChild(a);return a},setupLayoutValues:function(){var a=this;a.columns=[a.CONTENT_OFFSET,a.SYMBOL_WIDTH+a.SYMBOL_OFFSET,a.SYMBOL_WIDTH*2+a.SYMBOL_OFFSET*2-a.CONTENT_OFFSET];a.column1PayoutX=a.SYMBOL_WIDTH+a.PAYOUT_OFFSET_LEFT+a.CONTENT_OFFSET;a.column2PayoutX=a.SYMBOL_WIDTH*2+a.SYMBOL_OFFSET+a.PAYOUT_OFFSET_LEFT;a.column3PayoutX=a.SYMBOL_WIDTH*3+a.SYMBOL_OFFSET*2+a.PAYOUT_OFFSET_LEFT-a.CONTENT_OFFSET;a.rows=[a.LABEL_OFFSET_BOTTOM+a.ROW_OFFSET,a.LABEL_OFFSET_BOTTOM+a.SYMBOL_HEIGHT*3-16+a.ROW_OFFSET*2,a.LABEL_OFFSET_BOTTOM+a.SYMBOL_HEIGHT*4-16+a.ROW_OFFSET*3];a.labels=[];a.labels.push(0);a.labels.push(a.labels[0]+a.LABEL_OFFSET_BOTTOM+a.LABEL_OFFSET_TOP+a.SYMBOL_HEIGHT*5+a.ROW_OFFSET*3);a.labels.push(a.labels[1]+a.LABEL_OFFSET_BOTTOM+a.LABEL_OFFSET_TOP+220);a.labels.push(a.labels[2]+a.LABEL_OFFSET_BOTTOM+a.LABEL_OFFSET_TOP+220);a.labels.push(a.labels[3]+a.LABEL_OFFSET_BOTTOM+a.LABEL_OFFSET_TOP+230+a.SYMBOL_HEIGHT);a.labels.push(a.labels[4]+a.LABEL_OFFSET_BOTTOM+a.LABEL_OFFSET_TOP+220);a.labels.push(a.labels[5]+a.LABEL_OFFSET_BOTTOM+a.LABEL_OFFSET_TOP+220);a.labels.push(a.labels[6]+a.LABEL_OFFSET_BOTTOM+a.LABEL_OFFSET_TOP+220);a.labels.push(a.labels[7]+a.LABEL_OFFSET_BOTTOM+a.LABEL_OFFSET_TOP+220);a.labels.push(a.labels[8]+a.LABEL_OFFSET_BOTTOM+a.LABEL_OFFSET_TOP+220)},setupLabels:function(){var a=this;return[a.createLabel(Services.languageManager.getText("symbolPayoutUC"),new PIXI.Point(a.CONTENT_OFFSET,a.labels[0])),a.createLabel(Services.languageManager.getText("wildHeadingPT"),new PIXI.Point(a.CONTENT_OFFSET,a.labels[1])),a.createLabel(Services.languageManager.getText("randomWildOverlay"),new PIXI.Point(a.CONTENT_OFFSET,a.labels[2])),a.createLabel(Services.languageManager.getText("scatterUCenOnly"),new PIXI.Point(a.CONTENT_OFFSET,a.labels[3])),a.createLabel(Services.languageManager.getText("battleFeatureHeading"),new PIXI.Point(a.CONTENT_OFFSET,a.labels[4])),a.createLabel(Services.languageManager.getText("re-spinsUCenOnly"),new PIXI.Point(a.CONTENT_OFFSET,a.labels[5])),a.createLabel(Services.languageManager.getText("finalChanceHead"),new PIXI.Point(a.CONTENT_OFFSET,a.labels[6])),a.createLabel(Services.languageManager.getText("OCTfreeSpinsUC"),new PIXI.Point(a.CONTENT_OFFSET,a.labels[7])),a.createLabel(Services.languageManager.getText("winningBetLinesHeadUC"),new PIXI.Point(a.CONTENT_OFFSET,a.labels[8]))]},setupFeatureAnimations:function(){var a=this;a.randomWildFeature=new Feature.RandomWild(new PIXI.Point(0,0),0.4,1000);a.respinFeature=new Feature.Respin(new PIXI.Point(0,0),0.4,0);a.finalChanceFeature=new Feature.FinalChance(new PIXI.Point(0,0),0.4,2000);a.freespin1Feature=new Feature.BarbarianFreespin(new PIXI.Point(0,0),0.75,3000);a.freespin2Feature=new Feature.PriestessFreespin(new PIXI.Point(0,0),0.75,3000);a.freespin3Feature=new Feature.SamuraiFreespin(new PIXI.Point(0,0),0.75,3000);a.features=[a.randomWildFeature,a.respinFeature,a.finalChanceFeature,a.freespin1Feature,a.freespin2Feature,a.freespin3Feature]},setupReelBackgrounds:function(){var a=this;a.reelBGs=[Game.PIXIFactory.createSpriteWithTexture("featureReelsBGWhite"),Game.PIXIFactory.createSpriteWithTexture("featureReelsBGWhite"),Game.PIXIFactory.createSpriteWithTexture("featureReelsBGWhite")]},playFeatures:function(){for(var a=0;a<this.features.length;++a){this.features[a].play()}},resetFeatures:function(){for(var a=0;a<this.features.length;++a){this.features[a].reset()}},setupBetlines:function(a){return Game.PIXIFactory.createAndAddSprite("betlines",a,new PIXI.Point(this.columns[0],this.labels[9]+this.rows[0]))},setupPayoutInfo:function(){var a=this;return[a.createSymbolPayoutContainer("SYM9",a.column1PayoutX,a.rows[2]+a.PAYOUT_OFFSET_TOP),a.createSymbolPayoutContainer("SYM10",a.column2PayoutX,a.rows[2]+a.PAYOUT_OFFSET_TOP),a.createSymbolPayoutContainer("SYM11",a.column3PayoutX,a.rows[2]+a.PAYOUT_OFFSET_TOP),a.createSymbolPayoutContainer("SYM6",a.column1PayoutX,a.rows[1]+a.PAYOUT_OFFSET_TOP),a.createSymbolPayoutContainer("SYM7",a.column2PayoutX,a.rows[1]+a.PAYOUT_OFFSET_TOP),a.createSymbolPayoutContainer("SYM8",a.column3PayoutX,a.rows[1]+a.PAYOUT_OFFSET_TOP),a.createSymbolPayoutContainer("SYM3",a.column1PayoutX,a.rows[0]+a.PAYOUT_OFFSET_TOP),a.createSymbolPayoutContainer("SYM4",a.column2PayoutX,a.rows[0]+a.PAYOUT_OFFSET_TOP),a.createSymbolPayoutContainer("SYM5",a.column3PayoutX,a.rows[0]+a.PAYOUT_OFFSET_TOP),a.createSymbolPayoutContainer("SYM1",a.column1PayoutX,a.labels[1]+a.rows[0]+a.PAYOUT_OFFSET_TOP,"sym1")]},setupTexts:function(e,g,m,b,n,j){var h=this,a=24,l=h.columns[0],k=h.rows[0],d,f=[],c=[{textAreas:h.createTextAreas(h.WILD_TEXT,h.TEXT_2COLS_WIDTH),id:"wild"},{textAreas:h.createTextAreas(h.RANDOM_WILD_TEXT,h.TEXT_2COLS_WIDTH),id:"randomWild"},{textAreas:h.createTextAreas(h.SCATTER_TEXT,h.TEXT_3COLS_WIDTH),id:"scatter"},{textAreas:h.createTextAreas(h.BATTLE_TEXT,h.TEXT_3COLS_WIDTH),id:"battle"},{textAreas:h.createTextAreas(h.RESPIN_TEXT,h.TEXT_2COLS_WIDTH),id:"respin"},{textAreas:h.createTextAreas(h.FINAL_CHANCE_TEXT,h.TEXT_2COLS_WIDTH),id:"finalChance"},{textAreas:h.createTextAreas(h.FREESPIN_TEXT,h.TEXT_3COLS_WIDTH),id:"freespin"},{textAreas:h.createTextAreas(h.BOTTOM_TEXT,h.TEXT_3COLS_WIDTH),id:"bottomtext"}];for(d=0;d<c.length;++d){f=f.concat(c[d].textAreas)}setTimeout(function(){var u={wild:80+a};var r={scatter:h.SYMBOL_HEIGHT+a,freespin:h.SYMBOL_HEIGHT+a};var w={};for(d=0;d<c.length;++d){var p=u[c[d].id]||80;var i=r[c[d].id]||0;w[c[d].id]=h.setupTextHeightsInBlock(c[d].textAreas,l,k+h.labels[d+1]+i,h.PAYTABLE_PARAGRAPH_MARGIN);var t=Math.max(w[c[d].id],k+h.labels[d+1]+a+h.SYMBOL_HEIGHT+i)+p;if(Sys.isDefined(h.labels[d+1])){h.labels[d+2]=t}}for(d=0;d<n.length;++d){n[d].position.y=h.labels[d]}for(d=0;d<m.length;++d){var q=m[d];if(q.name==="sym1"){q.symbol.position.y=w.wild}if(q.name==="sym13"||q.name==="sym14"||q.name==="sym15"){q.symbol.position.y=h.labels[3]+h.rows[0]}}for(d=0;d<b.length;++d){var v=b[d];if(v.name==="sym1"){v.container.position.y=w.wild+4}}var s=-155;h.features[0].position=new PIXI.Point(h.columns[2]-h.features[0].REELS_ORIGIN.x+s,h.labels[2]+k-h.features[0].REELS_ORIGIN.y);h.features[1].position=new PIXI.Point(h.columns[2]-h.features[1].REELS_ORIGIN.x+s,h.labels[5]+k-h.features[1].REELS_ORIGIN.y);h.features[2].position=new PIXI.Point(h.columns[2]-h.features[2].REELS_ORIGIN.x+s,h.labels[6]+k-h.features[2].REELS_ORIGIN.y);h.features[3].position=new PIXI.Point(h.columns[0]+h.SYMBOL_WIDTH/2-4,h.labels[7]+k-h.features[3].REELS_ORIGIN.y);h.features[4].position=new PIXI.Point(h.columns[0]+(h.SYMBOL_WIDTH/2)*4-8,h.labels[7]+k-h.features[4].REELS_ORIGIN.y);h.features[5].position=new PIXI.Point(h.columns[0]+(h.SYMBOL_WIDTH/2)*7-12,h.labels[7]+k-h.features[5].REELS_ORIGIN.y);h.reelBGs[0].position=new PIXI.Point(h.columns[2]+s,h.labels[2]+k);h.reelBGs[1].position=new PIXI.Point(h.columns[2]+s,h.labels[5]+k);h.reelBGs[2].position=new PIXI.Point(h.columns[2]+s,h.labels[6]+k);for(d=0;d<h.reelBGs.length;++d){h.reelBGs[d].scale=new PIXI.Point(0.4,0.4);h.reelBGs[d].alpha=0.1;g.addChild(h.reelBGs[d])}for(d=0;d<h.features.length;++d){h.features[d].addTo(g)}j.position.y=h.labels[8]+k;for(d=0;d<c.length;++d){if(c[d].id==="bottomtext"){var o=c[d].textAreas[0];o.position.y=j.position.y+600}}e.updateScrollContainer()},1000);return f},setupTextHeightsInBlock:function(e,b,a,c){var f=0;for(var d=0;d<e.length;++d){e[d].position=new PIXI.Point(b,a+f);f=e[d].height+f+c}return a+f},createTextAreas:function(e,c,a){var d=[];for(var b=0;b<e.length;++b){d.push(this.createTextArea(e[b],c,a))}return d},setupSymbols:function(b){var a=this;return[{symbol:Game.PIXIFactory.createAndAddSprite("SYM9",b,new PIXI.Point(a.columns[0],a.rows[2])),name:"sym9"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM10",b,new PIXI.Point(a.columns[1],a.rows[2])),name:"sym10"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM11",b,new PIXI.Point(a.columns[2],a.rows[2])),name:"sym11"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM6",b,new PIXI.Point(a.columns[0],a.rows[1])),name:"sym6"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM7",b,new PIXI.Point(a.columns[1],a.rows[1])),name:"sym7"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM8",b,new PIXI.Point(a.columns[2],a.rows[1])),name:"sym8"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM3_1",b,new PIXI.Point(a.columns[0],a.rows[0])),name:"sym3_1"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM4_1",b,new PIXI.Point(a.columns[1],a.rows[0])),name:"sym4_1"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM5_1",b,new PIXI.Point(a.columns[2],a.rows[0])),name:"sym5_1"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM3_2",b,new PIXI.Point(a.columns[0],a.rows[0]+a.SYMBOL_HEIGHT-9)),name:"sym3_2"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM4_2",b,new PIXI.Point(a.columns[1],a.rows[0]+a.SYMBOL_HEIGHT-9)),name:"sym4_2"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM5_2",b,new PIXI.Point(a.columns[2],a.rows[0]+a.SYMBOL_HEIGHT-9)),name:"sym5_2"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM3_3",b,new PIXI.Point(a.columns[0],a.rows[0]+a.SYMBOL_HEIGHT+132)),name:"sym3_3"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM4_3",b,new PIXI.Point(a.columns[1],a.rows[0]+a.SYMBOL_HEIGHT+132)),name:"sym4_3"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM5_3",b,new PIXI.Point(a.columns[2],a.rows[0]+a.SYMBOL_HEIGHT+132)),name:"sym5_3"},{symbol:Game.PIXIFactory.createAndAddSpineAnimation("stackedIdleAnimation",b,new PIXI.Point(a.columns[0],a.rows[0])),name:"stackedIdleAnimationSamurai"},{symbol:Game.PIXIFactory.createAndAddSpineAnimation("stackedIdleAnimation",b,new PIXI.Point(a.columns[1],a.rows[0])),name:"stackedIdleAnimationPriestess"},{symbol:Game.PIXIFactory.createAndAddSpineAnimation("stackedIdleAnimation",b,new PIXI.Point(a.columns[2],a.rows[0])),name:"stackedIdleAnimationBarbarian"},{symbol:Game.PIXIFactory.createAndAddSprite("SYM1",b,new PIXI.Point(a.columns[0],a.labels[1]+a.rows[0])),name:"sym1"},{symbol:Game.PIXIFactory.createAndAddSpineAnimation("SYM13",b,new PIXI.Point(a.columns[0]-4,a.labels[3]+a.rows[1]+20)),name:"sym13"},{symbol:Game.PIXIFactory.createAndAddSpineAnimation("SYM14",b,new PIXI.Point(a.columns[0]+(a.SYMBOL_WIDTH/2)*3-8,a.labels[3]+a.rows[1]+20)),name:"sym14"},{symbol:Game.PIXIFactory.createAndAddSpineAnimation("SYM15",b,new PIXI.Point(a.columns[0]+(a.SYMBOL_WIDTH/2)*6-12,a.labels[3]+a.rows[1]+20)),name:"sym15"}]},playScatterAnimations:function(a){for(var b=0;b<a.length;++b){var c=a[b];c.symbol.scale=new PIXI.Point(0.75,0.75);if(c.name==="sym13"){c.symbol.state.setAnimationByName(0,"sym13_idle",true)}else{if(c.name==="sym14"){c.symbol.state.setAnimationByName(0,"sym14_idle",true)}else{if(c.name==="sym15"){c.symbol.state.setAnimationByName(0,"sym15_idle",true)}else{if(c.name==="stackedIdleAnimationSamurai"){c.symbol.state.setAnimationByName(0,"sym3FX",true)}else{if(c.name==="stackedIdleAnimationPriestess"){c.symbol.state.setAnimationByName(0,"sym4FX",true)}else{if(c.name==="stackedIdleAnimationBarbarian"){c.symbol.state.setAnimationByName(0,"sym5FX",true)}}}}}}}},createFallAnimation:function(b){var c=this,d,a={};a[0]={y:c.labels[5]+c.rows[0]-c.RESPIN_SYMBOL_HEIGHT};a[300]={y:c.labels[5]+c.rows[0]+c.RESPIN_SYMBOL_HEIGHT*3};d=new Animation.Holder({prop:"position",target:b,animate:a});Game.stage.view.animationManager.addToAnimationLoop(d);return d},createTextArea:function(e,c,a){var b=Sys.clone(this.PAYTABLE_TEXT_STYLE);b.wordWrap=true;b.wordWrapWidth=c;var d=new PIXI.Text(e,b);d.id="paytableText"+this.textCounter;d.clonedStyle=b;this.textCounter++;if(Sys.isDefined(a)){d.position=a}d.scale=new PIXI.Point(0.6,0.6);return d},createLabel:function(c,a){var b=new PIXI.Text(c);if(Sys.isDefined(a)){b.position=a}return b},createSymbolPayoutContainer:function(e,h,g,a){var b=new PIXI.Container(),c=[],l={1:65-15,2:52.5-15,3:40-15},m=this.model.getCondensedInfo(e);b.position.x=h;b.position.y=g;m.sort(function(n,i){return i.from-n.from});for(var f=0;f<m.length;++f){if(!Sys.isDefined(m[f].value)){continue}var j=new PIXI.Text(m[f].from.toString());var k=new PIXI.Text(m[f].value.toString());var d=f*30;j.position.y=d;k.position.y=d;k.position.x=l[m[f].value.toString().length];b.addChild(j);b.addChild(k);c.push({label:j,value:k})}return{container:b,children:c,name:a}},show:function(a){var b=this;Warlords.Utils.show(b.scrollHolder);Warlords.Utils.show(b.closebutton);b.playFeatures()},hide:function(){var a=this;if(Sys.isDefined(a.scrollHolder)){Warlords.Utils.hide(a.scrollHolder);Warlords.Utils.hide(a.closebutton);a.resetFeatures()}},onButtonClick:function(){if(!this.model.readData("showing")){this.fireEvent("view:showRequest")}else{this.fireEvent("view:hideRequest")}},enableButton:function(){if(!this.hidden){this.enable("buttonDisableRequest")}},disableButton:function(){if(!this.hidden){this.disable("buttonDisableRequest")}},showButton:function(){if(this.animationsReady){this.button.visible=true;this.hidden=false}},hideButton:function(){if(this.animationsReady){this.button.visible=false;this.hidden=true}},onFeatureSplashShowing:function(){this.hideButton()},onFeatureSplashClosed:function(){this.showButton()},enable:function(a){if(this.animationsReady){this.model.removeProperty("buttonDisabled",a);var b=this.model.hasProperty("disabled");this.button.setEnabled(b===false)}},disable:function(a){if(this.animationsReady){this.model.addProperty("buttonDisabled",a);this.button.setEnabled(false)}},createBetlines:function(){}};Warlords.PaytableDesktopView=Sys.extend(Interface.PaytableDesktopView,Warlords.PaytableDesktopView,"Warlords.PaytableDesktopView");Sys.ns("Warlords");Warlords.PaytableBaseView={HEADING_CSS:"warlords-paytable-header",BETLINES_CSS:"paytable_betlines_img_mobile paytable_betlines_uri_mobile",SECTIONS:["SymbolValues","WildSymbol","RandomWilds","Scatters","BattleFeature","Respin","FinalChance","Freespin","Betlines"],HIGH_WIN:{COLOR:"#f9ca3e",SYMBOLS:["SYM3","SYM4","SYM5"]},MEDIUM_WIN:{COLOR:"#f9ca3e",SYMBOLS:["SYM6","SYM7","SYM8"]},LOW_WIN:{COLOR:"#f9ca3e",SYMBOLS:["SYM9","SYM10","SYM11"]},sectionCount:0,constructor:function(){Warlords.PaytableBaseView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var a=this.model.readData("receivedPaytableResponse"),b=this.model.readData("contentCreated");if(a&&b===false){this.setUpContent()}this.model.storeData("initAnimationsCalled",true)},setUpContent:function(){var b=this,a=Resources.readData("animationImages");b.model.setNumberOfPages(1);b.model.setCurrentPage(1);var c=b.container.add(new Sys.Element({tag:"div","class":"warlords-paytable-section warlords-paytable-logo"}));c.el.appendChild(a.paytableLogo.baseTexture.source);b.createSections();b.fireEvent("view:addToContainer","settingsWindow",{title:Services.languageManager.getText(Language.Keys.paytable_uc),content:b.container});b.fireEvent("view:addToNavigator","settingsMenu",{order:3});b.createBottomline();b.addScrolling();if(!b.model.readData("disabled")){b.enable()}b.hide();this.model.storeData("contentCreated",true)},createSymbolValues:function(){var a=this,b=new Sys.Element({tag:"div","class":a.SECTION_CSS});b.add(new Sys.Element({tag:"div",textContent:Services.languageManager.getText("symbolPayoutUC"),"class":a.HEADING_CSS}));if(a.HIGH_WIN.SYMBOLS.length>0){b.add(a.createSymbolSubSection(a.HIGH_WIN.SYMBOLS,a.HIGH_WIN.COLOR))}if(a.MEDIUM_WIN.SYMBOLS.length>0){b.add(a.createSymbolSubSection(a.MEDIUM_WIN.SYMBOLS,a.MEDIUM_WIN.COLOR))}if(a.LOW_WIN.SYMBOLS.length>0){b.add(a.createSymbolSubSection(a.LOW_WIN.SYMBOLS,a.LOW_WIN.COLOR))}a.sectionElements.SymbolValues=b;a.container.add(b);a.container.add(new Sys.Element({tag:"div",style:"clear: both;"}))},createSymbolSubSection:function(d,c){var f=this,b=new Sys.Element({tag:"div","class":"interface-paytable_symbols"}),a=d.length,e;for(e=-1;++e<a;){f.appendSymbolContainerUsingDivs(b,d[e],c)}return b},appendSymbolContainerUsingDivs:function(j,p,o,t,s,b){var g=Resources.readData("animationImages"),k=this.model.readData("symbolHeight"),c=this.model.getCondensedInfo(p,t,s,b).sort(function(u,i){return i.from-u.from}),f=c.length,a,m,q,l;j=j.add(new Sys.Element({tag:"div",style:"width: 30%; float: left; margin-bottom: 20px; margin-left: 3%;"}));var r=Warlords.Utils.isStackedSymbol(p);if(r){l=j.add(new Sys.Element({tag:"div",style:"min-height: "+k+"px; margin-bottom: 40px; text-align: center; float: left;"}));for(q=0;q<3;++q){var e=-40;if(q!==2){e=-48}var h=l.add(new Sys.Element({tag:"div",style:"min-height: "+k+"px; text-align: center; margin-bottom: "+e+"px;"}));h.el.appendChild(g[p+"_"+(q+1)].baseTexture.source)}}else{l=j.add(new Sys.Element({tag:"div",style:"min-height: "+k+"px; text-align: center; float: left;"}));if(Sys.isDefined(g[p])){l.el.appendChild(g[p].baseTexture.source)}}a=j.add(new Sys.Element({tag:"div",style:"min-height: "+k+"px;","class":"warlords-paytable_symbolBetlineValues"}));var d=a.add(new Sys.Element({tag:"ul","class":"warlords-paytable_symbolBetlines"}));var n=a.add(new Sys.Element({tag:"ul","class":"warlords-paytable_symbolValues"}));for(q=-1;++q<f;){m=c[q];if(Sys.isDefined(m.value)){d.add(new Sys.Element({tag:"li",textContent:m.from,style:"color: "+o+";"}));n.add(new Sys.Element({tag:"li",textContent:m.value}))}}},enableButton:function(){},disableButton:function(){},createBetlines:function(){var d=this,a=Resources.readData("animationImages"),c=d.createSection(Services.languageManager.getText("winningBetLinesHeadUC"));var b=c.add(new Sys.Element({tag:"div","class":"warlords-paytable-col-3"})),e=b.add(new Sys.Element({tag:"div","class":"warlords-paytable-pos-center"}));e.add(new Sys.Element({tag:"img",src:a.betlines.baseTexture.source.src}))},createBottomline:function(){var c=this,b=c.createSection("");var a=[Services.languageManager.getText("OCTpaytableHighest")+" "+Services.languageManager.getText("OCTbetLineWinsLeftToRightOnly")+" "+Services.languageManager.getText("OCTvoidAllPays")+" "+Services.languageManager.getText("OCTextraInfo")+" "+Services.languageManager.getText("paytableInfoBetLevel1")];b.add(new Sys.Element({tag:"div","class":"warlords-paytable-pos-center",textContent:a}))},createWildSymbol:function(){var g=this,h=Resources.readData("animationImages"),f=g.createSection(Services.languageManager.getText("wildHeadingPT")),m=this.model.readData("symbolHeight");var d=f.add(new Sys.Element({tag:"div",style:"width: 100%;"})),e=f.add(new Sys.Element({tag:"div",style:"width: 100%; margin-left: 33%; margin-right: 33%;"})),a=e.add(new Sys.Element({tag:"div","class":"warlords-paytable-pos-center"}));if(Sys.isDefined(h.SYM1)){a.add(new Sys.Element({tag:"img",style:"float: left;",src:h.SYM1.baseTexture.source.src}))}var c=this.model.getCondensedInfo("SYM1").sort(function(n,i){return i.from-n.from});var j=c.length;var l=a.add(new Sys.Element({tag:"td",style:"min-height: "+m+"px;","class":"warlords-paytable-symbolvalues"})).add(new Sys.Element({tag:"ul","class":"interface-paytable_symbolValues"}));for(var b=-1;++b<j;){var k=c[b];if(Sys.isDefined(k.value)){l.add(new Sys.Element({tag:"li",textContent:k.from,style:"color: #f9ca3e;","class":"warlords-paytable-symbolvalues-betlinevalues"}));l.add(new Sys.Element({tag:"li",textContent:k.value,"class":"warlords-paytable-wildsymbolvalues-coinvalues"}))}}d.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("wildsubstituteRev")}))},createRandomWilds:function(){var b=this,a=b.createSection(Services.languageManager.getText("randomWildOverlay"));var c=a.add(new Sys.Element({tag:"div","class":"warlords-paytable-col-3"}));c.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("randomOverlayExplanation")}));c.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("randomOverlay3Types")}));c.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("randomOverlay3TypesFunction")}))},createScatters:function(){var e=this,d=e.createSection(Services.languageManager.getText("scatterUCenOnly")),b=Resources.readData("animationImages");var a=d.add(new Sys.Element({tag:"div",style:"text-align: center;","class":"warlords-paytable-col-1"}));var g=d.add(new Sys.Element({tag:"div",style:"text-align: center;","class":"warlords-paytable-col-1"}));var f=d.add(new Sys.Element({tag:"div",style:"text-align: center;","class":"warlords-paytable-col-1"}));a.add(new Sys.Element({tag:"img",src:b.SYM13.baseTexture.source.src}));g.add(new Sys.Element({tag:"img",src:b.SYM14.baseTexture.source.src}));f.add(new Sys.Element({tag:"img",src:b.SYM15.baseTexture.source.src}));var c=d.add(new Sys.Element({tag:"div","class":"warlords-paytable-col-3"}));c.add(new Sys.Element({tag:"div",style:"margin-top: 20px;","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation1")}));c.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation2")}));c.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation3")}));c.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation4")}))},createBattleFeature:function(){var c=this,b=c.createSection(Services.languageManager.getText("battleFeatureHeading"));var a=b.add(new Sys.Element({tag:"div","class":"warlords-paytable-col-3"}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation7")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation8")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation9")}))},createRespin:function(){var c=this,b=c.createSection(Services.languageManager.getText("re-spinsUCenOnly"));var a=b.add(new Sys.Element({tag:"div","class":"warlords-paytable-col-3"}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation5")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation6")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation10")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation11")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation12")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation13")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation14")}))},createFinalChance:function(){var c=this,b=c.createSection(Services.languageManager.getText("finalChanceHead"));var a=b.add(new Sys.Element({tag:"div","class":"warlords-paytable-col-3"}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation15")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation16")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation17")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation18")}));a.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation19")}))},createFreespin:function(){var d=this,c=d.createSection(Services.languageManager.getText("OCTfreeSpinsUC"));var b=c.add(new Sys.Element({tag:"div","class":"warlords-paytable-col-3"})),a=c.add(new Sys.Element({tag:"div","class":"warlords-paytable-col-3"}));b.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation21")}));b.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsWarlordExplanation22")}));b.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsBarbarianInfo")}));b.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsPriestessInfo")}));b.add(new Sys.Element({tag:"div","class":"warlords-paytable-text",textContent:Services.languageManager.getText("freeSpinsSamuraiInfo")}))},createSection:function(e){var b=this,d=new Sys.Element({tag:"div","class":"warlords-paytable-section"}),c=d.add(new Sys.Element({tag:"div","class":b.SECTION_CSS+" "+b.SECTION_SEPARATOR_URI})),f=d.add(new Sys.Element({tag:"div",textContent:e,"class":b.HEADING_CSS})),a=d.add(new Sys.Element({tag:"div","class":"warlords-paytable-content"}));++b.sectionCount;b.container.add(d);return a}};Warlords.PaytableBaseView=Sys.extend(Interface.PaytableBaseView,Warlords.PaytableBaseView,"Warlords.PaytableBaseView");Sys.ns("Warlords");Warlords.PaytableController={constructor:function(){Warlords.PaytableController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:paytable.forward":a.onForwardRequest,"request:paytable.backward":a.onBackwardRequest,"notify:responseParser.paytableResponseParsed":a.onPaytableResponse,"view:pageSwitch":a.fireEvent.bind(a,"notify:paytable.pageSwitched"),"notify:gameModeChanged":a.onGameModeChanged,"notify:settingsWindow.open":a.onHideRequest,"notify:spinButton.clicked":a.hide,"view:hideSpinButton":a.hideSpinButton,"view:showSpinButton":a.showSpinButton});Interface.PaytableController.superclass.setupEvents.apply(a,arguments)},hideSpinButton:function(){this.fireEvent("request:spinButton.hide")},showSpinButton:function(){this.fireEvent("request:spinButton.show")},onHideRequest:function(){var b=this,a=b.model.readData("currentContainer");if(b.model.readData("showing")){if(Sys.isDefined(a)){b.fireEvent("request:"+a+".closeChild",b.MODULE_NAME);b.view.hide()}else{b.view.hide()}}b.model.storeData("showing",false);Services.storage.storeData(b.MODULE_NAME+".showing",false)},show:function(a){var b=this;if(!b.model.readData("showing")){b.model.storeData("showing",true);Services.storage.storeData(b.MODULE_NAME+".showing",true);b.fireEvent("notify:"+b.MODULE_NAME+".shown");b.view.show(a);if(Sys.isTouchDevice){b.startListeningToUserInput()}}},onPaytableResponse:function(a){this.model.processPaytableResponse(a);var b=this.model.readData("initAnimationsCalled"),c=this.model.readData("contentCreated");if(b&&c===false){this.view.setUpContent()}}};Warlords.PaytableController=Sys.extend(Interface.PaytableController,Warlords.PaytableController,"Warlords.PaytableController");Sys.ns("Warlords");Warlords.PaytableModel={constructor:function(){Warlords.PaytableModel.superclass.constructor.apply(this,arguments)},processPaytableResponse:function(a){Warlords.PaytableModel.superclass.processPaytableResponse.apply(this,arguments);this.storeData("receivedPaytableResponse",true)},setupData:function(){Warlords.PaytableModel.superclass.setupData.apply(this,arguments);this.storeData("receivedPaytableResponse",false);this.storeData("initAnimationsCalled",false);this.storeData("contentCreated",false)}};Warlords.PaytableModel=Sys.extend(Interface.PaytableModel,Warlords.PaytableModel,"Warlords.PaytableModel");Sys.ns("Warlords");Warlords.CountDownFreespins={constructor:function(){Warlords.CountDownFreespins.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={beforeStopping:{queue:[function(c){if(a.isState("countDownAnimationRequested")){c.stateHandler.pushState(c.states.countDownFreespins)}}]},countDownFreespins:{state:{name:"CountDownFreespins",execute:function(){},waitEvents:{"notify:countDownFreespin:end":false}}}};return b},getMixinDependencies:function(){return["animation","serverResponse"]},getDefaultMVCClasses:function(){return{model:Warlords.CountDownFreespinsModel,view:Warlords.CountDownFreespinsView,controller:Warlords.CountDownFreespinsController}}};Warlords.CountDownFreespins=Sys.extend(Core.Module,Warlords.CountDownFreespins,"Warlords.CountDownFreespins");Sys.ns("Warlords");Warlords.CountDownFreespinsView={GAP:20,MAX_WIDTH:700,constructor:function(){Warlords.CountDownFreespinsView.superclass.constructor.apply(this,arguments)},getFreeSpinsLeftTextString:function(a){var b=Language.Keys.freeSpinsLeft;if(a===0){b=Language.Keys.lastFreeSpin}else{if(a===1){b=Language.Keys.freeSpinLeft}}return Services.languageManager.getText(b)},initAnimations:function(){var c=this,b=Game.stage.view.animationManager.getLayer("countDownFreeSpins"),a=new PIXI.Container(),e;b.addChild(a);c.animation=Game.PIXIFactory.createAndAddSpineAnimation("soloMultiplierWinPresentation",a);e=c.animation.skeleton.findSlot("placeholder");c.shadow=c.animation.skeleton.findSlot("shadowglow");e.currentSprite.texture=PIXI.Texture.EMPTY;e.currentSprite.parent.pivot=new PIXI.Point(0,0);var d=this.getFreeSpinsLeftTextString();c.freeSpinsTextSprite=Game.PIXIFactory.createAndAddText(d,Game.TextStyles.FREE_SPINS_TEXT_STYLE,e.currentSprite.parent,new PIXI.Point(0,0),new PIXI.Point(0,0.5));c.fsLeftTextSprite=Game.PIXIFactory.createAndAddText("0",Game.TextStyles.FS_LEFT_TEXT_STYLE,e.currentSprite.parent,new PIXI.Point(0,0),new PIXI.Point(0,0.5));this.updateTextLayout(0)},updateTextLayout:function(b){var c=this;if(b>0){c.fsLeftTextSprite.visible=true;var a=c.fsLeftTextSprite.width+c.freeSpinsTextSprite.width+c.GAP;c.fsLeftTextSprite.position.x=-(a/2);c.fsLeftTextSprite.position.y=10;c.freeSpinsTextSprite.position.x=c.fsLeftTextSprite.x+c.fsLeftTextSprite.width+c.GAP;c.freeSpinsTextSprite.position.y=10}else{c.fsLeftTextSprite.visible=false;c.freeSpinsTextSprite.position.x=-(c.freeSpinsTextSprite.width/2);c.freeSpinsTextSprite.position.y=10}},updateShadow:function(){var a=this;a.shadow.currentSprite.width=a.freeSpinsTextSprite.width+a.fsLeftTextSprite.width+a.GAP-250;a.shadow.currentSprite.alpha=0},scaleTextObject:function(a,f){var d=a.style.font.split(" ");var c=d[0].split("px")[0];c=parseInt(c,10);c=Math.round(c*f);var e=c+"px "+d[1];var b=Sys.clone(a.style);b.font=e;a.style=b},scaleTextIfNeeded:function(){var b=this;var a=b.freeSpinsTextSprite.width+b.fsLeftTextSprite.width+this.GAP;if(a>b.MAX_WIDTH){var c=b.MAX_WIDTH/a;this.scaleTextObject(b.freeSpinsTextSprite,c);this.scaleTextObject(b.fsLeftTextSprite,c)}},resetTextStyles:function(){this.freeSpinsTextSprite.style=Game.TextStyles.FREE_SPINS_TEXT_STYLE;this.fsLeftTextSprite.style=Game.TextStyles.FS_LEFT_TEXT_STYLE},showCountDown:function(){var c=this,a;var b=c.model.readData("remainingSpins");c.resetTextStyles();c.fsLeftTextSprite.text=b;c.freeSpinsTextSprite.text=c.getFreeSpinsLeftTextString(b);c.scaleTextIfNeeded();c.updateTextLayout(b);c.updateShadow();c.animation.visible=true;a=c.animation.state.setAnimationByName(0,"animation",false);a.onComplete=function(){c.animation.visible=false;c.fireEvent("view:countDownEnd")}},abortCountDownAnimation:function(){var a=this;Game.PIXIUtils.resetSpineAnimation(a.animation);a.fireEvent("view:countDownEnd");a.animation.visible=false}};Warlords.CountDownFreespinsView=Sys.extend(Core.View,Warlords.CountDownFreespinsView,"Warlords.CountDownFreespinsView");Sys.ns("Warlords");Warlords.CountDownFreespinsController={constructor:function(){Warlords.CountDownFreespinsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){Warlords.CountDownFreespinsController.superclass.setupEvents.apply(this,arguments);var a=this;a.on({"notify:spin.spinAnimationStarted":a.onSpinAnimationStarted,"notify:stateHandler.enteringCountDownFreespinsState":a.onEnteringCountDownFreespinsState,"notify:quickStopper.quickStop":a.onQuickStop,"view:countDownEnd":a.onCountDownEnded})},onSpinAnimationStarted:function(){this.model.storeData("quickStop",false)},onQuickStop:function(){this.model.storeData("quickStop",true);var a=this.model.readData("showing");if(a){this.view.abortCountDownAnimation()}},onEnteringCountDownFreespinsState:function(){var c=this;var b=c.model.readData("quickStop");var a=Services.settingsManager.getSetting("quickSpin");if(b===false&&a===false){c.view.showCountDown();c.model.storeData("showing",true)}else{c.onCountDownEnded()}this.fireEvent("request:coinsField.showFreeSpinsLeft")},onCountDownEnded:function(){this.fireEvent("notify:countDownFreespin:end");this.model.storeData("showing",false)}};Warlords.CountDownFreespinsController=Sys.extend(Core.Controller,Warlords.CountDownFreespinsController,"Warlords.CountDownFreespinsController");Sys.ns("Warlords");Warlords.CountDownFreespinsModel={constructor:function(){Warlords.CountDownFreespinsModel.superclass.constructor.apply(this,arguments)},setupData:function(){this.setState("idle");this.storeData("remainingSpins",0);this.storeData("showing",false)},processServerResponse:function(d){var c=this;var b=0;if(d.currentGameState==="freespin"){if(Sys.isDefined(d.freespins)){if(Sys.isDefined(d.freespins.left)){b=d.freespins.left}if(Sys.isDefined(d.wins)&&Sys.isDefined(d.wins.freespins)){var a=d.wins.freespins;b=b-a}}if(d.clientaction==="init"){c.storeData("remainingSpins",b);c.setState("countDownAnimationRequested")}else{if(d.nextaction==="freespin"||d.clientaction==="freespin"){c.storeData("remainingSpins",b);c.setState("countDownAnimationRequested")}}}else{c.storeData("remainingSpins",b);c.setState("idle")}}};Warlords.CountDownFreespinsModel=Sys.extend(Core.Model,Warlords.CountDownFreespinsModel,"Warlords.CountDownFreespinsModel");Sys.ns("Warlords");Warlords.FreespinKeypadFields={constructor:function(){Warlords.FreespinKeypadFields.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={freespinsLeftKeypadFieldsAnimation:{state:{name:"FreespinsLeftKeypadFieldsAnimation",execute:function(c){},waitEvents:{"notify:freespinKeypadFields.animationCompleted":false}}},multiplierKeypadFieldsAnimation:{state:{name:"MultiplierKeypadFieldsAnimation",execute:function(c){},waitEvents:{"notify:freespinKeypadFields.animationCompleted":false}}},scatterUnveil:{queue:[function(c){if(a.readData("hasRunFreespin")===false){if(a.readData("winningScatter")==="SYM13"){c.stateHandler.pushState(c.states.freespinsLeftKeypadFieldsAnimation)}else{if(a.readData("winningScatter")==="SYM14"){c.stateHandler.pushState(c.states.multiplierKeypadFieldsAnimation)}}}}]},scatterWin:{queue:[function(c){if(a.readData("winningScatter")==="SYM13"){c.stateHandler.pushState(c.states.freespinsLeftKeypadFieldsAnimation)}else{if(a.readData("winningScatter")==="SYM14"){c.stateHandler.pushState(c.states.multiplierKeypadFieldsAnimation)}}}]}};return b},getMixinDependencies:function(){return["serverResponse","animation","userInput"]},getDefaultMVCClasses:function(){return{model:Warlords.FreespinKeypadFieldsModel,view:Warlords.FreespinKeypadFieldsView,controller:Warlords.FreespinKeypadFieldsController}}};Warlords.FreespinKeypadFields=Sys.extend(Core.Module,Warlords.FreespinKeypadFields,"Warlords.FreespinKeypadFields");Sys.ns("Warlords");Warlords.FreespinKeypadFieldsModel={MULTIPLIER_DEFAULT_VALUE:" ",constructor:function(){Warlords.FreespinKeypadFieldsModel.superclass.constructor.apply(this,arguments);this.freespinsLeftValue=0;this.multiplierValue=Warlords.Utils.MULTIPLIER_DEFAULT_VALUE},setupData:function(){this.storeData("gameMode","BASIC");this.storeData("freeSpinsMultiplierFrom",Warlords.Utils.MULTIPLIER_DEFAULT_VALUE);this.storeData("freeSpinsMultiplierTo",Warlords.Utils.MULTIPLIER_DEFAULT_VALUE);var a=Resources.readData("gameServerInitResponseObject");this.extractWinningScatter(a);this.storeData("hasRunFreespin",Warlords.Utils.hasRunFreespin(a));this.extractFreespinsData(a)},extractWinningScatter:function(b){var a="";if(b.winning){a=b.winning.scatter}this.storeData("winningScatter",a)},extractFreeSpinsLeft:function(f){var e=this;var b=Warlords.Utils.hasRunFreespin(f);var d=0;var a=0;if(Sys.isDefined(f.freespins)){if(Sys.isDefined(f.freespins.left)){d=f.freespins.left;a=f.freespins.left}if(Sys.isDefined(f.wins)&&Sys.isDefined(f.wins.freespins)&&f.restore!==true){var c=f.wins.freespins;d=d-c}}if(f.clientaction==="initfreespin"&&b===false){if(f.winning&&f.winning.scatter==="SYM13"){d=0}}e.storeData("freeSpinsLeft",d);e.storeData("freeSpinsTotal",a)},extractMultiplier:function(d){var c=this,b=c.readData("freeSpinsMultiplierTo");var a=Warlords.Utils.extractMultiplierFromServerResponse(d,b);c.storeData("freeSpinsMultiplierFrom",a.from);c.storeData("freeSpinsMultiplierTo",a.to)},extractFreespinsData:function(b){var a=this;a.extractFreeSpinsLeft(b);a.extractMultiplier(b)},processServerResponse:function(b){var a=this;if(Sys.isDefined(b.wins)){if(Sys.isDefined(b.wins.freespins)){a.storeData("additionalFreeSpins",b.wins.freespins)}else{a.storeData("additionalFreeSpins",0)}}this.extractFreespinsData(b);this.extractWinningScatter(b);this.storeData("hasRunFreespin",Warlords.Utils.hasRunFreespin(b))},getFreeSpinsLeft:function(){return this.readData("freeSpinsLeft")},getFreeSpinsTotal:function(){return this.readData("freeSpinsTotal")},parseInitFreespinResponse:function(a){this.processServerResponse(a)}};Warlords.FreespinKeypadFieldsModel=Sys.extend(Core.Model,Warlords.FreespinKeypadFieldsModel,"Warlords.FreespinKeypadFieldsModel");Sys.ns("Warlords");Warlords.FreespinKeypadFieldsView={FREESPINS_LEFT_LANGUAGE_KEY:Language.Keys.freeSpinsLeftUC,MULTIPLIER_LANGUAGE_KEY:Language.Keys.multiplierColon,VALUE_LABEL_GAP:5,LABEL_GAP:10,FS_ANIMATION_TIMES:{START:0,COUNT_UP_STEP:200,DISPLAY_VALUE:700,SCALE_DOWN:100},MULTI_ANIMATION_TIMES:{START:0,COUNT_UP_STEP:200,DISPLAY_VALUE:700,SCALE_DOWN:100},BACKGROUND_ALPHA:0.6,BACKGROUND_COLOR:0,FS_TEXT_MAX_WIDTH:500,constructor:function(){Warlords.FreespinKeypadFieldsView.superclass.constructor.apply(this,arguments);this.initialized=false},initAnimations:function(){var b=this,a=Game.stage.view.animationManager.getLayer("userInterfaceTop");b.fsGenericLabel=Game.TextStyles.FREESPINS_GENERIC_LABEL;b.fsGenericValue=Game.TextStyles.FREESPINS_GENERIC_VALUE;b.freeSpinsContainer=new PIXI.Container();b.freeSpinsContainer.position.x=Warlords.Positions.FS_KEYPAD_FS_LEFT_MULTI.position.x;b.freeSpinsContainer.position.y=Warlords.Positions.FS_KEYPAD_FS_LEFT_MULTI.position.y;b.overlayContainer=new PIXI.Container();b.overlayContainer.position.x=Warlords.Positions.FS_KEYPAD_FS_LEFT_MULTI.position.x;b.overlayContainer.position.y=Warlords.Positions.FS_KEYPAD_FS_LEFT_MULTI.position.y;a.addChild(b.freeSpinsContainer);a.addChild(b.overlayContainer);b.setupMultiplierComponents();b.setupFreespinsLeftComponents();b.checkAndScaleTextObjects();b.createKeypadBackground();b.onGameModeChanged("BASIC");b.initialized=true},checkAndScaleTextObjects:function(){var a=this;if(a.freeSpinsContainer.width>a.FS_TEXT_MAX_WIDTH){var b=(a.FS_TEXT_MAX_WIDTH-20)/a.freeSpinsContainer.width;a.fsGenericLabel=a.scaleTextObject(a.freeSpinsLeftLabel,b);a.fsGenericValue=a.scaleTextObject(a.freeSpinsLeftValue,b);a.scaleTextObject(a.multiplierLabel,b);a.scaleTextObject(a.multiplierValue,b)}},createKeypadBackground:function(){var b=this;var a=Game.stage.view.animationManager.getLayer("keypadBackground");b.keypadBackground=new PIXI.Graphics();b.keypadBackground.beginFill(b.BACKGROUND_COLOR,b.BACKGROUND_ALPHA);b.keypadBackground.drawRect(0,720-24-65,1280,65);b.keypadBackground.endFill();a.addChild(b.keypadBackground)},hideKeypadBackground:function(){this.keypadBackground.visible=false},showKeypadBackground:function(){this.keypadBackground.visible=true},updateFreespinsContainerLayout:function(){var c=this;var a=0;var d=c.freeSpinsContainer.children.length;for(var b=0;b<d;b++){var e=c.freeSpinsContainer.children[b];if(e.visible===true){e.x=Math.floor(a);a+=e.width+c.LABEL_GAP}}c.freeSpinsContainer.position.x=Warlords.Positions.FS_KEYPAD_FS_LEFT_MULTI.position.x-c.freeSpinsContainer.width*Warlords.Positions.FS_KEYPAD_FS_LEFT_MULTI.anchorPoint.x;c.freeSpinsContainer.position.y=Warlords.Positions.FS_KEYPAD_FS_LEFT_MULTI.position.y-c.freeSpinsContainer.height*Warlords.Positions.FS_KEYPAD_FS_LEFT_MULTI.anchorPoint.y;c.freeSpinsContainer.updateTransform();c.overlayContainer.position.x=c.freeSpinsContainer.position.x;c.overlayContainer.position.y=c.freeSpinsContainer.position.y},scaleTextObject:function(a,f){var d=a.style.font.split(" ");var c=d[0].split("px")[0];c=parseInt(c,10);c=Math.round(c*f);var e=c+"px "+d[1];var b=Sys.clone(a.style);b.font=e;a.style=b;return b},setupFreespinsLeftComponents:function(){var c=this;var a=Services.languageManager.getText(c.FREESPINS_LEFT_LANGUAGE_KEY);var b=c.model.getFreeSpinsLeft();c.freespinsLeftContainer=new PIXI.Container();c.overlayContainerFreeSpin=new PIXI.Container();c.overlayContainerFreeSpin.anchor=new PIXI.Point(0.5,0.5);c.freeSpinsLeftLabel=Game.PIXIFactory.createAndAddText(a,c.fsGenericLabel,c.freespinsLeftContainer);c.freeSpinsLeftValue=Game.PIXIFactory.createAndAddText(b,c.fsGenericValue,c.freespinsLeftContainer,new PIXI.Point(),new PIXI.Point(0,1));c.freeSpinsLeftAnimatedValue=Game.PIXIFactory.createAndAddText(b,Game.TextStyles.FREESPINS_ANIMATED_VALUE,c.overlayContainerFreeSpin,new PIXI.Point(),new PIXI.Point(0.5,0.5));c.freeSpinsLeftAnimatedValue.alpha=0;c.overlayContainerFreeSpin.scale.set(0.25,0.25);c.freeSpinsContainer.addChild(c.freespinsLeftContainer);c.overlayContainer.addChild(c.overlayContainerFreeSpin);c.freespinsLeftValueOverlayScaleAnimation=new Animation.Holder({target:c.overlayContainerFreeSpin,onEnd:c.onAnimationComplete.bind(c),prop:"scale"});c.freespinsLeftValueOverlayPulsAnimation=new Animation.Holder({target:c.freeSpinsLeftAnimatedValue,prop:"scale"});c.freespinsLeftValueOverlayAlphaAnimation=new Animation.Holder({target:c.freeSpinsLeftAnimatedValue,prop:"alpha"});c.freespinsLeftCountUpAnimation=new Animation.Holder({target:c.model,prop:"freespinsLeftValue",onUpdate:c.updateFreespinsLeftValue.bind(c)});Game.stage.view.animationManager.addToAnimationLoop(c.freespinsLeftValueOverlayScaleAnimation);Game.stage.view.animationManager.addToAnimationLoop(c.freespinsLeftValueOverlayPulsAnimation);Game.stage.view.animationManager.addToAnimationLoop(c.freespinsLeftValueOverlayAlphaAnimation);Game.stage.view.animationManager.addToAnimationLoop(c.freespinsLeftCountUpAnimation);c.updateFreespinsLeftValue();c.updateFSValuePosition()},updateFSValuePosition:function(){var b=this;var a=Services.languageManager.getText(b.FREESPINS_LEFT_LANGUAGE_KEY);b.freeSpinsLeftLabel.text=a;b.freeSpinsLeftLabel.style=b.fsGenericLabel;b.freeSpinsLeftValue.style=b.fsGenericValue;b.freeSpinsLeftAnimatedValue.style=Game.TextStyles.FREESPINS_ANIMATED_VALUE;b.freeSpinsLeftLabel.style=b.fsGenericLabel;b.freeSpinsLeftValue.style=b.fsGenericValue;b.freeSpinsLeftAnimatedValue.style=Game.TextStyles.FREESPINS_ANIMATED_VALUE;b.freeSpinsLeftValue.x=b.freeSpinsLeftLabel.x+b.freeSpinsLeftLabel.width+b.VALUE_LABEL_GAP+b.freeSpinsLeftValue.width*b.freeSpinsLeftValue.anchor.x;b.freeSpinsLeftValue.y=b.freeSpinsLeftLabel.y+b.freeSpinsLeftLabel.height*b.freeSpinsLeftValue.anchor.y;b.overlayContainerFreeSpin.position.x=b.freeSpinsLeftValue.x+b.freeSpinsLeftValue.width*0.5;b.overlayContainerFreeSpin.position.y=b.freeSpinsLeftValue.y-b.freeSpinsLeftValue.height/2;b.updateFreespinsContainerLayout()},updateFreespinsLeftValue:function(){var a=this;var b=Math.floor(a.model.freespinsLeftValue);if(b===parseInt(a.freeSpinsLeftValue.text,10)){return}a.freeSpinsLeftValue.text=b;a.freeSpinsLeftAnimatedValue.text=b;if(a.freespinsLeftValueOverlayScaleAnimation.running){a.freespinsLeftValueOverlayPulsAnimation.restore();a.freespinsLeftValueOverlayPulsAnimation.animate([{time:0,value:{x:1.5,y:1.5}},{time:66,value:{x:1,y:1}}],true);a.fireEvent("view:playSound",{name:"multiplierAndFreespinsLeftCountUpLoop"})}a.updateFSValuePosition()},updateFreespinsLeft:function(){var b=this;if(b.initialized){var a=Services.languageManager.getText(b.FREESPINS_LEFT_LANGUAGE_KEY);b.freeSpinsLeftLabel.text=a;b.model.freespinsLeftValue=b.model.getFreeSpinsLeft();this.updateFreespinsLeftValue()}},updateFreespinsLeftWithAnimation:function(){var d=this;if(d.initialized){var a=Services.languageManager.getText(d.FREESPINS_LEFT_LANGUAGE_KEY);d.freeSpinsLeftLabel.text=a;var g=d.model.getFreeSpinsTotal();var f=d.model.getFreeSpinsLeft();d.model.freespinsLeftValue=f;var e=d.FS_ANIMATION_TIMES.COUNT_UP_STEP*(g-f);var c=e+d.FS_ANIMATION_TIMES.DISPLAY_VALUE;var b=c+d.FS_ANIMATION_TIMES.SCALE_DOWN;d.freeSpinsLeftValue.alpha=0;d.freespinsLeftValueOverlayScaleAnimation.restore();d.freespinsLeftValueOverlayScaleAnimation.animate([{time:d.FS_ANIMATION_TIMES.START,value:{x:0.25,y:0.25}},{time:e-50,value:{x:1.4,y:1.4}},{time:e,value:{x:1.3,y:1.3}},{time:c,value:{x:1.3,y:1.3}},{time:b,value:{x:0.25,y:0.25}}],true);d.freespinsLeftValueOverlayAlphaAnimation.restore();d.freespinsLeftValueOverlayAlphaAnimation.animate([{time:d.FS_ANIMATION_TIMES.START,value:0},{time:d.FS_ANIMATION_TIMES.START+50,value:1},{time:b-50,value:1},{time:b,value:0}],true);d.freespinsLeftCountUpAnimation.restore();d.freespinsLeftCountUpAnimation.animate([{time:d.FS_ANIMATION_TIMES.START,value:f},{time:e,value:g}],true)}else{d.onAnimationComplete()}},setupMultiplierComponents:function(){var b=this;var a=Services.languageManager.getText(b.MULTIPLIER_LANGUAGE_KEY);b.multiplierContainer=new PIXI.Container();b.overlayContainerMulti=new PIXI.Container();b.overlayContainerMulti.anchor=new PIXI.Point(0.5,0.5);b.overlayContainerMulti.scale.set(0.25,0.25);b.multiplierLabel=Game.PIXIFactory.createAndAddText(a,b.fsGenericLabel,b.multiplierContainer);var c=b.model.readData("freeSpinsMultiplierFrom");b.multiplierValue=Game.PIXIFactory.createAndAddText(c,b.fsGenericValue,b.multiplierContainer,new PIXI.Point(),new PIXI.Point(0,1));b.multiplierAnimatedValue=Game.PIXIFactory.createAndAddText(c,Game.TextStyles.FREESPINS_ANIMATED_VALUE,b.overlayContainerMulti);b.multiplierAnimatedValue.anchor.set(0.5,0.5);b.multiplierAnimatedValue.alpha=0;b.freeSpinsContainer.addChild(b.multiplierContainer);b.overlayContainer.addChild(b.overlayContainerMulti);b.updateMultiValuePosition();b.multiplierValueOverlayScaleAnimation=new Animation.Holder({target:b.overlayContainerMulti,onEnd:b.onAnimationComplete.bind(b),prop:"scale"});b.multiplierValueOverlayPulsAnimation=new Animation.Holder({target:b.multiplierAnimatedValue,onUpdate:b.multiplierPulseUpdateCallback.bind(b),prop:"scale"});b.multiplierValueOverlayAlphaAnimation=new Animation.Holder({target:b.multiplierAnimatedValue,prop:"alpha"});b.multiplierCountUpAnimation=new Animation.Holder({target:b.model,prop:"multiplierValue",onUpdate:b.multiplierAnimationUpdateCallback.bind(b)});Game.stage.view.animationManager.addToAnimationLoop(b.multiplierValueOverlayScaleAnimation);Game.stage.view.animationManager.addToAnimationLoop(b.multiplierValueOverlayPulsAnimation);Game.stage.view.animationManager.addToAnimationLoop(b.multiplierValueOverlayAlphaAnimation);Game.stage.view.animationManager.addToAnimationLoop(b.multiplierCountUpAnimation)},updateMultiValuePosition:function(){var a=this;a.multiplierLabel.style=a.fsGenericLabel;a.multiplierValue.style=a.fsGenericValue;a.multiplierAnimatedValue.style=Game.TextStyles.FREESPINS_ANIMATED_VALUE;a.multiplierValue.x=a.multiplierLabel.x+a.multiplierLabel.width+a.VALUE_LABEL_GAP+a.multiplierValue.width*a.multiplierValue.anchor.x;a.multiplierValue.y=a.multiplierLabel.y+a.multiplierLabel.height*a.multiplierValue.anchor.y;a.overlayContainerMulti.position.x=a.multiplierValue.x+a.multiplierValue.width*0.5;a.overlayContainerMulti.position.y=a.multiplierValue.y-a.multiplierValue.height/2;a.updateFreespinsContainerLayout()},updateMultiplier:function(){var a=this;var b=a.model.readData("freeSpinsMultiplierTo");a.model.multiplierValue=b;a.multiplierValue.text=b;a.multiplierAnimatedValue.text=b;this.updateMultiValuePosition()},replaceZeroValueWithDefault:function(a){if(a===0){a=this.model.MULTIPLIER_DEFAULT_VALUE}return a},resetMultiplier:function(){var a=this;var b=a.model.readData("freeSpinsMultiplierFrom");b=a.replaceZeroValueWithDefault(b);a.model.multiplierValue=b;a.multiplierValue.text=b;a.multiplierAnimatedValue.text=b;this.updateMultiValuePosition()},multiplierPulseUpdateCallback:function(){},multiplierAnimationUpdateCallback:function(){var a=this;var b=Math.floor(a.model.multiplierValue);b=a.replaceZeroValueWithDefault(b);if(b===parseInt(a.multiplierAnimatedValue.text,10)){return}if(a.multiplierValueOverlayScaleAnimation.running&&b!==this.model.MULTIPLIER_DEFAULT_VALUE){a.multiplierValueOverlayPulsAnimation.restore();a.multiplierValueOverlayPulsAnimation.animate([{time:0,value:{x:1.5,y:1.5}},{time:60,value:{x:1,y:1}}],true);a.fireEvent("view:playSound",{name:"multiplierAndFreespinsLeftCountUpLoop"})}a.multiplierValue.text=b;a.multiplierAnimatedValue.text=b;this.updateMultiValuePosition()},updateMultiWithAnimation:function(){var d=this;if(d.initialized){var a=Services.languageManager.getText(d.MULTIPLIER_LANGUAGE_KEY);d.multiplierLabel.text=a;var g=d.model.readData("freeSpinsMultiplierFrom");var f=d.model.readData("freeSpinsMultiplierTo");var e=d.MULTI_ANIMATION_TIMES.COUNT_UP_STEP*(f-g);var c=e+d.MULTI_ANIMATION_TIMES.DISPLAY_VALUE;var b=c+d.MULTI_ANIMATION_TIMES.SCALE_DOWN;d.multiplierValue.alpha=0;d.multiplierValueOverlayScaleAnimation.restore();d.multiplierValueOverlayScaleAnimation.animate([{time:d.MULTI_ANIMATION_TIMES.START,value:{x:0.25,y:0.25}},{time:e-50,value:{x:1.4,y:1.4}},{time:e,value:{x:1.3,y:1.3}},{time:c,value:{x:1.3,y:1.3}},{time:b,value:{x:0.25,y:0.25}}],true);d.multiplierValueOverlayAlphaAnimation.restore();d.multiplierValueOverlayAlphaAnimation.animate([{time:d.MULTI_ANIMATION_TIMES.START,value:0},{time:d.MULTI_ANIMATION_TIMES.START+50,value:1},{time:b-50,value:1},{time:b,value:0}],true);d.multiplierCountUpAnimation.restore();d.multiplierCountUpAnimation.animate([{time:d.MULTI_ANIMATION_TIMES.START,value:g},{time:e,value:f}],true)}else{d.onAnimationComplete()}},resetTarget:function(b){var d=b.animation.keyFrames[0];var a=d.value;if(Sys.isObj(a)){var c=Sys.isDefined(b.prop)?b.target[b.prop]:b.target;Sys.iterate(a,function(e,f){c[e]=f[e]})}else{b.target[b.prop]=a}},abortAnimation:function(a){if(a.running){a.stop()}},abortActiveAnimations:function(){var a=this;this.abortAnimation(a.multiplierValueOverlayScaleAnimation);this.abortAnimation(a.multiplierValueOverlayAlphaAnimation);a.multiplierValue.alpha=1;a.multiplierValue.scale.set(1,1);a.overlayContainerMulti.scale.set(0.25,0.25);a.multiplierAnimatedValue.alpha=0;if(a.multiplierCountUpAnimation.running){a.multiplierCountUpAnimation.stop();a.updateMultiplier()}this.abortAnimation(a.freespinsLeftValueOverlayScaleAnimation);this.abortAnimation(a.freespinsLeftValueOverlayAlphaAnimation);a.freeSpinsLeftValue.alpha=1;a.freeSpinsLeftValue.scale.set(1,1);a.overlayContainerFreeSpin.scale.set(0.25,0.25);a.freeSpinsLeftAnimatedValue.alpha=0;if(a.freespinsLeftCountUpAnimation.running){a.freespinsLeftCountUpAnimation.stop();a.updateFreespinsLeft()}a.onAnimationComplete()},onAnimationComplete:function(){this.multiplierValue.alpha=1;this.freeSpinsLeftValue.alpha=1;this.fireEvent("view:animationComplete")},onGameModeChanged:function(b){var a=this.model.readData("winningScatter");this.freeSpinsContainer.visible=(b==="FREESPIN");this.multiplierContainer.visible=(b==="FREESPIN"&&a==="SYM14");this.updateFreespinsLeftValue();this.multiplierAnimationUpdateCallback()}};Warlords.FreespinKeypadFieldsView=Sys.extend(Core.View,Warlords.FreespinKeypadFieldsView,"Warlords.FreespinKeypadFieldsView");Sys.ns("Warlords");Warlords.FreespinKeypadFieldsController={constructor:function(){Warlords.FreespinKeypadFieldsController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:responseParser.freeSpinInitResponseParsed":a.onFreespinInitResponseParsed,"notify:stateHandler.enteringFreespinsLeftKeypadFieldsAnimationState":a.onEnteringFSLeftAnimationState,"notify:stateHandler.enteringMultiplierKeypadFieldsAnimationState":a.onEnteringMultiAnimationState,"notify:gameModeChanged":a.onGameModeChanged,"request:coinsField.showFreeSpinsLeft":a.showFreeSpinsLeft,"request:keypadBackground.hide":a.view.hideKeypadBackground.bind(a.view),"request:keypadBackground.show":a.view.showKeypadBackground.bind(a.view),"view:playSound":a.onPlaySound,"view:animationComplete":a.onAnimationComplete})},onEnteringFSLeftAnimationState:function(){this.view.updateFreespinsLeftWithAnimation();this.fireEvent("request:audioPlayer.play",{name:"multiplierAndFreespinsLeftCountUp"});this.fireEvent("request:audioPlayer.play",{name:"multiplierAndFreespinsLeftCountUpLoop",id:"multiplierAndFreespinsLeftCountUpLoop",loop:true});this.startListeningToUserInput()},onUserInputEnd:function(){this.stopListeningToUserInput();var a=this.model.readData("freeSpinsTotal");this.model.storeData("freeSpinsLeft",a);this.view.abortActiveAnimations()},onEnteringMultiAnimationState:function(){this.view.updateMultiWithAnimation();this.fireEvent("request:audioPlayer.play",{name:"multiplierAndFreespinsLeftCountUp"});this.fireEvent("request:audioPlayer.play",{name:"multiplierAndFreespinsLeftCountUpLoop",id:"multiplierAndFreespinsLeftCountUpLoop",loop:true});this.startListeningToUserInput()},showFreeSpinsLeft:function(){this.view.updateFreespinsLeft()},onGameModeChanged:function(a){this.model.storeData("gameMode",a);if(this.model.readData("winningScatter")!=="SYM13"){this.view.updateFreespinsLeft()}this.view.onGameModeChanged(a)},onPlaySound:function(a){this.fireEvent("request:audioPlayer.play",a)},onAnimationComplete:function(){this.stopListeningToUserInput();this.fireEvent("notify:freespinKeypadFields.animationCompleted");this.fireEvent("request:audioPlayer.stop","multiplierAndFreespinsLeftCountUpLoop")},onFreespinInitResponseParsed:function(c){var b=this;b.model.parseInitFreespinResponse(c);var a=b.model.readData("hasRunFreespin");if(a){b.view.updateMultiplier()}else{b.view.resetMultiplier()}}};Warlords.FreespinKeypadFieldsController=Sys.extend(Core.Controller,Warlords.FreespinKeypadFieldsController,"Warlords.FreespinKeypadFieldsController");Sys.ns("Integration.OpenBet");Integration.OpenBet.ResponseParserControllerOverride={doIntegrationSpecificResponseHandling:function(c){if(!Sys.isDefined(c)||(c.clientaction==="rcinfo"||c.clientaction==="rcreset")){return c}var b=c.credit+c.openbet.freebets,a=c.openbet.rgitoken;if(!isNaN(b)){c.credit=b}if(Sys.isDefined(a)){Resources.readData("extraParams")["openbet.rgitoken"]=encodeURIComponent(a)}return c}};Integration.OpenBet.ServerManagerModelOverride={doIntegrationSpecificRequestUrlUpdates:function(a){var b=Resources.readData("extraParams");Sys.iterate(b,function(d,c){if(d.match(/openbet\.\w+/)){a+="&"+d+"="+c}});return a}};Integration.OpenBet.ErrorManagerControllerOverride={handleIntegrationSpecificErrors:function(b){var c=this,d=Sys.utils.getErrorCode(b),a=Sys.utils.getResponseParameter("errordata",b);if(!Sys.isDefined(d)||d<997||d>1000){return false}if(Sys.isDefined(a)){a=decodeURIComponent(a);a=a.replace(/\+/g," ")}return{title:"Error ("+d+")",text:a,buttons:c.getButtons([{type:"casino",reason:3}]),fatal:true}}};Integration.OpenBet.GameHistoryOverride=function(){var a=Game.getHistoryTab;Game.getHistoryTab=function(c,d,b){if(b){a(c,d,b)}}};Integration.OpenBet.applyOverrides=function(){Sys.override(Core.ResponseParserController,Integration.OpenBet.ResponseParserControllerOverride);Sys.override(Core.ServerManagerModel,Integration.OpenBet.ServerManagerModelOverride);Sys.override(Core.ErrorManagerController,Integration.OpenBet.ErrorManagerControllerOverride);Integration.OpenBet.GameHistoryOverride()};if(Sys.openBetMode){Integration.OpenBet.applyOverrides()}Sys.ns("Integration.GCM");Integration.GCM.ErrorManagerModel={setupDialogConfig:function(){var a={},b;Sys.each([11,13],function(c){b=Services.languageManager.getText(c+"");a[c]={category:"RECOVERABLE_ERROR",severity:"INFO",errorCode:"LIMIT_EXCEEDED",message:b,extraParameters:{originalError:c,originalTitle:Services.languageManager.getText(Language.Keys.playLimit),originalMessage:b},revert:true}});b=Services.languageManager.getText(Language.Keys.freeRounds_expired);a[12]={category:"RECOVERABLE_ERROR",severity:"INFO",errorCode:"FREEROUNDS_EXPIRED",message:b,extraParameters:{originalError:12,originalTitle:Services.languageManager.getText(Language.Keys.freeRounds_expired)},revert:false};b=Services.languageManager.getText(Language.Keys.returnToLobby);a[20]={category:"CONNECTION_ERROR",severity:"ERROR",errorCode:"SESSION_TIMEOUT",message:b,extraParameters:{originalError:20,originalTitle:Services.languageManager.getText(Language.Keys.btn_sessionTimeOut),originalMessage:b,reason:3},revert:false};Sys.each([10,15,51,100,101,102],function(c){b=Services.languageManager.getText(Language.Keys.deposit);a[c]={category:"INSUFFICIENT_FUNDS",severity:"INFO",errorCode:"CLIENT_INSUFFICIENT_FUNDS",message:b,extraParameters:{originalError:c,originalTitle:Services.languageManager.getText(Language.Keys.outOfMoney),originalMessage:b,reason:5},revert:true}});Sys.each([0,53,56,58],function(c){b=Services.languageManager.getText(Language.Keys.gameUnavailable);a[c]={category:"CONNECTION_ERROR",severity:"ERROR",errorCode:"CANNOT_CONNECT_TO_SERVER",message:b,extraParameters:{originalError:c,originalTitle:Services.languageManager.getText(Language.Keys.gameUnavailable),reason:9},revert:false}});b=Services.languageManager.getText(Language.Keys.accountUnavailable);a[70]={category:"LOGIN_ERROR",severity:"ERROR",errorCode:"ACCOUNT_UNAVAILABLE",message:b,extraParameters:{originalError:70,originalTitle:Services.languageManager.getText(Language.Keys.accountUnavailable)},revert:false};b=Services.languageManager.getText(Language.Keys.reload);a.http={category:"CONNECTION_ERROR",severity:"ERROR",errorCode:"CANNOT_CONNECT_TO_SERVER",message:b,extraParameters:{originalError:"httpError",originalTitle:Services.languageManager.getText(Language.Keys.connectionLost),originalMessage:b,reason:9},revert:false};b=Services.languageManager.getText(Language.Keys.deposit);a.clientOutOfMoney={category:"INSUFFICIENT_FUNDS",severity:"INFO",errorCode:"CLIENT_INSUFFICIENT_FUNDS",message:b,extraParameters:{originalError:"clientOutOfMoney",originalTitle:Services.languageManager.getText(Language.Keys.outOfMoney),reason:9},revert:false};b=Services.languageManager.getText(Language.Keys.returnToLobby);a.generic={category:"NON_RECOVERABLE_ERROR",severity:"ERROR",errorCode:"CLIENTERROR",message:b,extraParameters:{originalError:"generic",originalTitle:Services.languageManager.getText(Language.Keys.error),originalMessage:b,reason:9},revert:false};return a}};Integration.GCM.ErrorManagerDesktopModel={setupDialogConfig:function(){return Core.ErrorManagerDesktopModel.superclass.setupDialogConfig.apply(this,arguments)}};Integration.GCM.ErrorManagerController={showDialog:function(a){var b=(a.errorCode==="http")?0:a.errorCode;this.fireEvent("notify:errorManager.error",b,Services.languageManager.getText(b));this.fireEvent("request:gcmProxy.handleError",a)},handleIntegrationSpecificErrors:function(b){var a=Sys.utils.getResponseParameter("openbet.error.xml",b),c=undefined;if(Sys.isDefined(a)){c={RGIError:true,RGIXML:a.replace(/\+/g," ")}}return c},getDialogConfig:function(a){return this.model.getDialogConfig(a)},handleClientOutOfMoneyError:function(){this.showDialogForErrorCode("clientOutOfMoney")}};Integration.GCM.DialogWindowController={onShowDialogRequest:function(b){var c=this,e=b.severity==="stopped",d={category:"MULTI_CHOICE_DIALOG",severity:e?"ERROR":"INFO",message:Sys.isDefined(b.text)?b.text:b.title,errorCode:"ERROR",actions:[],revert:false,extraParameters:{}},a=[];Sys.each(b.buttons,function(f){a.push(f.text);d.actions.push(f.action)});d.extraParameters.options=a;c.fireEvent("request:gcmProxy.handleError",d);c.model.storeData("currentDialogConfig",b);c.model.setState("showing")}};Integration.GCM.SlowRequestAnimationController={onShowDialog:function(){}};(function(){if(Sys.isGcmEnabled){Sys.override(Core.ErrorManagerModel,Integration.GCM.ErrorManagerModel);Sys.override(Core.ErrorManagerController,Integration.GCM.ErrorManagerController);Sys.override(Core.DialogWindowController,Integration.GCM.DialogWindowController);Sys.override(Core.SlowRequestAnimationController,Integration.GCM.SlowRequestAnimationController);if(Sys.isDefined(Core.ErrorManagerDesktopModel)){Sys.override(Core.ErrorManagerDesktopModel,Integration.GCM.ErrorManagerDesktopModel)}}}());Sys.ns("Warlords");Warlords.FreeSpinIntroController={AUTO_CLOSE_TIME:5000,constructor:function(){Warlords.FreeSpinIntroController.superclass.constructor.apply(this,arguments)},stopAutoplay:function(){if(Services.settingsManager.getSetting("autoPlayNrSpins")>0&&Services.settingsManager.getSetting("stopAutoplayIfFreeSpin"+this.getStopString()+"Won")){this.fireEvent("request:autoPlayer.stop")}},resumeAutoClose:function(){var a=this;if((Services.settingsManager.getSetting("autoPlayNrSpins")>0)&&!(Services.settingsManager.getSetting("stopAutoplayIfFreeSpin"+a.getStopString()+"Won"))){a.autoCloseTimeOut=setTimeout(function(){a.autoCloseSplash()},a.AUTO_CLOSE_TIME)}},getStopString:function(){var a="";switch(this.model.readData("winningScatter")){case"SYM13":a="1";break;case"SYM14":a="2";break;case"SYM15":a="3";break}return a},onSplashClosed:function(){var a=this;a.fireEvent("request:spin.activateInitReelset","freespin","base");a.fireEvent("request:background.changeImage","freespinBackground");a.fireEvent("request:coinsField.showProgressiveWin",true);a.fireEvent("request:audioPlayer.stop","introFreeSpin");a.fireEvent("notify:freeSpinIntro.splashClosed");Services.storage.storeData("freeSpins.canStart",false)},show:function(){var c=this;c.view.show();c.stopAutoplay();if(c.model.readData("clientAction")==="init"){c.fireEvent("request:ambienceManager.ambienceEnableState",true)}c.fireEvent("request:ambienceManager.ambienceChangeActive",{name:"introFreeSpin",id:"introFreeSpin",loop:false,buffer:Platform.isDesktopDevice?"main":"freespin"});c.fireEvent("request:coinsField.showProgressiveWin",true);Services.storage.storeData("freeSpins.canStart",true);var a=Warlords.PortraitBackgroundManager.BACKGROUND_MG;switch(this.model.readData("winningScatter")){case"SYM13":a=Warlords.PortraitBackgroundManager.BACKGROUND_FS_1;c.fireEvent("request:audioPlayer.play",{name:"splashFreeSpin1",id:"splashFreeSpin",buffer:Platform.isDesktopDevice?"main":"freespin",loop:true});break;case"SYM14":a=Warlords.PortraitBackgroundManager.BACKGROUND_FS_2;c.fireEvent("request:audioPlayer.play",{name:"splashFreeSpin2",id:"splashFreeSpin",buffer:Platform.isDesktopDevice?"main":"freespin",loop:true});break;case"SYM15":a=Warlords.PortraitBackgroundManager.BACKGROUND_FS_3;c.fireEvent("request:audioPlayer.play",{name:"splashFreeSpin3",id:"splashFreeSpin",buffer:Platform.isDesktopDevice?"main":"freespin",loop:true});break}var b=c.model.readData("hasRunFreespin");if(b){c.fireEvent("request:coinsField.showFreeSpinsLeft")}c.fireEvent("request:portraitBackgroundManager.changeBackground",a)},onClosed:function(){var a=this;switch(this.model.readData("winningScatter")){case"SYM13":a.fireEvent("request:ambienceManager.ambienceChangeActive",{name:"ambienceFreeSpin1",id:"ambienceFreeSpin1",loop:true});break;case"SYM14":a.fireEvent("request:ambienceManager.ambienceChangeActive",{name:"ambienceFreeSpin2",id:"ambienceFreeSpin2",loop:true});a.fireEvent("request:coinsField.showFreeSpinsLeft");break;case"SYM15":a.fireEvent("request:ambienceManager.ambienceChangeActive",{name:"ambienceFreeSpin3",id:"ambienceFreeSpin3",loop:true});a.fireEvent("request:coinsField.showFreeSpinsLeft");break}a.fireEvent("request:audioPlayer.stop","splashFreeSpin");clearTimeout(a.autoCloseTimeOut);a.fireEvent("request:audioPlayer.stop","introFreeSpin");a.stopListeningToUserInput();a.fireEvent("request:spinButton.show",a.MODULE_NAME);a.fireEvent("notify:freeSpinIntro.closed",a.model.readData("freeSpinsWon"))}};Warlords.FreeSpinIntroController=Sys.extend(Game.Slots.FreeSpinIntroController,Warlords.FreeSpinIntroController,"Warlords.FreeSpinIntroController");Sys.ns("Warlords");Warlords.RespinController={constructor:function(){Warlords.RespinController.superclass.constructor.apply(this,arguments)},onRestore:function(){this.requestRestoreStateDialog();this.fireEvent("request:ambienceManager.ambienceEnableState",true)},requestRestoreStateDialog:function(){var a=this;a.fireEvent("request:dialogWindow.showDialog",{title:Services.languageManager.getText(Language.Keys.restoredGameHeader),text:Services.languageManager.getText(Language.Keys.continuePlaying),buttons:[{scope:a,text:Services.languageManager.getText(Language.Keys.btn_continue),action:function(){a.fireEvent("notify:"+a.MODULE_NAME+"RestoreStateDialog.closed");a.startSpin()}}]})},stopSpin:function(){var a=this,b=a.model.readData("serverResponse");if(a.model.readData("active")){a.model.setState("stopped");a.fireEvent("request:spin.stopSpin",b.reelInfo,b.nearWinList,b)}if(a.model.readData("clientAction")==="respin"&&Services.settingsManager.getSetting("stopAutoplayIfRespinWon")){this.fireEvent("request:autoPlayer.stop")}}};Warlords.RespinController=Sys.extend(Core.Slots.SpinBaseController,Warlords.RespinController,"Warlords.RespinController");Sys.ns("Warlords");Warlords.SpinSettingsView={constructor:function(){Warlords.SpinSettingsView.superclass.constructor.apply(this,arguments)},ADVANCED_AUTOPLAY_SETTINGS:{stopAutoplayTitle:{labelOCTKey:Language.Keys.autoplay_setting_stopAutoPlay,type:"settingGroupTitle"},stopAutoplayIfBalanceDecreasedBy:{labelOCTKey:Language.Keys.autoplay_setting_ifCashDecreasesBy,buttonTextOCTKey:Language.Keys.btn_addValue,infoOCTKey:Language.Keys.autoplay_setting_ifCashDecreasesByInfoTouch,type:"interactiveContainer",defaultValue:0},stopAutoplayIfWinExceeds:{labelOCTKey:Language.Keys.autoplay_setting_ifWinExeeds,buttonTextOCTKey:Language.Keys.btn_addValue,type:"interactiveContainer",defaultValue:0},stopAutoplayIfBalanceIncreasedBy:{labelOCTKey:Language.Keys.autoplay_setting_ifCashIncreasesBy,buttonTextOCTKey:Language.Keys.btn_addValue,type:"interactiveContainer",defaultValue:0},stopAutoplayIfRespinWon:{type:"ToggleSwitch",titleOCTKey:Language.Keys.ifReSpinsIsStarted,defaultValue:false},stopAutoplayIfFreeSpin1Won:{type:"ToggleSwitch",titleOCTKey:Language.Keys.ifBarbarianFreeSpinsIsWon,defaultValue:false},stopAutoplayIfFreeSpin2Won:{type:"ToggleSwitch",titleOCTKey:Language.Keys.ifPriestessFreeSpinsIsWon,defaultValue:false},stopAutoplayIfFreeSpin3Won:{type:"ToggleSwitch",titleOCTKey:Language.Keys.ifSamuraiFreeSpinsIsWon,defaultValue:false}},update:function(){var c=this,b=c.model.readData.bind(c.model),a=!b("disabled"),d=b("autoPlayNrSpins");c.nrAutoPlaySpins.setValue(d);c.stopIfAutoplayingBonusGameWon.toggle(b("stopAutoplayIfAutoplayingBonusGameWon"));c.quickSpin.toggle(b("quickSpin"));c.spinButtonPosition.toggle(b("leftHandMode"));if(d===c.model.getAutoplaySpinsArray()[0]){c.stopIfAutoplayingBonusGameWon.toggle(false);c.stopIfAutoplayingBonusGameWon.disable();Sys.iterate(c.ADVANCED_AUTOPLAY_SETTINGS,function(f,e){c.advancedSettings[f].setValue(e.defaultValue)})}else{if(a&&!c.stopIfAutoplayingBonusGameWon.isEnabled()){c.stopIfAutoplayingBonusGameWon.enable()}}}};Warlords.SpinSettingsView=Sys.extend(Interface.SpinSettingsView,Warlords.SpinSettingsView,"Warlords.SpinSettingsView");Sys.ns("Warlords");Warlords.PortraitBackgroundManager={constructor:function(){Warlords.PortraitBackgroundManager.superclass.constructor.apply(this,arguments)},getStateChanges:function(){},getMixinDependencies:function(){return[]},getDefaultMVCClasses:function(){return{controller:Warlords.PortraitBackgroundManagerController}}};Warlords.PortraitBackgroundManager=Sys.extend(Core.Module,Warlords.PortraitBackgroundManager,"Warlords.PortraitBackgroundManager");Warlords.PortraitBackgroundManager.BACKGROUND_FS_1="fs1";Warlords.PortraitBackgroundManager.BACKGROUND_FS_2="fs2";Warlords.PortraitBackgroundManager.BACKGROUND_FS_3="fs3";Warlords.PortraitBackgroundManager.BACKGROUND_MG="maingame";Warlords.PortraitBackgroundManager.BACKGROUND_FS_INTRO="fsIntro";Warlords.PortraitBackgroundManager.BACKGROUND_FS_OUTRO="fsOutro";Sys.ns("Warlords");Warlords.PortraitBackgroundManagerController={constructor:function(a){Warlords.PortraitBackgroundManagerController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"request:portraitBackgroundManager.changeBackground":a.changeCssBackground})},changeCssBackground:function(b){if(!Platform.isMobileDevice){return}var c;var d;var a;switch(b){case Warlords.PortraitBackgroundManager.BACKGROUND_FS_1:c=Resources.readData("animationImages").backgroundCssFS1;break;case Warlords.PortraitBackgroundManager.BACKGROUND_FS_2:c=Resources.readData("animationImages").backgroundCssFS2;break;case Warlords.PortraitBackgroundManager.BACKGROUND_FS_3:c=Resources.readData("animationImages").backgroundCssFS3;break;case Warlords.PortraitBackgroundManager.BACKGROUND_FS_INTRO:a="black";break;case Warlords.PortraitBackgroundManager.BACKGROUND_FS_OUTRO:a="black";break;default:c=Resources.readData("animationImages").backgroundCssMaingame;break}if(c){d=c.baseTexture.source.src}this.fireEvent("request:orientationManager.setDefaultBackground",d,a)}};Warlords.PortraitBackgroundManagerController=Sys.extend(Core.Controller,Warlords.PortraitBackgroundManagerController,"Warlords.PortraitBackgroundManagerController");Sys.ns("Warlords");Warlords.TotalDarknessFilter={constructor:function(){PIXI.AbstractFilter.call(this,null,"precision mediump float;varying vec2 vTextureCoord;uniform float delta;uniform sampler2D uSampler;void main(void){   vec4 color = texture2D(uSampler, vTextureCoord);   color.r = color.r - (color.r * delta);   color.g = color.g - (color.g * delta);   color.b = color.b - (color.b * delta);   gl_FragColor = color;}",{delta:{type:"1f",value:1}})}};Warlords.TotalDarknessFilter=Sys.extend(Sys.Observable,Warlords.TotalDarknessFilter,"Warlords.TotalDarknessFilter");Warlords.TotalDarknessFilter.prototype=Object.create(PIXI.AbstractFilter.prototype);Object.defineProperties(Warlords.TotalDarknessFilter.prototype,{delta:{get:function(){return this.uniforms.delta.value},set:function(a){this.uniforms.delta.value=a}}});Sys.ns("Warlords");Warlords.CoinCap={constructor:function(){Warlords.CoinCap.superclass.constructor.apply(this,arguments)},getStateChanges:function(){var a=this.model,b={coinCapReached:{state:{name:"CoinCapReached",execute:function(c){},waitEvents:{"notify:CoinCap.dialogClosed":false}}},stopped:{queue:[function(c){if(a.isState("capReached")){c.stateHandler.pushState(c.states.coinCapReached)}}]}};return b},getMixinDependencies:function(){return["serverResponse"]},getDefaultMVCClasses:function(){return{model:Warlords.CoinCapModel,view:Warlords.CoinCapView,controller:Warlords.CoinCapController}}};Warlords.CoinCap=Sys.extend(Core.Module,Warlords.CoinCap,"Warlords.CoinCap");Sys.ns("Warlords");Warlords.CoinCapModel={IDLE_STATE:"idle",CAP_REACHED_STATE:"capReached",constructor:function(){Warlords.CoinCapModel.superclass.constructor.apply(this,arguments)},setupData:function(){var a=this;a.setState(a.IDLE_STATE)},processServerResponse:function(b){var a=this;if(b.win&&b.win.cap.reached){a.setState(a.CAP_REACHED_STATE)}else{a.setState(a.IDLE_STATE)}}};Warlords.CoinCapModel=Sys.extend(Core.Model,Warlords.CoinCapModel,"Warlords.CoinCapModel");Sys.ns("Warlords");Warlords.CoinCapView={constructor:function(){Warlords.CoinCapView.superclass.constructor.apply(this,arguments)},initAnimations:function(){}};Warlords.CoinCapView=Sys.extend(Core.View,Warlords.CoinCapView,"Warlords.CoinCapView");Sys.ns("Warlords");Warlords.CoinCapController={constructor:function(){Warlords.CoinCapController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:stateHandler.enteringCoinCapReachedState":a.onCoinCapReached})},onCoinCapReached:function(){var b=this;var a=Services.languageManager;b.fireEvent("request:dialogWindow.showDialog",{title:a.getText(Language.Keys.capDialogTitle),text:a.getText(Language.Keys.capDialogText),buttons:[{text:a.getText(Language.Keys.capDialogButtonText),action:function(){b.fireEvent("notify:CoinCap.dialogClosed")}}]})}};Warlords.CoinCapController=Sys.extend(Core.Controller,Warlords.CoinCapController,"Warlords.CoinCapController");Sys.ns("Warlords");Warlords.StackedSymbol={constructor:function(){Warlords.StackedSymbol.superclass.constructor.apply(this,arguments)},getStateChanges:function(){},getMixinDependencies:function(){return["serverResponse","animation"]},getDefaultMVCClasses:function(){return{model:Warlords.StackedSymbolModel,view:Warlords.StackedSymbolView,controller:Warlords.StackedSymbolController}}};Warlords.StackedSymbol=Sys.extend(Core.Module,Warlords.StackedSymbol,"Warlords.StackedSymbol");Sys.ns("Warlords");Warlords.StackedSymbolModel={constructor:function(){Warlords.StackedSymbolModel.superclass.constructor.apply(this,arguments)},processServerResponse:function(g){var j=this,f=g.reelInfo,m=g.clientaction,k=g.nextaction,c,l,b;var h;if(m==="init"&&k==="spin"){var a=Resources.readData("config").reelSets.basic.initial;b=[];if(Sys.isDefined(a)&&Sys.isDefined(a.symbols)){for(var e=0;e<5;++e){b.push({symbols:a.symbols[e]})}h=j.findFirstStackedOnEachReel(b)}j.setState("initSpin")}else{h=j.findFirstStackedOnEachReel(f)}if(k==="respin"&&m==="spin"){j.storeData("mainGameStacked",h)}else{if(m==="init"&&k!=="spin"){c=g.rs.i0.r;b=[];b.length=5;for(l in c){if(c.hasOwnProperty(l)){var d=l.substr(1,1);b[d]={};if(c.hasOwnProperty(l)){b[d].symbols=c[l].syms}}}h=j.findFirstStackedOnEachReel(b);j.storeData("mainGameStacked",h)}}j.storeData("stackedSymbols",h);j.storeData("clientAction",m);j.storeData("nextAction",k);if(Sys.isDefined(g.winning)){j.storeData("winningScatter",g.winning.scatter)}},findFirstStackedOnEachReel:function(c){var d=[-1,-1,-1,-1,-1];for(var a=0;a<5;++a){var b=c[a].symbols.slice();for(var f=0;f<b.length;++f){if(Warlords.Utils.isStackedSymbol(b[f])){var e=b[f];Warlords.Utils.renameIfStackedSymbol(b,f);if(b[f].contains("_2")){f=f-1}else{if(b[f].contains("_3")){f=f-2}}d[a]={symbol:e,x:a,y:f};break}}}return d}};Warlords.StackedSymbolModel=Sys.extend(Core.Model,Warlords.StackedSymbolModel,"Warlords.StackedSymbolModel");Sys.ns("Warlords");Warlords.StackedSymbolView={constructor:function(){Warlords.StackedSymbolView.superclass.constructor.apply(this,arguments)},initAnimations:function(){var b=this,a=Game.stage.view.animationManager.getLayer("stackedIdle");b.stackedIdleContainer=new PIXI.Container();b.stackedIdleContainer.mask=Warlords.Utils.createReelMask();a.addChild(b.stackedIdleContainer);a.addChild(b.stackedIdleContainer.mask)},addStackedIdle:function(h,d){var f=this,i=Game.stage.model.getSymbolConfiguration(h.x,h.y),g=Game.PIXIFactory.createAndAddSpineAnimation("stackedIdleAnimation",f.stackedIdleContainer,new PIXI.Point(i.left,i.top));var b={},a,e=i.left,c=i.top;if(d){b[0]={x:e,y:c};b[100]={x:e,y:c+20};b[200]={x:e,y:c};a=new Animation.Holder({target:g.position,animate:b,onEnd:function(){Game.stage.view.animationManager.removeFromAnimationLoop(a)}});Game.stage.view.animationManager.addToAnimationLoop(a);a.play()}g.state.setAnimationByName(0,h.symbol.toLowerCase()+"FX",true)},clearContainer:function(){Warlords.Utils.clearContainer(this.stackedIdleContainer)}};Warlords.StackedSymbolView=Sys.extend(Core.View,Warlords.StackedSymbolView,"Warlords.StackedSymbolView");Sys.ns("Warlords");Warlords.StackedSymbolController={constructor:function(){Warlords.StackedSymbolController.superclass.constructor.apply(this,arguments)},setupEvents:function(){var a=this;a.on({"notify:spin.reelStopBouncingStarted":a.onReelBounce,"request:spin.startSpin":a.onStartSpin,"notify:stateHandler.enteringIdleState":a.onIdle,"notify:stateHandler.enteringFreeSpinOutroState":a.onFreespinOutro,"notify:freeSpinIntro.closed":a.onFreespinIntroClosed})},onIdle:function(){var d=this,b;if(d.model.getState()==="initSpin"){var c=d.model.readData("stackedSymbols");for(b=0;b<5;++b){if(c[b]!==-1){d.view.addStackedIdle(c[b])}}d.model.setState("next")}var a=d.model.readData("mainGameStacked");if(!Sys.isDefined(a)||(d.model.readData("clientAction")!=="freespin"&&d.model.readData("clientAction")!=="init")){return}d.model.storeData("mainGameStacked",undefined);for(b=0;b<5;++b){if(a[b]!==-1){d.view.addStackedIdle(a[b])}}},onFreespinIntroClosed:function(){var c=this;if(c.model.readData("winningScatter")==="SYM13"){var b=[{symbol:"SYM5",x:0,y:1},-1,-1,-1,{symbol:"SYM3",x:4,y:0}];for(var a=0;a<5;++a){if(b[a]!==-1){c.view.addStackedIdle(b[a])}}}},onFreespinOutro:function(){this.view.clearContainer()},onReelBounce:function(c){var b=this,a=b.model.readData("stackedSymbols");if(a[c]!==-1){b.view.addStackedIdle(a[c],true)}},onStartSpin:function(){this.view.clearContainer()}};Warlords.StackedSymbolController=Sys.extend(Core.Controller,Warlords.StackedSymbolController,"Warlords.StackedSymbolController");Sys.ns("Game");if(Sys.isDefined(window.injectWeinre)){injectWeinre()}(function(){var b=document.createElement("style"),e=["bg","cn","cs","el","et","hr","pl","ro","ru"],c=document.documentElement.lang;if(e.indexOf(c)<0){b.appendChild(document.createTextNode("            @font-face {\n                font-family: 'FuturaCom-MediumCondensed';\n                src: url('multimedia/fonts/FuturaCom-MediumCondensed.woff');\n            }\n            \n            @font-face {\n                font-family: 'FuturaCom-ExtraBoldCond';\n                src: url('multimedia/fonts/FuturaCom-ExtraBoldCond.woff');\n            }\n        "))}else{b.appendChild(document.createTextNode("            @font-face {\n                font-family: 'FuturaCom-MediumCondensed';\n                src: local('Arial');\n                font-style: normal;\n            }\n            \n            @font-face {\n                font-family: 'FuturaCom-ExtraBoldCond';\n                src: local('Arial');\n                font-weight: bold;\n                font-style: normal;\n            }\n        "))}b.setAttribute("type","text/css");document.head.appendChild(b);var d=new Core.StateHandler();Game.moduleLoader=new Core.Slots.ModuleLoader({stateHandler:d});var a=new Core.Heart();d.initStateHandler();if(Sys.isDefined(Integration)&&Sys.isDefined(Integration.GCM)){Integration.GCM.availableOptions=["MUTE","GAME_PREFERENCES","PAYTABLE","ABOUT","TURBO"]}document.getElementById("fontLoader").style.display="none"}());